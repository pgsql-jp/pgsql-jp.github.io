<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>7.6. LIMITとOFFSET</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="PostgreSQL 9.5.0文書" /><link rel="up" href="queries.html" title="第7章 問い合わせ" /><link rel="prev" href="queries-order.html" title="7.5. 行の並び替え" /><link rel="next" href="queries-values.html" title="7.7. VALUESリスト" /><link rel="copyright" href="legalnotice.html" title="法的告知" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">7.6. <code class="literal">LIMIT</code>と<code class="literal">OFFSET</code></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="queries-order.html">戻る</a> </td><th width="60%" align="center">第7章 問い合わせ</th><td width="20%" align="right"> <a accesskey="n" href="queries-values.html">次へ</a></td></tr></table><hr /></div><div class="sect1" id="queries-limit"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.6. <code class="literal">LIMIT</code>と<code class="literal">OFFSET</code></h2></div></div></div><span class="original"><!--$-->
  &lt;title&gt;&lt;literal&gt;LIMIT&lt;/literal&gt; and &lt;literal&gt;OFFSET&lt;/literal&gt;&lt;/title&gt;
</span><br /><a id="idp64694736" class="indexterm"></a><a id="idp64695776" class="indexterm"></a><p><span class="original"><!--$-->
   &lt;literal&gt;LIMIT&lt;/&gt; and &lt;literal&gt;OFFSET&lt;/&gt; allow you to retrieve just
   a portion of the rows that are generated by the rest of the query:
</span><br /><code class="literal">LIMIT</code>および<code class="literal">OFFSET</code>を使うことで、問い合わせの実行で生成された行の一部だけを取り出すことができます。
</p><pre class="synopsis">SELECT <em class="replaceable"><code>select_list</code></em>
    FROM <em class="replaceable"><code>table_expression</code></em>
    [<span class="optional"> ORDER BY ... </span>]
    [<span class="optional"> LIMIT { <em class="replaceable"><code>number</code></em> | ALL } </span>] [<span class="optional"> OFFSET <em class="replaceable"><code>number</code></em> </span>]</pre><p>
  </p><p><span class="original"><!--$-->
   If a limit count is given, no more than that many rows will be
   returned (but possibly less, if the query itself yields less rows).
   &lt;literal&gt;LIMIT ALL&lt;/&gt; is the same as omitting the &lt;literal&gt;LIMIT&lt;/&gt;
   clause.
</span><br />限度(limit)数を指定すると、指定した行数より多くの行が返されることはありません（しかし、問い合わせの結果によって、指定より少ないことはあります）。
<code class="literal">LIMIT ALL</code>は、<code class="literal">LIMIT</code>句を省略した場合と同じです。
  </p><p><span class="original"><!--$-->
   &lt;literal&gt;OFFSET&lt;/&gt; says to skip that many rows before beginning to
   return rows.  &lt;literal&gt;OFFSET 0&lt;/&gt; is the same as omitting the
   &lt;literal&gt;OFFSET&lt;/&gt; clause, and &lt;literal&gt;LIMIT NULL&lt;/&gt; is the same
   as omitting the &lt;literal&gt;LIMIT&lt;/&gt; clause.  If both &lt;literal&gt;OFFSET&lt;/&gt;
   and &lt;literal&gt;LIMIT&lt;/&gt; appear, then &lt;literal&gt;OFFSET&lt;/&gt; rows are
   skipped before starting to count the &lt;literal&gt;LIMIT&lt;/&gt; rows that
   are returned.
</span><br /><code class="literal">OFFSET</code>は、返す行の開始位置を飛ばす行数を指定します。
<code class="literal">OFFSET 0</code>は、<code class="literal">OFFSET</code>句を省略した場合と同じで、<code class="literal">LIMIT NULL</code>は<code class="literal">LIMIT</code>句を省略した場合と同じです。
<code class="literal">OFFSET</code>および<code class="literal">LIMIT</code>の両者が指定された場合、<code class="literal">OFFSET</code>分の行を飛ばしてから、返される<code class="literal">LIMIT</code>行を数え始めます。
  </p><p><span class="original"><!--$-->
   When using &lt;literal&gt;LIMIT&lt;/&gt;, it is important to use an
   &lt;literal&gt;ORDER BY&lt;/&gt; clause that constrains the result rows into a
   unique order.  Otherwise you will get an unpredictable subset of
   the query's rows. You might be asking for the tenth through
   twentieth rows, but tenth through twentieth in what ordering? The
   ordering is unknown, unless you specified &lt;literal&gt;ORDER BY&lt;/&gt;.
</span><br /><code class="literal">LIMIT</code>を使用する時は、結果の行を一意な順序に制御する<code class="literal">ORDER BY</code>句を使用することが重要です。
<code class="literal">ORDER BY</code>を使わなければ、予測できない問い合わせの行の部分集合を得ることになるでしょう。
10番目から20番目の行を問い合わせることもあるでしょうが、10番目から20番目というのは、どのような並び順を用いるのでしょうか？
<code class="literal">ORDER BY</code>を指定しなければ、並び順はわかりません。
  </p><p><span class="original"><!--$-->
   The query optimizer takes &lt;literal&gt;LIMIT&lt;/&gt; into account when
   generating query plans, so you are very likely to get different
   plans (yielding different row orders) depending on what you give
   for &lt;literal&gt;LIMIT&lt;/&gt; and &lt;literal&gt;OFFSET&lt;/&gt;.  Thus, using
   different &lt;literal&gt;LIMIT&lt;/&gt;/&lt;literal&gt;OFFSET&lt;/&gt; values to select
   different subsets of a query result &lt;emphasis&gt;will give
   inconsistent results&lt;/emphasis&gt; unless you enforce a predictable
   result ordering with &lt;literal&gt;ORDER BY&lt;/&gt;.  This is not a bug; it
   is an inherent consequence of the fact that SQL does not promise to
   deliver the results of a query in any particular order unless
   &lt;literal&gt;ORDER BY&lt;/&gt; is used to constrain the order.
</span><br />問い合わせオプティマイザは、問い合わせ計画を生成する時に<code class="literal">LIMIT</code>を考慮します。
したがって、<code class="literal">LIMIT</code>と<code class="literal">OFFSET</code>に指定した値によって、（行の順序が異なる）異なった計画が得られます。
このように、1つの問い合わせ結果から異なる部分集合を選び出すために、異なる<code class="literal">LIMIT</code>/<code class="literal">OFFSET</code>の値を使用すると、<code class="literal">ORDER BY</code>で結果の順序を制御しない限りは、<span class="emphasis"><em>矛盾した結果が生じるでしょう</em></span>。
これは不具合ではありません。
<code class="literal">ORDER BY</code>を使って順序を制御しない限り、SQLは必ずしも特定の順序で問い合わせの結果を渡さないという特性の必然的な結果です。
  </p><p><span class="original"><!--$-->
   The rows skipped by an &lt;literal&gt;OFFSET&lt;/&gt; clause still have to be
   computed inside the server; therefore a large &lt;literal&gt;OFFSET&lt;/&gt;
   might be inefficient.
</span><br /><code class="literal">OFFSET</code>句で飛ばされる行を、実際にはサーバ内で計算しなければなりません。
そのため、大きな値の<code class="literal">OFFSET</code>は非効率的になることがあります。
  </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="queries-order.html">戻る</a> </td><td width="20%" align="center"><a accesskey="u" href="queries.html">上に戻る</a></td><td width="40%" align="right"> <a accesskey="n" href="queries-values.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">7.5. 行の並び替え </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> 7.7. <code class="literal">VALUES</code>リスト</td></tr></table></div></body></html>