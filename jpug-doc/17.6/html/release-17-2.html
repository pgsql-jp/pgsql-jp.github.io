<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.5. リリース17.2</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="release-17-3.html" title="E.4. リリース17.3" /><link rel="next" href="release-17-1.html" title="E.6. リリース17.1" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /></head><body id="docContent" class="container-fluid col-10"><div class="other_version"><a href="https://www.postgresql.jp/document/">バージョンごとのドキュメント一覧</a></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="4" align="center"><a accesskey="h" href="index.html">PostgreSQL 17.6文書</a></th></tr><tr><td width="10%" align="left"></td><td width="10%" align="left"></td><td width="60%" align="center"><a href="release.html" title="付録E リリースノート">付録E リリースノート</a></td><td width="20%" align="right"><div class="actions"><a class="issue" title="github" href="https://github.com/pgsql-jp/jpug-doc/issues/new?template=bug_report.yml&amp;what-happened=version 17.6 : release-17-2.html">誤訳等の報告
                    </a></div></td></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-17-3.html" title="E.4. リリース17.3">前へ</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="付録E リリースノート">上へ</a></td><td width="60%" align="center">E.5. リリース17.2</td><td width="20%" align="right"> <a accesskey="n" href="release-17-1.html" title="E.6. リリース17.1">次へ</a></td></tr></table><hr /></div><div class="sect1" id="RELEASE-17-2"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.5. リリース17.2 <a href="#RELEASE-17-2" class="id_link">#</a></h2></div></div></div><span class="original">
  &lt;title&gt;Release 17.2&lt;/title&gt;
</span><p><span class="original">
  &lt;title&gt;Release date:&lt;/title&gt;
</span><strong>リリース日: </strong>2024-11-21</p><p>
<span class="original">
   This release contains a few fixes from 17.1.
   For information about new features in major release 17, see
   &lt;xref linkend="release-17"/&gt;.
</span>
このリリースは17.1に対し、いくつかの不具合を修正したものです。
17メジャーリリースにおける新機能については、<a class="xref" href="release-17.html" title="E.7. リリース17">E.7</a>を参照してください。
  </p><div class="sect2" id="RELEASE-17-2-MIGRATION"><div class="titlepage"><div><div><h3 class="title">E.5.1. バージョン17.2への移行 <a href="#RELEASE-17-2-MIGRATION" class="id_link">#</a></h3></div></div></div><span class="original">
   &lt;title&gt;Migration to Version 17.2&lt;/title&gt;
</span><p>
<span class="original">
    A dump/restore is not required for those running 17.X.
</span>
17.Xからの移行ではダンプ/リストアは不要です。
   </p><p>
<span class="original">
    However, if you are upgrading from a version earlier than 17.1,
    see &lt;xref linkend="release-17-1"/&gt;.
</span>
しかしながら、17.1より前のバージョンからアップグレードする場合は、<a class="xref" href="release-17-1.html" title="E.6. リリース17.1">E.6</a>を参照してください。
   </p></div><div class="sect2" id="RELEASE-17-2-CHANGES"><div class="titlepage"><div><div><h3 class="title">E.5.2. 変更点 <a href="#RELEASE-17-2-CHANGES" class="id_link">#</a></h3></div></div></div><span class="original">
   &lt;title&gt;Changes&lt;/title&gt;
</span><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: REL_17_STABLE [6bfacd368] 2024-11-16 12:58:26 -0500
Branch: REL_16_STABLE [ee33d5847] 2024-11-16 12:58:26 -0500
Branch: REL_15_STABLE [17db248f3] 2024-11-16 12:58:26 -0500
Branch: REL_14_STABLE [099e711b7] 2024-11-16 12:58:26 -0500
</span><p>
<span class="original">
      Repair ABI break for extensions that work with
      struct &lt;structname&gt;ResultRelInfo&lt;/structname&gt; (Tom Lane)
</span>
<code class="structname">ResultRelInfo</code>構造体で動作する拡張のABI破壊が修復されました。
(Tom Lane)
      <a class="ulink" href="https://postgr.es/c/6bfacd368" target="_top">§</a>
     </p><p>
<span class="original">
      Last week's minor releases unintentionally broke binary
      compatibility with &lt;application&gt;timescaledb&lt;/application&gt; and
      several other extensions.  Restore the affected structure to its
      previous size, so that such extensions need not be rebuilt.
</span>
先週のマイナーリリースでは、<span class="application">timescaledb</span>やその他のいくつかの拡張のバイナリ互換性が意図せず壊れていました。
これらの拡張をビルドし直す必要がないように、影響を受けた構造体を以前のサイズに戻しました。
     </p></li><li class="listitem"><span class="original">
Author: Noah Misch &lt;noah@leadboat.com&gt;
Branch: master [7b88529f4] 2024-11-15 20:39:56 -0800
Branch: REL_17_STABLE [1c05004a8] 2024-11-15 20:39:59 -0800
Branch: REL_16_STABLE [b0918c128] 2024-11-15 20:39:59 -0800
Branch: REL_15_STABLE [edf80895f] 2024-11-15 20:39:59 -0800
Branch: REL_14_STABLE [be062bfa5] 2024-11-15 20:40:00 -0800
Branch: REL_13_STABLE [07c6e0f61] 2024-11-15 20:40:00 -0800
Branch: REL_12_STABLE [c46333865] 2024-11-15 20:40:00 -0800
</span><p>
<span class="original">
      Restore functionality of &lt;command&gt;ALTER {ROLE|DATABASE} SET
      role&lt;/command&gt; (Tom Lane, Noah Misch)
</span>
<code class="command">ALTER {ROLE|DATABASE} SET role</code>の機能を元に戻しました。
(Tom Lane, Noah Misch)
      <a class="ulink" href="https://postgr.es/c/1c05004a8" target="_top">§</a>
     </p><p>
<span class="original">
      The fix for CVE-2024-10978 accidentally caused settings
      for &lt;varname&gt;role&lt;/varname&gt; to not be applied if they come from
      non-interactive sources, including previous &lt;command&gt;ALTER
      {ROLE|DATABASE}&lt;/command&gt; commands and
      the &lt;varname&gt;PGOPTIONS&lt;/varname&gt; environment variable.
</span>
CVE-2024-10978の修正により、以前の<code class="command">ALTER {ROLE|DATABASE}</code>コマンドや<code class="varname">PGOPTIONS</code>環境変数など、非対話型ソースから取得された場合に<code class="varname">role</code>の設定が誤って適用されない問題が発生していました。
     </p></li><li class="listitem"><span class="original">
Author: Masahiko Sawada &lt;msawada@postgresql.org&gt;
Branch: master [e5ed873b1] 2024-11-15 17:06:11 -0800
Branch: REL_17_STABLE [568e78a65] 2024-11-15 17:06:08 -0800
Branch: REL_16_STABLE [f35391133] 2024-11-15 17:06:05 -0800
Branch: REL_15_STABLE [91771b3fb] 2024-11-15 17:06:02 -0800
Branch: REL_14_STABLE [26c4e8968] 2024-11-15 17:06:00 -0800
Branch: REL_13_STABLE [15dc1abb1] 2024-11-15 17:05:57 -0800
</span><p>
<span class="original">
      Fix cases where a logical replication
      slot's &lt;structfield&gt;restart_lsn&lt;/structfield&gt; could go backwards
      (Masahiko Sawada)
</span>
論理レプリケーションスロットの<code class="structfield">restart_lsn</code>が逆戻りする可能性があった問題が修正されました。
(Masahiko Sawada)
      <a class="ulink" href="https://postgr.es/c/568e78a65" target="_top">§</a>
     </p><p>
<span class="original">
      Previously, restarting logical replication could sometimes cause the
      slot's restart point to be recomputed as an older value than had
      previously been advertised
      in &lt;structname&gt;pg_replication_slots&lt;/structname&gt;.  This is bad,
      since for example WAL files might have been removed on the basis of
      the later &lt;structfield&gt;restart_lsn&lt;/structfield&gt; value, in which
      case replication would fail to restart.
</span>
以前は、論理レプリケーションを再起動すると、スロットの再起動ポイントが<code class="structname">pg_replication_slots</code>で以前に通知された値よりも古い値として再計算されることがありました。
これは、例えばWALファイルが後の<code class="structfield">restart_lsn</code>値に基づいて削除されている可能性があり、その場合レプリケーションの再開に失敗するため、問題となります。
     </p></li><li class="listitem"><span class="original">
Author: Álvaro Herrera &lt;alvherre@alvh.no-ip.org&gt;
Branch: master [90bcc7c2d] 2024-11-15 12:53:12 +0100
Branch: REL_17_STABLE [cb844d66b] 2024-11-15 12:53:12 +0100
Branch: REL_16_STABLE [ea1649c35] 2024-11-15 12:53:12 +0100
Branch: REL_15_STABLE [e28cf2fbc] 2024-11-15 12:53:12 +0100
Branch: REL_14_STABLE [ba2535841] 2024-11-15 12:53:12 +0100
</span><p>
<span class="original">
      Avoid deleting still-needed WAL files
      during &lt;application&gt;pg_rewind&lt;/application&gt;
      (Polina Bungina, Alexander Kukushkin)
</span>
<span class="application">pg_rewind</span>実行中に必要なWALファイルが削除されなくなりました。
(Polina Bungina, Alexander Kukushkin)
      <a class="ulink" href="https://postgr.es/c/cb844d66b" target="_top">§</a>
     </p><p>
<span class="original">
      Previously, in unlucky cases, it was possible
      for &lt;application&gt;pg_rewind&lt;/application&gt; to remove important WAL
      files from the rewound demoted primary.  In particular this happens
      if those files have been marked for archival (i.e.,
      their &lt;filename&gt;.ready&lt;/filename&gt; files were created) but not yet
      archived.  Then the newly promoted node no longer has such files
      because of them having been recycled, but likely they are needed
      for recovery in the demoted node.
      If &lt;application&gt;pg_rewind&lt;/application&gt; removes them, recovery is
      not possible anymore.
</span>
以前は、不運な場合、<span class="application">pg_rewind</span>が、巻き戻された降格プライマリから重要なWALファイルを削除することがありました。
特に、これらのファイルがアーカイブ対象としてマークされていても（つまり、<code class="filename">.ready</code>ファイルが作成されても）まだアーカイブされていない場合に、この問題が発生します。
その場合、新たに昇格したノードでは、これらのファイルはリサイクルされたため存在しませんが、降格したノードのリカバリに必要となる可能性があります。
<span class="application">pg_rewind</span>がこれらのファイルを削除すると、リカバリは不可能になります。
     </p></li><li class="listitem"><span class="original">
Author: Michael Paquier &lt;michael@paquier.xyz&gt;
Branch: master [818119afc] 2024-11-15 11:31:58 +0900
Branch: REL_17_STABLE [1d6a03ea4] 2024-11-15 11:32:13 +0900
Branch: REL_16_STABLE [afa20845d] 2024-11-15 11:32:16 +0900
Branch: REL_15_STABLE [154c5b42a] 2024-11-15 11:32:18 +0900
</span><p>
<span class="original">
      Fix race conditions associated with dropping shared statistics
      entries (Kyotaro Horiguchi, Michael Paquier)
</span>
共有統計エントリの削除に関連する競合状態が修正されました。
(Kyotaro Horiguchi, Michael Paquier)
      <a class="ulink" href="https://postgr.es/c/1d6a03ea4" target="_top">§</a>
     </p><p>
<span class="original">
      These bugs could lead to loss of statistics data, assertion
      failures, or &lt;quote&gt;can only drop stats once&lt;/quote&gt; errors.
</span>
これらのバグにより、統計データの損失、アサーションエラー、または<span class="quote">「<span class="quote">can only drop stats once</span>」</span>エラーが発生する可能性がありました。
     </p></li><li class="listitem"><span class="original">
Author: Peter Geoghegan &lt;pg@bowt.ie&gt;
Branch: master [93063e2e4] 2024-11-12 20:57:45 -0500
Branch: REL_17_STABLE [7af6d1306] 2024-11-12 20:57:43 -0500
Branch: REL_16_STABLE [05aac2e83] 2024-11-12 20:57:41 -0500
Branch: REL_15_STABLE [16a2bb079] 2024-11-12 20:57:39 -0500
Branch: REL_14_STABLE [2a30b6836] 2024-11-12 20:57:37 -0500
Branch: REL_13_STABLE [e493ea866] 2024-11-12 20:57:35 -0500
</span><p>
<span class="original">
      Count index scans in &lt;filename&gt;contrib/bloom&lt;/filename&gt; indexes in
      the statistics views, such as the
      &lt;structname&gt;pg_stat_user_indexes&lt;/structname&gt;.&lt;structfield&gt;idx_scan&lt;/structfield&gt;
      counter (Masahiro Ikeda)
</span>
<code class="structname">pg_stat_user_indexes</code>.<code class="structfield">idx_scan</code>カウンタなどの統計ビューで、<code class="filename">contrib/bloom</code>インデックス内のインデックススキャンをカウントするようになりました。
(Masahiro Ikeda)
      <a class="ulink" href="https://postgr.es/c/7af6d1306" target="_top">§</a>
     </p></li><li class="listitem"><span class="original">
Author: Alexander Korotkov &lt;akorotkov@postgresql.org&gt;
Branch: master [db22b9002] 2024-11-12 01:44:20 +0200
Branch: REL_17_STABLE [a6fa869cf] 2024-11-12 01:51:20 +0200
Branch: REL_16_STABLE [b242aba02] 2024-11-12 01:53:40 +0200
Branch: REL_15_STABLE [713b8546a] 2024-11-12 01:54:30 +0200
Branch: REL_14_STABLE [247e7647f] 2024-11-12 01:54:35 +0200
Branch: REL_13_STABLE [5411e8213] 2024-11-12 01:54:38 +0200
</span><p>
<span class="original">
      Fix crash when checking to see if an index's opclass options have
      changed (Alexander Korotkov)
</span>
インデックスのopclassオプションが変更されたかどうかを確認する際に発生するクラッシュが修正されました。
(Alexander Korotkov)
      <a class="ulink" href="https://postgr.es/c/a6fa869cf" target="_top">§</a>
     </p><p>
<span class="original">
      Some forms of &lt;command&gt;ALTER TABLE&lt;/command&gt; would fail if the
      table has an index with non-default operator class options.
</span>
そのテーブルにデフォルト以外の演算子クラスオプションを持つインデックスがある場合、<code class="command">ALTER TABLE</code>の一部の形式が失敗していました。
     </p></li><li class="listitem"><span class="original">
Author: Tom Lane &lt;tgl@sss.pgh.pa.us&gt;
Branch: master [b69bdcee9] 2024-11-15 18:23:38 -0500
Branch: REL_17_STABLE [5f28e6ba7] 2024-11-15 18:23:38 -0500
Branch: REL_16_STABLE [b6312becc] 2024-11-15 18:23:38 -0500
Branch: REL_15_STABLE [2496c3f6f] 2024-11-15 18:23:38 -0500
Branch: REL_14_STABLE [2bdd3b248] 2024-11-15 18:23:38 -0500
</span><p>
<span class="original">
      Avoid assertion failure caused by disconnected NFA sub-graphs in
      regular expression parsing (Tom Lane)
</span>
正規表現パースにおいて、切断されたNFAサブグラフによって引き起こされるアサーションエラーが回避されました。
(Tom Lane)
      <a class="ulink" href="https://postgr.es/c/5f28e6ba7" target="_top">§</a>
     </p><p>
<span class="original">
      This bug does not appear to have any visible consequences in
      non-assert builds.
</span>
このバグは、アサートなしのビルドでは目に見える影響は見られません。
     </p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-17-3.html" title="E.4. リリース17.3">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html" title="付録E リリースノート">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="release-17-1.html" title="E.6. リリース17.1">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">E.4. リリース17.3 </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 17.6文書">ホーム</a></td><td width="40%" align="right" valign="top"> E.6. リリース17.1</td></tr></table></div></body></html>