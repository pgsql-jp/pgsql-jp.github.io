<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>53.28. pg_shmem_allocations_numa</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="view-pg-shmem-allocations.html" title="53.27. pg_shmem_allocations" /><link rel="next" href="view-pg-stats.html" title="53.29. pg_stats" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /></head><body id="docContent" class="container-fluid col-10"><div class="other_version"><a href="https://www.postgresql.jp/document/">バージョンごとのドキュメント一覧</a></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="4" align="center"><a accesskey="h" href="index.html">PostgreSQL 18.0文書</a></th></tr><tr><td width="10%" align="left"></td><td width="10%" align="left"></td><td width="60%" align="center"><a href="views.html" title="第53章 システムビュー">第53章 システムビュー</a></td><td width="20%" align="right"><div class="actions"><a class="issue" title="github" href="https://github.com/pgsql-jp/jpug-doc/issues/new?template=bug_report.yml&amp;what-happened=version 18.0 : view-pg-shmem-allocations-numa.html">誤訳等の報告
                    </a></div></td></tr><tr><td width="10%" align="left"><a accesskey="p" href="view-pg-shmem-allocations.html" title="53.27. pg_shmem_allocations">前へ</a> </td><td width="10%" align="left"><a accesskey="u" href="views.html" title="第53章 システムビュー">上へ</a></td><td width="60%" align="center">53.28. <code class="structname">pg_shmem_allocations_numa</code></td><td width="20%" align="right"> <a accesskey="n" href="view-pg-stats.html" title="53.29. pg_stats">次へ</a></td></tr></table><hr /></div><div class="sect1" id="VIEW-PG-SHMEM-ALLOCATIONS-NUMA"><div class="titlepage"><div><div><h2 class="title" style="clear: both">53.28. <code class="structname">pg_shmem_allocations_numa</code> <a href="#VIEW-PG-SHMEM-ALLOCATIONS-NUMA" class="id_link">#</a></h2></div></div></div><a id="id-1.10.5.32.2" class="indexterm"></a><p>
<span class="original">
   The &lt;structname&gt;pg_shmem_allocations_numa&lt;/structname&gt; shows how shared
   memory allocations in the server's main shared memory segment are distributed
   across NUMA nodes. This includes both memory allocated by
   &lt;productname&gt;PostgreSQL&lt;/productname&gt; itself and memory allocated
   by extensions using the mechanisms detailed in
   &lt;xref linkend="xfunc-shared-addin" /&gt;. This view will output multiple rows
   for each of the shared memory segments provided that they are spread across
   multiple NUMA nodes. This view should not be queried by monitoring systems
   as it is very slow and may end up allocating shared memory in case it was not
   used earlier.
   Current limitation for this view is that won't show anonymous shared memory
   allocations.
</span>
<code class="structname">pg_shmem_allocations_numa</code>は、サーバの主な共有メモリセグメントの共有メモリ獲得が、NUMAノード間でどのように分散されているかを示します。
これには、<span class="productname">PostgreSQL</span>自体が獲得したメモリと、セクション<a class="xref" href="xfunc-c.html#XFUNC-SHARED-ADDIN" title="36.10.11. 共有メモリ">36.10.11</a>で詳細に説明されているメカニズムを使用している拡張が獲得したメモリの両方が含まれます。
このビューは、共有メモリセグメントが複数のNUMAノードに分散している場合、それぞれの共有メモリセグメントについて複数の行を出力します。
このビューは非常に遅く、以前に使用されていなかった場合の共有メモリを獲得してしまう可能性があるため、監視システムで問い合わせることは推奨されません。
このビューの現在の制限は、匿名の共有メモリ獲得が表示されないことです。
  </p><p>
<span class="original">
   Note that this view does not include memory allocated using the dynamic
   shared memory infrastructure.
</span>
このビューは動的共有メモリ基盤を使って獲得したメモリは含まれないことに注意してください。
  </p><div class="warning"><h3 class="title">警告</h3><p>
<span class="original">
      When determining the &lt;acronym&gt;NUMA&lt;/acronym&gt; node, the view touches
      all memory pages for the shared memory segment. This will force
      allocation of the shared memory, if it wasn't allocated already,
      and the memory may get allocated in a single &lt;acronym&gt;NUMA&lt;/acronym&gt;
      node (depending on system configuration).
</span>
<acronym class="acronym">NUMA</acronym>ノードを決定する場合、ビューは共有メモリセグメントのすべてのメモリページに触れます。
これにより、共有メモリがまだ獲得されていない場合は強制的に獲得され、メモリは単一の<acronym class="acronym">NUMA</acronym>ノードで獲得される場合があります（システム構成に依存します）。
    </p></div><div class="table" id="id-1.10.5.32.6"><p class="title"><strong>表53.28 <code class="structname">pg_shmem_allocations_numa</code>列</strong></p><div class="table-contents"><span class="original">
   &lt;title&gt;&lt;structname&gt;pg_shmem_allocations_numa&lt;/structname&gt; Columns&lt;/title&gt;
</span><table class="table" summary="pg_shmem_allocations_numa列" border="1"><colgroup><col /></colgroup><thead><tr><th class="catalog_table_entry"><p class="column_definition">
<span class="original">
       Column Type
</span>
列 型
      </p>
      <p>
<span class="original">
       Description
</span>
説明
      </p></th></tr></thead><tbody><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">name</code> <code class="type">text</code>
      </p>
      <p>
<span class="original">
       The name of the shared memory allocation.
</span>
共有メモリ獲得の名前。
      </p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">numa_node</code> <code class="type">int4</code>
      </p>
      <p>
<span class="original">
      ID of &lt;acronym&gt;NUMA&lt;/acronym&gt; node
</span>
<acronym class="acronym">NUMA</acronym>ノードのID。
      </p></td></tr><tr><td class="catalog_table_entry"><p class="column_definition">
       <code class="structfield">size</code> <code class="type">int8</code>
      </p>
      <p>
<span class="original">
       Size of the allocation on this particular NUMA memory node in bytes
</span>
この特定のNUMAメモリノード上のバイト単位の獲得サイズ
      </p></td></tr></tbody></table></div></div><br class="table-break" /><p>
<span class="original">
   By default, the &lt;structname&gt;pg_shmem_allocations_numa&lt;/structname&gt; view can be
   read only by superusers or roles with privileges of the
   &lt;literal&gt;pg_read_all_stats&lt;/literal&gt; role.
</span>
デフォルトでは<code class="structname">pg_shmem_allocations_numa</code>ビューはスーパーユーザか、<code class="literal">pg_read_all_stats</code>ロールの権限を持つロールだけが読み取りできます。
  </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="view-pg-shmem-allocations.html" title="53.27. pg_shmem_allocations">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="views.html" title="第53章 システムビュー">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="view-pg-stats.html" title="53.29. pg_stats">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">53.27. <code class="structname">pg_shmem_allocations</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 18.0文書">ホーム</a></td><td width="40%" align="right" valign="top"> 53.29. <code class="structname">pg_stats</code></td></tr></table></div></body></html>