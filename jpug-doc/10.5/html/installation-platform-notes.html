<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>16.7. プラットフォーム特有の覚書</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="supported-platforms.html" title="16.6. サポートされるプラットフォーム" /><link rel="next" href="install-windows.html" title="Chapter 17. Windowsにおけるソースコードからのインストール" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">16.7. プラットフォーム特有の覚書</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="supported-platforms.html" title="16.6. サポートされるプラットフォーム">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="installation.html" title="Chapter 16.   ソースコードからインストール">Up</a></td><th width="60%" align="center">Chapter 16.   ソースコードからインストール</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="install-windows.html" title="Chapter 17. Windowsにおけるソースコードからのインストール">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="INSTALLATION-PLATFORM-NOTES"><div class="titlepage"><div><div><h2 class="title" style="clear: both">16.7. プラットフォーム特有の覚書</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="installation-platform-notes.html#INSTALLATION-NOTES-AIX">16.7.1. AIX</a></span></dt><dt><span class="sect2"><a href="installation-platform-notes.html#INSTALLATION-NOTES-CYGWIN">16.7.2. Cygwin</a></span></dt><dt><span class="sect2"><a href="installation-platform-notes.html#INSTALLATION-NOTES-HPUX">16.7.3. HP-UX</a></span></dt><dt><span class="sect2"><a href="installation-platform-notes.html#INSTALLATION-NOTES-MINGW">16.7.4. MinGW/ネイティブWindows</a></span></dt><dt><span class="sect2"><a href="installation-platform-notes.html#INSTALLATION-NOTES-SOLARIS">16.7.5. Solaris</a></span></dt></dl></div><p>本節はPostgreSQLのインストールと設定に関する追加のプラットフォーム固有の問題について説明します。
インストール手順、特に<a class="xref" href="install-requirements.html" title="16.2. 必要条件">Section 16.2</a>を注意して読んでください。
またリグレッションテスト結果の解釈については<a class="xref" href="regress.html" title="Chapter 32. リグレッションテスト">Chapter 32</a>を確認してください。
  </p><p>   ここで触れられていないプラットフォームは、インストールに関してプラットフォーム特有の問題がありません。
  </p><div class="sect2" id="INSTALLATION-NOTES-AIX"><div class="titlepage"><div><div><h3 class="title">16.7.1. AIX</h3></div></div></div><a id="id-1.6.3.10.4.2" class="indexterm"></a><p>AIX上でPostgreSQLは動作しますが、適切にインストールをやり遂げるのは挑戦でもあります。
AIXバージョン4.3.3から6.1はサポートされていると考えられます。
GCCまたは在来のIBMコンパイラ<code class="command">xlc</code>が使用できます。
一般的に、最新のAIXとPostgreSQLバージョンを使用することが手助けになります。
どのバージョンのAIXが動くと知られているかについての最新情報をビルドファームで見てください。
   </p><p>    サポートされるAIXバージョンに対する最低限推奨される修正レベルを示します。
   </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">AIX 4.3.3</span></dt><dd><p>保守レベル 11 + ML11 バンドル以降</p></dd><dt><span class="term">AIX 5.1</span></dt><dd><p>保守レベル 9 + ML9 バンドル以降</p></dd><dt><span class="term">AIX 5.2</span></dt><dd><p>技術レベル 10 サービスパック 3</p></dd><dt><span class="term">AIX 5.3</span></dt><dd><p>技術レベル 7</p></dd><dt><span class="term">AIX 6.1</span></dt><dd><p>基本レベル</p></dd></dl></div><p>使用している修正レベルをチェックするには、AIX 4.3.3 から AIX 5.2 ML 7 までは<code class="command">oslevel -r</code>、またはそれ以降のバージョンでは<code class="command">oslevel -s</code>を使用します。
   </p><p>もし、<code class="literal">/usr/local</code>にインストール済のreadlineやライブラリがある場合は、次の<code class="command">configure</code>フラグを加えて下さい。
    <code class="literal">--with-includes=/usr/local/include
    --with-libraries=/usr/local/lib</code>
   </p><div class="sect3" id="id-1.6.3.10.4.8"><div class="titlepage"><div><div><h4 class="title">16.7.1.1. GCCの問題</h4></div></div></div><p>AIX 5.3でGCCを使ってPostgreSQLがコンパイルし実行するためには幾つかの問題点があります。
    </p><p>特にパッケージ版を使用している場合、3.3.2以降のバージョンのGCCの使用が望まれるかもしれません。
4.0.1ではうまくいきます。
より早期のバージョンによる諸問題は、GCC自体の問題というよりもIBMがGCCをパッケージした方法に関連があるように見えます。従って、GCCを自身でコンパイルしている場合は、早期のバージョンのGCCを使用しても成功するかもしれません。
    </p></div><div class="sect3" id="id-1.6.3.10.4.9"><div class="titlepage"><div><div><h4 class="title">16.7.1.2. Unixドメインソケット破損</h4></div></div></div><p>AIX 5.3には<code class="structname">sockaddr_storage</code>が十分大きく定義されていないという問題があります。
バージョン5.3でIBMはUnixドメインソケットのアドレス構造体である<code class="structname">sockaddr_un</code>のサイズを増やしましたが、対応する<code class="structname">sockaddr_storage</code>のサイズを増やしませんでした。
この結果、PostgreSQLでUnixドメインソケットを使用しようとすると、libpqでデータ構造体がオーバーフローするようになります。
Unixドメインソケットを除くTCP/IP接続の動作は正常です。
これはリグレッションテストの動作を妨害します。
    </p><p>この問題はIBMに報告済みでバグ報告PMR29657として記録されています。
メンテナンスレベル5300-03以降に更新していれば、この修正が含まれています。
すぐに解決させたければ、<code class="filename">/usr/include/sys/socket.h</code>内で<code class="symbol">_SS_MAXSIZE</code>を1025に変更してください。
どちらの場合でも、ヘッダファイルを修正した後でPostgreSQLを再コンパイルしてください。
    </p></div><div class="sect3" id="id-1.6.3.10.4.10"><div class="titlepage"><div><div><h4 class="title">16.7.1.3. インターネットアドレス問題</h4></div></div></div><p>PostgreSQLは<code class="varname">listen_addresses</code>、<code class="filename">pg_hba.conf</code>、その他の中のIPアドレスを構文解釈するのにシステムの<code class="function">getaddrinfo</code>関数に頼ります。
旧バージョンのAIXにはこの関数にさまざまなバグがあります。
これら設定に関係した問題に遭遇した場合、上記に示されている適切な修正レベルへ更新することが問題解決になります。
    </p><p>あるユーザの報告です。
    </p><p>PostgreSQLバージョン8.1をAIX 5.3で実装している時、統計情報コレクタが<span class="quote">“<span class="quote">不思議なことに</span>”</span>正常に起動しないという問題が周期的に起こりました。
これは、IPv6の実装における想定外の動作という結果で出現します。
そのため、AIX5.3上ではPostgreSQLとIPv6が一緒にはうまく動作しないように見えました。
    </p><p>以下のいずれかの対応でこの問題が<span class="quote">“<span class="quote">解決できます</span>”</span>。
     </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>localhostに対するIPv6アドレスを削除します。
</p><pre class="screen">(as root)
# ifconfig lo0 inet6 ::1/0 delete</pre><p>
       </p></li><li class="listitem"><p>ネットサービスからIPv6を削除します。
AIXの<code class="filename">/etc/netsvc.conf</code>ファイルは大まかに言ってSolaris/Linuxの<code class="filename">/etc/nsswitch.conf</code>と同等です。
AIXのデフォルトは、以下のようになっています。
</p><pre class="programlisting">hosts=local,bind</pre><p>
これを次で置き換えます。
</p><pre class="programlisting">hosts=local4,bind4</pre><p>
そうすると、IPv6アドレスの検索が解除されます。
       </p></li></ul></div><p>
    </p><div class="warning"><h3 class="title">Warning</h3><p>これは、実際には未熟なIPv6サポートに関連する問題の回避策です。AIX5.3のリリースから、IPv6サポートが目に見えて改善されています。
この回避策はAIX5.3上で動きはしますが、この問題に対しての良い解決方法ではありません。
AIX6.1ではIPv6サポートがさらに改善されたため、この対策は不必要になっただけでなく、問題を引き起こすことが報告されています。
    </p></div></div><div class="sect3" id="id-1.6.3.10.4.11"><div class="titlepage"><div><div><h4 class="title">16.7.1.4. メモリ管理</h4></div></div></div><p>AIXはメモリ管理手法の観点から見ると多少独特です。
ギガバイト単位のRAMが空いているサーバがあっても、アプリケーションを実行している時にメモリ不足やアドレス空間エラーが発生することがあります。
こうした例の1つが、見慣れないエラーによる拡張のロードの失敗です。
例えば、PostgreSQLインストレーションの所有者として実行してみます。
</p><pre class="screen">=# CREATE EXTENSION plperl;
ERROR:  could not load library "/opt/dbs/pgsql/lib/plperl.so": A memory address is not in the address space for the process.</pre><p>
PostgreSQLインストレーションの処理グループ内の所有者以外として実行してみます。
</p><pre class="screen">=# CREATE EXTENSION plperl;
ERROR:  could not load library "/opt/dbs/pgsql/lib/plperl.so": Bad address</pre><p>
他の実例は、PostgreSQLサーバログ中のメモリ不足エラーで、256 MB以上もしくはその近辺で全てのメモリ割り当てが失敗します。
    </p><p>これら問題のすべての総合原因は、サーバプロセスで使用されるデフォルトのビット割当とメモリモデルです。
デフォルトでは、AIXで構築されたすべてのバイナリは32ビットです。
これは使用中のハードウェアの種類やカーネルに依存しません。
これらの32ビットプロセスは、数個のモデルの1つを使用して256メガバイトのセグメントで割りつけられた4ギガバイトメモリに制限されます。
デフォルトでは、スタックで1つのセグメントとして共有されるものとしてヒープ内の256メガバイト未満の領域が許されます。
    </p><p>上記、<code class="literal">plperl</code>の例の場合において、PostgreSQLインストレーションにおけるバイナリのumaskとパーミッションをチェックしてください。
例に関与したバイナリは32-ビットであり、755ではなく750モードでインストールされました。
このような形式で設定されたパーミッションのため、所有者もしくはグループ所有のメンバーのみライブラリを読み込めます。
それは誰もが読み取り可能ではないため、ローダは、そうでない場合に配置される共有ライブラリセグメントにではなく、オブジェクトをプロセスのヒープに配置します。
    </p><p>これに対しての<span class="quote">“<span class="quote">理想的な</span>”</span>解決策はPostgreSQLの64-ビットビルドを使うことですが、32-ビットプロセッサのシステムでは64-ビットバイナリをビルドできますが実行できないので、常に実務的ではありません。
    </p><p>32-ビットバイナリを要求する場合、PostgreSQLサーバを起動する前に<code class="symbol">LDR_CNTRL</code>を<code class="literal">MAXDATA=0x<em class="replaceable"><code>n</code></em>0000000</code>に設定します。ここで、1 &lt;= n &lt;= 8です。そして異なる値と<code class="filename">postgresql.conf</code>設定で満足に稼動する構成を見つけ出します。
このように<code class="symbol">LDR_CNTRL</code>を使用すると、AIXに対してサーバがヒープにかかわらず、256 MBセグメントに割り当てられた<code class="symbol">MAXDATA</code>バイトセットを持つようにさせたい意図を表明します。
稼動する構成を見つけたとき、意図したヒープ容量をデフォルトで使用するように<code class="command">ldedit</code>を使用してバイナリを変更することができます。
同じ効果を得るため、<code class="literal">configure LDFLAGS="-Wl,-bmaxdata:0x<em class="replaceable"><code>n</code></em>0000000"</code>を渡してPostgreSQLを再構築することもできます。
    </p><p>64-ビット構築に対し、<code class="envar">OBJECT_MODE</code>を64に設定し、<code class="command">configure</code>に<code class="literal">CC="gcc -maix64"</code>と<code class="literal">LDFLAGS="-Wl,-bbigtoc"</code>を渡します。
（<code class="command">xlc</code>に対するオプションは異なるかもしれません。）
<code class="envar">OBJECT_MODE</code>のexportを省略すると、構築はリンカエラーで失敗することがあります。
<code class="envar">OBJECT_MODE</code>が設定された場合、<code class="command">ar</code>、<code class="command">as</code>、および<code class="command">ld</code>のようなAIXの構築ユーティリティにどの種類のオブジェクトがデフォルトで対応されるのかを伝えます。
    </p><p>デフォルトで、ページングスペースのオーバーコミットが起こることがあります。
これが起こることを経験したことはありませんが、AIXはメモリを使い切って、オーバーコミットがアクセスされたときにプロセスをkillします。
システムが別のプロセスに対する十分なメモリがないことを判断したためにフォークが失敗するという、これとよく似たことは経験したことがあります。
多くの他のAIX部分のように、ページングスペース割り当て方式とメモリ不足によるプロセス停止は、これが問題となるのであれば、システム全体またはプロセス全体を基準として設定可能です。
    </p><div class="bibliography" id="id-1.6.3.10.4.11.9"><div class="titlepage"><div><div><h5 class="title">参照とリソース</h5></div></div></div><div class="biblioentry" id="id-1.6.3.10.4.11.9.2"><p><span class="biblioset">“<a class="ulink" href="http://publib.boulder.ibm.com/infocenter/pseries/topic/com.ibm.aix.doc/aixprggd/genprogc/lrg_prg_support.htm" target="_top">Large Program Support</a>”. </span><span class="biblioset"><em>AIX Documentation: General Programming Concepts: Writing and Debugging Programs</em>. </span></p></div><div class="biblioentry" id="id-1.6.3.10.4.11.9.3"><p><span class="biblioset">“<a class="ulink" href="http://publib.boulder.ibm.com/infocenter/pseries/topic/com.ibm.aix.doc/aixprggd/genprogc/address_space.htm" target="_top">Program Address Space Overview</a>”. </span><span class="biblioset"><em>AIX Documentation: General Programming Concepts: Writing and Debugging Programs</em>. </span></p></div><div class="biblioentry" id="id-1.6.3.10.4.11.9.4"><p><span class="biblioset">“<a class="ulink" href="http://publib.boulder.ibm.com/infocenter/pseries/v5r3/topic/com.ibm.aix.doc/aixbman/prftungd/resmgmt2.htm" target="_top">Performance Overview of the Virtual Memory Manager (VMM)</a>”. </span><span class="biblioset"><em>AIX Documentation: Performance Management Guide</em>. </span></p></div><div class="biblioentry" id="id-1.6.3.10.4.11.9.5"><p><span class="biblioset">“<a class="ulink" href="http://publib.boulder.ibm.com/infocenter/pseries/v5r3/topic/com.ibm.aix.doc/aixbman/prftungd/memperf7.htm" target="_top">Page Space Allocation</a>”. </span><span class="biblioset"><em>AIX Documentation: Performance Management Guide</em>. </span></p></div><div class="biblioentry" id="id-1.6.3.10.4.11.9.6"><p><span class="biblioset">“<a class="ulink" href="http://publib.boulder.ibm.com/infocenter/pseries/v5r3/topic/com.ibm.aix.doc/aixbman/prftungd/memperf6.htm" target="_top">Paging-space thresholds tuning</a>”. </span><span class="biblioset"><em>AIX Documentation: Performance Management Guide</em>. </span></p></div><div class="biblioentry" id="id-1.6.3.10.4.11.9.7"><p><span class="title"><em><a class="ulink" href="http://www.redbooks.ibm.com/abstracts/sg245674.html?Open" target="_top">Developing and Porting C and C++ Applications on AIX</a></em>. </span><span class="publisher"><span class="publishername">IBM Redbook. </span></span></p></div></div></div></div><div class="sect2" id="INSTALLATION-NOTES-CYGWIN"><div class="titlepage"><div><div><h3 class="title">16.7.2. Cygwin</h3></div></div></div><a id="id-1.6.3.10.5.2" class="indexterm"></a><p>Windowsに対するLinux的環境である、Cygwinを使ってPostgreSQLを構築することが可能です。
しかし、この手法はWindowsネイティブビルド(<a class="xref" href="install-windows.html" title="Chapter 17. Windowsにおけるソースコードからのインストール">Chapter 17</a>を参照)には及ばないので、もはや推奨されません。
   </p><p>ソースから構築する場合、以下のCygwin特有の差異に注意し、通常のインストール手順に従って進めます（つまり、<code class="literal">./configure;make</code>; など）。

    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Windowsユーティリティの前に使用するCygwinのbinディレクトリのパスを設定します。
コンパイルにおける問題を回避する助けになります。
      </p></li><li class="listitem"><p><code class="command">adduser</code>コマンドはサポートされていません。Windows NT、2000、またはXP上の適切なユーザ管理アプリケーションを使用してください。
そうでなければ、この手順を飛ばします。
      </p></li><li class="listitem"><p><code class="command">su</code>コマンドはサポートされていません。Windows NT、2000、またはXP上でsuをシミュレートするため、sshを使用します。
そうでなければ、この手順を飛ばします。
      </p></li><li class="listitem"><p>OpenSSLはサポートされていません。
      </p></li><li class="listitem"><p>共有メモリサポートのために<code class="command">cygserver</code>を開始します。
これを行うためには、コマンド<code class="literal">/usr/sbin/cygserver&amp;</code>を入力します。
このプログラムはPostgreSQLサーバを起動するとき、または（<code class="command">initdb</code>で）データベースクラスタを初期化するときはいつでも必要です。
システム資源が欠けていることによるPostgreSQLの失敗を避けるため、デフォルトの<code class="command">cygserver</code>設定を（例えば<code class="symbol">SEMMNS</code>を増やすなど）変更する必要があるかもしれません。
      </p></li><li class="listitem"><p>        いくつかのシステムでは、Cロケール以外を使っている場合に構築が失敗するかもしれません。
        これに対処するためには、構築前に<code class="command">export LANG=C.utf8</code>を実施してロケールをCに設定し、PostgreSQLのインストール後に以前の設定に戻してください。
      </p></li><li class="listitem"><p>並行リグレッションテスト（<code class="literal">make check</code>）は、接続拒絶エラーやハングアップを引き起こす<code class="function">listen()</code>バックログキューのオーバーフローにより、誤ったリグレッションテストの失敗を生成する可能性があります。
make 変数<code class="varname">MAX_CONNECTIONS</code>を使用して、最大接続数を制限できます。つまり次のようにします。
</p><pre class="programlisting">make MAX_CONNECTIONS=5 check</pre><p>
（いくつかのシステムでは、同時接続を10まで広げられます。）
      </p></li></ul></div><p>
   </p><p>Windows NTサービスとして<code class="command">cygserver</code>とPostgreSQLサーバをインストールすることができます。
これを実現する方法は、CygwinのPostgreSQLバイナリパッケージに含まれる<code class="filename">README</code>文書を参照してください。
それは<code class="filename">/usr/share/doc/Cygwin</code>ディレクトリにインストールされます。
   </p></div><div class="sect2" id="INSTALLATION-NOTES-HPUX"><div class="titlepage"><div><div><h3 class="title">16.7.3. HP-UX</h3></div></div></div><a id="id-1.6.3.10.6.2" class="indexterm"></a><p>PostgreSQL 7.3以上は、適切なシステムパッチレベルと構築ツールが与えられているとして、HP-UX 10.Xまたは11.Xが稼動するSeries 700/800 PA-RISCコンピュータで動作します。
少なくとも１人の開発者が定期的にHP-UX10.20で試験を行っており、HP-UX11.00と11.11上へのインストールが成功していることの報告を受けています。
   </p><p>PostgreSQLのソース配布物の他に、GNU make（HPのmakeは通りません）と、GCCもしくはHPのANSI Cコンパイラの全部いずれかが必要です。
配布物tarボールではなくGitソースから構築を行う時は、Flex（GNU lex）とBison（GNU yacc）も必要です。
同時に、正確に最新のHPパッチが当たっていることの確認を推奨します。
HP-UX 11.11上で64ビット構築を行うのであれば最小限、PHSS_30966 (11.11)またはその後継パッチが必要です。さもないと、<code class="command">initdb</code>がハングアップします。以下を参考にしてください。
</p><div class="literallayout"><p>PHSS_30966  s700_800 ld(1) and linker tools cumulative patch</p></div><p>

一般原則として、HPのCコンパイラを使用する場合、libcとld/dldパッチとコンパイラパッチが最新版でなければなりません。
それらの最新パッチの無償コピーについては、<a class="ulink" href="ftp://us-ffs.external.hp.com/" target="_top">ftp://us-ffs.external.hp.com/</a>のHPサポートサイトを見てください。
   </p><p>PA-RISC 2.0マシン上でGCCを使用して64-ビットバイナリを構築したい場合、GCC 64-ビット版を使用しなければなりません。
   </p><p>PA-RISC 2.0装置上での構築で、PA-RISC 1.1装置で稼動するコンパイル済みのバイナリが必要な場合、<code class="envar">CFLAGS</code>で<code class="option">+DAportable</code>を指定する必要があります。
   </p><p>HP-UX Itaniumマシン上で構築するのであれば、依存するパッチまたはその後継のパッチが当たった最新のHP ANSI Cコンパイラが必要です。以下です。
</p><div class="literallayout"><p>PHSS_30848  s700_800 HP C Compiler (A.05.57)<br />
PHSS_30849  s700_800 u2comp/be/plugin library Patch</p></div><p>
   </p><p>HPのCコンパイラとGCCの２つが存在するとき、<code class="command">configure</code>実行時に明示的に使用するコンパイラを指定したい場合、HPのCコンパイラでは、
</p><pre class="programlisting">./configure CC=cc</pre><p>
GCCの場合は、
</p><pre class="programlisting">./configure CC=gcc</pre><p>
のようにします。この設定を省略すると、選択できる場合にはconfigureは<code class="command">gcc</code>を選びます。
   </p><p>デフォルトのインストール対象配置場所は<code class="filename">/usr/local/pgsql</code>で、<code class="filename">/opt</code>のような場所に変更したい場合もあります。
そのような時は、<code class="command">configure</code>で<code class="option">--prefix</code>スイッチを使用します。
   </p><p>リグレッションテストにおいて、幾何試験で下位ビット桁の差異があるかもしれません。これはどのコンパイラを使用しているか、使用している数学ライブラリのバージョンは何かに依存し、変化します。
その他のエラーは原因を疑ってください。
   </p></div><div class="sect2" id="INSTALLATION-NOTES-MINGW"><div class="titlepage"><div><div><h3 class="title">16.7.4. MinGW/ネイティブWindows</h3></div></div></div><a id="id-1.6.3.10.7.2" class="indexterm"></a><p>Windows用PostgreSQLは、Microsoftオペレーティングシステム用のUnixに似た構築環境であるMinGW、またはMicrosoftの<span class="productname">Visual C++</span>コンパイラ一式を使って構築できます。
MinGW版の構築は本章で記述されている通常の構築システムを使用します。Visual C++構築は、<a class="xref" href="install-windows.html" title="Chapter 17. Windowsにおけるソースコードからのインストール">Chapter 17</a>で記述するようにまったく異なった動作をします。
それは完全にネイティブな構築で、MinGWのような追加ソフトウェアを使用しません。既製のインストーラがPostgreSQLのメインウェブサイトから入手できます。
   </p><p>ネイティブに移植されたWindows版ではWindows 2000以降の32ビットまたは64ビット版が必要です。
これより前のオペレーティングシステムには充分な構造基盤がありません（ただし、Cygwinはそれら上で使える可能性があります）。
Unixに似た構築ツールであるMinGWと、<code class="command">configure</code>のようなシェルスクリプトを実行するために必要なUnixツール群であるMSYSは、<a class="ulink" href="http://www.mingw.org/" target="_top">http://www.mingw.org/</a>からダウンロード可能です。
作成されたバイナリの実行にはいずれも必要ありません。バイナリの作成のためのみ必要です。
   </p><p>MinGWを使って64ビット版バイナリをビルドするためには、<a class="ulink" href="http://mingw-w64.sourceforge.net/" target="_top">http://mingw-w64.sourceforge.net/</a>から64ビット用のツールを入手してインストールし、<code class="envar">PATH</code>にあるbinディレクトリへそれらを入れ、そして<code class="command">--host=x86_64-w64-mingw</code>オプション付きで<code class="command">configure</code>を実施します。
   </p><p>MSYSコンソールはバッファリングに問題があるので、すべてをインストールした後に<code class="command">CMD.EXE</code>下で<span class="application">psql</span>を実行することを推奨します。
   </p><div class="sect3" id="WINDOWS-CRASH-DUMPS"><div class="titlepage"><div><div><h4 class="title">16.7.4.1. Windows上でのクラッシュダンプの収集</h4></div></div></div><p>もしWindows上のPostgreSQLがクラッシュした場合、Unixにおけるコアダンプと似た、クラッシュの原因を追跡するために使用できる<span class="productname">minidumps</span>を生成することができます。
このダンプは<span class="productname">Windows Debugger Tools</span>や<span class="productname">Visual Studio</span>を使うことで解析できます。Windowsにてダンプを生成できるように、<code class="filename">crashdumps</code>という名前のサブディレクトリをデータベースクラスタディレクトリの中に作成します。
ダンプは、クラッシュ時の現在時間と原因となったプロセスの識別子を元にした一意な名前としてこのディレクトリの中に生成されます。
    </p></div></div><div class="sect2" id="INSTALLATION-NOTES-SOLARIS"><div class="titlepage"><div><div><h3 class="title">16.7.5. Solaris</h3></div></div></div><a id="id-1.6.3.10.8.2" class="indexterm"></a><p>PostgreSQLはSolaris上でとても良くサポートされています。
オペレーティングシステムが更新されればされる程、問題点の遭遇は少なくなります。
以下に詳細を示します。
   </p><div class="sect3" id="id-1.6.3.10.8.4"><div class="titlepage"><div><div><h4 class="title">16.7.5.1. 必要なツール</h4></div></div></div><p>GCCもしくはSunのコンパイラ一式により構築できます。
より良いコード最適化のため、SPARCアーキテクチャではSunのコンパイラを強く推奨します。
GCC 2.95.1を使用する場合に問題があったと報告を受けています。GCC 2.95.3以降を勧めます。
Sunのコンパイラを使用するのであれば、<code class="filename">/usr/ucb/cc</code>を選択せず、<code class="filename">/opt/SUNWspro/bin/cc</code>を使用するように注意してください。
    </p><p><a class="ulink" href="http://www.oracle.com/technetwork/server-storage/solarisstudio/downloads/" target="_top">http://www.oracle.com/technetwork/server-storage/solarisstudio/downloads/</a>からSun Studioをダウンロードできます。
数多くのGNUツールがSolaris 10に統合、もしくはSolaris companion CDの中にあります。
Solarisのより古いバージョンに対するパッケージを好むのであれば、それらのツールは<a class="ulink" href="http://www.sunfreeware.com" target="_top">http://www.sunfreeware.com</a>にあります。
ソースの方が良いという方は<a class="ulink" href="http://www.gnu.org/order/ftp.html" target="_top">http://www.gnu.org/order/ftp.html</a>を参照してください。
    </p></div><div class="sect3" id="id-1.6.3.10.8.5"><div class="titlepage"><div><div><h4 class="title">16.7.5.2. 失敗したテストプログラムについてconfigureが出すエラー</h4></div></div></div><p>もし<code class="command">configure</code>が失敗したテストプログラムについてエラーを出す場合、おそらく実行時のリンカがlibz、libreadline、またはlibsslのような非標準のライブラリを見つけ出せないことによります。
それを正しい場所に指し示すため、<code class="command">configure</code>コマンドラインで<code class="envar">LDFLAGS</code>環境変数を例えば以下のように設定します。
</p><pre class="programlisting">configure ... LDFLAGS="-R /usr/sfw/lib:/opt/sfw/lib:/usr/local/lib"</pre><p>
より詳細な情報は<span class="citerefentry"><span class="refentrytitle">ld</span></span>マニュアルページを参照ください。
    </p></div><div class="sect3" id="id-1.6.3.10.8.6"><div class="titlepage"><div><div><h4 class="title">16.7.5.3. 時折クラッシュする64-ビット構築</h4></div></div></div><p>Solaris 7以前の64bit版のlibcには不具合のある<code class="function">vsnprintf</code>ルーチンがあり、それはPostgreSQLのエラーコアダンプに繋がります。
既知の最も単純な回避策は、ライブラリのコピーではなく、自身の<code class="function">vsnprintf</code>バージョンを使うように仕向けることです。
これを行うためには、<code class="command">configure</code>を実行した後、<code class="command">configure</code>で生成されたファイルを編集します。
つまり、<code class="filename">src/Makefile.global</code>の以下の行
</p><pre class="programlisting">LIBOBJS =</pre><p>
を次のように変更します。
</p><pre class="programlisting">LIBOBJS = snprintf.o</pre><p>
（この変数に既に他のファイルが列挙されているかもしれません。その順序は関係ありません。）
その後、通常通りに構築してください。
    </p></div><div class="sect3" id="id-1.6.3.10.8.7"><div class="titlepage"><div><div><h4 class="title">16.7.5.4. 最適性能を得るためのコンパイル</h4></div></div></div><p>SPARCアーキテクチャにおけるコンパイルでは、Sun Studioを強く推奨します。
特筆するような速さのバイナリを生成するため、<code class="option">-xO5</code>最適化フラグを使用してみてください。
浮動小数点演算と、（<code class="option">-fast</code>のような）<code class="varname">errno</code>演算を修正するようなフラグはすべて使ってはいけません。
それらのフラグは、例えばdate/time演算において、PostgreSQLの標準ではない動作をさせることがあります。
    </p><p>SPARCで64ビットバイナリを使用する理由がないのであれば、32ビット版を選択してください。
64ビット操作はより遅く、64ビットバイナリは32ビット版より遅いのです。
一方で、AMD64 CPUファミリ上の32ビットコードはネイティブではありません。これが、このCPUファミリで32ビットコードが非常に低速な理由です
    </p></div><div class="sect3" id="id-1.6.3.10.8.8"><div class="titlepage"><div><div><h4 class="title">16.7.5.5. PostgreSQLをトレースするためのDTrace使用</h4></div></div></div><p>そのとおりです。DTraceを使うことができます。より詳細な情報は<a class="xref" href="dynamic-trace.html" title="28.5. 動的追跡">Section 28.5</a>を参照してください。
    </p><p>以下のようなエラーメッセージで<code class="command">postgres</code>実行形式のリンクが中断することを体験した場合、そのDTraceインストールが静的関数におけるプローブを扱うには古すぎると言うことです。
Solaris 10u4もしくはそれより新しいものが必要です。
</p><pre class="screen">Undefined                       first referenced
 symbol                             in file
AbortTransaction                    utils/probes.o
CommitTransaction                   utils/probes.o
ld: fatal: Symbol referencing errors. No output written to postgres
collect2: ld returned 1 exit status
make: *** [postgres] Error 1</pre><p>
    </p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="supported-platforms.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="installation.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="install-windows.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">16.6. サポートされるプラットフォーム </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 17. <span class="productname">Windows</span>におけるソースコードからのインストール</td></tr></table></div></body></html>