<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.44. リリース9.4.8</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-9-4-9.html" title="E.43. リリース9.4.9" /><link rel="next" href="release-9-4-7.html" title="E.45. リリース9.4.7" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.44. リリース9.4.8</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-9-4-9.html" title="E.43. リリース9.4.9">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix E. リリースノート">Up</a></td><th width="60%" align="center">Appendix E. リリースノート</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="release-9-4-7.html" title="E.45. リリース9.4.7">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-9-4-8"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.44. リリース9.4.8</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-9-4-8.html#id-1.11.6.48.4">E.44.1. バージョン9.4.8への移行</a></span></dt><dt><span class="sect2"><a href="release-9-4-8.html#id-1.11.6.48.5">E.44.2. 変更点</a></span></dt></dl></div><p><strong>リリース日: </strong>2016-05-12</p><p>このリリースは9.4.7に対し、各種不具合を修正したものです。
9.4メジャーリリースにおける新機能については、<a class="xref" href="release-9-4.html" title="E.52. リリース9.4">Section E.52</a>を参照してください。
  </p><div class="sect2" id="id-1.11.6.48.4"><div class="titlepage"><div><div><h3 class="title">E.44.1. バージョン9.4.8への移行</h3></div></div></div><p>9.4.Xからの移行ではダンプ/リストアは不要です。
   </p><p>しかしながら、9.4.6よりも前のリリースからアップグレードする場合は、<a class="xref" href="release-9-4-6.html" title="E.46. リリース9.4.6">Section E.46</a>を参照して下さい。
   </p></div><div class="sect2" id="id-1.11.6.48.5"><div class="titlepage"><div><div><h3 class="title">E.44.2. 変更点</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>OpenSSLを呼び出す前にそのエラーキューを、既に消去されているとみなすのではなく、消去します。また、必ず後に消去しておくようにします。
(Peter Geoghegan, Dave Vitek, Peter Eisentraut)
     </p><p>この変更は、一つのプロセスの中でOpenSSLを使った複数の接続があって、含まれるコードの全てがエラーキューを消去するとき同一規則に従っていない場合の問題を防ぎます。
特に、クライアントアプリケーションがPHPやPython、RubyのOpenSSLラッパーを使ったSSL接続と同時に、<span class="application">libpq</span>でSSL接続を使っているときに、障害が報告されました。
拡張モジュールが外にむけたSSL接続をするのであれば、同様にサーバでも似た問題が起こる可能性があります。
     </p></li><li class="listitem"><p>左外部結合の右手側に入っている完全外部結合でのプランナのエラー<span class="quote">“<span class="quote">failed to build any <em class="replaceable"><code>N</code></em>-way joins (N個立ての結合の構築にいずれも失敗しました)</span>”</span>を修正しました。
(Tom Lane)
     </p></li><li class="listitem"><p>複数階層のネステッドループプランにおける等価クラス検査の誤った扱いを修正しました。
 (Tom Lane)
     </p><p><code class="literal">X.X = Y.Y = Z.Z</code>のような、3つ以上からなる変数の等価クラスが与えられると、プランナが全ての変数が実際に等しいようにするために必要な検査の一部を怠る可能性があり、出力される行が<code class="literal">WHERE</code>句を満たさない結合をもたらしました。
さまざまな理由のため、誤ったプランは実際には滅多に選択されません。
そのため、このバグは長い間気づかれずにきました。
     </p></li><li class="listitem"><p>GINインデックススキャンで問い合わせ処理内のメモリリークを修正しました。
(Julien Rouhaud)
     </p></li><li class="listitem"><p>GINインデックスの挿入で、問い合わせ処理内のメモリリークとインデックス破損の可能性を修正しました。
(Tom Lane)
     </p><p>このメモリリークは単純な問い合わせでは通常は大きくなりませんが、大きな<code class="varname">maintenance_work_mem</code>で巨大なGINインデックスを構築する間に相当な量になることがありえました。
     </p></li><li class="listitem"><p><code class="function">to_timestamp()</code>の書式コード<code class="literal">TH</code>、<code class="literal">th</code>、<code class="literal">Y,YYY</code>の誤った振る舞いを修正しました。
(Tom Lane)
     </p><p>これにより、入力文字列の末尾を超えて進み、次の書式コードでゴミが読まれるおそれがありました。
     </p></li><li class="listitem"><p><code class="literal"><em class="replaceable"><code>value</code></em> <em class="replaceable"><code>operator</code></em> ANY (<em class="replaceable"><code>array</code></em>)</code>という構造の<em class="replaceable"><code>array</code></em>引数が副問い合わせである場合のルールとビューのダンプを修正しました。
(Tom Lane)
     </p></li><li class="listitem"><p><code class="command">ALTER SYSTEM</code>のパラメータ値で改行を禁止しました。
(Tom Lane)
     </p><p>設定ファイルのパーサは文字列リテラルに含まれた改行に対応していませんので、私たちは<code class="command">ALTER SYSTEM</code>で挿入される値においてもこれを許すべきではありません。
     </p></li><li class="listitem"><p><code class="command">ALTER TABLE ... REPLICA IDENTITY USING INDEX</code>を、OIDに対するインデックスが指定されても適切に動作するように修正しました。
(David Rowley)
     </p></li><li class="listitem"><p>アラインメントを選り好みするプラットフォームでのロジカルデコーディングのクラッシュを修正しました。
(Tom Lane, Andres Freund)
     </p><p>ディスクにあふれ出るほど大きいトランザクションで、かつ、主キーがそのトランザクション中で変更されるときだけ、障害が発生します。
     </p></li><li class="listitem"><p>walsenderのシャットダウン中に受信側からフィードバックの要求が繰り返されるのを回避しました。
(Nick Cleaton)
     </p></li><li class="listitem"><p><code class="envar">PGCTLTIMEOUT</code>環境変数が設定されているなら、<span class="application">pg_regress</span>がその値による起動タイムアウトを適用するようにしました。
(Tom Lane)
     </p><p>これは、最近<span class="application">pg_ctl</span>に追加された振る舞いとの一貫性のためで、
遅いマシンでの自動テストを容易にします。
     </p></li><li class="listitem"><p>一つの演算子クラスだけを含む演算子族の拡張への所属を正しくリストアできるように<span class="application">pg_upgrade</span>を修正しました。
(Tom Lane)
     </p><p>このような場合、演算子族は新しいデータベースにリストアされますが、もはや拡張の一部として記されませんでした。
これは直ちには悪影響はありませんが、後に<span class="application">pg_dump</span>がリストア時に（無害な）エラーを引き起こす出力を吐き出す原因となりました。
     </p></li><li class="listitem"><p>新たなクラスタのTOAST規則が古いクラスタと異なるとき失敗しないように<span class="application">pg_upgrade</span>を修正しました。
(Tom Lane)
     </p><p><span class="application">pg_upgrade</span>には、新しい<span class="productname">PostgreSQL</span>バージョンが、古いバージョンには無いけれどこのテーブルはTOASTテーブルを持つべきとみなした場合を扱う特別な場合のコードがありました。
このコードは壊れていたため除去し、このような場合には代わりに何もしません。
古いバージョンの規則に従って問題ないなら、TOASTテーブルがないとうまくいかないと思う理由がないように思われます。
     </p></li><li class="listitem"><p><code class="option">--disable-spinlocks</code>と設定されたビルドで、使用されるSysVセマフォの数を減らしました。
(Tom Lane)
     </p></li><li class="listitem"><p>NetBSDのライブラリ関数との衝突を避けるため、内部関数<code class="function">strtoi()</code>の名前を<code class="function">strtoint()</code>に変えました。
(Thomas Munro)
     </p></li><li class="listitem"><p>Windowsにおけるシステムコール<code class="function">bind()</code>と<code class="function">listen()</code>からのエラー報告を修正しました。
(Tom Lane)
     </p></li><li class="listitem"><p>Microsoft Visual Studioでビルドするときのコンパイラ出力の冗長さを減らしました。
(Christian Ullrich)
     </p></li><li class="listitem"><p>Visual Studio 2013で適切に動作するように<code class="function">putenv()</code>を修正しました。
(Michael Paquier)
     </p></li><li class="listitem"><p>Windowsの<code class="function">FormatMessage()</code>関数の安全でない可能性のある使用を回避しました。
(Christian Ullrich)
     </p><p>適切に<code class="literal">FORMAT_MESSAGE_IGNORE_INSERTS</code>フラグを使用します。
これに関連した既知の未修整バグはありませんが、注意深くすることは良い考えと思われます。
     </p></li><li class="listitem"><p>タイムゾーンデータファイルを<span class="application">tzdata</span> release 2016dに更新しました。
ロシア、ベネズエラの夏時間法の変更、当該地域は今では隣接した地域とは異なるタイムゾーンの歴史を持っているという事実を反映させた新しい地域名<code class="literal">Europe/Kirov</code>、<code class="literal">Asia/Tomsk</code>が含まれます。
     </p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-9-4-9.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="release-9-4-7.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">E.43. リリース9.4.9 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> E.45. リリース9.4.7</td></tr></table></div></body></html>