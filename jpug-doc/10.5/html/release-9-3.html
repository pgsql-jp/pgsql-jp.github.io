<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.77. リリース9.3</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-9-3-1.html" title="E.76. リリース9.3.1" /><link rel="next" href="release-9-2-24.html" title="E.78. リリース9.2.24" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.77. リリース9.3</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-9-3-1.html" title="E.76. リリース9.3.1">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix E. リリースノート">Up</a></td><th width="60%" align="center">Appendix E. リリースノート</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="release-9-2-24.html" title="E.78. リリース9.2.24">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-9-3"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.77. リリース9.3</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-9-3.html#id-1.11.6.81.3">E.77.1. 概要</a></span></dt><dt><span class="sect2"><a href="release-9-3.html#id-1.11.6.81.4">E.77.2. バージョン9.3への移行</a></span></dt><dt><span class="sect2"><a href="release-9-3.html#id-1.11.6.81.5">E.77.3. 変更点</a></span></dt></dl></div><p><strong>リリース日: </strong>2013-09-09</p><div class="sect2" id="id-1.11.6.81.3"><div class="titlepage"><div><div><h3 class="title">E.77.1. 概要</h3></div></div></div><p><span class="productname">PostgreSQL</span> 9.3の主な機能強化には以下のものがあります。
   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="sql-creatematerializedview.html" title="CREATE MATERIALIZED VIEW">マテリアライズドビュー</a>を追加しました。
     </p></li><li class="listitem"><p>単純なビューを<a class="link" href="sql-createview.html#SQL-CREATEVIEW-UPDATABLE-VIEWS" title="更新可能ビュー">自動更新可能(auto-updatable)</a>にしました。
     </p></li><li class="listitem"><p><code class="type">JSON</code>の値から要素を抽出する<a class="link" href="functions-json.html" title="9.15. JSON関数と演算子">演算子および関数</a>を含め<code class="type">JSON</code>データ型に多くの機能を追加しました。
     </p></li><li class="listitem"><p><code class="literal">FROM</code>句の副問い合わせや関数呼び出しで使用できる<acronym class="acronym">SQL</acronym>標準の<a class="link" href="queries-table-expressions.html#QUERIES-LATERAL" title="7.2.1.5. LATERAL 副問い合わせ"><code class="literal">LATERAL</code></a>オプションを実装しました。
     </p></li><li class="listitem"><p><a class="link" href="sql-createforeigndatawrapper.html" title="CREATE FOREIGN DATA WRAPPER">外部データラッパ</a>で外部テーブルへの書き込み(挿入/更新/削除)が出来るようになりました。
     </p></li><li class="listitem"><p>他の<span class="productname">Postgres</span>サーバにアクセスできる、<a class="link" href="postgres-fdw.html" title="F.34. postgres_fdw"><span class="productname">Postgres</span>外部データラッパ</a>を追加しました。
     </p></li><li class="listitem"><p><a class="link" href="event-triggers.html" title="Chapter 39. イベントトリガ">event triggers</a>のサポートを追加しました。
     </p></li><li class="listitem"><p>データページを<a class="link" href="app-initdb.html#APP-INITDB-DATA-CHECKSUMS">チェックサム</a>で検査し、破損を報告するオプションの機能を追加しました。
     </p></li><li class="listitem"><p>キー列によらない行の更新で外部キー検査をブロックしないようにしました。
     </p></li><li class="listitem"><p>System Vにおける<a class="link" href="kernel-resources.html#SYSVIPC" title="18.4.1. 共有メモリとセマフォ">共有メモリ</a>の要件を大幅に削減しました。
     </p></li></ul></div><p>上記の項目については、以下でより詳細に説明します。
   </p></div><div class="sect2" id="id-1.11.6.81.4"><div class="titlepage"><div><div><h3 class="title">E.77.2. バージョン9.3への移行</h3></div></div></div><p>以前のリリースからデータを移行したい時は、どのリリースについても、<a class="link" href="app-pg-dumpall.html" title="pg_dumpall"><span class="application">pg_dumpall</span></a>を利用したダンプとリストア、
あるいは<a class="link" href="pgupgrade.html" title="pg_upgrade"><span class="application">pg_upgrade</span></a>の利用が必要です。
   </p><p>バージョン9.3には、以前のバージョンとの互換性に影響する多くの変更点が含まれています。
以下の非互換性に注意してください。
   </p><div class="sect3" id="id-1.11.6.81.4.4"><div class="titlepage"><div><div><h4 class="title">E.77.2.1. サーバの設定</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">replication_timeout</code>の名前を<a class="link" href="runtime-config-replication.html#GUC-WAL-SENDER-TIMEOUT"><code class="varname">wal_sender_timeout</code></a>に変更しました。
       </p><p>この設定は<a class="link" href="wal.html" title="Chapter 30. 信頼性とログ先行書き込み"><acronym class="acronym">WAL</acronym></a>送信のタイムアウトを設定します。
       </p></li><li class="listitem"><p>他のセッションを遅延させる可能性があるため、<a class="link" href="runtime-config-wal.html#GUC-COMMIT-DELAY"><code class="varname">commit_delay</code></a>の設定に、スーパーユーザー権限が必要になります。 (Simon Riggs)
       </p></li><li class="listitem"><p>メモリ上のソートに全てのメモリ割り当てを行うことを許します。(Jeff Janes)
       </p><p><a class="link" href="runtime-config-resource.html#GUC-WORK-MEM"><code class="varname">work_mem</code></a>を以前の振る舞いに基づいて設定しているユーザーは、設定を再検討する必要があります。
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.81.4.5"><div class="titlepage"><div><div><h4 class="title">E.77.2.2. その他</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>更新もしくは削除されようとしたタプルがすでに<code class="literal">BEFORE</code>トリガで更新もしくは削除されていた場合、エラーを投げます。(Kevin Grittner)
       </p><p>以前は、元々意図していた更新は何も発することなくスキップされていました。
意図していた更新によって、トリガが他の場所へデータを伝播した可能性があるため、結果として、論理的に一貫性がない状態になっていました。
本バージョンでは、一貫性のない結果がコミットされることがないようにエラーを投げます。
もしこの変更がアプリケーションに影響を及ぼす場合、最適な解法は恐らくデータの伝播動作を<code class="literal">AFTER</code>トリガで実行することです。
       </p><p>このエラーは、クエリがそのクエリ自身によって、後で変更された行を変更するvolatile関数を呼び出す場合に投げられます。
このような例は同様に、以前は何も発することなく更新をスキップしていました。
       </p></li><li class="listitem"><p>複数列に対する<a class="link" href="sql-createtable.html" title="CREATE TABLE"><code class="literal">ON UPDATE SET NULL/SET DEFAULT</code></a>における外部キーの動作を変更し、<code class="command">UPDATE</code>文で更新されるものだけではなく、全ての制約つきの列に影響するようにしました。(Tom Lane)
       </p><p>以前は、<code class="command">UPDATE</code>文で変更された参照列に該当する列のみ設定されていました。これはSQL-92版で要求されていたものですが、より新しい版のSQL標準では、この新しい動作が明記されています。
       </p></li><li class="listitem"><p><a class="link" href="runtime-config-client.html#GUC-SEARCH-PATH"><code class="varname">search_path</code></a>が変わった場合、キャッシュされた計画が再計画されるようになりました。
(Tom Lane)
       </p><p>新しい<code class="varname">search_path</code>とともにクエリが再実行された場合、以前は、現在のセッションで、すでに作成されているキャッシュされた計画は再計画されず、驚くべき動作になっていました。
       </p></li><li class="listitem"><p><a class="link" href="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE" title="Table 9.23. 書式設定関数"><code class="function">to_number()</code></a>が、3桁毎の区切り文字として使用されるピリオドを適切に扱えるように修正しました。(Tom Lane)
       </p><p>以前は、ロケールでそれが小数点ではないと示されても、ロケール固有の小数点を指定する<code class="literal">D</code>書式コードが使われても、ピリオドは小数点だと認識されていました。<code class="literal">FM</code>書式が使用された場合も、誤った結果に終わっていました。
       </p></li><li class="listitem"><p>集合以外を返す<code class="literal">STRICT</code>関数の引数に集合を返す関数があるとき、適切にNULLを返すように修正しました。
(Tom Lane)
       </p><p>strict関数にわたったNULL値は、出力行が完全に隠されるのではなく、NULLという結果に終わるべきです。
       </p></li><li class="listitem"><p>4GBごとに最後の16MBをスキップするのではなく、<a class="link" href="wal.html" title="Chapter 30. 信頼性とログ先行書き込み"><acronym class="acronym">WAL</acronym></a>を継続的に格納します。(Heikki Linnakangas)
       </p><p>以前は、ファイル名が<code class="literal">FF</code>で終わる<acronym class="acronym">WAL</acronym>ファイルは使われませんでした。もし、このスキップを考慮した<acronym class="acronym">WAL</acronym>バックアップやリストアのスクリプトを使っていた場合、それらを直す必要があります。
       </p></li><li class="listitem"><p><a class="link" href="catalog-pg-constraint.html" title="51.13. pg_constraint"><code class="structname">pg_constraint.confmatchtype</code></a>において、(<code class="literal">FULL</code>でも、<code class="literal">PARTIAL</code>でもない場合の)外部キーの一致型として、<span class="quote">“<span class="quote">simple</span>”</span>を示す<code class="literal">s</code>を格納します。(Tom Lane)
       </p><p>以前は、<span class="quote">“<span class="quote">unspecified</span>”</span>を示す<code class="literal">u</code>で表されていました。
       </p></li></ul></div></div></div><div class="sect2" id="id-1.11.6.81.5"><div class="titlepage"><div><div><h3 class="title">E.77.3. 変更点</h3></div></div></div><p>以下に、<span class="productname">PostgreSQL</span> 9.3とそれ以前のメジャーリリースとの違いに関する詳細な説明をします。
   </p><div class="sect3" id="id-1.11.6.81.5.3"><div class="titlepage"><div><div><h4 class="title">E.77.3.1. サーバ</h4></div></div></div><div class="sect4" id="id-1.11.6.81.5.3.2"><div class="titlepage"><div><div><h5 class="title">E.77.3.1.1. ロック</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>キーではない行の更新が外部キー制約によりブロックされることを防ぎます。(Álvaro Herrera, Noah Misch, Andres Freund, Alexander Shulgin, Marti Raudsepp, Alexander Shulgin)
       </p><p>この変更は同時実行性を改善し、外部キー制約を持つテーブルを更新する際に、デッドロックに陥る可能性を減らします。外部キーで参照される列を変更しない<code class="command">UPDATE</code>は、その行に対して新しいロックモードである<code class="literal">NO KEY UPDATE</code>を使い、外部キー検査は新しいロックモードである<code class="literal">KEY SHARE</code>を使います。この<code class="command">KEY SHARE</code>は、<code class="literal">NO KEY UPDATE</code>と競合しません。そのため、外部キーが変更されない場合、ブロックされることはありません。
       </p></li><li class="listitem"><p>セッションがロックを獲得するまで待機する時間を制限できるようにするために、設定変数<a class="link" href="runtime-config-client.html#GUC-LOCK-TIMEOUT"><code class="varname">lock_timeout</code></a>を追加しました。
(Zoltán Böszörményi)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.81.5.3.3"><div class="titlepage"><div><div><h5 class="title">E.77.3.1.2. インデックス</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>範囲型に対する<a class="link" href="rangetypes.html#RANGETYPES-INDEXING" title="8.17.9. インデックス"><acronym class="acronym">SP-GiST</acronym></a>のサポートを追加しました。(Alexander Korotkov)
       </p></li><li class="listitem"><p>ログをとらない<a class="link" href="gist.html" title="Chapter 62. GiSTインデックス"><code class="type">GiST</code></a>インデックスを使用できます。(Jeevan Chalke)
       </p></li><li class="listitem"><p>同程度に有用な複数の選択肢があった場合、どのページが下がるのかランダムで決まるようにしたことで、<acronym class="acronym">GiST</acronym>インデックスを挿入する性能が向上します。(Heikki Linnakangas)
       </p></li><li class="listitem"><p>ハッシュインデックス操作の同時実効性を改善しました。(Robert Haas)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.81.5.3.4"><div class="titlepage"><div><div><h5 class="title">E.77.3.1.3. オプティマイザ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="rangetypes.html" title="8.17. 範囲型">範囲型</a>について、上限と下限、および範囲の長さの度数分布を収集し、利用するようにしました。(Alexander Korotkov)
       </p></li><li class="listitem"><p>インデックスアクセスに対してのオプティマイザのコスト見積もりを改善しました。 (Tom Lane)
       </p></li><li class="listitem"><p>ハッシュ集約を使用した<code class="literal">DISTINCT</code>について、オプティマイザによるハッシュテーブルサイズの見積もりを改善しました。
(Tom Lane)
       </p></li><li class="listitem"><p>操作を行わないResult計画ノード、Limit計画ノードを抑制します。(Kyotaro Horiguchi, Amit Kapila, Tom Lane)
       </p></li><li class="listitem"><p>オプティマイザが総コスト全体のみを気にするとき、安価な起動コストを基にしたプランを持ち続けることをやめることにより、オプティマイザのオーバーヘッドを削減しました。(Tom Lane)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.81.5.3.5"><div class="titlepage"><div><div><h5 class="title">E.77.3.1.4. 一般的なパフォーマンス</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>あとでタプルを凍結状態にするオーバヘッドを避けるため、<a class="link" href="sql-copy.html" title="COPY"><code class="command">COPY FREEZE</code></a>オプションを追加しました。
       </p></li><li class="listitem"><p><a class="link" href="datatype-numeric.html" title="8.1. 数値データ型"><code class="type">NUMERIC</code></a>の計算における性能を向上しました。
       </p></li><li class="listitem"><p><a class="link" href="runtime-config-wal.html#GUC-COMMIT-DELAY"><code class="varname">commit_delay</code></a>を待機するセッションの同期性能を向上しました。(Peter Geoghegan)
       </p><p>これは<code class="varname">commit_delay</code>の便利さを大いに改善します。
       </p></li><li class="listitem"><p>一時テーブルにアクセスしないトランザクションにおいて、一時テーブルを空にすることをやめることにより、<a class="link" href="sql-createtable.html" title="CREATE TABLE"><code class="command">CREATE TEMPORARY TABLE ... ON COMMIT DELETE ROWS</code></a>オプションの性能を向上しました。(Heikki Linnakangas)
       </p></li><li class="listitem"><p>Vacuumが無効になったタプルを削除した後に、可視性を再検査するようにしました。(Pavan Deolasee)
       </p><p>これは、ページがすべて可視とマークされる機会を増加させます。
       </p></li><li class="listitem"><p>リソース所有者ごとのロックのキャッシュを追加しました。(Jeff Janes)
       </p><p>これはたくさんのロックを含む複数の文から成るトランザクションでSQL文が完了した際のロックの内部処理を高速にします。これは特に<span class="application">pg_dump</span>に有効です。
       </p></li><li class="listitem"><p>新しいリレーションを作るトランザクションのコミット時に、すべてのリレーションキャッシュをスキャンすることをやめました。
(Jeff Janes)
       </p><p>これは<span class="application">pg_restore</span>の実行のような、連続する小さなトランザクションで多くのテーブルを作成するセッションを高速化します。
       </p></li><li class="listitem"><p>多くのリレーションを削除するトランザクションの性能を向上しました。(Tomas Vondra)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.81.5.3.6"><div class="titlepage"><div><div><h5 class="title">E.77.3.1.5. 監視</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>データページの<a class="link" href="app-initdb.html#APP-INITDB-DATA-CHECKSUMS">チェックサム</a>を確認し、破損があった場合に報告を行うオプション機能を追加しました。(Simon Riggs, Jeff Davis, Greg Smith, Ants Aasma)
       </p><p>チェックサムオプションは、<a class="link" href="app-initdb.html" title="initdb">initdb</a>実行時に設定できます。
       </p></li><li class="listitem"><p><a class="link" href="monitoring-stats.html" title="28.2. 統計情報コレクタ">統計情報コレクタ</a>のデータファイルをグローバルで持つものとデータベース単位でもつファイルに分割しました。(Tomas Vondra)
       </p><p>これは、統計情報追跡に必要なI/Oを削減します。
       </p></li><li class="listitem"><p>システム時刻が後戻りしても、適切に操作できるように統計情報コレクタを修正しました。
(Tom Lane)
       </p><p>以前は、記録した最新の時刻に達するまで、統計情報コレクタが停止していました。
       </p></li><li class="listitem"><p>postmasterが標準エラーへのログ出力を終了する前に、標準エラーに有益なメッセージを出力します。(Tom Lane)
       </p><p>この修正は、postmaster起動時にのみ標準エラーへログ出力する一般的な設定において、どこにログが出力されるのか探す手間を減らすでしょう。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.81.5.3.7"><div class="titlepage"><div><div><h5 class="title">E.77.3.1.6. 認証</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>意図しない失敗のデバッグを容易にするため、認証が失敗した際、それに対応する<a class="link" href="auth-pg-hba-conf.html" title="20.1. pg_hba.confファイル"><code class="filename">pg_hba.conf</code></a>の行を出力します。(Magnus Hagander)
       </p></li><li class="listitem"><p><a class="link" href="auth-methods.html#AUTH-LDAP" title="20.3.7. LDAP認証"><acronym class="acronym">LDAP</acronym></a>のエラー報告とドキュメントを改善しました。(Peter Eisentraut)
       </p></li><li class="listitem"><p>RFC 4516に従って、<acronym class="acronym">URL</acronym>における<acronym class="acronym">LDAP</acronym>認証のパラメータを指定するサポートを追加しました。(Peter Eisentraut)
       </p></li><li class="listitem"><p><code class="literal">ALL</code>ではなく、<code class="literal">DEFAULT</code>で始まるように<a class="link" href="runtime-config-connection.html#GUC-SSL-CIPHERS"><code class="varname">ssl_ciphers</code></a>のパラメータを変更し、安全ではない暗号を削除しました。(Magnus Hagander)
       </p><p>これにより、より適切なSSL暗号の集合がもたらされます。
       </p></li><li class="listitem"><p>接続するたびにではなく、一度のみ、<a class="link" href="auth-username-maps.html" title="20.2. ユーザ名マップ"><code class="filename">pg_ident.conf</code></a>を解析し、ロードするようにしました。(Amit Kapila)
       </p><p>これは、<code class="filename">pg_hba.conf</code>の処理と同様です。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.81.5.3.8"><div class="titlepage"><div><div><h5 class="title">E.77.3.1.7. サーバの設定</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>System Vの<a class="link" href="kernel-resources.html#SYSVIPC" title="18.4.1. 共有メモリとセマフォ">共有メモリ</a>の要件を大幅に減少させました。(Robert Haas)
       </p><p>Unix系のシステムにおいて、大部分の<span class="productname">PostgreSQL</span>の共有メモリには現在、<code class="function">mmap()</code>が使われています。
これによって多くのユーザは、共有メモリのカーネルパラメータを調整する必要がなくなります。
       </p></li><li class="listitem"><p>postmasterが複数のUnixドメインソケットを監視できるようにしました。(Honza Horák)
       </p><p>設定パラメータ<code class="varname">unix_socket_directory</code>は、ディレクトリの一覧を受け入れる<a class="link" href="runtime-config-connection.html#GUC-UNIX-SOCKET-DIRECTORIES"><code class="varname">unix_socket_directories</code></a>に置き換えられました。
       </p></li><li class="listitem"><p>設定ファイルのディレクトリを指定できるようにしました。(Magnus Hagander, Greg Smith, Selena Deckelmann)
       </p><p>そのようなディレクトリは、サーバ設定ファイル内の<a class="link" href="config-setting.html#CONFIG-INCLUDES" title="19.1.5. 設定ファイルの内容の管理"><code class="varname">include_dir</code></a>で指定されます。
       </p></li><li class="listitem"><p><a class="link" href="app-initdb.html" title="initdb">initdb</a>の設定値<a class="link" href="runtime-config-resource.html#GUC-SHARED-BUFFERS"><code class="varname">shared_buffers</code></a>の上限を128MBに増加しました。
       </p><p>これは、initdb実行時に<a class="link" href="config-setting.html#CONFIG-SETTING-CONFIGURATION-FILE" title="19.1.2. 設定ファイルによるパラメータ操作"><code class="filename">postgresql.conf</code></a>に設定される上限値です。以前は、32MBが上限値でした。
       </p></li><li class="listitem"><p><a class="link" href="runtime-config-file-locations.html#GUC-EXTERNAL-PID-FILE">external <acronym class="acronym">PID</acronym> file</a>があれば、postmaster終了時に削除します。(Peter Eisentraut)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.81.5.4"><div class="titlepage"><div><div><h4 class="title">E.77.3.2. レプリケーションとリカバリ</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ストリーミングレプリケーションのスタンバイの<a class="link" href="protocol-replication.html" title="52.4. ストリーミングレプリケーションプロトコル">タイムラインスイッチへの追従</a>が可能になりました。(Heikki Linnakangas)
       </p><p>ストリーミングレプリケーションのスタンバイサーバに、新しくマスタに昇格したスレーブからWALデータを受信することを可能にします。以前、その他のスレーブは新しいマスタとのレプリケーションを始めるために再同期が必要でした。
       </p></li><li class="listitem"><p><acronym class="acronym">SQL</acronym>関数<a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-BACKUP" title="9.26.3. バックアップ制御関数"><code class="function">pg_is_in_backup()</code></a>と<a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-BACKUP" title="9.26.3. バックアップ制御関数"><code class="function">pg_backup_start_time()</code></a>を追加しまし&gt;た。(Gilles Darold)
       </p><p>これらの関数は、ベースバックアップ作成のステータスを報告します。
       </p></li><li class="listitem"><p><a class="link" href="runtime-config-wal.html#GUC-SYNCHRONOUS-COMMIT"><code class="varname">synchronous_commit</code></a>をオフにした場合のログシッピングの性能を向上しました。(Andres Freund)
       </p></li><li class="listitem"><p>ストリーミングレプリケーションのスレーブのプライマリへのとても速い昇格が可能になりました。(Simon Riggs, Kyotaro Horiguchi)
       </p></li><li class="listitem"><p>最後のチェックポイントの再実行位置を<a class="link" href="app-pgcontroldata.html" title="pg_controldata"><span class="application">pg_controldata</span></a>の出力に追加しました。(Fujii Masao)
       </p><p>この情報は、どの<acronym class="acronym">WAL</acronym>ファイルがリストアに必要か決定するのに役立ちます。
       </p></li><li class="listitem"><p><a class="link" href="app-pgreceivewal.html" title="pg_receivewal"><span class="application">pg_receivexlog</span></a>のようなツールが異なるアーキテクチャのコンピュータで実行できるようにしました。(Heikki Linnakangas)
       </p><p> WALファイルは依然としてプライマリと同じアーキテクチャのサーバでしか再生できません。しかし、ストリーミングレプリケーションのプロトコルはマシンに非依存になったため、異なるアーキテクチャのマシンへWALファイルを転送し、格納することができます。
       </p></li><li class="listitem"><p><a class="link" href="app-pgbasebackup.html" title="pg_basebackup"><span class="application">pg_basebackup</span></a>の<code class="option">--write-recovery-conf</code>オプションにより、最小の<code class="filename">recovery.conf</code>を出力できるようにしました。(Zoltán Böszörményi, Magnus Hagander)
       </p><p>これにより、スタンバイサーバのセットアップが簡易になります。
       </p></li><li class="listitem"><p><a class="link" href="app-pgreceivewal.html" title="pg_receivewal"><span class="application">pg_receivexlog</span></a>と<a class="link" href="app-pgbasebackup.html" title="pg_basebackup"><span class="application">pg_basebackup</span></a><code class="option">--xlog-method</code>が、タイムラインの切替を扱えるようになりました。(Heikki Linnakangas)
       </p></li><li class="listitem"><p><acronym class="acronym">WAL</acronym>受信のタイムアウトを制御できるように<a class="link" href="runtime-config-replication.html#GUC-WAL-RECEIVER-TIMEOUT"><code class="varname">wal_receiver_timeout</code></a>パラメータを追加しました。(Amit Kapila)
       </p><p>これにより、より速く、接続が失敗したことを検知できます。
       </p></li><li class="listitem"><p>レコード用のヘッダがページを跨がって分割できるように、<a class="link" href="wal.html" title="Chapter 30. 信頼性とログ先行書き込み"><acronym class="acronym">WAL</acronym></a>レコードの形式を変更しました。(Heikki Linnakangas)
       </p><p>新しい形式は多少小さくなり、書き込みが効率的になります。
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.81.5.5"><div class="titlepage"><div><div><h4 class="title">E.77.3.3. 問い合わせ</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">FROM</code>句の副問い合わせや関数呼び出しで使用できる<acronym class="acronym">SQL</acronym>標準<a class="link" href="queries-table-expressions.html#QUERIES-LATERAL" title="7.2.1.5. LATERAL 副問い合わせ">の<code class="literal">LATERAL</code></a>オプションを実装しました。
(Tom Lane)
       </p><p>この機能は<code class="literal">FROM</code>句の副問い合わせや関数で、<code class="literal">FROM</code>句に書いてある他のテーブルの列を参照できます。<code class="literal">LATERAL</code>キーワードは、関数のオプションです。
       </p></li><li class="listitem"><p><a class="link" href="sql-copy.html" title="COPY"><code class="command">COPY</code></a>と<a class="link" href="app-psql.html" title="psql"><span class="application">psql</span></a>の<code class="command">\copy</code>で、外部プログラムをパイプで渡すことができる機能を追加しました。(Etsuro Fujita)
       </p></li><li class="listitem"><p>ルールにおける複数行の<a class="link" href="sql-values.html" title="VALUES"><code class="literal">VALUES</code></a>句が、<code class="literal">OLD</code>/<code class="literal">NEW</code>を参照できるようにしました。(Tom Lane)
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.81.5.6"><div class="titlepage"><div><div><h4 class="title">E.77.3.4. オブジェクトの操作</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="event-triggers.html" title="Chapter 39. イベントトリガ">イベントトリガ</a>をサポートしました。(Dimitri Fontaine, Robert Haas, Álvaro Herrera)
       </p><p>これにより、イベントで有効な言語で書かれたサーバサイドの関数が、DDL実行時に呼び出せるようになります。
       </p></li><li class="listitem"><p><a class="link" href="sql-createforeigndatawrapper.html" title="CREATE FOREIGN DATA WRAPPER">外部データラッパ</a>が外部テーブルの書き込み(挿入/更新/削除)が可能になりました。(KaiGai Kohei)
       </p></li><li class="listitem"><p><a class="link" href="sql-createschema.html" title="CREATE SCHEMA"><code class="command">CREATE SCHEMA ... IF NOT EXISTS</code></a>句を追加しました。(Fabrízio de Royes Mello)
       </p></li><li class="listitem"><p><a class="link" href="sql-reassign-owned.html" title="REASSIGN OWNED"><code class="command">REASSIGN OWNED</code></a>が共有オブジェクトの所有権も変更できるようになりました。(Álvaro Herrera)
       </p></li><li class="listitem"><p>与えられた初期値の文字列が遷移データ型として適切な入力値ではない場合に、<a class="link" href="sql-createaggregate.html" title="CREATE AGGREGATE"><code class="command">CREATE AGGREGATE</code></a>が警告を発するようにしました。(Tom Lane)
       </p></li><li class="listitem"><p><a class="link" href="sql-createtable.html" title="CREATE TABLE"><code class="command">CREATE TABLE</code></a>により、内部的にインデックスやシーケンスが作成されたことに関するメッセージを取り消しました。(Robert Haas)
       </p><p>これらのメッセージは、本バージョンから、<code class="literal">DEBUG1</code>であらわれるようになったので、デフォルト設定では表示されません。
       </p></li><li class="listitem"><p>テーブル名で存在しないスキーマが指定されたとき、<a class="link" href="sql-droptable.html" title="DROP TABLE"><code class="command">DROP TABLE IF EXISTS</code></a>が成功するようにしました。(Bruce Momjian)
       </p><p>以前は、スキーマが存在しない場合、エラーが投げられていました。
       </p></li><li class="listitem"><p>クライアントに、<a class="link" href="libpq-exec.html#LIBPQ-PQRESULTERRORFIELD">制約違反の詳細</a>を別のフィールドとして提供するようになりました。(Pavel Stehule)
       </p><p>これにより、クライアントがテーブル、列、データ型、制約名のエラー詳細を取得できるようになります。以前は、こういった情報はエラー文字列から抽出するしかありませんでした。クライアントライブラリは、これらのフィールドへのアクセスが必要になります。
       </p></li></ul></div><div class="sect4" id="id-1.11.6.81.5.6.3"><div class="titlepage"><div><div><h5 class="title">E.77.3.4.1. <code class="command">ALTER</code></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="sql-altertype.html" title="ALTER TYPE"><code class="command">ALTER TYPE ... ADD VALUE</code></a>で<code class="literal">IF NOT EXISTS</code>オプションをサポートしました。(Andrew Dunstan)
       </p><p>これは列挙型に値を追加するときに有用です。
       </p></li><li class="listitem"><p>全ユーザに対する設定ができるように、<a class="link" href="sql-alterrole.html" title="ALTER ROLE"><code class="command">ALTER ROLE ALL SET</code></a>を追加しました。(Peter Eisentraut)
       </p><p>これにより、全データベースの全ユーザに対する設定ができるようになります。<a class="link" href="sql-alterdatabase.html" title="ALTER DATABASE"><code class="command">ALTER DATABASE SET</code></a>では、すでに単一のデータベースの全ユーザに対する設定が出来ます。<code class="filename">postgresql.conf</code>でも同様のことが効果があります。
       </p></li><li class="listitem"><p><a class="link" href="sql-alterrule.html" title="ALTER RULE"><code class="command">ALTER RULE ... RENAME</code></a>のサポートを追加しました。(Ali Dar)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.81.5.6.4"><div class="titlepage"><div><div><h5 class="title">E.77.3.4.2. <a class="link" href="rules-views.html" title="40.2. ビューとルールシステム"><code class="command">VIEW</code></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="sql-creatematerializedview.html" title="CREATE MATERIALIZED VIEW">マテリアライズドビュー</a>を追加しました。 (Kevin Grittner)
       </p><p>アクセスごとに、元になっているテーブルが読み込まれる通常のビューとは違い、作成時やリフレッシュ時にマテリアライズドビューは物理的なテーブルを作成します。マテリアライズドビューにアクセスすると、その物理的なテーブルから読み込みを行います。マテリアライズドビューの差分リフレッシュや、自動的に元となっているテーブルへアクセスする機能はまだありません。
       </p></li><li class="listitem"><p>単純なビューを<a class="link" href="sql-createview.html#SQL-CREATEVIEW-UPDATABLE-VIEWS" title="更新可能ビュー">自動更新可能</a>にしました。(Dean Rasheed)
       </p><p>元となっている一つのテーブルが持ついくつかのもしくは全ての列を参照するシンプルなビューは、デフォルトで更新可能になりました。より複雑なビューは<a class="link" href="sql-createtrigger.html" title="CREATE TRIGGER"><code class="literal">INSTEAD OF</code></a>トリガ、もしくは、<a class="link" href="sql-createrule.html" title="CREATE RULE"><code class="literal">INSTEAD</code></a>ルールを使用して、更新ができるように作成できます。
       </p></li><li class="listitem"><p><a class="link" href="sql-createview.html" title="CREATE VIEW"><code class="command">CREATE RECURSIVE VIEW</code></a>を追加しました。(Peter Eisentraut)
       </p><p>これは内部的に、<code class="command">CREATE VIEW ... WITH RECURSIVE ...</code>に変換されます。
       </p></li><li class="listitem"><p>参照されているテーブル名の変更、列名の変更、列の追加、削除が起きたときに使用されるビューやルールのコードを改善しました。(Tom Lane)
       </p><p>テーブル名と列名の変更により、ルールやビューの文字列に新しい名前を用いるだけの場合、結果があいまいになることがありました。
この変更では、ルールで生まれるコードが作成したテーブルや列の別名を必要に応じて挿入することで、元の意味を保存します。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.81.5.7"><div class="titlepage"><div><div><h4 class="title">E.77.3.5. データ型</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="largeobjects.html" title="Chapter 34. ラージオブジェクト">ラージオブジェクト</a>の最大格納サイズを、2GBから4TBへと増加しました。 (Nozomi Anzai, Yugo Nagata)
       </p><p>この変更には、サーバ、libpqクライアントともに、64ビットでアクセス可能な関数も含まれています。
       </p></li><li class="listitem"><p><span class="quote">“<span class="quote">America/Chicago</span>”</span>のような<a class="link" href="datatype-datetime.html#DATATYPE-TIMEZONES" title="8.5.3. 時間帯">タイムゾーン名</a>を示す文字列が、<acronym class="acronym">ISO</acronym>形式の<code class="type">timestamptz</code>を入力値とする<span class="quote">“<span class="quote">T</span>”</span>フィールドで使用できるようにしました。(Bruce Momjian)
       </p></li></ul></div><div class="sect4" id="id-1.11.6.81.5.7.3"><div class="titlepage"><div><div><h5 class="title">E.77.3.5.1. <a class="link" href="datatype-json.html" title="8.14. JSONデータ型"><code class="type">JSON</code></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="type">JSON</code>の値から要素を抽出できる<a class="link" href="functions-json.html" title="9.15. JSON関数と演算子">演算子と関数</a>を追加しました。(Andrew Dunstan)
       </p></li><li class="listitem"><p><code class="type">JSON</code>の値が、<a class="link" href="functions-json.html" title="9.15. JSON関数と演算子">レコードに変換</a>されるようになりました。(Andrew Dunstan)
       </p></li><li class="listitem"><p>スカラ、レコード、<code class="type">hstore</code>の値を<code class="type">JSON</code>に変換できる<a class="link" href="functions-json.html" title="9.15. JSON関数と演算子">関数</a>を追加しました。(Andrew Dunstan)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.81.5.8"><div class="titlepage"><div><div><h4 class="title">E.77.3.6. 関数</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="functions-array.html#ARRAY-FUNCTIONS-TABLE" title="Table 9.49. 配列関数"><code class="function">array_remove()</code></a>と<a class="link" href="functions-array.html#ARRAY-FUNCTIONS-TABLE" title="Table 9.49. 配列関数"><code class="function">array_replace()</code></a>を追加しました。(Marco Nenciarini, Gabriele Bartolini)
       </p></li><li class="listitem"><p><a class="link" href="functions-string.html#FUNCTIONS-STRING-OTHER" title="Table 9.9. その他の文字列関数"><code class="function">concat()</code></a>と<a class="link" href="functions-string.html#FUNCTIONS-STRING-FORMAT" title="9.4.1. format"><code class="function">format()</code></a>が、適切に<code class="literal">VARIADIC</code>と付けられた引数を展開できるようになりました。(Pavel Stehule)
       </p></li><li class="listitem"><p>フィールドの幅と左右の整列を決めるオプションを提供できるように、<a class="link" href="functions-string.html#FUNCTIONS-STRING-FORMAT" title="9.4.1. format"><code class="function">format()</code></a>を改善しました。(Pavel Stehule)
       </p></li><li class="listitem"><p><a class="link" href="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE" title="Table 9.23. 書式設定関数"><code class="function">to_char()</code></a>、<a class="link" href="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE" title="Table 9.23. 書式設定関数"><code class="function">to_date()</code></a>、<a class="link" href="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE" title="Table 9.23. 書式設定関数"><code class="function">to_timestamp()</code></a>が、紀元前(BC)の値を正しく扱えるようにしました。(Bruce Momjian)
       </p><p>以前は、<span class="quote">“<span class="quote">IYYY-IW-DY</span>”</span>形式のように、誤っているか、紀元後(<acronym class="acronym">AD</acronym>)とは一貫性のないふるまいとなっていました。
       </p></li><li class="listitem"><p><a class="link" href="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE" title="Table 9.23. 書式設定関数"><code class="function">to_date()</code></a>、<a class="link" href="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE" title="Table 9.23. 書式設定関数"><code class="function">to_timestamp()</code></a>が、<acronym class="acronym">ISO</acronym>とグレゴリオ暦が混ざった場合に、正しい値を返せるようにしました。(Bruce Momjian)
       </p></li><li class="listitem"><p><a class="link" href="functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE" title="Table 9.63. システムカタログ情報関数"><code class="function">pg_get_viewdef()</code></a>が、<code class="literal">SELECT</code>対象のリスト項目や<code class="literal">FROM</code>句の項目の後に続いて、デフォルトで新しい行から始めるようにしました。(Marko Tiikkaja)
       </p><p>これにより、たとえば、<a class="link" href="app-pgdump.html" title="pg_dump"><span class="application">pg_dump</span></a>の出力結果などに表示される行の長さが短くなります。
       </p></li><li class="listitem"><p><code class="function">map_sql_value_to_xml_value()</code>が、基本型が出力されるのと同じ方法で、ドメイン型の値を出力できるように修正しました。(Pavel Stehule)
       </p><p><code class="type">boolean</code>などいくつかの組み込み型には特別な出力形式のルールがあります。これらのルールは、本バージョンからドメイン型にも適用されます。
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.81.5.9"><div class="titlepage"><div><div><h4 class="title">E.77.3.7. サーバサイド言語</h4></div></div></div><div class="sect4" id="id-1.11.6.81.5.9.2"><div class="titlepage"><div><div><h5 class="title">E.77.3.7.1. <a class="link" href="plpgsql.html" title="Chapter 42. PL/pgSQL - SQL手続き言語">PL/pgSQL</a>サーバサイド言語</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>PL/pgSQLが、複合型の式を<code class="literal">RETURN</code>に使えるようにしました。(Asif Rehman)
       </p><p>以前のバージョンでは、複合型の式を返す関数では、<code class="literal">RETURN</code>はその型の変数を参照することしかできませんでした。
       </p></li><li class="listitem"><p>PL/pgSQLが、別のフィールドとして<a class="link" href="plpgsql-control-structures.html#PLPGSQL-EXCEPTION-DIAGNOSTICS" title="42.6.6.1. エラーに関する情報の取得">制約違反の詳細</a>にアクセスできるようになりました。(Pavel Stehule)
       </p></li><li class="listitem"><p>PL/pgSQLが<a class="link" href="sql-copy.html" title="COPY"><code class="command">COPY</code></a>によって処理された行数にアクセスできるようになりました。(Pavel Stehule)
       </p><p>PL/pgSQLの関数内で実行された<code class="command">COPY</code>は、本バージョンより<a class="link" href="plpgsql-statements.html#PLPGSQL-STATEMENTS-DIAGNOSTICS" title="42.5.5. 結果ステータスの取得"><code class="command">GET DIAGNOSTICS x = ROW_COUNT</code></a>で取得される値を更新します。
       </p></li><li class="listitem"><p>予約されていないキーワードが識別子としてPL/pgSQL内のどこでも使用できるようになりました。(Tom Lane)
       </p><p>たとえ名目上、予約されていない場合でも、PL/pgSQL文法内のある場所で、識別子として使用されるためには、キーワードに引用符を使用しなければなりませんでした。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.81.5.9.3"><div class="titlepage"><div><div><h5 class="title">E.77.3.7.2. <a class="link" href="plpython.html" title="Chapter 45. PL/Python - Python手続き言語">PL/Python</a> Server-Side Language</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>PL/Pythonに結果オブジェクト文字列ハンドラを追加しました。(Peter Eisentraut)
       </p><p>これは<code class="literal">plpy.debug(rv)</code>に有用なものを出力させます。
       </p></li><li class="listitem"><p>PL/PythonにOIDを適切なPythonのnumeric型に変換させるようにしました。(Peter Eisentraut)
       </p></li><li class="listitem"><p>(PL/Pythonの<code class="literal">RAISE</code>などで、)明示的に出力された<a class="link" href="spi.html" title="Chapter 46. サーバプログラミングインタフェース"><acronym class="acronym">SPI</acronym></a>エラーを、内部的な<acronym class="acronym">SPI</acronym>エラーと同様に扱えるようになりました。
(Oskari SaarenmaaとJan Urbanski)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.81.5.10"><div class="titlepage"><div><div><h4 class="title">E.77.3.8. サーバプログラミングインタフェース (<a class="link" href="spi.html" title="Chapter 46. サーバプログラミングインタフェース">SPI</a>)</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>サブトランザクションがアボートしている間、<acronym class="acronym">SPI</acronym>タプルテーブルのリークを防ぎます。(Tom Lane)
       </p><p>失敗したサブトランザクションの終わりに、コアSPIコードがそのサブトランザクションで作成したSPIタプルテーブルを解放するようになります。これにより、SPIが使っているコードに、エラーリカバリコードの中で、タプルテーブルを追跡し、手動で解放させる必要がなくなります。こういった失敗は、PL/SQLやおそらく他のSPIクライアントでもトランザクション有効期間のメモリリークの問題を数多く発生させる原因となっていました。<a class="link" href="spi-spi-freetupletable.html" title="SPI_freetuptable"><code class="function">SPI_freetuptable()</code></a>は、複数の解法要求から守られており、手動で解放するように注意していた既存のコードがこの変更で使用できなくなることはありません。
       </p></li><li class="listitem"><p><acronym class="acronym">SPI</acronym>関数が、<a class="link" href="sql-copy.html" title="COPY"><code class="command">COPY</code></a>によって処理された行数にアクセスできるようになりました。(Pavel Stehule)
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.81.5.11"><div class="titlepage"><div><div><h4 class="title">E.77.3.9. クライアントアプリケーション</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>サーバが接続を受け付ける準備ができているか確認できるコマンドラインユーティリティ、<a class="link" href="app-pg-isready.html" title="pg_isready"><span class="application">pg_isready</span></a>を追加しました。(Phil Sorber)
       </p></li><li class="listitem"><p><a class="link" href="app-pgrestore.html" title="pg_restore"><span class="application">pg_restore</span></a>、<a class="link" href="app-clusterdb.html" title="clusterdb"><span class="application">clusterdb</span></a>、<a class="link" href="app-reindexdb.html" title="reindexdb"><span class="application">reindexdb</span></a>、<a class="link" href="app-vacuumdb.html" title="vacuumdb"><span class="application">vacuumdb</span></a>が、複数の<code class="option">--table</code>オプションを受け付けるようになりました。
       </p><p>これは<a class="link" href="app-pgdump.html" title="pg_dump"><span class="application">pg_dump</span></a>の<code class="option">--table</code>オプションと同様の動きをします。
       </p></li><li class="listitem"><p><a class="link" href="app-pg-dumpall.html" title="pg_dumpall"><span class="application">pg_dumpall</span></a>、<a class="link" href="app-pgbasebackup.html" title="pg_basebackup"><span class="application">pg_basebackup</span></a>、<a class="link" href="app-pgreceivewal.html" title="pg_receivewal"><span class="application">pg_receivexlog</span></a>に、接続文字列を指定できる<code class="option">--dbname</code>オプションを追加しました。(Amit Kapila)
       </p></li><li class="listitem"><p>接続情報を返却するlibpq関数、<a class="link" href="libpq-connect.html#LIBPQ-PQCONNINFO"><code class="function">PQconninfo()</code></a>を追加しました。(Zoltán Böszörményi, Magnus Hagander)
       </p></li></ul></div><div class="sect4" id="id-1.11.6.81.5.11.3"><div class="titlepage"><div><div><h5 class="title">E.77.3.9.1. <a class="link" href="app-psql.html" title="psql"><span class="application">psql</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">psql</span>のタブ補完とパターンサーチがより効率的になるように関数コスト設定が調整されました。(Tom Lane)
       </p></li><li class="listitem"><p><span class="application">psql</span>のタブ補完のカバー範囲を改良しました。(Jeff Janes, Dean Rasheed, Peter Eisentraut, Magnus Hagander)
       </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="option">--single-transaction</code>モードが、標準入力からの読み込みに対応するようになりました。(Fabien Coelho, Robert Haas)
       </p><p>以前は、ファイルからの読み込み時のみ、このオプションが有効でした。
       </p></li><li class="listitem"><p>古いサーバへの接続時の<span class="application">psql</span>の警告をとりやめました。(Peter Eisentraut)
       </p><p><span class="application">psql</span>よりも新しいメジャーバージョンへの接続時には、警告があがります。
       </p></li></ul></div><div class="sect5" id="id-1.11.6.81.5.11.3.3"><div class="titlepage"><div><div><h6 class="title">E.77.3.9.1.1. <a class="link" href="app-psql.html#APP-PSQL-META-COMMANDS" title="メタコマンド">メタコマンド</a></h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>SQLコマンドを繰り返し実行できる<span class="application">psql</span>のコマンド<code class="command">\watch</code>を追加しました。(Will Leinweber)
       </p></li><li class="listitem"><p><span class="application">psql</span>変数内にクエリ結果を格納する<span class="application">psql</span>のコマンド<code class="command">\gset</code>を追加しました。(Pavel Stehule)
       </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="command">\conninfo</code>コマンドで、<acronym class="acronym">SSL</acronym>情報を取得できるようになりました。(Alastair Turner)
       </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="command">\df+</code>コマンドの出力に<span class="quote">“<span class="quote">Security</span>”</span>列を追加しました。(Jon Erdman)
       </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="command">\l</code>コマンドでデータベース名のパターンを指定できるようにしました。(Peter Eisentraut)
       </p></li><li class="listitem"><p><span class="application">psql</span>で、アクティブな接続がないときに、<code class="command">\connect</code>コマンドがデフォルトを使えないようにしました。(Bruce Momjian)
       </p><p>サーバがクラッシュした場合などがこれに該当します。
       </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="literal">\g</code> <em class="replaceable"><code>file</code></em>で実行されたSQLコマンドが失敗した後に、状態を適切に初期化するようになりました。(Tom Lane)
       </p><p>以前は、SQLコマンドからの出力が期待していない形で、同じファイルに出力し続けていました。
       </p></li></ul></div></div><div class="sect5" id="id-1.11.6.81.5.11.3.4"><div class="titlepage"><div><div><h6 class="title">E.77.3.9.1.2. 出力</h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">psql</span>に<code class="literal">latex-longtable</code>出力形式を追加しました。(Bruce Momjian)
       </p><p>これの形式は、複数ページにまたがるテーブルを扱えます。
       </p></li><li class="listitem"><p><code class="literal">border=3</code>出力モードを<span class="application">psql</span>の<code class="literal">latex</code>形式に加えました。(Bruce Momjian)
       </p></li><li class="listitem"><p><span class="application">psql</span>のタプルのみ表示モードおよび拡張表示モードのとき、0行の取得結果に対して、<span class="quote">“<span class="quote">(No rows)</span>”</span>を出力しなくなりました。(Peter Eisentraut)
       </p></li><li class="listitem"><p><span class="application">psql</span>の位置揃え無しで、拡張表示モードのとき、0行の取得結果に対して、空行を出力しなくなりました。(Peter Eisentraut)
       </p></li></ul></div></div></div><div class="sect4" id="id-1.11.6.81.5.11.4"><div class="titlepage"><div><div><h5 class="title">E.77.3.9.2. <a class="link" href="app-pgdump.html" title="pg_dump"><span class="application">pg_dump</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>並行してテーブルをダンプできる<span class="application">pg_dump</span>の<code class="option">--jobs</code>オプションを追加しました。(Joachim Wieland)
       </p></li><li class="listitem"><p><span class="application">pg_dump</span>が関数をより予測可能な順番で出力するようにしました。(Joel Jacobson)
       </p></li><li class="listitem"><p><span class="application">pg_dump</span>によって、出力されるtarファイルが<acronym class="acronym">POSIX</acronym>に準拠されるように修正しました。(Brian Weaver, Tom Lane)
       </p></li><li class="listitem"><p>他のクライアントコマンドとの一貫性を保つために、<code class="option">--dbname</code>オプションを<span class="application">pg_dump</span>に追加しました。(Heikki Linnakangas)
       </p><p>データベース名はすでに、フラグ無しで最後に書くことによって指定できました。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.81.5.11.5"><div class="titlepage"><div><div><h5 class="title">E.77.3.9.3. <a class="link" href="app-initdb.html" title="initdb"><span class="application">initdb</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>initdbが新しくデータディレクトリを作成するときにfsyncを行うようになりました。(Jeff Davis)
       </p><p>これによりinitdb直後にシステムがクラッシュした場合でもデータ整合性が保証されます。これは<code class="option">--nosync</code>オプションを使うことにより、無効化できます。
       </p></li><li class="listitem"><p>initdbに、データディレクトリを永続的なストレージに同期する<code class="option">--sync-only</code>オプションを追加しました。(Bruce Momjian)
       </p><p>これは<a class="link" href="pgupgrade.html" title="pg_upgrade"><span class="application">pg_upgrade</span></a>で使われています。
       </p></li><li class="listitem"><p>initdbで作成するデータディレクトリが、ファイルシステムのマウントポイントの最上位に配置することに対して、警告を発するようにしました。(Bruce Momjian)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.81.5.12"><div class="titlepage"><div><div><h4 class="title">E.77.3.10. ソースコード</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="bgworker.html" title="Chapter 47. バックグラウンドワーカプロセス">バックグラウンドワーカープロセス</a>プラグインを使用できる基盤を追加しました。(Álvaro Herrera)
       </p></li><li class="listitem"><p>一元化されたタイムアウト<acronym class="acronym">API</acronym>を作成しました。(Zoltán Böszörményi)
       </p></li><li class="listitem"><p>libpgcommonを作成し、<code class="function">pg_malloc()</code>と他の関数をそこに移動させました。(Álvaro Herrera, Andres Freund)
       </p><p>これにより、libpgportには移植性関連のコードのみが使われることになります。
       </p></li><li class="listitem"><p>より大きい構造体に埋め込まれたリストをサポートします。(Andres Freund)
       </p></li><li class="listitem"><p><code class="literal">SIGALRM</code>を含むすべてのシグナルに対して、<code class="literal">SA_RESTART</code>を使います。(Tom Lane)
       </p></li><li class="listitem"><p><code class="function">errcontext()</code>メッセージが翻訳されたときに、正しいテキストドメインが使われることを保証するようになりました。(Heikki Linnakangas)
       </p></li><li class="listitem"><p>クライアント側のメモリアロケーション関数の名前を標準化しました。(Tom Lane)
       </p></li><li class="listitem"><p>コンパイル時定数の状態が合わない場合、コンパイルに失敗する<span class="quote">“<span class="quote">静的アサーション</span>”</span>をサポートします。(Andres Freund, Tom Lane)
       </p></li><li class="listitem"><p>クライアント側のコードに<code class="function">Assert()</code>をサポートします。(Andrew Dunstan)
       </p></li><li class="listitem"><p><code class="function">ereport()</code>や<code class="function">elog()</code>が結果を返さないことを、Cコンパイラに伝えるようになりました。(Peter Eisentraut, Andres Freund, Tom Lane, Heikki Linnakangas)
       </p></li><li class="listitem"><p>リグレッションテストの出力比較ユーティリティに、<a class="link" href="regress-evaluation.html" title="32.2. テストの評価"><code class="envar">PG_REGRESS_DIFF_OPTS</code></a>経由でオプションをわたせるようにしました。(Peter Eisentraut)
       </p></li><li class="listitem"><p><a class="link" href="sql-createindex.html" title="CREATE INDEX"><code class="command">CREATE INDEX CONCURRENTLY</code></a>に対する隔離性テストを追加しました。
(Abhijit Menon-Sen)
       </p></li><li class="listitem"><p>よりよい<code class="type">int16</code>/<code class="type">int32</code>を代わりに使用するため、<code class="type">int2</code>/<code class="type">int4</code>に対するtypedefを削除しました。(Peter Eisentraut)
       </p></li><li class="listitem"><p>Macの<span class="productname">OS X</span>上での<a class="link" href="install-procedure.html#INSTALL" title="ファイルのインストール">install-strip</a>を修正しました。(Peter Eisentraut)
       </p></li><li class="listitem"><p><a class="link" href="install-procedure.html#CONFIGURE" title="構成">configure</a>フラグの<code class="option">--disable-shared</code>オプションがサポートされなくなったため、削除しました。(Bruce Momjian)
       </p></li><li class="listitem"><p>pgindentが、<span class="application">Perl</span>で書き直されました。(Andrew Dunstan)
       </p></li><li class="listitem"><p><span class="productname">PostgreSQL</span>のperltidy設定に合わせるPerl形式を設定するEmacsのマクロを提供します。(Peter Eisentraut)
       </p></li><li class="listitem"><p>バックエンドの文法が変わったときに、キーワード一覧をチェックできるようツールを実行します。(Tom Lane)
       </p></li><li class="listitem"><p><code class="literal">UESCAPE</code>の解析方法を変更し、字句解析テーブルのサイズが大幅に小さくなりました。
(Heikki Linnakangas)
       </p></li><li class="listitem"><p><span class="application">flex</span>と<span class="application">bison</span>の<span class="application">make</span>ルールが一元化されました。(Peter Eisentraut)
       </p><p>これは<span class="application">pgxs</span>の作者に有益です。
       </p></li><li class="listitem"><p>内部の多くのバックエンド関数がvoidではなく、オブジェクトの<code class="type">OID</code>を返すように変更しました。(Dimitri Fontaine)
       </p><p>これはイベントトリガに有益です。
       </p></li><li class="listitem"><p>トランザクションのコールバックのために、pre-commit、pre-prepare、pre-subcommitというイベントを開発しました。(Tom Lane)
       </p><p>トランザクションのコールバックを使用するロード可能なモジュールは、これらの新しいイベントを扱えるように変更する必要があるかもしれません。
       </p></li><li class="listitem"><p>データベースオブジェクトのマシンが読める説明を生成する<a class="link" href="functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE" title="Table 9.63. システムカタログ情報関数"><code class="function">pg_identify_object()</code></a>を追加しました。 (Álvaro Herrera)
       </p></li><li class="listitem"><p>サーバフック、post-<code class="command">ALTER</code>-objectを追加しました。(KaiGai Kohei)
       </p></li><li class="listitem"><p>汎用バイナリヒープが実装しました。これは、マージ、アペンド操作に使用されます。
(Abhijit Menon-Sen)
       </p></li><li class="listitem"><p><code class="filename">src/timezone/data</code>のファイルの更新時に、時間帯省略形の変更の検知を助けるツールを提供します。(Tom Lane)
       </p></li><li class="listitem"><p><span class="application">libpq</span>、<span class="application">ecpg</span>ライブラリに<span class="application">pkg-config</span>をサポートします。(Peter Eisentraut)
       </p></li><li class="listitem"><p><code class="filename">src/tool/backend</code>ディレクトリを削除しました。その内容は、<span class="productname">PostgreSQL</span>のwikiにあります。(Bruce Momjian)
       </p></li><li class="listitem"><p><a class="link" href="wal.html" title="Chapter 30. 信頼性とログ先行書き込み"><acronym class="acronym">WAL</acronym></a>の読み込みを分割し、独立した機能としました。(Heikki Linnakangas, Andres Freund)
       </p></li><li class="listitem"><p><a class="link" href="wal.html" title="Chapter 30. 信頼性とログ先行書き込み"><acronym class="acronym">WAL</acronym></a>の位置(<code class="structname">XLogRecPtr</code>)を表現するのに、32bit整数ペアでなく、64bit整数を使います。(Heikki Linnakangas)
       </p><p><acronym class="acronym">WAL</acronym>形式を読む必要のあるツールは、概ね、修正する必要があるでしょう。
       </p></li><li class="listitem"><p><a class="link" href="plpython.html" title="Chapter 45. PL/Python - Python手続き言語">PL/Python</a>がプラットフォーム固有のインクルードディレクトリをサポートするようになりました。(Peter Eisentraut)
       </p></li><li class="listitem"><p><span class="productname">OS X</span>上の<a class="link" href="plpython.html" title="Chapter 45. PL/Python - Python手続き言語">PL/Python</a>が、カスタムバージョンの<span class="application">Python</span>でビルド出来るようになりました。(Peter Eisentraut)
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.81.5.13"><div class="titlepage"><div><div><h4 class="title">E.77.3.11. 追加モジュール</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>他の<span class="productname">Postgres</span>サーバにアクセスできる<a class="link" href="postgres-fdw.html" title="F.34. postgres_fdw"><span class="productname">Postgres</span>外部データラッパ</a>をcontribモジュールに追加しました。(Shigeru Hanada)
       </p><p>この外部データラッパは書き込みもサポートします。
       </p></li><li class="listitem"><p><a class="link" href="pgwaldump.html" title="pg_waldump"><span class="application">pg_xlogdump</span></a>をcontribモジュールに追加しました。(Andres Freund)
       </p></li><li class="listitem"><p><a class="link" href="pgtrgm.html" title="F.32. pg_trgm"><span class="productname">pg_trgm</span></a>の正規表現検索にてインデックスが使えるようになりました。(Alexander Korotkov)
       </p></li><li class="listitem"><p><a class="link" href="pgtrgm.html" title="F.32. pg_trgm"><span class="productname">pg_trgm</span></a>のマルチバイト文字の取り扱いを改善しました。(Tom Lane)
       </p><p>wcstombs()、もしくは、towlower()ライブラリ関数を持っていないプラットフォーム上では、非ASCIIデータに対する<span class="productname">pg_trgm</span>のインデックス内容に互換性のない変化が起きる可能性があります。
このような場合、それらのインデックスに<code class="command">REINDEX</code>を行うことにより、正しい検索結果が得られます。
       </p></li><li class="listitem"><p><acronym class="acronym">GIN</acronym>インデックスの挿入保留リストのサイズを報告する<a class="link" href="pgstattuple.html" title="F.31. pgstattuple">pgstattuple</a>関数を追加しました。(Fujii Masao)
       </p></li><li class="listitem"><p><a class="link" href="oid2name.html" title="oid2name"><span class="application">oid2name</span></a>、<a class="link" href="pgbench.html" title="pgbench"><span class="application">pgbench</span></a>、<a class="link" href="vacuumlo.html" title="vacuumlo"><span class="application">vacuumlo</span></a>が、<code class="varname">fallback_application_name</code>を設定します。
       </p></li><li class="listitem"><p><a class="link" href="pgtesttiming.html" title="pg_test_timing"><span class="application">pg_test_timing</span></a>の出力を改善しました。(Bruce Momjian)
       </p></li><li class="listitem"><p><a class="link" href="pgtestfsync.html" title="pg_test_fsync"><span class="application">pg_test_fsync</span></a>の出力を改善しました。(Peter Geoghegan)
       </p></li><li class="listitem"><p>固有のオプション検証関数をもつ<a class="link" href="dblink.html" title="F.11. dblink">dblink</a>専用の外部データラッパを作成しました。
       </p><p><span class="application">dblink</span>の接続先を定義するためにこの外部データラッパを使う場合、固定的な接続オプションリストを使うのでなく、どのような接続オプションがサポートされているか<span class="application">libpq</span>ライブラリを確認します。
       </p></li></ul></div><div class="sect4" id="id-1.11.6.81.5.13.3"><div class="titlepage"><div><div><h5 class="title">E.77.3.11.1. <a class="link" href="pgupgrade.html" title="pg_upgrade"><span class="application">pg_upgrade</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">pg_upgrade</span>によるダンプとリストアを並列に行えるようにしました。(Bruce Momjian, Andrew Dunstan)
       </p><p>これにより、テーブルスペースごとのデータファイルの並列コピー、リンクと同様に、データベースの並列スキーマダンプ、リストアが可能になります。<code class="option">--jobs</code>オプションで並列レベルを指定して下さい。
       </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>が、カレントディレクトリに Unix-domainソケットを作るようになりました。 (Bruce Momjian, Tom Lane)
       </p><p>これにより、アップグレード中に誤って接続されてしまう可能性が少なくなります。
       </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>の<code class="option">--check</code>モードが適切にデフォルトではないソケットディレクトリを検知するようになりました。 (Bruce Momjian, Tom Lane)
       </p></li><li class="listitem"><p>多くのテーブルを持つデータベースに対する<span class="application">pg_upgrade</span>の性能を向上しました。(Bruce Momjian)
       </p></li><li class="listitem"><p>実行されたコマンドを表示することで<span class="application">pg_upgrade</span>のログを改善しました。(Álvaro Herrera)
       </p></li><li class="listitem"><p>コピーやリンク中の<span class="application">pg_upgrade</span>のステータス表示を改善しました。
(Bruce Momjian)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.81.5.13.4"><div class="titlepage"><div><div><h5 class="title">E.77.3.11.2. <a class="link" href="pgbench.html" title="pgbench"><span class="application">pgbench</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">pgbench</span>に<code class="option">--foreign-keys</code>オプションを追加しました。 (Jeff Janes)
       </p><p>外部キーの性能試験で使用できるように、<span class="application">pgbench</span>で作成される通常のテーブルに外部キー制約を追加しました。
       </p></li><li class="listitem"><p><span class="application">pgbench</span>が性能統計を集計し、<code class="option">--aggregate-interval</code>で設定した秒数ごとに集計結果を作成できるようにしました。 (Tomas Vondra)
       </p></li><li class="listitem"><p>ログに書き込まれるトランザクションの割合を制御できる<span class="application">pgbench</span>に<code class="option">--sampling-rate</code>オプションを追加しました。(Tomas Vondra)
       </p></li><li class="listitem"><p><span class="application">pgbench</span>の初期化モードで出力されるステータスメッセージを削減し、改良しました。 (Robert Haas, Peter Eisentraut)
       </p></li><li class="listitem"><p><span class="application">pgbench</span>に5秒ごとに1行出力する<code class="option">-q</code>オプションを追加しました。 (Tomas Vondra)
       </p></li><li class="listitem"><p>初期化中に<span class="application">pgbench</span>の経過時間と残りの推定時間を出力します。(Tomas Vondra)
       </p></li><li class="listitem"><p>要求されたスケールファクタが20000を超える場合には、関連するカラムが<code class="type">integer</code>から<code class="type">bigint</code>に変わり、<span class="application">pgbench</span>がより大きいスケールファクタを使用できるようにしました。
 (Greg Smith)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.81.5.14"><div class="titlepage"><div><div><h4 class="title">E.77.3.12. 文書</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="productname">EPUB</span>書式の文書が生成できるようになりました。(Peter Eisentraut)
       </p></li><li class="listitem"><p><span class="productname">FreeBSD</span>のカーネルの設定文書を更新しました。(Brad Davis)
       </p></li><li class="listitem"><p><a class="link" href="tutorial-window.html" title="3.5. ウィンドウ関数"><code class="literal">WINDOW</code>関数</a>の文書を改善しました。(Bruce Momjian, Florian Pflug)
       </p></li><li class="listitem"><p><span class="productname">macOS</span>でドキュメントツールをセットアップする<a class="link" href="docguide.html" title="Appendix J. ドキュメント作成">手順</a>を追加しました。(Peter Eisentraut)
       </p></li><li class="listitem"><p><a class="link" href="runtime-config-wal.html#GUC-COMMIT-DELAY"><code class="varname">commit_delay</code></a>の文書を改善しました。
       </p></li></ul></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-9-3-1.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="release-9-2-24.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">E.76. リリース9.3.1 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> E.78. リリース9.2.24</td></tr></table></div></body></html>