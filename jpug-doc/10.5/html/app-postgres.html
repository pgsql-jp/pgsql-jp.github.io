<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>postgres</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="pgwaldump.html" title="pg_waldump" /><link rel="next" href="app-postmaster.html" title="postmaster" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center"><span xmlns="http://www.w3.org/1999/xhtml" class="application">postgres</span></th></tr><tr><td width="10%" align="left"><a accesskey="p" href="pgwaldump.html" title="pg_waldump">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="reference-server.html" title="PostgreSQLサーバアプリケーション">Up</a></td><th width="60%" align="center">PostgreSQLサーバアプリケーション</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="app-postmaster.html" title="postmaster">Next</a></td></tr></table><hr></hr></div><div class="refentry" id="APP-POSTGRES"><div class="titlepage"></div><a id="id-1.9.5.13.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle"><span class="application">postgres</span></span></h2><p>postgres — <span class="productname">PostgreSQL</span>データベースサーバ</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p id="id-1.9.5.13.4.1"><code class="command">postgres</code> [<em class="replaceable"><code>option</code></em>...]</p></div></div><div class="refsect1" id="id-1.9.5.13.5"><h2>説明</h2><p><code class="command">postgres</code>は、<span class="productname">PostgreSQL</span>のデータベースサーバです。
クライアントアプリケーションがデータベースに接続するためには、稼働中の<code class="command">postgres</code>インスタンスに（ネットワークを介して、またはローカルで）接続する必要があります。
その後、<code class="command">postgres</code>は接続を取り扱うために別のサーバプロセスを開始します。
  </p><p>1つの<code class="command">postgres</code>インスタンスは常に1つのデータベースクラスタのデータを管理します。
データベースクラスタとは、共通のファイルシステム領域（<span class="quote">“<span class="quote">データ領域</span>”</span>）に格納されているデータベースの集まりのことです。
1つのシステム上で、同時に複数の<code class="command">postmaster</code>インスタンスを実行することは可能ですが、それらは異なるデータ領域と、異なる接続ポート（下記参照）を使用する必要があります。
<code class="command">postgres</code>は、その起動時にデータ領域の場所を知らなければなりません。
その場所を<code class="option">-D</code>オプションまたは環境変数<code class="envar">PGDATA</code>によって指定しなければなりません。デフォルト値はありません。
通常、<code class="option">-D</code>または<code class="envar">PGDATA</code>は、<a class="xref" href="app-initdb.html" title="initdb"><span class="refentrytitle">initdb</span></a>で作成されたデータ領域ディレクトリを直接指し示します。
他のファイルレイアウトを取ることもできます。<a class="xref" href="runtime-config-file-locations.html" title="19.2. ファイルの場所">Section 19.2</a>を参照してください。
  </p><p>デフォルトでは、<code class="command">postgres</code>はフォアグラウンドで起動し、ログメッセージを標準エラー出力に出力します。
実運用では、<code class="command">postgres</code>アプリケーションはおそらくマシン起動時にバックグラウンドで起動されるはずです。
  </p><p>また<code class="command">postgres</code>はシングルユーザモードで呼び出すこともできます。
このモードは、主に<a class="xref" href="app-initdb.html" title="initdb"><span class="refentrytitle">initdb</span></a>による初期化処理の中で使用されます。
これを、デバッグのためや障害からの復旧時に使用することもできます。
実際には発生するはずのプロセス間通信やロック処理が発生しませんので、シングルユーザモードがサーバのデバッグに必ずしも適したものではないことに注意してください。
シェルからシングルユーザモードで起動された場合、ユーザは問い合わせを入力できます。
結果は画面上に表示されますが、その形式はエンドユーザ向けではなく開発者向けのものです。
シングルユーザモードでは、セッションユーザはIDが1のユーザと設定され、暗黙的にスーパーユーザの権限がこのユーザに与えられます。
このユーザは実際に存在していなくても構いません。
このため、シングルユーザモードはシステムカタログの偶発的な損傷などから手動で復旧するために使用することができます。
  </p></div><div class="refsect1" id="APP-POSTGRES-OPTIONS"><h2>オプション</h2><p><code class="command">postgres</code>には、下記のコマンドライン引数を指定できます。
オプションに関する詳細は<a class="xref" href="runtime-config.html" title="Chapter 19. サーバの設定">Chapter 19</a>を参照してください。
また、設定ファイルを使用することによって、これらのほとんどのオプションについて入力する手間を省くことができます。
一部の（安全な）オプションは接続中のクライアントから設定することもできます。
その設定方法はアプリケーションに依存し、また、そのセッションでのみ適用されます。
たとえば、環境変数<code class="envar">PGOPTIONS</code>を設定すると、<span class="application">libpq</span>に基づくクライアントはその文字列をサーバに渡します。
渡された文字列は<code class="command">postgres</code>コマンドラインオプションとして解釈されます。
   </p><div class="refsect2" id="id-1.9.5.13.6.3"><h3>一般的な目的</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-B <em class="replaceable"><code>nbuffers</code></em></code></span></dt><dd><p>サーバプロセスが使用する共有バッファの数を設定します。
このパラメータのデフォルト値は<span class="application">initdb</span>により自動的に決まります。
このオプションを指定することは設定パラメータ<a class="xref" href="runtime-config-resource.html#GUC-SHARED-BUFFERS">shared_buffers</a>を設定することと同等です。
       </p></dd><dt><span class="term"><code class="option">-c <em class="replaceable"><code>name</code></em>=<em class="replaceable"><code>value</code></em></code></span></dt><dd><p>指定の実行時パラメータを設定します。
<span class="productname">PostgreSQL</span>でサポートされる設定パラメータは<a class="xref" href="runtime-config.html" title="Chapter 19. サーバの設定">Chapter 19</a>で説明します。
実際には、他の多くのコマンドラインオプションはこのようなパラメータへの代入を簡略化したものです。
<code class="option">-c</code>は複数のパラメータを設定するために複数個使用することができます。
       </p></dd><dt><span class="term"><code class="option">-C <em class="replaceable"><code>name</code></em></code></span></dt><dd><p>指定された名前の実行時パラメータの値を表示し、終了します、
（詳細については上の<code class="option">-c</code>を参照してください。）
これは実行中のサーバに対して使用することができ、<code class="filename">postgresql.conf</code>からの値やその起動時に与えられたパラメータにより変更された値を返します。
クラスタが起動した時に与えられたパラメータは反映されません。
       </p><p>このオプションは、<a class="xref" href="app-pg-ctl.html" title="pg_ctl"><span class="refentrytitle"><span class="application">pg_ctl</span></span></a>など、サーバインスタンスと連携する他のプログラムが設定パラメータ値を問い合わせることを意図しています。
ユーザ向けのアプリケーションでは代わりに<a class="xref" href="sql-show.html" title="SHOW"><span class="refentrytitle">SHOW</span></a>や<code class="structname">pg_settings</code>ビューなどを使用すべきです。
       </p></dd><dt><span class="term"><code class="option">-d <em class="replaceable"><code>debug-level</code></em></code></span></dt><dd><p>デバッグレベルを設定します。
大きな値が設定されているほど、より多くのデバッグ情報がサーバのログに出力されます。
値として設定できる範囲は、1から5までです。
特定のセッションで<code class="literal">-d 0</code>を渡すこともできます。
この設定により、親の<code class="command">postgres</code>プロセスのサーバログレベルがこのセッションに伝播されません。
       </p></dd><dt><span class="term"><code class="option">-D <em class="replaceable"><code>datadir</code></em></code></span></dt><dd><p>ファイルシステム上のデータベース設定ファイルの場所を指定します。
詳細は<a class="xref" href="runtime-config-file-locations.html" title="19.2. ファイルの場所">Section 19.2</a>を参照してください。
       </p></dd><dt><span class="term"><code class="option">-e</code></span></dt><dd><p>デフォルトの日付データ形式を<span class="quote">“<span class="quote">ヨーロッパ式</span>”</span>、つまり<code class="literal">DMY</code>の順番にします。
これにより、いくつかの日付出力形式でも、月の前に日が表示されるようになります。
詳細は<a class="xref" href="datatype-datetime.html" title="8.5. 日付/時刻データ型">Section 8.5</a>を参照してください。
       </p></dd><dt><span class="term"><code class="option">-F</code></span></dt><dd><p>性能向上のために<code class="function">fsync</code>呼び出しを無効とします。
ただしこの場合、システムクラッシュ時にデータが損傷する危険性があります。
このオプションの指定は設定パラメータ<a class="xref" href="runtime-config-wal.html#GUC-FSYNC">fsync</a>を無効にすることと同一です。
このオプションを使用する時は、事前に詳細な文書を一読してください。
       </p></dd><dt><span class="term"><code class="option">-h <em class="replaceable"><code>hostname</code></em></code></span></dt><dd><p><code class="command">postgres</code>がクライアントアプリケーションとの接続を監視するホスト名、または、IPアドレスを指定します。
この値には、カンマで区切ったアドレスの一覧、あるいは、全ての利用可能なインタフェースを監視することを意味する<code class="literal">*</code>を指定することができます。
空の値を指定すると、IPアドレスをまったく監視しないことを意味します。
この場合、サーバへの接続には、Unixドメインソケットのみが使用されます。
デフォルトでは<span class="systemitem">localhost</span>のみを監視します。
このオプションを指定することは設定パラメータ<a class="xref" href="runtime-config-connection.html#GUC-LISTEN-ADDRESSES">listen_addresses</a>を設定することと同等です。
       </p></dd><dt><span class="term"><code class="option">-i</code></span></dt><dd><p>リモートクライアントからのTCP/IP（インターネットドメイン）経由の接続を可能とします。
このオプションを設定しない場合には、ローカルからの接続のみが使用可能となります。
このオプションは、<code class="filename">postgresql.conf</code>内の<code class="varname">listen_addresses</code>を、あるいは<code class="option">-h</code>を<code class="literal">*</code>に設定することと同じ意味を持ちます。
       </p><p>このオプションは<a class="xref" href="runtime-config-connection.html#GUC-LISTEN-ADDRESSES">listen_addresses</a>の全ての機能を実現することができないため廃止が予定されています。
通常は、直接<code class="varname">listen_addresses</code>を設定する方法をお勧めします。
       </p></dd><dt><span class="term"><code class="option">-k <em class="replaceable"><code>directory</code></em></code></span></dt><dd><p><code class="command">postgres</code>がクライアントアプリケーションからの接続を監視するUnixドメインソケットのディレクトリを指定します。
ディレクトリをカンマで区切ったリストを値とすることもできます。
空の値を指定すると、Unixドメインソケットをまったく監視しません。この場合サーバに接続するためにはTCP/IPのみを使用することができます。
デフォルトでは、通常<code class="filename">/tmp</code>となっていますが、これはコンパイルに変更できます。
このオプションを指定することは設定パラメータ<a class="xref" href="runtime-config-connection.html#GUC-UNIX-SOCKET-DIRECTORIES">unix_socket_directories</a>を設定することと同等です。
       </p></dd><dt><span class="term"><code class="option">-l</code></span></dt><dd><p><acronym class="acronym">SSL</acronym>を使用して、安全な接続を行います。
このオプションを使用するためには、<span class="productname">PostgreSQL</span>のコンパイル時に<acronym class="acronym">SSL</acronym>を有効にする必要があります。
<acronym class="acronym">SSL</acronym>の使用に関する詳細は<a class="xref" href="ssl-tcp.html" title="18.9. SSLによる安全なTCP/IP接続">Section 18.9</a>を参照してください。
       </p></dd><dt><span class="term"><code class="option">-N <em class="replaceable"><code>max-connections</code></em></code></span></dt><dd><p>このサーバが受け付けるクライアント接続数の最大値を設定します。
このパラメータのデフォルト値は<span class="application">initdb</span>により自動的に選択されます。
このオプションを指定することは設定パラメータ<a class="xref" href="runtime-config-connection.html#GUC-MAX-CONNECTIONS">max_connections</a>を設定することと同じ意味を持ちます。
       </p></dd><dt><span class="term"><code class="option">-o <em class="replaceable"><code>extra-options</code></em></code></span></dt><dd><p><em class="replaceable"><code>extra-options</code></em>で指定されたコマンドライン形式の引数は、この<code class="command">postgres</code>プロセスにより開始される全てのサーバプロセスに引き渡されます。
       </p><p><em class="replaceable"><code>extra-options</code></em>内の空白文字は、それがバックスラッシュ(<code class="literal">\</code>)でエスケープされていなければ、引数を区切るものと解釈されます。
文字としてのバックスラッシュを記述するには、<code class="literal">\\</code>と書いてください。
複数の引数は、<code class="option">-o</code>を複数回使うことでも指定できます。
       </p><p>このオプションの使用は非推奨です。
サーバプロセス用のすべてのコマンドラインオプションは<code class="command">postgres</code>コマンドラインで直接指定することができます。
       </p></dd><dt><span class="term"><code class="option">-p <em class="replaceable"><code>port</code></em></code></span></dt><dd><p>クライアントアプリケーションからの接続を<code class="command">postgres</code>が監視するTCP/IPポート、またはローカルUnixドメインソケットファイルの拡張子を指定します。
デフォルトでは、環境変数<code class="envar">PGPORT</code>、<code class="envar">PGPORT</code>が設定されていない場合はコンパイル時に設定された値（通常5432）が使用されます。
デフォルトのポート以外を指定した場合には、コマンドラインオプション、または<code class="envar">PGPORT</code>を使用して、全てのクライアントアプリケーションが同じポートを指定するようにしなければなりません。
       </p></dd><dt><span class="term"><code class="option">-s</code></span></dt><dd><p>各コマンドの終了時に時間情報や他の統計情報を表示します。
これはベンチマークやバッファ数の調整時の使用に適しています。
       </p></dd><dt><span class="term"><code class="option">-S</code> <em class="replaceable"><code>work-mem</code></em></span></dt><dd><p>内部的なソート処理やハッシュ処理で一時ディスクファイルに頼る前に使用するメモリ量を指定します。
設定パラメータ<a class="xref" href="runtime-config-resource.html#RUNTIME-CONFIG-RESOURCE-MEMORY" title="19.4.1. メモリ">Section 19.4.1</a>の<code class="varname">work_mem</code>の説明を参照してください。
       </p></dd><dt><span class="term"><code class="option">-V</code><br /></span><span class="term"><code class="option">--version</code></span></dt><dd><p><span class="application">postgres</span>のバージョンを表示し、終了します。
       </p></dd><dt><span class="term"><code class="option">--<em class="replaceable"><code>name</code></em>=<em class="replaceable"><code>value</code></em></code></span></dt><dd><p>指定した実行時パラメータを設定します。
<code class="option">-c</code>の省略形式です。
       </p></dd><dt><span class="term"><code class="option">--describe-config</code></span></dt><dd><p>このオプションは、サーバの内部設定変数、その説明、および、デフォルト値をタブ区切りの<code class="command">COPY</code>書式でダンプ出力します。
これは、管理用ツールでの使用を主目的として設計されました。
       </p></dd><dt><span class="term"><code class="option">-?</code><br /></span><span class="term"><code class="option">--help</code></span></dt><dd><p><span class="application">postgres</span>のコマンドライン引数に関する説明を表示し、終了します。
       </p></dd></dl></div></div><div class="refsect2" id="id-1.9.5.13.6.4"><h3>開発者向けオプション</h3><p>ここで説明するオプションは、主にデバッグ用に、場合によっては深刻な障害を受けたデータベースの復旧を補助するために使われます。
これらを運用状態のデータベースの設定として使用する理由はないはずです。
これらのオプションを説明しておくのは、<span class="productname">PostgreSQL</span>システム開発者が利用するためです。
さらに、これらのオプションは、いずれも将来のリリースで予告なしに変更・廃止される可能性があります。
    </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-f</code> <code class="literal">{ s | i | o | b | t | n | m | h }</code></span></dt><dd><p>特定のスキャンと結合方式の使用を禁止します。
<code class="literal">s</code>はシーケンシャルスキャン、<code class="literal">i</code>はインデックススキャンを無効にします。
<code class="literal">o</code>、<code class="literal">b</code>、<code class="literal">t</code>はそれぞれ、インデックスオンリースキャン、ビットマップインデックススキャン、TIDスキャンを無効にします。
<code class="literal">n</code>はネステッドループ結合、<code class="literal">m</code>はマージ結合、<code class="literal">h</code>はハッシュ結合を無効にします。
       </p><p>シーケンシャルスキャンとネステッドループ結合は、完全に無効にすることはできません。
<code class="literal">-fs</code>オプションと<code class="literal">-fn</code>オプションは、単に「他の選択肢があるならば、これらの種類の計画を使わないようにする」ということをオプティマイザに指示するだけです。
       </p></dd><dt><span class="term"><code class="option">-n</code></span></dt><dd><p>これはサーバプロセスが異常終了する問題をデバッグするためのオプションです。
このような状態では、他のすべてのサーバプロセスに対し、終了し、共有メモリやセマフォを再初期化するように通知するのが、通常の戦略です。
これはエラーが起きたサーバプロセスが、終了する前に、何かしら共有状態を破損したかもしれないからです。
このオプションは、<code class="command">postgres</code>が共有データ構造を再初期化しないように指定します。
知識のあるシステムプログラマであれば、その後にデバッガを使用して共有メモリやセマフォの状態を検証することができます。
       </p></dd><dt><span class="term"><code class="option">-O</code></span></dt><dd><p>システムテーブルの構造の変更を可能にします。
これは<code class="command">initdb</code>によって使われます。
       </p></dd><dt><span class="term"><code class="option">-P</code></span></dt><dd><p>システムテーブルの読み込みの際にシステムインデックスを無視します。
しかし、システムテーブルの更新の際にはインデックスを更新します。
破損したシステムインデックスから復旧する場合に有用です。
       </p></dd><dt><span class="term"><code class="option">-t</code> <code class="literal">pa[rser] | pl[anner] | e[xecutor]</code></span></dt><dd><p>それぞれの主要なシステムモジュールに関連する問い合わせに対し、時間に関する統計情報を表示します。
このオプションは<code class="option">-s</code>オプションと一緒に使うことはできません。
       </p></dd><dt><span class="term"><code class="option">-T</code></span></dt><dd><p>これはサーバプロセスが異常終了する問題をデバッグするためのオプションです。
このような状態では、他のすべてのサーバプロセスに対し、終了し、共有メモリやセマフォを再初期化するように通知するのが、通常の戦略です。
これはエラーが起きたサーバプロセスが、終了する前に、何かしら共有状態を破損したかもしれないからです。
このオプションは、<code class="command">postgres</code>が他のすべてのサーバプロセスに対し<code class="literal">SIGSTOP</code>シグナルを送信して、終了させるのではなく停止させることを指定します。
これによりシステムプログラマはすべてのサーバプロセスのコアダンプを手作業で収集することができます。
       </p></dd><dt><span class="term"><code class="option">-v</code> <em class="replaceable"><code>protocol</code></em></span></dt><dd><p>特定のセッションで使われるフロントエンド/バックエンドプロトコルのバージョン番号を指定します。
このオプションは内部使用のみを目的としたものです。
       </p></dd><dt><span class="term"><code class="option">-W</code> <em class="replaceable"><code>seconds</code></em></span></dt><dd><p>新規サーバプロセスが起動するとき、認証手続きが行われた後、指定した秒数の遅延が発生します。
サーバプロセスにデバッガを接続する時間を提供することが目的です。
       </p></dd></dl></div></div><div class="refsect2" id="id-1.9.5.13.6.5"><h3>シングルユーザモード用のオプション</h3><a id="id-1.9.5.13.6.5.2" class="indexterm"></a><p>以下のオプションはシングルユーザモードに対してのみ適用されます（<a class="xref" href="app-postgres.html#APP-POSTGRES-SINGLE-USER" title="シングルユーザモード">シングルユーザモード</a>参照）。
    </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">--single</code></span></dt><dd><p>シングルユーザモードを選択します。
これはコマンドラインで最初の引数でなければなりません。
       </p></dd><dt><span class="term"><em class="replaceable"><code>database</code></em></span></dt><dd><p>アクセスするデータベースの名前を指定します。
これはコマンドラインの最後の引数でなければなりません。
省略時は、デフォルトでユーザ名になります。
       </p></dd><dt><span class="term"><code class="option">-E</code></span></dt><dd><p>すべてのコマンドをその実行前に標準出力にエコー表示します。
       </p></dd><dt><span class="term"><code class="option">-j</code></span></dt><dd><p>コマンド入力の終端文字として、単なる改行ではなく、セミコロンとそれに続く2つの改行を使用します。
       </p></dd><dt><span class="term"><code class="option">-r</code> <em class="replaceable"><code>filename</code></em></span></dt><dd><p>全てのサーバログ出力を<em class="replaceable"><code>filename</code></em>に送ります。
このオプションは、コマンド行オプションとして指定された場合のみ、受け付けられます。
       </p></dd></dl></div></div></div><div class="refsect1" id="id-1.9.5.13.7"><h2>環境</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="envar">PGCLIENTENCODING</code></span></dt><dd><p>クライアントで使用される文字符号化方式のデフォルトです。
（クライアントは個別に変更することができます。）
また、この値は設定ファイルでも設定可能です。
     </p></dd><dt><span class="term"><code class="envar">PGDATA</code></span></dt><dd><p>デフォルトのデータディレクトリの場所です。
     </p></dd><dt><span class="term"><code class="envar">PGDATESTYLE</code></span></dt><dd><p>実行時パラメータ<a class="xref" href="runtime-config-client.html#GUC-DATESTYLE">DateStyle</a>のデフォルト値です。
（この環境変数の使用は廃止予定です。）
     </p></dd><dt><span class="term"><code class="envar">PGPORT</code></span></dt><dd><p>デフォルトのポート番号です。
（設定ファイル内で設定するほうが好まれています。）
     </p></dd></dl></div></div><div class="refsect1" id="id-1.9.5.13.8"><h2>診断</h2><p><code class="literal">semget</code>や<code class="literal">shmget</code>について言及するエラーメッセージは、おそらく、十分な共有メモリやセマフォを提供できるようにカーネルを再構築する必要があることを示します。
詳細は<a class="xref" href="kernel-resources.html" title="18.4. カーネルリソースの管理">Section 18.4</a>を参照してください。
ただし、<a class="xref" href="runtime-config-resource.html#GUC-SHARED-BUFFERS">shared_buffers</a>の値を小さくして<span class="productname">PostgreSQL</span>の共有メモリ消費量を低減する、<a class="xref" href="runtime-config-connection.html#GUC-MAX-CONNECTIONS">max_connections</a>の値を小さくしてセマフォ消費量を低減するといった対策を行うことで、カーネルの再構築を先延ばしすることができるかもしれません。
   </p><p>他のサーバが既に実行中であることを示すエラーメッセージに対しては、例えば以下のコマンドを使用して、注意深く検査しなければなりません。
</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>ps ax | grep postgres</code></strong></pre><p>
もしくは
</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>ps -ef | grep postgres</code></strong></pre><p>
どちらを使用するかは、システムによって異なります。
競合するサーバが稼働していないことが確実であれば、メッセージ内で示されたロックファイルを削除して、再度試してください。
   </p><p>ポートをバインドできなかったことを示すエラーメッセージの場合は、<span class="productname">PostgreSQL</span>以外のプロセスが既にそのポートを使用している可能性が考えられます。
また、<code class="command">postgres</code>を停止して、すぐに同じポートを使う設定で再起動した場合、このエラーが出ることがあります。
この場合、オペレーティングシステムがポートを閉鎖するまで数秒待ってから再挑戦してください。
最後に、オペレーティングシステムが予約しているポート番号を指定した場合も、このエラーが発生することがあります。
例えば、Unixの多くのバージョンでは1024より小さいポート番号は<span class="quote">“<span class="quote">信頼できる（trusted）</span>”</span>とみなされており、Unixのスーパーユーザ以外アクセスできません。
   </p></div><div class="refsect1" id="id-1.9.5.13.9"><h2>注釈</h2><p>ユーティリティコマンド<a class="xref" href="app-pg-ctl.html" title="pg_ctl"><span class="refentrytitle"><span class="application">pg_ctl</span></span></a>を使って、<code class="command">postgres</code>サーバを安全かつ簡便に起動とシャットダウンすることができます。
  </p><p><code class="command">postgres</code>を終了させるために<code class="literal">SIGKILL</code>を使用するのは<span class="emphasis"><em>可能な限り避けてください</em></span>。
<code class="literal">SIGKILL</code>で終了させると、<code class="command">postgres</code>が終了前に保持しているシステムリソース（共有メモリやセマフォ）を解放しなくなることがあります。
システムリソースが解放されていないと、新しく<code class="command">postgres</code>を起動する時に問題が起こる可能性があります。
  </p><p><code class="command">postgres</code>サーバを正常に終了させるために、<code class="literal">SIGTERM</code>、<code class="literal">SIGINT</code>、<code class="literal">SIGQUIT</code>を使用することができます。
<code class="literal">SIGTERM</code>は全てのクライアントが終了するのを待ってから終了させます。
<code class="literal">SIGINT</code>は強制的に全てのクライアントとの接続を切断します。
<code class="literal">SIGQUIT</code>は適切なシャットダウンを行わないで、即時に終了させ、次回の起動時に復旧処理が行われます。
  </p><p><code class="literal">SIGHUP</code>シグナルによりサーバの設定ファイルを再読み込みします。
また、<code class="literal">SIGHUP</code>を個々のサーバプロセスに送信することも可能ですが、通常は意味がありません。
  </p><p>実行中の問い合わせを中止するには、そのコマンドを実行しているプロセスに<code class="literal">SIGINT</code>シグナルを送信してください。
きれいにバックエンドプロセスを終了させるためには、対象プロセスに<code class="literal">SIGTERM</code>を送信してください。
また、これらの２つと同じ操作を行うSQLから呼び出すことができるものについては<a class="xref" href="functions-admin.html#FUNCTIONS-ADMIN-SIGNAL" title="9.26.2. サーバシグナル送信関数">Section 9.26.2</a>内の<code class="function">pg_cancel_backend</code>および<code class="function">pg_terminate_backend</code>を参照してください。
  </p><p><code class="command">postgres</code>サーバでは、通常のクリーンアップを行わずに下位のサーバプロセスを終了させるためには<code class="literal">SIGQUIT</code>を使用します。
これは<span class="emphasis"><em>ユーザが使用すべきではありません</em></span>。
また、サーバに<code class="literal">SIGKILL</code>シグナルを送信するのは好ましくありません。
メインの<code class="command">postgres</code>はこれをクラッシュとして解釈するので、クラッシュからの標準的な復旧手続きの一環として、強制的に共通の親プロセスを持つ<code class="command">postgres</code>プロセスを全て終了させます。
  </p></div><div class="refsect1" id="APP-POSTGRES-BUGS"><h2>不具合</h2><p><code class="option">--</code>オプションは<span class="systemitem">FreeBSD</span>や<span class="systemitem">OpenBSD</span>ではうまく動きません。
代わりに<code class="option">-c</code>を使用してください。
これは対象のオペレーティングシステムの不具合です。
もし修正されなければ、将来の<span class="productname">PostgreSQL</span>リリースで回避策を提供する予定です。
  </p></div><div class="refsect1" id="APP-POSTGRES-SINGLE-USER"><h2>シングルユーザモード</h2><p>シングルユーザモードのサーバを起動するには、以下のようなコマンドを使用してください。
</p><pre class="screen"><strong class="userinput"><code>postgres --single -D /usr/local/pgsql/data <em class="replaceable"><code>other-options</code></em> my_database</code></strong></pre><p>
データベースディレクトリの正確なパスを<code class="option">-D</code>で指定します。パスを指定しない時は、必ず環境変数<code class="envar">PGDATA</code>を設定しておいてください。
また、作業対象とするデータベースの名前も指定してください。
   </p><p>通常、シングルユーザモードのサーバでは、改行をコマンド入力の終わりとみなします。
セミコロンについて、<span class="application">psql</span>におけるような高度な機能はありません。
コマンドが複数行にわたる場合は、改行を入力する前にバックスラッシュを入力しなければなりません（最終行を除く）。
バックスラッシュとそれに続く改行は、いずれも入力コマンドから削除されます。
これは文字列リテラルやコメントの中においても当てはまることに注意して下さい。
   </p><p>ただし、コマンドラインスイッチ<code class="option">-j</code>を使用した場合は、1つの改行ではコマンド入力の終わりとはみなされず、セミコロン、改行、改行というシーケンスがコマンド入力の終わりとなります。
つまり、セミコロンを入力し、そのすぐ後に続けて完全な空行を入力して下さい。
このモードでは、バックスラッシュと改行の組み合わせは特別扱いされません。
この場合も、文字列リテラルやコメント内に現れるこのようなシーケンスに対する高度な扱いはありません。
   </p><p>どちらの入力モードでも、コマンド入力終端の直前や一部でないセミコロンを入力した場合、それはコマンドを分割するものとしてみなされます。
コマンド入力終端を入力すると、それまでに入力した複数の文が、1つのトランザクションとして実行されます。
   </p><p>セッションを終了するには、<acronym class="acronym">EOF</acronym>（通常<span class="keycap"><strong>Control</strong></span>+<span class="keycap"><strong>D</strong></span>）を入力します。
最後にコマンド入力終端を入力した後、何らかのテキストを入力している場合、<acronym class="acronym">EOF</acronym>はコマンド入力の終端として扱われ、終了するにはもう一度<acronym class="acronym">EOF</acronym>を入力する必要があります。
   </p><p>シングルユーザモードのサーバには、高度な行編集機能が用意されていないことに注意してください（例えばコマンド履歴機能はありません）。
またシングルユーザモードは、自動チェックポイントやレプリケーションなどのバックグラウンド処理をまったく行いません。
   </p></div><div class="refsect1" id="APP-POSTGRES-EXAMPLES"><h2>例</h2><p>デフォルト値を使用して<code class="command">postgres</code>をバックグラウンドで起動するには、以下を入力してください。

</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>nohup postgres &gt;logfile 2&gt;&amp;1 &lt;/dev/null &amp;</code></strong></pre><p>
  </p><p>例えば1234というポートを指定して<code class="command">postgres</code>を起動するには、以下を入力してください。
</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>postgres -p 1234</code></strong></pre><p>
<span class="application">psql</span>を使用して上のサーバに接続するには、以下のように-pオプションでこのポートを指定してください。
</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>psql -p 1234</code></strong></pre><p>
または環境変数<code class="envar">PGPORT</code>を設定してください。
</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>export PGPORT=1234</code></strong>
<code class="prompt">$</code> <strong class="userinput"><code>psql</code></strong></pre><p>
  </p><p>指定の実行時パラメータを以下のいずれかで設定することができます。
</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>postgres -c work_mem=1234</code></strong>
<code class="prompt">$</code> <strong class="userinput"><code>postgres --work-mem=1234</code></strong></pre><p>
どちらの形式でも、<code class="filename">postgresql.conf</code>内に設定されている<code class="varname">work_mem</code>の値を上書きします。
コマンドラインでは、パラメータ内のアンダースコア（_）をアンダースコアとしてもダッシュ記号（-）としても記載できることに注意してください。
おそらく短期間の実験という場合を除き、コマンドラインスイッチに依存するよりも<code class="filename">postgresql.conf</code>内の設定を変更してパラメータを設定する方が実用的です。
  </p></div><div class="refsect1" id="id-1.9.5.13.13"><h2>関連項目</h2><p>   <a class="xref" href="app-initdb.html" title="initdb"><span class="refentrytitle">initdb</span></a>,
   <a class="xref" href="app-pg-ctl.html" title="pg_ctl"><span class="refentrytitle"><span class="application">pg_ctl</span></span></a>
  </p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pgwaldump.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="reference-server.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="app-postmaster.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"><span class="application">pg_waldump</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> <span class="application">postmaster</span></td></tr></table></div></body></html>