<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>ALTER TYPE</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="sql-altertrigger.html" title="ALTER TRIGGER" /><link rel="next" href="sql-alteruser.html" title="ALTER USER" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">ALTER TYPE</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="sql-altertrigger.html" title="ALTER TRIGGER">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="sql-commands.html" title="SQLコマンド">Up</a></td><th width="60%" align="center">SQLコマンド</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="sql-alteruser.html" title="ALTER USER">Next</a></td></tr></table><hr></hr></div><div class="refentry" id="SQL-ALTERTYPE"><div class="titlepage"></div><a id="id-1.9.3.40.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle">ALTER TYPE</span></h2><p>ALTER TYPE — 型定義を変更する
  </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><pre class="synopsis">ALTER TYPE <em class="replaceable"><code>name</code></em> <em class="replaceable"><code>action</code></em> [, ... ]
ALTER TYPE <em class="replaceable"><code>name</code></em> OWNER TO { <em class="replaceable"><code>new_owner</code></em> | CURRENT_USER | SESSION_USER }
ALTER TYPE <em class="replaceable"><code>name</code></em> RENAME ATTRIBUTE <em class="replaceable"><code>attribute_name</code></em> TO <em class="replaceable"><code>new_attribute_name</code></em> [ CASCADE | RESTRICT ]
ALTER TYPE <em class="replaceable"><code>name</code></em> RENAME TO <em class="replaceable"><code>new_name</code></em>
ALTER TYPE <em class="replaceable"><code>name</code></em> SET SCHEMA <em class="replaceable"><code>new_schema</code></em>
ALTER TYPE <em class="replaceable"><code>name</code></em> ADD VALUE [ IF NOT EXISTS ] <em class="replaceable"><code>new_enum_value</code></em> [ { BEFORE | AFTER } <em class="replaceable"><code>neighbor_enum_value</code></em> ]
ALTER TYPE <em class="replaceable"><code>name</code></em> RENAME VALUE <em class="replaceable"><code>existing_enum_value</code></em> TO <em class="replaceable"><code>new_enum_value</code></em>

<span class="phrase">ここで<em class="replaceable"><code>action</code></em>は以下のいずれかです。</span>

    ADD ATTRIBUTE <em class="replaceable"><code>attribute_name</code></em> <em class="replaceable"><code>data_type</code></em> [ COLLATE <em class="replaceable"><code>collation</code></em> ] [ CASCADE | RESTRICT ]
    DROP ATTRIBUTE [ IF EXISTS ] <em class="replaceable"><code>attribute_name</code></em> [ CASCADE | RESTRICT ]
    ALTER ATTRIBUTE <em class="replaceable"><code>attribute_name</code></em> [ SET DATA ] TYPE <em class="replaceable"><code>data_type</code></em> [ COLLATE <em class="replaceable"><code>collation</code></em> ] [ CASCADE | RESTRICT ]</pre></div><div class="refsect1" id="id-1.9.3.40.5"><h2>説明</h2><p><code class="command">ALTER TYPE</code>は既存の型の定義を変更します。
複数の副構文があります。

  </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">ADD ATTRIBUTE</code></span></dt><dd><p>この構文は、<a class="xref" href="sql-createtype.html" title="CREATE TYPE"><span class="refentrytitle">CREATE TYPE</span></a>と同じ構文を用いて、複合型に新しい属性を追加します。
     </p></dd><dt><span class="term"><code class="literal">DROP ATTRIBUTE [ IF EXISTS ]</code></span></dt><dd><p>この構文は複合型から属性を削除します。
<code class="literal">IF EXISTS</code>が指定された時はその属性が存在しなくてもエラーにはなりません。
この場合は代わりに注意が発せられます。
     </p></dd><dt><span class="term"><code class="literal">SET DATA TYPE</code></span></dt><dd><p>この構文は複合型の属性の型を変更します。
     </p></dd><dt><span class="term"><code class="literal">OWNER</code></span></dt><dd><p>この構文は型の所有者を変更します。
     </p></dd><dt><span class="term"><code class="literal">RENAME</code></span></dt><dd><p>この構文は型の名前または複合型の個々の属性の名前を変更します。
     </p></dd><dt><span class="term"><code class="literal">SET SCHEMA</code></span></dt><dd><p>この構文は型を他のスキーマに移動します。
     </p></dd><dt><span class="term"><code class="literal">ADD VALUE [ IF NOT EXISTS ] [ BEFORE | AFTER ]</code></span></dt><dd><p>この構文は列挙型に新しい値を追加します。
列挙型の順序中での新しい値の場所は、既存の値の<code class="literal">BEFORE</code>または<code class="literal">AFTER</code>という形式で指定することができます。
指定がなければ新しい項目は値のリストの最後に追加されます。
     </p><p><code class="literal">IF NOT EXISTS</code>が指定されている場合、型の中に新しい値が既に含まれていたとしてもエラーになりません。
注意が発生されますが、他の動作は行われません。
そうでなければ、新しい値がすでに存在しているとエラーが起こります。
     </p></dd><dt><span class="term"><code class="literal">RENAME VALUE</code></span></dt><dd><p>この構文では列挙型の値の名前を変更します。
列挙型の順序における値の位置は変更されません。
指定の値が存在しない、あるいは新しい名前が既に存在する場合はエラーが発生します。
     </p></dd></dl></div><p>
  </p><p><code class="literal">ADD ATTRIBUTE</code>、<code class="literal">DROP ATTRIBUTE</code>、<code class="literal">ALTER ATTRIBUTE</code>操作は複数の変更リストにまとめて、並行して適用することができます。
例えば、複数の属性の追加、複数の属性の変更、またはその両方を１つのコマンドで実行することができます。
  </p><p><code class="command">ALTER TYPE</code>を使用するには型の所有者でなければなりません。
型のスキーマを変更するには、新しいスキーマにおける<code class="literal">CREATE</code>権限も必要です。
所有者を変更するには、直接または間接的に新しい所有者ロールのメンバでなければなりません。
また、そのロールが型のスキーマにおいて<code class="literal">CREATE</code>を持たなければなりません。
（この制限により、型の削除と再作成で行うことができない処理は所有者の変更で行えないようになります。
しかし、スーパーユーザはすべての型の所有者を変更することができます。）
属性を追加または属性の型の変更を行うためには、そのデータ型に対する<code class="literal">USAGE</code>権限を持たなければなりません。
  </p></div><div class="refsect1" id="id-1.9.3.40.6"><h2>パラメータ</h2><p>    </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="replaceable"><code>name</code></em></span></dt><dd><p>変更対象の既存の型の名前です（スキーマ修飾名も可）。
       </p></dd><dt><span class="term"><em class="replaceable"><code>new_name</code></em></span></dt><dd><p>新しい型の名前です。
       </p></dd><dt><span class="term"><em class="replaceable"><code>new_owner</code></em></span></dt><dd><p>新しい型の所有者のユーザ名です。
       </p></dd><dt><span class="term"><em class="replaceable"><code>new_schema</code></em></span></dt><dd><p>型の新しいスキーマです。
       </p></dd><dt><span class="term"><em class="replaceable"><code>attribute_name</code></em></span></dt><dd><p>追加、変更または削除する属性の名前です。
       </p></dd><dt><span class="term"><em class="replaceable"><code>new_attribute_name</code></em></span></dt><dd><p>変名する属性の新しい名前です。
       </p></dd><dt><span class="term"><em class="replaceable"><code>data_type</code></em></span></dt><dd><p>追加する属性のデータ型、または、変更する属性の新しい型です。
       </p></dd><dt><span class="term"><em class="replaceable"><code>new_enum_value</code></em></span></dt><dd><p>列挙型リストの値に追加する新しい値、あるいは既存の値につける新しい名前です。
すべての列挙型のリテラル同様、引用符を付けなければなりません。
       </p></dd><dt><span class="term"><em class="replaceable"><code>neighbor_enum_value</code></em></span></dt><dd><p>列挙型の並び順序において新しい値をその直前または直後に追加する、既存の列挙型の値です。
すべての列挙型のリテラル同様、引用符を付けなければなりません。
       </p></dd><dt><span class="term"><em class="replaceable"><code>existing_enum_value</code></em></span></dt><dd><p>名前の変更の対象となる既存の列挙型の値です。
すべての列挙型のリテラルと同様、引用符を付ける必要があります。
       </p></dd><dt><span class="term"><code class="literal">CASCADE</code></span></dt><dd><p>変更される型で型付けされたテーブルとその子テーブルに、この操作を自動的に伝播します。
       </p></dd><dt><span class="term"><code class="literal">RESTRICT</code></span></dt><dd><p>変更対象の型がテーブルの型付けに使用されている場合に操作を拒絶します。
これがデフォルトです。
       </p></dd></dl></div><p>
   </p></div><div class="refsect1" id="id-1.9.3.40.7"><h2>注意</h2><p><code class="command">ALTER TYPE ... ADD VALUE</code>（列挙型に新しい値を追加する構文）はトランザクションブロック内で実行することはできません。
  </p><p>列挙型に追加された値を含む比較は、列挙型の元々の要素のみを含む比較よりも低速になることがあります。
通常これは、新しい値のソート位置がリストの最後ではなく<code class="literal">BEFORE</code>または<code class="literal">AFTER</code>を用いて設定された場合のみで起こります。
しかし最後に新しい値が追加された場合であっても起こる可能性があります。
（これは、OIDカウンタが元の列挙型を作成してから<span class="quote">“<span class="quote">周回</span>”</span>した場合に起こります。）
この速度の低下は通常は大きくありません。
しかしこれが問題であれば、列挙型を削除し再作成する、あるいはデータベースをダンプし再ロードすることで最適な性能まで戻すことができます。
  </p></div><div class="refsect1" id="id-1.9.3.40.8"><h2>例</h2><p>データ型の名前を変更します。
</p><pre class="programlisting">ALTER TYPE electronic_mail RENAME TO email;</pre><p>
  </p><p><code class="literal">email</code>型の所有者を<code class="literal">joe</code>に変更します。
</p><pre class="programlisting">ALTER TYPE email OWNER TO joe;</pre><p>
  </p><p><code class="literal">email</code>型のスキーマを<code class="literal">customers</code>に変更します。
</p><pre class="programlisting">ALTER TYPE email SET SCHEMA customers;</pre><p>
  </p><p>型に新しい属性を追加します。
</p><pre class="programlisting">ALTER TYPE compfoo ADD ATTRIBUTE f3 int;</pre><p>
  </p><p>列挙型の特定のソート位置に新しい値を追加します。
</p><pre class="programlisting">ALTER TYPE colors ADD VALUE 'orange' AFTER 'red';</pre><p>
  </p><p>列挙型の値の名前を変更します。
</p><pre class="programlisting">ALTER TYPE colors RENAME VALUE 'purple' TO 'mauve';</pre></div><div class="refsect1" id="id-1.9.3.40.9"><h2>互換性</h2><p>属性の追加および削除を行う構文は標準SQLの一部です。
他の構文はPostgreSQLの拡張です。
  </p></div><div class="refsect1" id="SQL-ALTERTYPE-SEE-ALSO"><h2>関連項目</h2><span class="simplelist"><a class="xref" href="sql-createtype.html" title="CREATE TYPE"><span class="refentrytitle">CREATE TYPE</span></a>, <a class="xref" href="sql-droptype.html" title="DROP TYPE"><span class="refentrytitle">DROP TYPE</span></a></span></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sql-altertrigger.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="sql-commands.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="sql-alteruser.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">ALTER TRIGGER </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> ALTER USER</td></tr></table></div></body></html>