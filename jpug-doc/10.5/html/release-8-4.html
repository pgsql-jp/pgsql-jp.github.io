<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.174. リリース8.4</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-8-4-1.html" title="E.173. リリース8.4.1" /><link rel="next" href="release-8-3-23.html" title="E.175. リリース8.3.23" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.174. リリース8.4</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-8-4-1.html" title="E.173. リリース8.4.1">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix E. リリースノート">Up</a></td><th width="60%" align="center">Appendix E. リリースノート</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="release-8-3-23.html" title="E.175. リリース8.3.23">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-8-4"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.174. リリース8.4</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-8-4.html#id-1.11.6.178.3">E.174.1. 概要</a></span></dt><dt><span class="sect2"><a href="release-8-4.html#id-1.11.6.178.4">E.174.2. バージョン8.4への移行</a></span></dt><dt><span class="sect2"><a href="release-8-4.html#id-1.11.6.178.5">E.174.3. 変更点</a></span></dt></dl></div><p><strong>リリース日: </strong>2009-07-01</p><div class="sect2" id="id-1.11.6.178.3"><div class="titlepage"><div><div><h3 class="title">E.174.1. 概要</h3></div></div></div><p>長年の開発の結果<span class="productname">PostgreSQL</span>は多くの領域においてその機能が完全なものになりました。
このリリースでは新機能（認証、監視、領域再利用など）に関しては的を絞った手法を取り、また最近の標準SQLで定義された機能を追加しています。
改良された主な点を以下に示します。
   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ウィンドウ関数
     </p></li><li class="listitem"><p>共通テーブル式および再帰問い合わせ
     </p></li><li class="listitem"><p>関数のデフォルトパラメータおよび可変長パラメータ
     </p></li><li class="listitem"><p>並行リストア
     </p></li><li class="listitem"><p>列権限
     </p></li><li class="listitem"><p>データベース単位のロケール設定
     </p></li><li class="listitem"><p>ハッシュインデックスの改良
     </p></li><li class="listitem"><p><code class="literal">EXISTS</code>および<code class="literal">NOT EXISTS</code>問い合わせにおける、結合性能の改良
     </p></li><li class="listitem"><p>ウォームスタンバイの使用の簡易化
     </p></li><li class="listitem"><p>空き領域マップの自動サイズ調整
     </p></li><li class="listitem"><p>可視性マップ（変更頻度が少ないテーブルにおけるバキュームオーバーヘッドを大きく低減します）
     </p></li><li class="listitem"><p>バージョンを問わないpsql（古めのサーバに対してもバックスラッシュコマンドが動作します）
     </p></li><li class="listitem"><p>ユーザ認証におけるSSL証明書のサポート
     </p></li><li class="listitem"><p>関数単位の実行時統計情報
     </p></li><li class="listitem"><p>psqlにおける関数編集の簡易化
     </p></li><li class="listitem"><p>新しいcontribモジュール:pg_stat_statements、auto_explain、citext、btree_gin
     </p></li></ul></div><p>上記項目は以下の節で詳細に説明します。
   </p></div><div class="sect2" id="id-1.11.6.178.4"><div class="titlepage"><div><div><h3 class="title">E.174.2. バージョン8.4への移行</h3></div></div></div><p>すべての過去のリリースからデータを移行する場合、<span class="application">pg_dump</span>を使用したダンプ/リストアが必要です。
   </p><p>既知の非互換性を以下に示します。
   </p><div class="sect3" id="id-1.11.6.178.4.4"><div class="titlepage"><div><div><h4 class="title">E.174.2.1. 一般</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>デフォルトでは64ビット整数型の日付時間型を使用します。(Neil Conway)
      </p><p>これまでは、<span class="application">configure</span>の<code class="option">--enable-integer-datetimes</code>オプションでこれを選択していました。
過去の動作を維持するためには<code class="option">--disable-integer-datetimes</code>付きで構築してください。
      </p></li><li class="listitem"><p><span class="application">ipcclean</span>ユーティリティコマンドを削除しました。(Bruce)
      </p><p>このユーティリティは一部のプラットフォームでしか動作しませんでした。
ユーザは代わりに使用するオペレーティングシステムのツールを使用すべきです。
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.178.4.5"><div class="titlepage"><div><div><h4 class="title">E.174.2.2. サーバの設定</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ログファイルのサイズを小さくするため<code class="literal">log_min_messages</code>のデフォルト設定を<code class="literal">warning</code>に変更しました（これまでは<code class="literal">notice</code>でした）。(Tom)

      </p></li><li class="listitem"><p><code class="literal">max_prepared_transactions</code>のデフォルト設定をゼロに変更しました（これまでは5でした）。(Tom)
      </p></li><li class="listitem"><p> <code class="literal">LOG</code>メッセージレベルで<code class="literal">debug_print_parse</code>、<code class="literal">debug_print_rewritten</code>および<code class="literal">debug_print_plan</code>の出力が行われるようにしました。
これまでは<code class="literal">DEBUG1</code>レベルでした。(Tom)
      </p></li><li class="listitem"><p><code class="literal">debug_pretty_print</code>のデフォルトを<code class="literal">on</code>にしました。(Tom)
      </p></li><li class="listitem"><p><code class="varname">explain_pretty_print</code>パラメータを削除しました（必要がなくなりました）。(Tom)
      </p></li><li class="listitem"><p>他のログ処理用のオプションと同様に、スーパーユーザのみが<code class="varname">log_temp_files</code>を設定できるようにしました。(Simon Riggs)
      </p></li><li class="listitem"><p><code class="literal">log_filename</code>に<code class="literal">%</code>エスケープが存在しない場合、エポックタイムスタンプが自動的につかないようにしました。(Robert Haas)
      </p><p>外部のログローテーションツールで使用できるようにログファイル名を固定化したいユーザが一部にいましたので、この変更がなされました。
      </p></li><li class="listitem"><p><code class="filename">recovery.conf</code>から<code class="varname">log_restartpoints</code>を削除しました。
代わりに<code class="varname">log_checkpoints</code>を使用してください。(Simon)
      </p></li><li class="listitem"><p><code class="varname">krb_realm</code>および<code class="varname">krb_server_hostname</code>を削除しました。
これらは<code class="filename">pg_hba.conf</code>内で設定されるようになりました。(Magnus)
      </p></li><li class="listitem"><p>また、後述のように<a class="link" href="release-8-4.html#RELEASE-8-4-PG-HBA-CONF" title="E.174.3.2.3. pg_hba.conf"><code class="filename">pg_hba.conf</code></a>には大きな変更点があります。
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.178.4.6"><div class="titlepage"><div><div><h4 class="title">E.174.2.3. 問い合わせ</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">TRUNCATE</code>および<code class="command">LOCK</code>が指定したテーブルの子テーブルにも適用されるよう変更しました。(Peter)
      </p><p>これらのコマンドは子テーブルの処理を抑制できるように<code class="literal">ONLY</code>オプションを受け付けるようになりました。
これまでの動作が必要な場合このオプションを使用しなければなりません。
      </p></li><li class="listitem"><p><code class="command">SELECT DISTINCT</code>および<code class="literal">UNION</code>/<code class="literal">INTERSECT</code>/<code class="literal">EXCEPT</code>はソートされた出力を常に生成しないようになりました。(Tom)
      </p><p>これまでは、こうした種類の問い合わせは常に、ソート・一意性処理（つまりソート後隣接する重複を除去）により重複行を取り除きました。
これがハッシュ処理により実装できるようになり、その結果ソートされた出力が生成されなくなりました。
出力順がソートされていることに依存するアプリケーションで推奨する修正方法は<code class="literal">ORDER BY</code>句を付与することです。
短期的な回避方法として、<code class="literal">enable_hashagg</code>を無効にすることで過去の動作に戻すことができます。
しかしこれは性能を大きく劣化させる修正方法です。
しかし<code class="literal">SELECT DISTINCT ON</code>ではハッシュ処理を使用しませんので、この動作には変更ありません。
      </p></li><li class="listitem"><p>子テーブルは親テーブルの<code class="literal">CHECK</code>制約を強制的に継承します。(Alex Hunsaker、Nikhil Sontakke、Tom)
      </p><p>これまではこうした制約を子テーブルで削除することができ、その結果、親テーブルの走査時に制約に反する行が現れることがありました。
これは非一貫性、かつ標準SQLに反するものと考えられました。
      </p></li><li class="listitem"><p>負の<code class="literal">LIMIT</code>または負の<code class="literal">OFFSET</code>値を、ゼロとして扱うことなく、許さなくなりました。(Simon)
      </p></li><li class="listitem"><p>トランザクションブロック外での<code class="command">LOCK TABLE</code>を許さなくなりました。(Tom)
      </p><p>ロックは即座に解放されますので、こうした操作は無意味です。
      </p></li><li class="listitem"><p>シーケンスが追加の<code class="structfield">start_value</code>列を持つようになりました。(Zoltan Boszormenyi)
      </p><p>これが<code class="command">ALTER SEQUENCE ... RESTART</code>をサポートします。
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.178.4.7"><div class="titlepage"><div><div><h4 class="title">E.174.2.4. 関数および演算子</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="type">numeric</code>型の0の累乗がエラーとならずに、<code class="literal">0</code>を返すようになりました。
また<code class="type">numeric</code>型の0の0乗もエラーとならずに、<code class="literal">1</code>を返すようになりました。(Bruce)
      </p><p>これは、従来の<code class="type">float8</code>型における動作と一致します。
      </p></li><li class="listitem"><p>浮動小数点における単項のマイナスがマイナスゼロを生成できるようになりました。(Tom)
      </p><p>変更後の動作は<acronym class="acronym">IEEE</acronym>標準との互換性がより高いものです。
      </p></li><li class="listitem"><p>エスケープ文字が<code class="literal">LIKE</code>パターンの最後の文字であった場合（つまりエスケープすべきものが存在しない場合）、エラーになります。(Tom)
      </p><p>これまでは、こうしたエスケープ文字は警告なく無視されました。
このためアプリケーションのロジックエラーを隠してしまう可能性がありました。
      </p></li><li class="listitem"><p>これまで<code class="literal">LIKE</code>インデックス比較に使用されていた演算子<code class="literal">~=~</code>および<code class="literal">~&lt;&gt;~</code>を削除しました。(Tom)
      </p><p>パターンインデックスは通常の等価演算子を使用するようになりました。
      </p></li><li class="listitem"><p><code class="function">xpath()</code>がその引数を変更することなく<span class="application">libxml</span>に渡すようになりました。(Andrew)
      </p><p>これは、XML引数が整形済みのXML文書でなければならないことを意味します。
これまでのコードではXML断片も許可するようにもくろんでいましたが、うまく動作しませんでした。
      </p></li><li class="listitem"><p><code class="function">xmlelement()</code>が要素値と同様に属性値を整形するようになりました(Peter)
      </p><p>これまでは、属性値は通常のSQL出力の動作に従って成形されていました。
これはXMLの規約に時として合致しません。
      </p></li><li class="listitem"><p><span class="application">libxml</span>を使用する関数向けのメモリ管理を作成し直しました。(Tom)
      </p><p>この変更により、PL/Perlや他の追加コードにおける<span class="application">libxml</span>を使用した場合とのいくつかの互換性に関する問題が避けられるはずです。
      </p></li><li class="listitem"><p>ハッシュ関数用により高速なアルゴリズムを採用しました。(Bob Jenkinsの作業を元としたKenneth Marshall)
      </p><p>組み込みのハッシュ関数の多くで、リトルエンディアンマシンとビッグエンディアンマシンとで異なる結果になるようになりました。
      </p></li></ul></div><div class="sect4" id="id-1.11.6.178.4.7.3"><div class="titlepage"><div><div><h5 class="title">E.174.2.4.1. 時間に関する関数および演算子</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">DateStyle</code>が<code class="type">interval</code>型の出力書式を制御しないようになりました。
代わりとなる新しい<code class="varname">IntervalStyle</code>変数が存在します。(Ron Mayer)
       </p></li><li class="listitem"><p><code class="type">timestamp</code>および<code class="type">interval</code>の出力における秒の小数部の扱いに関する一貫性を向上しました。(Ron Mayer)
       </p><p>これにより、小数部の桁が以前と異なる表示になったり、切り捨てではなく四捨五入になったりする可能性があります。
       </p></li><li class="listitem"><p><code class="function">to_char()</code>の翻訳された月名、日名が<code class="varname">LC_MESSAGES</code>ではなく<code class="varname">LC_TIME</code>に依存するようになりました。(Euler Taveira de Oliveira)
       </p></li><li class="listitem"><p><code class="function">to_date()</code>および<code class="function">to_timestamp()</code>が無効な入力に対してより一貫したエラー報告を行うようにしました。(Brendan Jurd)
       </p><p>これまでのバージョンでは、書式文字列に一致しない入力を無視したり、警告なく誤解釈したりすることがよくありました。
こうした状況でエラーとなるようになりました。
       </p></li><li class="listitem"><p>午前/午後（<code class="literal">AM</code>/<code class="literal">PM</code>）および紀元（<code class="literal">BC</code>/<code class="literal">AD</code>）の書式指定に関して大文字小文字の厳密な違いを必要としないように<code class="function">to_timestamp()</code>を修正しました。(Brendan Jurd)
       </p><p>例えば<code class="literal">ad</code>という入力値は<code class="literal">AD</code>書式文字列に一致するようになりました。
       </p></li></ul></div></div></div></div><div class="sect2" id="id-1.11.6.178.5"><div class="titlepage"><div><div><h3 class="title">E.174.3. 変更点</h3></div></div></div><p><span class="productname">PostgreSQL</span> 8.4とこれまでのメジャーリリースとの間の変更点についての詳細を以下に示します。
   </p><div class="sect3" id="id-1.11.6.178.5.3"><div class="titlepage"><div><div><h4 class="title">E.174.3.1. 性能</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>オプティマイザの統計情報計算を改良しました。(Jan Urbanski、Tom)
      </p><p>特に全文検索演算子に関する推定が大きく改良されました。
      </p></li><li class="listitem"><p>ハッシュ処理を用いた<code class="command">SELECT DISTINCT</code>および<code class="literal">UNION</code>/<code class="literal">INTERSECT</code>/<code class="literal">EXCEPT</code>が可能になりました。(Tom)
      </p><p>これは、こうした種類の問い合わせが自動的にソートされた出力を生成しなくなったことを意味します。
      </p></li><li class="listitem"><p>半結合および反結合に関して明確な概念を作成しました。(Tom)
      </p><p>この作業により、<code class="literal">IN (SELECT ...)</code>句に関するこれまでのとってつけたような扱いを形式化しました。
さらにこれを<code class="literal">EXISTS</code>および<code class="literal">NOT EXISTS</code>句にも拡張しました。
これにより<code class="literal">EXISTS</code>および<code class="literal">NOT EXISTS</code>問い合わせの計画作成が非常に改善されるはずです。
一般的には、論理的には同一である<code class="literal">IN</code>と<code class="literal">EXISTS</code>句が、同程度の性能を持つようになりました。
これまではよく<code class="literal">IN</code>の方が勝っていました。
      </p></li><li class="listitem"><p>外部結語が背後にある副問い合わせの最適化を改良しました。(Tom)
      </p><p>これまでは、副問い合わせまたはビューが外部結合のNULLを持ち得る側にそれが現れる場合や厳密でない式（例えば定数）がその結果リストに含まれる場合、非常によく最適化することができませんでした。
      </p></li><li class="listitem"><p>Boyer-Moore-Horspool検索を使用することで、<code class="function">text_position()</code>と関連する関数の性能を改良しました。(David Rowley)
      </p><p>これは特に長い検索パターンで有用です。
      </p></li><li class="listitem"><p>要求があった時にのみファイルに書き込むことにより、統計情報集計ファイルの書き込みによるI/O負荷が低減しました。 (Martin Pihlak)
      </p></li><li class="listitem"><p>一括挿入の性能を改良しました。(Robert Haas、Simon)
      </p></li><li class="listitem"><p><code class="varname">default_statistics_target</code>のデフォルト値を<code class="literal">10</code>から<code class="literal">100</code>に増やしました。(Greg Sabino Mullane、Tom)
      </p><p>また最大値も<code class="literal">1000</code>から<code class="literal">10000</code>に増やしました。
      </p></li><li class="listitem"><p>継承または<code class="literal">UNION ALL</code>を含む問い合わせにおいて、デフォルトで<code class="varname">constraint_exclusion</code>検査を行います。(Tom)
      </p><p><code class="varname">constraint_exclusion</code>の新しい設定<code class="literal">partition</code>がこの動作を指定するために追加されました。
      </p></li><li class="listitem"><p>ビットマップインデックス走査においてI/Oの先読みが可能になりました。(Greg Stark)
      </p><p>先読み量は<code class="varname">effective_io_concurrency</code>により制御されます。
この機能はカーネルが<code class="function">posix_fadvise()</code>サポートを有する場合のみ利用可能です。
      </p></li><li class="listitem"><p><code class="literal">FROM</code>句内の単純な集合を返す<acronym class="acronym">SQL</acronym>関数をインライン化しました。(Richard Rowell)
      </p></li><li class="listitem"><p>外側のリレーション内で特に一般的な値が結合キー値となる特別な状況を考慮することにより、複数バッチのハッシュ結合の性能を向上しました。(Bryce Cutt、Ramon Lawrence)
      </p></li><li class="listitem"><p><span class="quote">“<span class="quote">physical tlist</span>”</span>を抑制することにより複数バッチのハッシュ結合における一時データ量を軽減しました。(Michael Henderson、Ramon Lawrence)
      </p></li><li class="listitem"><p><code class="command">CREATE INDEX CONCURRENTLY</code>中のトランザクション内待機状態セッションを待機しないようにしました。(Simon)
      </p></li><li class="listitem"><p>共有キャッシュの無効化の性能を向上しました。(Tom)
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.178.5.4"><div class="titlepage"><div><div><h4 class="title">E.174.3.2. サーバ</h4></div></div></div><div class="sect4" id="id-1.11.6.178.5.4.2"><div class="titlepage"><div><div><h5 class="title">E.174.3.2.1. 設定</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">pg_settings</code>が有効な値を表示できるようにするために、多くの<code class="filename">postgresql.conf</code>設定が列挙型の値に変換されます。(Magnus)
       </p></li><li class="listitem"><p>プランナが取り出すものと仮定するカーソル行数を制御するための<code class="varname">cursor_tuple_fraction</code>パラメータを追加しました。(Robert Hell)
       </p></li><li class="listitem"><p><code class="filename">postgresql.conf</code>におけるカスタム変数クラスの名前にアンダースコアが使用できるようになりました。(Tom)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.4.3"><div class="titlepage"><div><div><h5 class="title">E.174.3.2.2. 認証とセキュリティ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>（安全ではない）<code class="literal">crypt</code>認証方式サポートを削除しました。(Magnus)
       </p><p>使用することができる平文ではないパスワード方式はまったくありませんでしたので、これは実質的に<span class="productname">PostgreSQL</span> 7.2クライアントライブラリで廃止されていました。
       </p></li><li class="listitem"><p><code class="filename">pg_ident.conf</code>内の正規表現をサポートします。(Magnus)
       </p></li><li class="listitem"><p><span class="productname">Kerberos</span>/<acronym class="acronym">GSSAPI</acronym>パラメータがpostmasterを再起動させることなく変更できるようになりました。(Magnus)
       </p></li><li class="listitem"><p>サーバ証明書ファイル内の<acronym class="acronym">SSL</acronym>証明書チェインをサポートします。(Andrew Gierth)
       </p><p>完全な証明書チェインを含めることにより、クライアントは、商用CAを使用する場合によくある、ローカルに保持した中間CAの証明書をすべてに持たせることなく証明書を検証できるようになります。
       </p></li><li class="listitem"><p><code class="varname">db_user_namespace</code>を有効にし、<code class="literal">MD5</code>認証を組み合わせて使用した場合に、適切なエラーメッセージを報告するようになりました。(Bruce)
       </p></li></ul></div></div><div class="sect4" id="RELEASE-8-4-PG-HBA-CONF"><div class="titlepage"><div><div><h5 class="title">E.174.3.2.3. <code class="filename">pg_hba.conf</code></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>すべての認証オプションが<code class="literal">name=value</code>構文を使用するように変更しました。(Magnus)
       </p><p>これにより<code class="literal">ldap</code>、<code class="literal">pam</code>、<code class="literal">ident</code>認証方式において互換性がない変更がなされました。
これらの方式を持つ<code class="filename">pg_hba.conf</code>はすべて新しい書式を使う形に書き換えなければなりません。
       </p></li><li class="listitem"><p><code class="literal">ident sameuser</code>オプションを削除しました。
代わりにこれをユーザマップの指定がない場合のデフォルトの動作としました。(Magnus)
       </p></li><li class="listitem"><p>すべての外部認証方式においてユーザマップパラメータを許可します。(Magnus)
       </p><p>これまではユーザマップは<code class="literal">ident</code>認証でのみサポートされていました。
       </p></li><li class="listitem"><p>クライアント証明要求を制御するための<code class="literal">clientcert</code>オプションを追加しました。(Magnus)
       </p><p>これまではサーバのデータディレクトリ内のルート証明書の有無により制御されていました。
       </p></li><li class="listitem"><p><acronym class="acronym">SSL</acronym>証明書経由の<span class="emphasis"><em>ユーザ</em></span>認証を可能にする<code class="literal">cert</code>認証方式を追加しました。(Magnus)
       </p><p>これまでの<acronym class="acronym">SSL</acronym>証明書はクライアントが証明書へのアクセスを持つかどうか検証するのみで、ユーザの認証は行いませんでした。
       </p></li><li class="listitem"><p><code class="literal">krb5</code>、<code class="literal">gssapi</code>、<code class="literal">sspi</code>のレルムおよび<code class="literal">krb5</code>のホスト設定が<code class="filename">pg_hba.conf</code>内で指定できるようになりました。(Magnus)
       </p><p>これらは<code class="filename">postgresql.conf</code>内の設定を上書きします。
       </p></li><li class="listitem"><p><code class="literal">krb5</code>、<code class="literal">gssapi</code>、<code class="literal">sspi</code>方式向けの<code class="varname">include_realm</code>パラメータを追加しました。(Magnus)
       </p><p>これにより異なるレルムからの同一ユーザがユーザマップを使用する別のデータベースユーザとして認証できるようになります。
       </p></li><li class="listitem"><p>即座にエラーを報告するために、ロード時に<code class="filename">pg_hba.conf</code>を完全に解析します。(Magnus)
       </p><p>これまでは、ファイル内のほとんどのエラーは、クライアントが接続しようとするまで検知されませんでした。
このためエラーのあるファイルによりシステムを使用できないようにしてしまいます。
新しい動作では、エラーが再読み込み時に検知されると、おかしなファイルは拒絶され、postmasterは過去の値を用いて継続します。
       </p></li><li class="listitem"><p><code class="filename">pg_hba.conf</code>内の最初のエラーを検知した後中断するのではなく、すべての解析エラーを表示します。(Selena Deckelmann)
       </p></li><li class="listitem"><p><span class="productname">Solaris</span>においてUnixドメインソケット経由での<code class="literal">ident</code>認証をサポートします。(Garick Hamlin)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.4.5"><div class="titlepage"><div><div><h5 class="title">E.174.3.2.4. 継続的なアーカイブ処理</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>チェックポイントをできる限り早い終了を強制するためのオプションを<code class="function">pg_start_backup()</code>に提供します。(Tom)
       </p><p>デフォルトの動作では過度なI/O消費を抑えますが、同時実行の問い合わせ活動がなければ意味がありません。
       </p></li><li class="listitem"><p>変更された<acronym class="acronym">WAL</acronym>ファイルがアーカイブされるまで<code class="function">pg_stop_backup()</code>を待機させます。(Simon)
       </p><p>これは<code class="function">pg_stop_backup()</code>完了時にバックアップが有効になったことを保証します。
       </p></li><li class="listitem"><p>アーカイブが有効な場合、すべてのトランザクションを即座にアーカイブすることができるように、シャットダウン時に最終WALセグメントをローテートします。(Guillaume Smet、Heikki)
       </p></li><li class="listitem"><p>継続的なアーカイブ処理のベースバックアップが実行している間、<span class="quote">“<span class="quote">smart</span>”</span>シャットダウンを遅延します。(Laurenz Albe)
       </p></li><li class="listitem"><p><span class="quote">“<span class="quote">fast</span>”</span>シャットダウンが要求された場合は継続的なアーカイブ処理のベースバックアップをキャンセルします。(Laurenz Albe)
       </p></li><li class="listitem"><p><code class="filename">recovery.conf</code>の論理型の変数が<code class="filename">postgresql.conf</code>の論理型変数と同じ範囲の文字列を取ることができるようになりました。(Bruce)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.4.6"><div class="titlepage"><div><div><h5 class="title">E.174.3.2.5. 監視</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="productname">PostgreSQL</span>設定ファイルが最後に読み込まれた日時を報告する<code class="function">pg_conf_load_time()</code>を追加しました。(George Gensure)
       </p></li><li class="listitem"><p>安全にバックエンドを停止させる<code class="function">pg_terminate_backend()</code>を追加しました（<code class="literal">SIGTERM</code>シグナルも動作します）。(Tom、Bruce)
       </p><p>常に単一バックエンドに対して<code class="literal">SIGTERM</code>を行うことは可能でしたが、これまでは未サポートとされていました。
この状況を試験したところいくつか不具合があり、それらを修正しました。
       </p></li><li class="listitem"><p>ユーザ定義関数呼び出し数と実行時間を追跡する機能を追加しました。(Martin Pihlak)
       </p><p>関数統計情報は新しいシステムビュー<code class="literal">pg_stat_user_functions</code>に出力されます。
追跡は新しいパラメータ<code class="varname">track_functions</code>により制御されます。
       </p></li><li class="listitem"><p><code class="literal">pg_stat_activity</code>内の最大問い合わせ文字列サイズの指定が<code class="varname">track_activity_query_size</code>パラメータでできるようになりました。(Thomas Lee)
       </p></li><li class="listitem"><p>性能改善を目的として、<span class="application">syslog</span>に送信する最大行数を増やしました。(Tom)
       </p></li><li class="listitem"><p>読み取りのみの設定変数<code class="varname">segment_size</code>、<code class="varname">wal_block_size</code>、<code class="varname">wal_segment_size</code>を追加しました。(Bernd Helmle)
       </p></li><li class="listitem"><p>デッドロックの報告時に、サーバログにデッドロックに関わるすべての問い合わせテキストを記録します。(Itagaki Takahiro)
       </p></li><li class="listitem"><p>特定のプロセスIDに関する情報を返す<code class="function">pg_stat_get_activity(pid)</code>関数を追加しました。(Magnus)
       </p></li><li class="listitem"><p>サーバの統計情報ファイルの場所を<code class="varname">stats_temp_directory</code>経由で指定できるようにしました。(Magnus)
       </p><p>これにより統計情報ファイルを<acronym class="acronym">RAM</acronym>上のディレクトリに格納させて、I/O要求を低減させることができます。
再起動に渡って保持できるように、起動時または終了時にファイルは通常の場所（<code class="literal">$PGDATA/global/</code>）にコピーされます。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.178.5.5"><div class="titlepage"><div><div><h4 class="title">E.174.3.3. 問い合わせ</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>       <code class="literal">WINDOW</code>関数のサポートを追加しました。(Hitoshi Harada)
      </p></li><li class="listitem"><p><code class="literal">WITH</code>句（CTE）のサポートを追加しました。これには<code class="literal">WITH RECURSIVE</code>が含まれます。(Yoshiyuki Asaba、Tatsuo Ishii、Tom)
      </p></li><li class="listitem"><p><code class="command">TABLE</code>コマンドを追加しました。(Peter)
      </p><p><code class="literal">TABLE tablename</code>は、<code class="literal">SELECT * FROM tablename</code>の標準SQLにおける省略形です。
      </p></li><li class="listitem"><p><code class="command">SELECT</code>（または<code class="literal">RETURNING</code>）の列出力ラベルを指定する時<code class="literal">AS</code>を省略可能にしました。(Hiroshi Saito)
      </p><p>これは列ラベルが<span class="productname">PostgreSQL</span>キーワードではない場合のみ動作します。
その他の場合は<code class="literal">AS</code>はまだ必要です。
      </p></li><li class="listitem"><p><code class="command">SELECT</code>結果リスト内において集合を返す関数を、タプルストアを介して結果を返す関数であったとしてもサポートします。(Tom)
      </p><p>具体的には、これはPL/pgSQLや他のPL言語で作成された関数をこの方法で呼び出すことができるようになったことを意味します。
      </p></li><li class="listitem"><p>集約問い合わせやグループ化問い合わせの出力において集合を返す関数をサポートします。(Tom)
      </p></li><li class="listitem"><p><code class="command">SELECT FOR UPDATE</code>/<code class="literal">SHARE</code>が継承ツリー上に動作できるようになりました。(Tom)
      </p></li><li class="listitem"><p><acronym class="acronym">SQL/MED</acronym>用の基盤を追加しました。(Martin Pihlak、Peter)
      </p><p>リモートまたは外部<acronym class="acronym">SQL/MED</acronym>機能はまだありません。
しかしこの変更は、<code class="filename">dblink</code>や<code class="filename">plproxy</code>のようなモジュール向けの接続情報の管理のための標準化と陳腐化されないシステムを提供します。
      </p></li><li class="listitem"><p>参照されるスキーマ、関数、演算子、演算子クラスが変更された時にキャッシュされた計画を無効化します。(Martin Pihlak、Tom)
      </p><p>これは、DDLの変更にその場で応答するシステム機能を改良します。
      </p></li><li class="listitem"><p>複合型の比較を可能とし、かつ、匿名複合型の配列を可能としました。(Tom)
      </p><p>これにより、<code class="literal">row(1, 1.1) = any (array[row(7, 7.7), row(1, 1.0)])</code>のような式が可能になります。
これは特に再帰問い合わせで有用です。
      </p></li><li class="listitem"><p>Unicode文字列リテラルと、たとえば<code class="literal">U&amp;'d\0061t\+000061'</code>といったコードポイントを使用した識別子指定のサポートを追加しました。(Peter)
      </p></li><li class="listitem"><p>文字列リテラルおよび<code class="command">COPY</code>データ内の<code class="literal">\000</code>を拒絶します。(Tom)
      </p><p>これまでは、これは受け付けられましたが、文字列定数の終端という作用がありました。
      </p></li><li class="listitem"><p>エラー位置を報告するパーサ機能を改良しました。(Tom)
      </p><p>エラー位置がデータ型の不一致などの多くの意味的なエラーに対して報告されるようになりました。
これまでは位置づけすることができませんでした。
      </p></li></ul></div><div class="sect4" id="id-1.11.6.178.5.5.3"><div class="titlepage"><div><div><h5 class="title">E.174.3.3.1. <code class="command">TRUNCATE</code></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>文レベルの<code class="literal">ON TRUNCATE</code>トリガをサポートします。(Simon)
       </p></li><li class="listitem"><p><code class="command">TRUNCATE TABLE</code>に<code class="literal">RESTART</code>/<code class="literal">CONTINUE IDENTITY</code>オプションを追加しました。(Zoltan Boszormenyi)
       </p><p>シーケンスの開始値を<code class="command">ALTER SEQUENCE START WITH</code>で変更できます。
       </p></li><li class="listitem"><p><code class="command">TRUNCATE tab1, tab1</code>が成功するようになりました。(Bruce)
       </p></li><li class="listitem"><p>独立した<code class="command">TRUNCATE</code>権限を追加しました。(Robert Haas)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.5.4"><div class="titlepage"><div><div><h5 class="title">E.174.3.3.2. <code class="command">EXPLAIN</code></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">EXPLAIN VERBOSE</code>が計画ノード毎に出力列を表示するようにしました。(Tom)
       </p><p>これまでの<code class="command">EXPLAIN VERBOSE</code>では問い合わせ計画の内部表現を出力しました。
（この動作は<code class="varname">debug_print_plan</code>を介して利用できるようになりました。）
       </p></li><li class="listitem"><p><code class="command">EXPLAIN</code>が個々のテーブルの副計画と初期計画とを識別するようにしました。(Tom)
       </p></li><li class="listitem"><p><code class="command">EXPLAIN</code>が<code class="varname">debug_print_plan</code>を順守するようにしました。(Tom)
       </p></li><li class="listitem"><p><code class="command">CREATE TABLE AS</code>に対する<code class="command">EXPLAIN</code>が可能です。(Peter)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.5.5"><div class="titlepage"><div><div><h5 class="title">E.174.3.3.3. <code class="literal">LIMIT</code>/<code class="literal">OFFSET</code></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">LIMIT</code>および<code class="literal">OFFSET</code>内の副問い合わせが可能です。(Tom)
       </p></li><li class="listitem"><p><code class="literal">LIMIT</code>/<code class="literal">OFFSET</code>機能に標準<acronym class="acronym">SQL</acronym>構文を追加しました。(Peter)
       </p><p>すなわち<code class="literal">OFFSET num {ROW|ROWS} FETCH {FIRST|NEXT} [num] {ROW|ROWS} ONLY</code>です。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.178.5.6"><div class="titlepage"><div><div><h4 class="title">E.174.3.4. オブジェクト操作</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>列レベル権限のサポートを追加しました。(Stephen Frost、KaiGai Kohei)
      </p></li><li class="listitem"><p><code class="literal">CASCADE</code>の必要性を軽減させるために複数オブジェクトの<code class="command">DROP</code>操作を再作成しました。(Alex Hunsaker)
      </p><p>例えば、テーブル<code class="literal">B</code>がテーブル <code class="literal">A</code>に依存している場合、コマンド<code class="literal">DROP TABLE A, B</code>が<code class="literal">CASCADE</code>オプションを必要としないようになりました。
      </p></li><li class="listitem"><p>オブジェクトの依存関係を削除を開始する前にロックを確実に取得することにより、同時実行の<code class="command">DROP</code>コマンドに関する各種問題を修正しました。(Tom)
      </p></li><li class="listitem"><p><code class="command">DROP</code>コマンド中の依存関係の報告を改良しました。(Tom)
      </p></li><li class="listitem"><p>標準<acronym class="acronym">SQL</acronym>に従い、<code class="command">CREATE TABLE AS</code>に<code class="literal">WITH [NO] DATA</code>句を追加しました。(Peter、Tom)
      </p></li><li class="listitem"><p>ユーザ定義のI/O変換キャストのサポートを追加しました。(Heikki)
      </p></li><li class="listitem"><p><code class="command">CREATE AGGREGATE</code>が<code class="type">internal</code>遷移データ型を使用できるようにしました。 (Tom)
      </p></li><li class="listitem"><p><code class="command">CREATE TYPE</code>に<code class="literal">LIKE</code>句を追加しました。(Tom)
      </p><p>これにより既存の型と同じ内部表現を使用するデータ型の作成が簡易になりました。
      </p></li><li class="listitem"><p>ユーザ定義の基本型に対する型カテゴリと<span class="quote">“<span class="quote">好ましい</span>”</span>状態指定を可能としました。(Tom)
      </p><p>これにより、ユーザ定義型の強制動作についてより多くの制御が可能になります。
      </p></li><li class="listitem"><p><code class="command">CREATE OR REPLACE VIEW</code>がビューの最後に列を追加できるようにしました。(Robert Haas)
      </p></li></ul></div><div class="sect4" id="id-1.11.6.178.5.6.3"><div class="titlepage"><div><div><h5 class="title">E.174.3.4.1. <code class="command">ALTER</code></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">ALTER TYPE RENAME</code>を追加しました。(Petr Jelinek)
       </p></li><li class="listitem"><p>シーケンスが初期値をリセットできるように<code class="command">ALTER SEQUENCE ... RESTART</code> （パラメータなし）を追加しました。(Zoltan Boszormenyi)
       </p></li><li class="listitem"><p>テーブル、インデックス、シーケンス、ビューを合理的に組み合わせられるように<code class="command">ALTER TABLE</code>の構文を変更しました。(Tom)
       </p><p>この変更により以下の新しい構文を使用することができます。

        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>           <code class="command">ALTER SEQUENCE OWNER TO</code>
          </p></li><li class="listitem"><p>           <code class="command">ALTER VIEW ALTER COLUMN SET/DROP DEFAULT</code>
          </p></li><li class="listitem"><p>           <code class="command">ALTER VIEW OWNER TO</code>
          </p></li><li class="listitem"><p>           <code class="command">ALTER VIEW SET SCHEMA</code>
          </p></li></ul></div><p>

実際ここでは新しい機能はありませんが、これまではこれらを行うためには<code class="command">ALTER TABLE</code>と記述する必要があり、混乱を招きました。
       </p></li><li class="listitem"><p><code class="command">ALTER TABLE ... ALTER COLUMN ... SET DATA TYPE</code>構文サポートを追加しました。(Peter)
       </p><p>これはすでにサポートされていた機能に関する標準<acronym class="acronym">SQL</acronym>の構文です。
       </p></li><li class="listitem"><p>物理的に<code class="type">OID</code>値を削除するために<code class="command">ALTER TABLE SET WITHOUT OIDS</code>がテーブルを書き換えるようにしました。(Tom)
       </p><p>また、<code class="type">OID</code>を追加できるようにテーブルを書き換えるための<code class="command">ALTER TABLE SET WITH OIDS</code>を追加しました。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.6.4"><div class="titlepage"><div><div><h5 class="title">E.174.3.4.2. データベース操作</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>未コミットな準備済みトランザクションが原因で<code class="command">CREATE</code>/<code class="command">DROP</code>/<code class="command">RENAME DATABASE</code>が失敗した場合の報告を改良しました。(Tom)
       </p></li><li class="listitem"><p><code class="varname">LC_COLLATE</code>および<code class="varname">LC_CTYPE</code>をデータベース単位の設定にしました。(Radek Strnad、Heikki)
       </p><p>これはこれまでデータベース単位の設定であった照合順を符号化方式に似せました。
       </p></li><li class="listitem"><p>データベース符号化方式、照合順（<code class="varname">LC_COLLATE</code>）、文字クラス（<code class="varname">LC_CTYPE</code>）が一致するかどうかの検査を改良しました。(Heikki、Tom)
       </p><p>新しいデータベースの符号化方式とロケール設定が<code class="literal">template0</code>からコピーした場合のみ変更できることに特に注意してください。
これは設定が一致しないデータを複製する可能性を防止します。
       </p></li><li class="listitem"><p>データベースを新しいテーブル空間に移動させる<code class="command">ALTER DATABASE SET TABLESPACE</code>を追加しました。(Guillaume Lelarge、Bernd Helmle)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.178.5.7"><div class="titlepage"><div><div><h4 class="title">E.174.3.5. ユーティリティ操作</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">CLUSTER</code>コマンドと<span class="application">clusterdb</span>に<code class="literal">VERBOSE</code>オプションを追加しました。(Jim Cox)
      </p></li><li class="listitem"><p>待機中のトリガイベントの記録に必要なメモリを減らしました。(Tom)
      </p></li></ul></div><div class="sect4" id="id-1.11.6.178.5.7.3"><div class="titlepage"><div><div><h5 class="title">E.174.3.5.1. インデックス</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ハッシュインデックスの構築速度とアクセス速度を大幅に改良しました。(Tom Raney、Shreya Bhargava)
       </p><p>これによりハッシュインデックスがB-Treeインデックスより高速になる場合もあり得ます。
しかしハッシュインデックスはまだクラッシュに対して安全ではありません。
       </p></li><li class="listitem"><p>ハッシュインデックスがインデックス対象の列の完全な値ではなく、ハッシュコードのみを保管するようにしました。(Xiao Meng)
       </p><p>これによりインデックス対象の列が長い場合ハッシュインデックスのサイズが大きく減少し、性能が向上しました。
       </p></li><li class="listitem"><p>GINインデックスにおける高速更新オプションを実装しました。(Teodor、Oleg)
       </p><p>このオプションは大きく更新速度を向上しますが、検索速度に小さな影響が現れます。
       </p></li><li class="listitem"><p><code class="literal">xxx_pattern_ops</code>インデックスが<code class="literal">LIKE</code>だけではなく、単純な等価演算子でも使用できるようになりました。(Tom)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.7.4"><div class="titlepage"><div><div><h5 class="title">E.174.3.5.2. 全文検索</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><acronym class="acronym">GIN</acronym>重みづけ検索を全文検索インデックスに対して行う際、<code class="literal">@@@</code>を使用する必要性をなくしました。(Tom、Teodor)
       </p><p>通常の<code class="literal">@@</code>テキスト検索演算子を代わりに使用することができます。
       </p></li><li class="listitem"><p><code class="literal">@@</code>テキスト検索操作用のオプティマイザの選択性関数を追加しました。(Jan Urbanski)
       </p></li><li class="listitem"><p>全文検索において前方一致が可能になりました。(Teodor Sigaev、Oleg Bartunov)
       </p></li><li class="listitem"><p>複数列に対する<acronym class="acronym">GIN</acronym>インデックスをサポートします。(Teodor Sigaev)
       </p></li><li class="listitem"><p>ネパール語とヒンディーアルファベットのサポートを改良しました。(Teodor)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.7.5"><div class="titlepage"><div><div><h5 class="title">E.174.3.5.3. <code class="command">VACUUM</code></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>独立したリレーション単位の<span class="quote">“<span class="quote">フォーク</span>”</span>ファイル内で空き領域を追跡します。(Heikki)
       </p><p><code class="command">VACUUM</code>で見つかった空き領域は、固定長の共有メモリ領域ではなく<code class="filename">*_fsm</code>ファイルに記録されるようになりました。
<code class="varname">max_fsm_pages</code>と<code class="varname">max_fsm_relations</code>設定は削除され、空き領域管理の管理作業を大きく簡易化しました。
       </p></li><li class="listitem"><p>バキューム処理を必要としないページを追跡する可視性マップを追加しました。(Heikki)
       </p><p>これにより、テーブルのごく一部のみがバキューム処理を必要とする場合に、<code class="command">VACUUM</code>がテーブルすべてを走査することを防ぐことができます。
可視性マップはリレーション単位の<span class="quote">“<span class="quote">フォーク</span>”</span>ファイル内に保管されます。
       </p></li><li class="listitem"><p><code class="command">VACUUM</code>が可視性マップを無視し、そしてタプルを凍結するためにテーブル全体に対して行われなければならないタイミングを制御する<code class="varname">vacuum_freeze_table_age</code>パラメータを追加しました。(Heikki)
       </p></li><li class="listitem"><p>トランザクションスナップショットをより入念に追跡します。(Alvaro)
       </p><p>これは、長期のトランザクションが存在する領域を回収する、<code class="command">VACUUM</code>能力を向上します。
       </p></li><li class="listitem"><p>リレーション単位の自動バキュームの指定する機能と<code class="command">CREATE TABLE</code>内で<acronym class="acronym">TOAST</acronym>パラメータを指定する機能を追加しました。(Alvaro、Euler Taveira de Oliveira)
       </p><p>自動バキュームオプションはシステムテーブル内に保管するために使用されます。
       </p></li><li class="listitem"><p><span class="application">vacuumdb</span>に<code class="literal">--freeze</code>オプションを追加しました。(Bruce)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.178.5.8"><div class="titlepage"><div><div><h4 class="title">E.174.3.6. データ型</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>全文検索類義語辞書用に<code class="literal">CaseSensitive</code>オプションを追加しました。(Simon)
      </p></li><li class="listitem"><p><code class="type">NUMERIC</code>除算の精度を改良しました。(Tom)
      </p></li><li class="listitem"><p><code class="type">int2</code>に<code class="type">int8</code>を使用した基本算術演算子を追加しました。(Tom)
      </p><p>これは、一部の状況における明示的なキャストの必要性を除去します。
      </p></li><li class="listitem"><p><code class="type">UUID</code>の入力にて4桁ごとに省略可能なハイフンが受け付けられるようになりました。(Robert Haas)
      </p></li><li class="listitem"><p>論理データ型の入力として<code class="literal">on</code>/<code class="literal">off</code>を可能としました。(Itagaki Takahiro)
      </p></li><li class="listitem"><p><code class="type">numeric</code>型の入力文字列において<code class="literal">NaN</code>の前後の空白を許可します。(Sam Mason)
      </p></li></ul></div><div class="sect4" id="id-1.11.6.178.5.8.3"><div class="titlepage"><div><div><h5 class="title">E.174.3.6.1. 時間に関するデータ型</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">0 BC</code>や<code class="literal">000</code>、<code class="literal">0000</code>という年を拒絶します。(Tom)
       </p><p>これまでは、これらは<code class="literal">1 BC</code>として解釈されました。
（注意：<code class="literal">0</code>および <code class="literal">00</code>という年はまだ2000年であると仮定されます。）
       </p></li><li class="listitem"><p>デフォルトの既知の時間帯省略形リストに<code class="literal">SGT</code>（シンガポール時間）を含めました。(Tom)
       </p></li><li class="listitem"><p><code class="type">date</code>型の値として<code class="literal">infinity</code>および<code class="literal">-infinity</code>をサポートします。(Tom)
       </p></li><li class="listitem"><p><code class="type">interval</code>リテラルの解析をより標準に近づけました。(Tom、Ron Mayer)
       </p><p>例えば<code class="literal">INTERVAL '1' YEAR</code>は想定通りになりました。
       </p></li><li class="listitem"><p>標準<acronym class="acronym">SQL</acronym>に従うために、<code class="type">interval</code>の秒の端数に関する精度を<code class="literal">second</code>キーワードの後に指定できるようにしました。(Tom)
       </p><p>これまでは、この精度は<code class="type">interval</code>キーワードの後に指定する必要がありました。
（後方互換性のためこの構文はまだサポートされますが、廃止予定です。）
データ型の定義は標準の書式を使用して出力されるようになりました。
       </p></li><li class="listitem"><p><acronym class="acronym">IS0 8601</acronym> <code class="type">interval</code>構文をサポートします。(Ron Mayer、Kevin Grittner)
       </p><p>例えば、<code class="literal">INTERVAL 'P1Y2M3DT4H5M6.7S'</code>がサポートされるようになりました。
       </p></li><li class="listitem"><p><code class="type">interval</code>値の出力方法を制御する<code class="varname">IntervalStyle</code>パラメータを追加しました。(Ron Mayer)
       </p><p>有効な値は、<code class="literal">postgres</code>、<code class="literal">postgres_verbose</code>、<code class="literal">sql_standard</code>、<code class="literal">iso_8601</code>です。
この設定はまた、一部のフィールドのみが正または負の指定を持つ場合の、負の<code class="type">interval</code>の取り扱い方法を制御します。
       </p></li><li class="listitem"><p><code class="type">timestamp</code>および<code class="type">interval</code>出力における秒の端数の取扱いの一貫性を改良しました。 (Ron Mayer)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.8.4"><div class="titlepage"><div><div><h5 class="title">E.174.3.6.2. 配列</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">ARRAY[...]::integer[]</code>など<code class="literal">ARRAY[]</code>式に適用されるキャストの扱いを改良しました。(Brendan Jurd)
       </p><p>これまでの<span class="productname">PostgreSQL</span>は、その後に続くキャストを参照することなく、<code class="literal">ARRAY[]</code>式のデータ型を決定しようと試みました。
これは多くの場合、特に<code class="literal">ARRAY[]</code>式が空または<code class="literal">NULL</code>などの曖昧な項目しか含まないような場合で不要に失敗することがあり得ました。
配列要素が必要とする型を決定する時にキャストが考慮されるようになりました。
       </p></li><li class="listitem"><p>標準<acronym class="acronym">SQL</acronym>に一致させるため、<code class="type">ARRAY</code>次元の<acronym class="acronym">SQL</acronym>構文を省略可能にしました。(Peter)
       </p></li><li class="listitem"><p>配列次元数を返す<code class="function">array_ndims()</code>を追加しました。(Robert Haas)
       </p></li><li class="listitem"><p>配列の指定次元の長さを返す <code class="function">array_length()</code>を追加しました。(Jim Nasby、Robert Haas、Peter Eisentraut)
       </p></li><li class="listitem"><p>すべての集約した値を単一の配列として返す<code class="function">array_agg()</code>集約関数を追加しました。(Robert Haas、Jeff Davis、Peter)
       </p></li><li class="listitem"><p>配列を個々の行値に変換する<code class="function">unnest()</code>を追加しました。(Tom)
       </p><p>これは<code class="function">array_agg()</code>の反対です。
       </p></li><li class="listitem"><p>初期値を持つ配列を作成する<code class="function">array_fill()</code>を追加しました。(Pavel Stehule)
       </p></li><li class="listitem"><p>配列の添え字範囲を簡単に生成する<code class="function">generate_subscripts()</code>を追加しました。(Pavel Stehule)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.8.5"><div class="titlepage"><div><div><h5 class="title">E.174.3.6.3. 大規模値の格納（<acronym class="acronym">TOAST</acronym>）</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>値に対する<acronym class="acronym">TOAST</acronym>圧縮は32バイト程度とみなします（これまでは256バイト）。(Greg Stark)
       </p></li><li class="listitem"><p><acronym class="acronym">TOAST</acronym>圧縮を使用する前に空き領域が最低25%必要です。
（これまでは小規模値では20%、大規模値ではその規模程度が必要でした。）(Greg)
       </p></li><li class="listitem"><p>TOAST可能なフィールドが大規模フィールドと小規模フィールドとが混在する行に対して、大規模値を優先して行外に押し出し、小規模な値を不要に圧縮することを防ぐことができるように、<acronym class="acronym">TOAST</acronym>の発見的処理過程を改良しました。(Greg、Tom)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.178.5.9"><div class="titlepage"><div><div><h4 class="title">E.174.3.7. 関数</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="function">setseed()</code>が<code class="literal">-1</code>から<code class="literal">1</code>までの値（<code class="literal">0</code>から<code class="literal">1</code>ではありません）を受け付けられることを文書化し、そしてその有効範囲を強制するようにしました。(Kris Jurka)
      </p></li><li class="listitem"><p><code class="function">lo_import(filename, oid)</code>サーバサイド関数を追加しました。(Tatsuo)
      </p></li><li class="listitem"><p><code class="function">quote_nullable()</code>を追加しました。
この動作は<code class="function">quote_literal()</code>と似ていますが、引数NULLに対して文字列<code class="literal">NULL</code>を返します。(Brendan Jurd)
      </p></li><li class="listitem"><p>複数のテキスト断片を抽出できるように全文検索<code class="function">headline()</code>関数を改良しました。(Sushant Sinha)
      </p></li><li class="listitem"><p>データの変更がない更新に対するオーバーヘッドを防止するための<code class="function">suppress_redundant_updates_trigger()</code>トリガ関数を追加しました。(Andrew)
      </p></li><li class="listitem"><p><code class="type">numeric</code>除算を丸めなく実行する<code class="function">div(numeric, numeric)</code>を追加しました。(Tom)
      </p></li><li class="listitem"><p><code class="function">generate_series()</code>の<code class="type">timestamp</code>版と<code class="type">timestamptz</code>版を追加しました。(Hitoshi Harada)
      </p></li></ul></div><div class="sect4" id="id-1.11.6.178.5.9.3"><div class="titlepage"><div><div><h5 class="title">E.174.3.7.1. オブジェクト情報関数</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>現在実行中の問い合わせを知る必要がある関数による使用を目的とした<code class="function">current_query()</code>を実装しました。(Tomas Doran)
       </p></li><li class="listitem"><p>パーサのキーワードのリストを返す<code class="function">pg_get_keywords()</code>を追加しました。(Dave Page)
       </p></li><li class="listitem"><p>関数定義を見るための<code class="function">pg_get_functiondef()</code>を追加しました。(Abhijit Menon-Sen)
       </p></li><li class="listitem"><p>変数を含まない式のデパース時に<code class="function">pg_get_expr()</code>2番目の引数をゼロにすることができます。
       </p></li><li class="listitem"><p><code class="function">pg_relation_size()</code>が<code class="literal">regclass</code>を使用するように変更しました。(Heikki)
       </p><p><code class="function">pg_relation_size(data_type_name)</code>は動作しなくなりました。
       </p></li><li class="listitem"><p><code class="literal">pg_settings</code>の出力に<code class="literal">boot_val</code>列と<code class="literal">reset_val</code>列を追加しました。(Greg Smith)
       </p></li><li class="listitem"><p>設定ファイル内の変数集合のために、<code class="literal">pg_settings</code>の出力にソースファイル名と行番号列を追加しました。(Magnus、Alvaro)
       </p><p>セキュリティ上の理由により、これらの列はスーパーユーザのみが参照することができます。
       </p></li><li class="listitem"><p><code class="varname">CURRENT_CATALOG</code>、<code class="varname">CURRENT_SCHEMA</code>、<code class="varname">SET CATALOG</code>、<code class="varname">SET SCHEMA</code>のサポートを追加しました。(Peter)
       </p><p>これらは既存の機能に対して標準<acronym class="acronym">SQL</acronym>構文を提供します。
       </p></li><li class="listitem"><p>任意の値のデータ型を返す<code class="function">pg_typeof()</code>を追加しました。(Brendan Jurd)
       </p></li><li class="listitem"><p><code class="function">version()</code>は、サーバが32ビットバイナリか64ビットバイナリかについての情報を返すようにしました。(Bruce)
       </p></li><li class="listitem"><p>情報スキーマの列<code class="structfield">is_insertable_into</code>と<code class="structfield">is_updatable</code>が一貫性を持つ動作をするよう修正しました。(Peter)
       </p></li><li class="listitem"><p>情報スキーマの<code class="structfield">datetime_precision</code>列の動作を改良しました。 (Peter)
       </p><p>これらの列は<code class="type">date</code>列ではゼロを、<code class="type">time</code>、<code class="type">timestamp</code>、精度宣言がない<code class="type">interval</code>では6（デフォルト精度）を表示するようになりました。
これまではNULLを表示していました。
       </p></li><li class="listitem"><p>残りの集合を返す組み込み関数が<code class="literal">OUT</code>パラメータを使用するように変換しました。(Jaime Casanova)
       </p><p>これにより次の関数を列リストの指定を行わずに呼び出すことができるようになります。
<code class="function">pg_show_all_settings()</code>、<code class="function">pg_lock_status()</code>、<code class="function">pg_prepared_xact()</code>、<code class="function">pg_prepared_statement()</code>、<code class="function">pg_cursor()</code>
       </p></li><li class="listitem"><p><code class="function">pg_*_is_visible()</code>および<code class="function">has_*_privilege()</code>関数が無効なOIDに対して、エラーとならずに<code class="literal">NULL</code>を返すようにしました。(Tom)
       </p></li><li class="listitem"><p>1度の呼び出しで複数の権限の論理和を調査できるように<code class="function">has_*_privilege()</code>関数を拡張しました。(Stephen Frost、Tom)
       </p></li><li class="listitem"><p><code class="function">has_column_privilege()</code>および<code class="function">has_any_column_privilege()</code>関数を追加しました。(Stephen Frost、Tom)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.9.4"><div class="titlepage"><div><div><h5 class="title">E.174.3.7.2. 関数作成</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>可変長引数の関数（引数の数が変動する関数）をサポートします。(Pavel Stehule)
       </p><p>終端までの引数のみを省略可能とすることができます。
またこれらはすべて同じデータ型でなければなりません。
       </p></li><li class="listitem"><p>関数引数のデフォルト値をサポートします。(Pavel Stehule)
       </p></li><li class="listitem"><p><code class="command">CREATE FUNCTION ... RETURNS TABLE</code>句を追加しました。(Pavel Stehule)
       </p></li><li class="listitem"><p><acronym class="acronym">SQL</acronym>言語関数が<code class="command">INSERT</code>/<code class="command">UPDATE</code>/<code class="command">DELETE</code> <code class="literal">RETURNING</code>句の出力を返すことができます。(Tom)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.9.5"><div class="titlepage"><div><div><h5 class="title">E.174.3.7.3. PL/pgSQLサーバサイド言語</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>より簡単に動的問い合わせ文字列にデータを挿入するための<code class="literal">EXECUTE USING</code>をサポートします。(Pavel Stehule)
       </p></li><li class="listitem"><p><code class="literal">FOR</code>ループを使用するカーソルの結果全体を繰り返すことが可能になりました。(Pavel Stehule)
       </p></li><li class="listitem"><p><code class="literal">RETURN QUERY EXECUTE</code>をサポートします。(Pavel Stehule)
       </p></li><li class="listitem"><p><code class="literal">RAISE</code>コマンドを改良しました。(Pavel Stehule)

        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><code class="literal">DETAIL</code>および<code class="literal">HINT</code>フィールドをサポートします。
          </p></li><li class="listitem"><p><code class="literal">SQLSTATE</code>エラーコードの指定をサポートします。
          </p></li><li class="listitem"><p>例外名パラメータをサポートします。
          </p></li><li class="listitem"><p>そこで起こったエラーを再発行できるように例外ブロックにおいてパラメータ無しの<code class="literal">RAISE</code>を可能としました。
          </p></li></ul></div><p>
       </p></li><li class="listitem"><p><code class="literal">EXCEPTION</code>リスト内で<code class="varname">SQLSTATE</code>コードの指定を可能としました。(Pavel Stehule)
       </p><p>これは独自の<code class="varname">SQLSTATE</code>コードを扱う際に有用です。
       </p></li><li class="listitem"><p><code class="literal">CASE</code>文をサポートします。(Pavel Stehule)
       </p></li><li class="listitem"><p><code class="command">RETURN QUERY</code>が特殊な<code class="literal">FOUND</code>と<code class="command">GET DIAGNOSTICS</code> <code class="literal">ROW_COUNT</code>変数を設定するようにしました。(Pavel Stehule)
       </p></li><li class="listitem"><p><code class="command">FETCH</code>および<code class="command">MOVE</code>が<code class="command">GET DIAGNOSTICS</code> <code class="literal">ROW_COUNT</code>変数を設定するようにしました。(Andrew Gierth)
       </p></li><li class="listitem"><p>ラベル無しの<code class="command">EXIT</code>が常にもっとも内側のループを抜けるようにしました。(Tom)
       </p><p>これまでは、他のループよりも入れ子に最も近い<code class="literal">BEGIN</code>ブロックが存在すると、そのブロックが代わりに終了します。
新しい動作はOracle(TM)と一致するもので、かつ、これまで文書で説明していたものです。
       </p></li><li class="listitem"><p>文字列リテラルと入れ子状ブロックのコメントの処理が主SQLパーサの処理と一致するようにしました。(Tom)
       </p><p>具体的には、<code class="command">RAISE</code>内の書式文字列が、<code class="varname">standard_conforming_strings</code>に従うようになることを含め、他の文字列リテラルと同じように動作するようになりました。
またこの変更は、<code class="varname">standard_conforming_strings</code>が有効な場合に有効なコマンドが失敗するといった他の問題も修正します。
       </p></li><li class="listitem"><p>入れ子状の例外ブロックの深さが異なる場所で、同一関数が呼び出された時のメモリリークを防止します。(Tom)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.178.5.10"><div class="titlepage"><div><div><h4 class="title">E.174.3.8. クライアントアプリケーション</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">pg_ctl restart</code>がコマンドライン引数を保持するよう修正しました。(Bruce)
      </p></li><li class="listitem"><p><code class="literal">-W</code>/<code class="literal">--password</code>オプションを持つすべてのユーティリティにおいて、パスワードプロンプト表示を防止する<code class="literal">-w</code>/<code class="literal">--no-password</code>オプションを追加しました。(Peter)
      </p></li><li class="listitem"><p><span class="application">createdb</span>、<span class="application">createuser</span>、<span class="application">dropdb</span>、<span class="application">dropuser</span>の<code class="option">-q</code>（メッセージ無し）オプションを削除しました。(Peter)
      </p><p>これらのオプションは<span class="productname">PostgreSQL</span> 8.3から効果がないものでした。
      </p></li></ul></div><div class="sect4" id="id-1.11.6.178.5.10.3"><div class="titlepage"><div><div><h5 class="title">E.174.3.8.1. <span class="application">psql</span></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>起動時の冗長なバナーを除去しました。単に<code class="literal">help</code>を勧めるだけのものになりました。(Joshua Drake)
       </p></li><li class="listitem"><p><code class="literal">help</code>が一般的なバックスラッシュコマンドを表示するようにしました。(Greg Sabino Mullane)
       </p></li><li class="listitem"><p>画面幅に合わせて出力を、または、<code class="literal">\pset columns</code>が設定された場合はファイルもしくはパイプへの出力も改行する、<code class="literal">\pset format wrapped</code>モードを追加しました。(Bryce Nesbitt)
       </p></li><li class="listitem"><p><code class="command">\pset</code>内で<code class="literal">on</code>および<code class="literal">off</code>だけでなく、サポートされるすべての論理型の値の綴りが利用できるようにしました。(Bruce)
       </p><p>これまでは、<span class="quote">“<span class="quote">off</span>”</span>以外の文字列は警告なく<code class="literal">true</code>を意味するものと解釈されていました。
<span class="application">psql</span>は認識できない綴りについて警告を出すようになりました（ただしまだ<code class="literal">true</code>と解釈されます）。
       </p></li><li class="listitem"><p>幅が広い出力の際にページャを使用します。(Bruce)
       </p></li><li class="listitem"><p>一文字のバックスラッシュコマンドと最初の引数との間に空白を要求します。(Bernd Helmle)
       </p><p>これにより歴史的なあいまいさの根源がなくなりました。
       </p></li><li class="listitem"><p>スキーマ修飾および引用符付きの識別子に対するタブ補間サポートを改良しました。(Greg Sabino Mullane)
       </p></li><li class="listitem"><p><code class="command">\timing</code>に省略可能な<code class="literal">on</code>/<code class="literal">off</code>引数を追加しました。(David Fetter)
       </p></li><li class="listitem"><p>複数行に渡ってアクセス制御権限を表示します。(Brendan Jurd、Andreas Scherbaum)
       </p></li><li class="listitem"><p><code class="command">\l</code>がデータベースアクセス権限を表示するようにしました。(Andrew Gilligan)
       </p></li><li class="listitem"><p>権限がある場合<code class="command">\l+</code>がデータベース容量を表示するようにしました。(Andrew Gilligan)
       </p></li><li class="listitem"><p>関数定義を編集するための<code class="command">\ef</code>コマンドを追加しました。 (Abhijit Menon-Sen)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.10.4"><div class="titlepage"><div><div><h5 class="title">E.174.3.8.2. <span class="application">psql</span> \d*コマンド</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">S</code>修飾子が指定された場合のみ、パターン引数を持たない<code class="command">\d*</code>コマンドがシステムオブジェクトを表示するようにしました。(Greg Sabino Mullane、Bruce)
       </p><p>これまでの動作では<code class="command">\d</code>の亜種の間での一貫性がありませんでした。
また、ほとんどの場合ユーザオブジェクトのみを参照する簡単な方法がありませんでした。
       </p></li><li class="listitem"><p>現行バージョンのサーバだけではなく、古めの（7.4までの）バージョンの<span class="productname">PostgreSQL</span>サーバで<code class="command">\d*</code>コマンドが動作するように改良しました。(Guillaume Lelarge)
       </p></li><li class="listitem"><p><code class="command">\d</code>が対象テーブルを参照する外部キー制約を表示するようにしました。(Kenneth D'Souza)
       </p></li><li class="listitem"><p>シーケンスに対する<code class="command">\d</code>がその列値を表示するようにしました。(Euler Taveira de Oliveira)
       </p></li><li class="listitem"><p><code class="command">\d+</code>の表示に列の格納種類や関連するその他のオプションを追加しました。(Gregory Stark、Euler Taveira de Oliveira)
       </p></li><li class="listitem"><p><code class="command">\dt+</code>出力にリレーション容量を表示します。(Dickson S. Guedes)
       </p></li><li class="listitem"><p><code class="command">\dT+</code>において<code class="literal">enum</code>型で取り得る値を表示します。(David Fetter)
       </p></li><li class="listitem"><p>キャスト内に存在するデータ型に一致するワイルドカードパターンを、<code class="command">\dC</code>が受け付けることを可能としました。(Tom)
       </p></li><li class="listitem"><p><code class="command">\df</code>の出力に関数種類列を追加しました。
また、選択した種類の関数のみを列挙するオプションを追加しました。(David Fetter)
       </p></li><li class="listitem"><p><code class="command">\df</code>が<code class="type">cstring</code>型を取る、または、返す関数を隠さないようにしました。(Tom)
       </p><p>これまでは、そのほとんどが興味を引くとは思われないデータ型のI/O関数であったため、こうした関数は隠れていました。
デフォルトのシステム関数の隠ぺいに関する新しいポリシーではこの欠点を不要にします。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.10.5"><div class="titlepage"><div><div><h5 class="title">E.174.3.8.3. <span class="application">pg_dump</span></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ダンプをテーブル空間の構造が異なるクラスタにリストアできるように、<span class="application">pg_dump</span>/<span class="application">pg_dumpall</span>/<span class="application">pg_restore</span>に<code class="literal">--no-tablespaces</code>オプションを追加しました。(Gavin Roy)
       </p></li><li class="listitem"><p><span class="application">pg_dump</span>と<span class="application">pg_dumpall</span>から<code class="option">-d</code>および<code class="option">-D</code>オプションを削除しました。(Tom)
       </p><p>これらのオプションは、他の<span class="productname">PostgreSQL</span>クライアントアプリケーションにおけるデータベース名を選択するためのオプションと、あまりに頻繁に混乱されていました。
この機能はまだ利用可能ですが、長めのオプション名<code class="option">--inserts</code>または<code class="option">--column-inserts</code>と記述する必要があります。
       </p></li><li class="listitem"><p><span class="application">pg_dump</span>と<span class="application">pg_dumpall</span>から<code class="option">-i</code>および<code class="option">--ignore-version</code>オプションを削除しました。(Tom)
       </p><p>このオプションを使用してもエラーにはなりませんが、何も効果はありません。
安全のためバージョン検査が必須となりましたので、このオプションは削除されました。
       </p></li><li class="listitem"><p>ダンプまたはリストア中の<code class="varname">statement_timeout</code>を無効にしました。(Joshua Drake)
       </p></li><li class="listitem"><p><span class="application">pg_dump</span>/<span class="application">pg_dumpall</span>に<code class="option">--lock-wait-timeout</code>オプションを追加しました。(David Gould)
       </p><p>これにより、指定期間中に共有ロックを獲得できなかった場合に、ダンプが失敗できるようになりました。
       </p></li><li class="listitem"><p>参照テーブルより前に外部キーにより参照されるテーブルをダンプするために<span class="application">pg_dump</span> <code class="literal">--data-only</code>の出力順序を変更します。(Tom)
       </p><p>これにより、外部キーがすでに存在する時にデータロードができるようになりました。
巡回参照により安全な順序付けができない場合、<code class="literal">NOTICE</code>が発行されます。
       </p></li><li class="listitem"><p><span class="application">pg_dump</span>、<span class="application">pg_dumpall</span>、<span class="application">pg_restore</span>が指定したロールを使用することができるようになりました。(Benedek László)
       </p></li><li class="listitem"><p><span class="application">pg_restore</span>がリストアするために複数の同時接続を使用できるようになりました。(Andrew)
       </p><p>同時接続数は<code class="literal">--jobs</code>オプションにより制御されます。
これは独自書式のアーカイブでのみサポートされます。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.178.5.11"><div class="titlepage"><div><div><h4 class="title">E.174.3.9. プログラミングツール</h4></div></div></div><div class="sect4" id="id-1.11.6.178.5.11.2"><div class="titlepage"><div><div><h5 class="title">E.174.3.9.1. <span class="application">libpq</span></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>新しい<code class="function">lo_import_with_oid()</code>関数を使用して、ラージオブジェクトのインポートの際に<code class="type">OID</code>を指定できるようになりました。(Tatsuo)
       </p></li><li class="listitem"><p><span class="quote">“<span class="quote">イベント</span>”</span>サポートを追加しました。(Andrew Chernow、Merlin Moncure)
       </p><p>これは、<code class="structname">PGconn</code>および<code class="structname">PGresult</code>オブジェクトに関連付けされた非公開データを管理するためのコールバックを登録する機能を追加したものです。
       </p></li><li class="listitem"><p>複数のエラーメッセージを複数行のエラー報告として返すことができるようにエラー処理を改良しました。(Magnus)
       </p></li><li class="listitem"><p><code class="function">PQexecParams()</code>と関連する関数が、空の問い合わせに対して<code class="varname">PGRES_EMPTY_QUERY</code>を返すようにしました。(Tom)
       </p><p>これまでは<code class="varname">PGRES_COMMAND_OK</code>を返していました。
       </p></li><li class="listitem"><p>Windowsにおける<code class="function">WSACleanup()</code>のオーバーヘッドを防止する方法を文書化しました。(Andrew Chernow)
       </p></li><li class="listitem"><p>デフォルトのデータベースユーザ名を決定する際にKerberosチケットに依存しません。(Magnus)
       </p><p>これまでは、Kerberos機能を有効に構築したlibpqでは、Kerberos認証を使用しない接続であったとしても、利用可能なKerberosチケットのプリンシパル名をデフォルトのデータベースユーザ名として使用しました。
これは一貫性がなく混乱を招くものと思われます。
デフォルトのユーザ名はKerberosの有無に関係なく同じ方法で決定されるようになりました。
しかし、Kerberos認証を使用する場合、データベースユーザ名はチケットと一致しなければならないことに注意してください。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.11.3"><div class="titlepage"><div><div><h5 class="title">E.174.3.9.2. <span class="application">libpq</span> <acronym class="acronym">SSL</acronym>（セキュアソケットレイア）サポート</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><acronym class="acronym">SSL</acronym>接続の証明書検証を修正しました。(Magnus)
       </p><p><span class="application">libpq</span>は、<acronym class="acronym">SSL</acronym>接続を確立する際に、証明書とサーバ名の検証をサポートするようになりました。
検証においてルート証明書が利用できない場合、<acronym class="acronym">SSL</acronym>接続は失敗します。
<code class="literal">sslmode</code>パラメータは証明書検証を有効にするため、および、その検査レベルを設定するために使用されます。
デフォルトではまだまったく検証を行わず、クライアント上でルート証明書を必要とすることなくSSLを有効にしたサーバと接続することができます。
       </p></li><li class="listitem"><p>ワイルドカードサーバ証明書をサポートします。(Magnus)
       </p><p>証明書の<acronym class="acronym">CN</acronym>が<code class="literal">*</code>で始まる場合、ホスト名との比較を行う際にワイルドカードとして扱われ、複数のサーバで同じ証明書を使用できるようになります。
       </p></li><li class="listitem"><p>クライアント証明書ファイルの位置を指定できるようになりました。(Mark Woodward、Alvaro、Magnus)
       </p></li><li class="listitem"><p>OpenSSL/libcryptoの初期化について多くを制御できるように<code class="function">PQinitOpenSSL</code>関数を追加しました。(Andrew Chernow)
       </p></li><li class="listitem"><p>データベース接続が開いたままの場合、<span class="application">libpq</span>が<span class="application">OpenSSL</span>コールバックの登録を取り消すようにしました。(Bruce、Magnus、Russell Smith)
       </p><p>これはlibpqライブラリをアンロードするアプリケーションで必要とされます。
こうしないと無効な<span class="application">OpenSSL</span>コールバックが残ってしまいます。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.11.4"><div class="titlepage"><div><div><h5 class="title">E.174.3.9.3. <span class="application">ecpg</span></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>翻訳メッセージのサポートを追加しました。(Euler Taveira de Oliveira)
       </p></li><li class="listitem"><p>ecpgパーサが自動的にサーバパーサから生成されるようになりました。(Michael)
       </p><p>これまではecpgパーサは手作業で保守されていました。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.178.5.11.5"><div class="titlepage"><div><div><h5 class="title">E.174.3.9.4. サーバプログラミングインタフェース（<acronym class="acronym">SPI</acronym>）</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>行外のパラメータを持つ、一回しか使用されない計画をサポートするようになりました。(Tom)
       </p></li><li class="listitem"><p><code class="function">SPI_execute()</code>に新しい戻り値コード<code class="varname">SPI_OK_REWRITTEN</code>を追加しました。(Heikki)
       </p><p>これは、コマンドが別の種類のコマンドに書き換えられた時に使用されます。
       </p></li><li class="listitem"><p><code class="filename">executor/spi.h</code>から不要なインクルードを削除しました。(Tom)
       </p><p>これらをインクルードするために<code class="filename">spi.h</code>に依存している場合、SPIを使用するモジュールにいくつか<code class="literal">#include</code>行の追加が必要となる場合があります。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.178.5.12"><div class="titlepage"><div><div><h4 class="title">E.174.3.10. 構築オプション</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>構築システムを<span class="productname">Autoconf</span> 2.61を使用するように更新しました。 (Peter)
      </p></li><li class="listitem"><p>ソースコードから構築する場合<span class="productname">GNU bison</span>が必要です。(Peter)
      </p><p>実質ここ数年で、これは必要とされていましたが、他のパーサツールをサポートしようという要望がなくなりました。
      </p></li><li class="listitem"><p><span class="application">pg_config</span> <code class="literal">--htmldir</code>オプションを追加しました。(Peter)
      </p></li><li class="listitem"><p>サーバ内部で<code class="type">float4</code>を値渡しします。(Zoltan Boszormenyi)
      </p><p>過去の動作を使用するために<code class="literal">--disable-float4-byval</code>オプションを<span class="application">configure</span>に追加しました。
この変更により、旧スタイル（バージョン0）の呼び出し規約を使用し、<code class="type">float4</code>値を渡したり返したりする外部C関数は動作しなくなります。
このため、こうした関数があり、それを変更したくない場合は、この<span class="application">configure</span>オプションが必要になるでしょう。
      </p></li><li class="listitem"><p>64ビットプラットフォーム上では、サーバ内部で<code class="type">float8</code>、<code class="type">int8</code>、これらに関連するデータ型を値渡しします。(Zoltan Boszormenyi)
      </p><p>過去の動作を使用するために<code class="literal">--disable-float8-byval</code>オプションを<span class="application">configure</span>に追加しました。
上記のとおり、この変更は旧スタイルの外部C関数の動作に影響を与えます。
      </p></li><li class="listitem"><p><code class="literal">--with-segsize</code>、<code class="literal">--with-blocksize</code>、<code class="literal">--with-wal-blocksize</code>、<code class="literal">--with-wal-segsize</code>オプションをconfigureに追加しました。(Zdenek Kotala、Tom)
      </p><p>これまでは<code class="filename">pg_config_manual.h</code>を編集して変更するしかなかった、複数の定数を簡単に構築時に制御することができるようになります。
      </p></li><li class="listitem"><p><span class="productname">Solaris</span> 2.5でスレッド版の構築ができるようになりました。(Bruce)
      </p></li><li class="listitem"><p><span class="productname">Solaris</span>上でシステムの<code class="function">getopt_long()</code>を使用します。(Zdenek Kotala、Tom)
      </p><p>これにより、Solarisユーザが期待するものに、より矛盾がないオプション処理ができるようになりました。
      </p></li><li class="listitem"><p><span class="productname">Linux</span>における<span class="productname">Sun Studio</span>コンパイラのサポートを追加しました。(Julius Stroffek)
      </p></li><li class="listitem"><p>バックエンドの<span class="application">gettext</span>ドメインにメジャーバージョン番号を追加しました。
また、ライブラリの<span class="application">gettext</span>ドメインに<code class="literal">soname</code>メジャーバージョン番号を追加しました。(Peter)
      </p><p>これは複数のバージョンの並行インストレーションを簡易化します。
      </p></li><li class="listitem"><p><span class="application">gcov</span>を使用したコードカバレッジ試験のサポートを追加しました。(Michelle Caisse)
      </p></li><li class="listitem"><p><span class="productname">Mingw</span>および<span class="productname">Cygwin</span>におけるout-of-tree構築が可能です。(Richard Evans)
      </p></li><li class="listitem"><p>ソースのクロスコンパイルを行うプラットフォームとしての<span class="productname">Mingw</span>の使用を修正しました。(Peter)
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.178.5.13"><div class="titlepage"><div><div><h4 class="title">E.174.3.11. ソースコード</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>       64ビットのタイムゾーンデータファイルをサポートします。(Heikki)
      </p><p>これは、2038年以降の夏時間（<acronym class="acronym">DST</acronym>）計算のサポートを追加します。
      </p></li><li class="listitem"><p>プラットフォームの<code class="type">time_t</code>データ型の使用を廃止しました。(Tom)
      </p><p>一部のプラットフォームでは64ビットの<code class="type">time_t</code>に移行されましたが、一部はまだです。
またWindowsではまだどうするか決められていません。
しかし、<code class="type">time_t</code>と同じ意味を持つ<code class="type">pg_time_t</code>定義は（プラットフォームが64ビット整数型を持たない限り）常に64ビットです。
そして、すべてのモジュールのAPIとディスク上のデータ書式においてこの型を使用します。
      </p></li><li class="listitem"><p>クロスコンパイル時の時間帯データベース処理における不具合を修正しました。(Richard Evans)
      </p></li><li class="listitem"><p>複数ではなく単一処理でバックエンドのオブジェクトファイルをリンクします。(Peter)
      </p></li><li class="listitem"><p>複数形のより良い翻訳を可能にするために<span class="application">gettext</span>サポートを改良しました。(Peter)
      </p></li><li class="listitem"><p>PL言語にメッセージ翻訳サポートを追加しました。(Alvaro、Peter)
      </p></li><li class="listitem"><p>より多くの<span class="application">DTrace</span>プローブを追加しました。(Robert Lor)
      </p></li><li class="listitem"><p><span class="application">macOS Leopard</span>やSolaris以外のプラットフォーム上の<span class="application">DTrace</span>サポートを有効にしました。(Robert Lor)
      </p></li><li class="listitem"><p>C文字列と<code class="type">text</code>データの間の変換を、この目的のために共通化された関数を提供することで、簡易化および標準化しました。(Brendan Jurd、Tom)
      </p></li><li class="listitem"><p>フロントエンドプログラムが<code class="filename">postgres.h</code>をインクルードすることなくインクルードすることができるように、<code class="filename">include/catalog/</code>ヘッダファイルを整理しました。(Zdenek Kotala)
      </p></li><li class="listitem"><p><code class="type">name</code>をcharと同じ整列とし、インデックス内の<code class="type">name</code>項目のゼロ埋めを抑制します。(Tom)
      </p></li><li class="listitem"><p>動的にロードされたコードが<code class="function">exit()</code>を実行した場合の復旧を改良しました。(Tom)
      </p></li><li class="listitem"><p>プラグインにエグゼキュータを監視させるためのフックを追加しました。(Itagaki Takahiro)
      </p></li><li class="listitem"><p>プランナの統計情報検索動作を上書きできるようにするフックを追加しました。(Simon Riggs)
      </p></li><li class="listitem"><p>独自の共有メモリ要求のために<code class="function">shmem_startup_hook()</code>を追加しました。(Tom)
      </p></li><li class="listitem"><p>インデックスアクセスメソッド<code class="function">amgetmulti</code>のエントリポイントを<code class="function">amgetbitmap</code>に置き換えました。
また、実行時の演算子損失の決定をサポートするために<code class="function">amgettuple</code>のAPIを拡張しました。(Heikki、Tom、Teodor)
      </p><p>GINおよびGiST演算子クラス<code class="function">consistent</code>関数のAPIも同様に拡張しました。
      </p></li><li class="listitem"><p><acronym class="acronym">GIN</acronym>インデックスにおいて部分一致検索のサポートを追加しました。(Teodor Sigaev、Oleg Bartunov)
      </p></li><li class="listitem"><p><code class="structname">pg_class</code>の<code class="structfield">reltriggers</code>列を論理値型の<code class="structfield">relhastriggers</code>に置き換えました。(Simon)
      </p><p>また<code class="structname">pg_class</code>の使用されない、<code class="structfield">relukeys</code>、<code class="structfield">relfkeys</code>、<code class="structfield">relrefs</code>列を削除しました。
      </p></li><li class="listitem"><p>一時テーブルの識別を簡単にするために<code class="structname">pg_class</code>に<code class="structfield">relistemp</code>列を追加しました。(Tom)
      </p></li><li class="listitem"><p>プラットフォーム向けの<acronym class="acronym">FAQ</acronym>を主文書に移しました。(Peter)
      </p></li><li class="listitem"><p>パーサ入力ファイルが競合状態で構築されることを防ぎます。(Peter)
      </p></li><li class="listitem"><p><code class="literal">KOI8U</code>（ウクライナ語）符号化方式のサポートを追加しました。(Peter)
      </p></li><li class="listitem"><p>日本語翻訳メッセージを追加しました。(Japan PostgreSQL Users Group)
      </p><p>これは別のプロジェクトとして保守されたものを使用しました。
      </p></li><li class="listitem"><p><span class="application">MSVC</span>構築システムにおける<code class="varname">LC_MESSAGES</code>を設定した場合の問題を修正しました。(Hiroshi Inoue、Hiroshi Saito、Magnus)
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.178.5.14"><div class="titlepage"><div><div><h4 class="title">E.174.3.12. Contrib</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>指定期間を超える問い合わせに対して自動的に<code class="command">EXPLAIN</code>を行う<code class="filename">contrib/auto_explain</code>を追加しました。(Itagaki Takahiro、Tom)
      </p></li><li class="listitem"><p>GINインデックスがより多くのデータ型を扱うことを可能にする<code class="filename">contrib/btree_gin</code>を追加しました。(Oleg、Teodor)
      </p></li><li class="listitem"><p>大文字小文字を区別しない、マルチバイトに対応したテキストデータ型を提供する<code class="filename">contrib/citext</code>を追加しました。(David Wheeler)
      </p></li><li class="listitem"><p>サーバ全体で文の実行統計情報を追跡する<code class="filename">contrib/pg_stat_statements</code>を追加しました。(Itagaki Takahiro)
      </p></li><li class="listitem"><p><code class="filename">contrib/pgbench</code>に期間オプションと問い合わせモードオプションを追加しました。(Itagaki Takahiro)
      </p></li><li class="listitem"><p><code class="filename">contrib/pgbench</code>が、単なる<code class="structname">accounts</code>、<code class="structname">branches</code>、<code class="structname">history</code>、<code class="structname">tellers</code>ではなく、<code class="structname">pgbench_accounts</code>、<code class="structname">pgbench_branches</code>、<code class="structname">pgbench_history</code>、<code class="structname">pgbench_tellers</code>という名前のテーブルを使用するようにしました。(Tom)
      </p><p>これは<span class="application">pgbench</span>の実行により、実データが偶然破壊されてしまう危険性を低減させるためのものです。
      </p></li><li class="listitem"><p>20億ページを超えるテーブルとインデックスを扱うように<code class="filename">contrib/pgstattuple</code>を修正しました。(Tatsuhito Kasahara)
      </p></li><li class="listitem"><p><code class="filename">contrib/fuzzystrmatch</code>において、ユーザが挿入・削除・置換のコストを指定できる、レーベンシュタイン文字列距離関数を追加しました。(Volkan Yazici)
      </p></li><li class="listitem"><p><code class="filename">contrib/ltree</code>がマルチバイト符号化方式をサポートするようにしました。(laser)
      </p></li><li class="listitem"><p><code class="filename">contrib/dblink</code>がSQL/MEDカタログに格納された接続情報を使用できるようにしました。(Joe Conway)
      </p></li><li class="listitem"><p>リモートサーバからのエラーに対する<code class="filename">contrib/dblink</code>の報告を改良しました。(Joe Conway)
      </p></li><li class="listitem"><p>ローカルなデータベース符号化方式と一致させるために<code class="filename">contrib/dblink</code>が<code class="varname">client_encoding</code>を設定するようにしました。(Joe Conway)
      </p><p>これにより、異なる符号化方式を使用するリモートサーバとの通信時の符号化方式に関する問題を防ぎます。
      </p></li><li class="listitem"><p>偶発的にサーバの<code class="filename">.pgpass</code>ファイルが使用されることなく、<code class="filename">contrib/dblink</code>がユーザが提供したパスワードを確実に使用するようにしました。(Joe Conway)
      </p><p>これは小規模なセキュリティの向上です。
      </p></li><li class="listitem"><p><code class="filename">contrib/pageinspect</code>に<code class="function">fsm_page_contents()</code>を追加しました。(Heikki)
      </p></li><li class="listitem"><p>空き領域マップファイル（<code class="filename">*_fsm</code>）をサポートするように<code class="function">get_raw_page()</code>を変更しました。
また<code class="filename">contrib/pg_freespacemap</code>も更新しました。
      </p></li><li class="listitem"><p><code class="filename">contrib/pg_trgm</code>にマルチバイト符号化方式のサポートを追加しました。(Teodor)
      </p></li><li class="listitem"><p>新しい<code class="function">array_agg()</code>および<code class="function">unnest()</code>関数を使用するように<code class="filename">contrib/intagg</code>を作成し直しました。(Tom)
      </p></li><li class="listitem"><p><code class="filename">contrib/pg_standby</code>がフェイルオーバ前にすべての利用可能なWALを復旧するようにしました。(Fujii Masao、Simon、Heikki)
      </p><p>この作業を安全にするために、<code class="filename">recovery.conf</code>内で新しい<code class="literal">recovery_end_command</code>オプションを設定して、フェイルオーバ後のトリガファイルを整理する必要があります。
<span class="application">pg_standby</span>は自身でトリガファイルを削除しないようになりました。
      </p></li><li class="listitem"><p><code class="filename">contrib/pg_standby</code>の<code class="option">-l</code>オプションを無効にしました。
シンボリックリンクの使用が安全ではないためです。(Simon)
      </p></li></ul></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-8-4-1.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="release-8-3-23.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">E.173. リリース8.4.1 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> E.175. リリース8.3.23</td></tr></table></div></body></html>