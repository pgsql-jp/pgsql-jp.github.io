<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.180. リリース8.3.18</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-8-3-19.html" title="E.179. リリース8.3.19" /><link rel="next" href="release-8-3-17.html" title="E.181. リリース8.3.17" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.180. リリース8.3.18</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-8-3-19.html" title="E.179. リリース8.3.19">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix E. リリースノート">Up</a></td><th width="60%" align="center">Appendix E. リリースノート</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="release-8-3-17.html" title="E.181. リリース8.3.17">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-8-3-18"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.180. リリース8.3.18</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-8-3-18.html#id-1.11.6.184.4">E.180.1. バージョン8.3.18への移行</a></span></dt><dt><span class="sect2"><a href="release-8-3-18.html#id-1.11.6.184.5">E.180.2. 変更点</a></span></dt></dl></div><p><strong>リリース日: </strong>2012-02-27</p><p>このリリースは8.3.17に対し、各種の不具合を修正したものです。
8.3メジャーリリースにおける新機能については<a class="xref" href="release-8-3.html" title="E.198. リリース8.3">Section E.198</a>を参照してください。
  </p><div class="sect2" id="id-1.11.6.184.4"><div class="titlepage"><div><div><h3 class="title">E.180.1. バージョン8.3.18への移行</h3></div></div></div><p>8.3.Xからの移行ではダンプ/リストアは不要です。
   </p><p>しかしながら、8.3.17より前のバージョンからアップグレードする場合は、<a class="xref" href="release-8-3-17.html" title="E.181. リリース8.3.17">Section E.181</a>を参照してください。
   </p></div><div class="sect2" id="id-1.11.6.184.5"><div class="titlepage"><div><div><h3 class="title">E.180.2. 変更点</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">CREATE TRIGGER</code>においてトリガ関数に対する実行権限が必要になりました。(Robert Haas)
     </p><p>この検査が無かったため、別のユーザが自身が所有するテーブルにその関数をインストールすることで、偽造した入力データでトリガ関数を実行することができました。
<code class="literal">SECURITY DEFINER</code>が付いたトリガ関数でのみ重大です。
その他のトリガ関数ではとにかくテーブル所有者として実行されるためです。(CVE-2012-0866)
     </p></li><li class="listitem"><p><span class="application">pg_dump</span>のコメントに記述された名前の中の改行を空白に変換します。(Robert Haas)
     </p><p><span class="application">pg_dump</span>は、その出力スクリプトにおけるSQLコメント内で発行されるオブジェクト名のサニタイズに関して注意を払っていませんでした。
改行を含む名前は少なくともそのスクリプトを構文的に不正にさせます。
悪意をもって組み立てられたオブジェクト名によって、スクリプトがリロードする時にSQLインジェクションの危険性があり得ました。(CVE-2012-0868)
     </p></li><li class="listitem"><p>バキューム処理と同時に挿入を行った場合のbtreeインデックス破損を修正しました。(Tom Lane)
     </p><p>挿入によって発生するインデックスページ分割によって、同時実行中の<code class="command">VACUUM</code>が削除すべきインデックス項目を削除し損なうことが時々発生することがありました。
対応するテーブル行が削除された後、対応先が無いインデックス項目によってエラー（<span class="quote">“<span class="quote">could not read block N in file ...</span>”</span>など）、最悪は、解放されたテーブル位置に再挿入された関係がない行にちなんだ、警告のない間違った問い合わせ結果が引き起こされます。
この不具合は8.2から存在していましたが、あまり頻発に発生しませんでしたので、これまで究明されませんでした。
使用中のデータベースで発生していたのではと疑わしければ、対象のインデックスを再インデックス付けすることで修正されます。
     </p></li><li class="listitem"><p><code class="command">ALTER USER/DATABASE SET</code>における一部の設定で存在しない値を許可します。 (Heikki Linnakangas)
     </p><p><code class="varname">default_text_search_config</code>、<code class="varname">default_tablespace</code>、<code class="varname">temp_tablespaces</code>を未知の名前に設定することができます。
これらが実際に使用されている別のデータベースでは既知であるかもしれませんし、またテーブル空間の場合はまだテーブル空間が作成されていないかもしれないからです。
過去<code class="varname">search_path</code>においても同じ問題がありましたが、これらの設定も同様に動作するようにしました。
     </p></li><li class="listitem"><p>WAL再生中にOIDカウンタを、たとえ周回していたとしても、正しく追跡します。(Tom Lane)
     </p><p>これまでは、OIDカウンタはシステムが再生モードを抜けるまで高値のままになりました。
実際にはほとんどnilという結果になりますが、マスタに昇格されるスタンバイサーバでは、値が必要になってから、OIDカウンタを合理的な値まで進めるために長時間かかる可能性がありました。
     </p></li><li class="listitem"><p><code class="literal">*</code>が付いた正規表現の後方参照を修正しました。(Tom Lane)
     </p><p>コードでは、正確な文字列一致を強制せずに、実質後方参照シンボルで参照されるパターン副式を満たす任意の文字列を受け付けました。
     </p><p>同様の問題はまだ、直接量指定子のサブジェクトとならない、より大きく量化された式に埋め込まれた後方参照でも残っています。
こちらは将来のリリースの<span class="productname">PostgreSQL</span>で対応予定です。
     </p></li><li class="listitem"><p><code class="type">inet</code>/<code class="type">cidr</code>値の処理に最近入ったメモリリークを修正しました。(Heikki Linnakangas)
     </p><p>2011年12月の<span class="productname">PostgreSQL</span>リリース内のパッチによって、これらの操作にメモリリークが発生しました。
これらの列に対するbtreeインデックス等で重大な問題になる可能性がありました。
     </p></li><li class="listitem"><p>Windowsのsysloggerにおけるファイルハンドルの二重クローズを防ぎます。(MauMau）
     </p><p>通常はこのエラーは表面化しませんが、Windowsのデバッグ版を実行している場合は例外が引き起こります。
     </p></li><li class="listitem"><p>plpgsqlにおけるI/O変換関連のメモリリークを修正しました。(Andres Freund、Jan Urbanski、Tom Lane)
     </p><p>現在の関数が終わるまで、特定の操作がメモリリークしました。
     </p></li><li class="listitem"><p>継承されたテーブル列に対する<span class="application">pg_dump</span>の取り扱いを改良しました。(Tom Lane)
     </p><p><span class="application">pg_dump</span>は、子の列が親の列と異なるデフォルト式を持つという状況を間違って扱いました。
デフォルトがテキストとして親のデフォルトと同一であるが、実際は同一ではない場合（例えば、スキーマ検索パスの違いのため）、異なるものとして認識せず、そのため、ダンプしリストアした後、子は親のデフォルトを継承することができました。
子の列が<code class="literal">NOT NULL</code>であり親がそうではなかった場合も、微妙に間違ってリストアされました。
     </p></li><li class="listitem"><p>INSERT形式のテーブルデータに対する<span class="application">pg_restore</span>の直接データベースにリストアするモードを修正しました。(Tom Lane)
     </p><p>他の問題に対する修正における見落としの結果、2011年9月または12月付けのリリースに含まれる<span class="application">pg_restore</span>では、<code class="option">--inserts</code>または<code class="option">--column-inserts</code>オプションを付けて作成されたアーカイブファイルを直接データベースにリストアすることができませんでした。
アーカイブファイル自体には失敗はなく、テキストモード出力では問題ありませんでした。
     </p></li><li class="listitem"><p><code class="filename">contrib/intarray</code>の<code class="literal">int[] &amp; int[]</code>演算子のエラーを修正しました。 (Guillaume Lelarge)
     </p><p>２つの入力配列が共通して持つ最小の整数が１であり、どちらかの配列により小さな値があった場合、１が結果から間違って省かれました。
     </p></li><li class="listitem"><p><code class="filename">contrib/pgcrypto</code>の<code class="function">encrypt_iv()</code>および<code class="function">decrypt_iv()</code>の誤判定を修正しました。(Marko Kreen)
     </p><p>これらの関数は特定の種類の無効入力エラーの通知に失敗し、不正な入力に対してランダムなゴミの値を代わりに返しました。
     </p></li><li class="listitem"><p><code class="filename">contrib/test_parser</code>における1バイトのバッファオーバーランを修正しました。(Paul Guyot)
     </p><p>コードでは必要より1バイト多く読み取ろうとし、境界条件ではクラッシュします。
<code class="filename">contrib/test_parser</code>は単なるサンプルコードであり、これ自体はセキュリティ問題ではありませんが、例のコードとしては良くありません。
     </p></li><li class="listitem"><p>ARMにおいて可能ならばスピンロックに<code class="function">__sync_lock_test_and_set()</code>を使用します。(Martin Pitt)
     </p><p>この関数は、以前の廃止予定でARMv6以降では使用できなくなった<code class="literal">SWPB</code>命令の使用を置き換えるものです。
最近のARMボードでも古いコードは明白な方法で失敗することはありませんが、単に同時アクセスのインターロックを行わず、マルチプロセス操作において奇妙な失敗をもたらすと報告されています。
     </p></li><li class="listitem"><p>受け付け可能なバージョンのgccを用いて構築する場合に<code class="option">-fexcess-precision=standard</code>オプションを使用します。(Andrew Dunstan)
     </p><p>最近のバージョンのgccは独創的な結果を生成するというさまざまなシナリオを防ぎます。
     </p></li><li class="listitem"><p>FreeBSDにおいてスレッド化されたPythonを使用できるようにしました。(Chris Rees)
     </p><p>configureスクリプトはこれまで、この組み合わせは動作しないと前提していました。
しかしFreeBSDではこの問題が修正されましたので、エラー検査を取り除きました。
     </p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-8-3-19.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="release-8-3-17.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">E.179. リリース8.3.19 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> E.181. リリース8.3.17</td></tr></table></div></body></html>