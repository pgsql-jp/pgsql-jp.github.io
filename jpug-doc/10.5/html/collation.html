<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>23.2. 照合順序サポート</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="locale.html" title="23.1. ロケールのサポート" /><link rel="next" href="multibyte.html" title="23.3. 文字セットサポート" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">23.2. 照合順序サポート</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="locale.html" title="23.1. ロケールのサポート">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="charset.html" title="Chapter 23. 多言語対応">Up</a></td><th width="60%" align="center">Chapter 23. 多言語対応</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="multibyte.html" title="23.3. 文字セットサポート">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="COLLATION"><div class="titlepage"><div><div><h2 class="title" style="clear: both">23.2. 照合順序サポート</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="collation.html#id-1.6.10.4.4">23.2.1. 概念</a></span></dt><dt><span class="sect2"><a href="collation.html#COLLATION-MANAGING">23.2.2. 照合順序の管理</a></span></dt></dl></div><a id="id-1.6.10.4.2" class="indexterm"></a><p>照合順序機能は、ソート順番と列ごともしくは操作ごとのデータの文字区別の振る舞いを指定することを可能にします。
これにより、作成後のデータベースの<code class="symbol">LC_COLLATE</code>と<code class="symbol">LC_CTYPE</code>の設定が変更できない制限が緩和されます。
  </p><div class="sect2" id="id-1.6.10.4.4"><div class="titlepage"><div><div><h3 class="title">23.2.1. 概念</h3></div></div></div><p>概念的に照合可能なデータ型のそれぞれの式は、照合順序を保持しています
(組み込みの照合可能なデータ型は<code class="type">text</code>、<code class="type">varchar</code>、 <code class="type">char</code>です。
ユーザ定義の基本型は照合可能とマーキングできます。もちろん照合可能なデータ型上のドメインは照合可能となります)。
もし、式が列参照である場合は、式の照合順序は列の定義された照合順序となります。
もし、式が定数である場合は、照合順序は定数のデータ型のデフォルトの照合順序となります。
より複雑な式の照合順序は、下記に示すように、その入力の照合順序から引き出されます。
   </p><p>式の照合順序は、<span class="quote">“<span class="quote">default</span>”</span>照合順序となります。これはデータベースに対して定義されたロケール設定を意味しています。
式の照合順序は非決定となることもあります。そのような場合に、照合順序が必要となるような順序操作や他の操作は失敗するでしょう。
   </p><p>データベースシステムが並び変えや文字区別を行う場合、データベースは入力の照合順序を使用します。
これは、たとえば<code class="literal">ORDER BY</code>句や<code class="literal">&lt;</code>演算子や関数を使用する際に発生します。
<code class="literal">ORDER BY</code>句に適用する照合順序は、単純にソートキーの照合順序です。
関数や演算子の呼び出しに対して適用される照合順序は、以下に述べるように引数により決まります。
比較演算子に加えて、照合順序は<code class="function">lower</code>、<code class="function">upper</code>、<code class="function">initcap</code>といった小文字と大文字を変換する関数やパターンマッチングの演算子、<code class="function">to_char</code>関連の関数で考慮されています。
   </p><p>関数や演算子の呼び出しに対して、引数の照合順序検査により得られた照合順序は実行時に特定の操作を行うために使用されます。
もし関数や演算子の呼び出しの結果が照合順序可能なデータ型であった場合、照合順序は関数もしくは演算子式の定義済みの照合順序として
解析時にも試用されます。このとき照合順序の知識が必要となるような囲み式があります。
   </p><p>式の<em class="firstterm">照合順序の導出</em>は暗黙でも明示的にでも可能です。
この区別は、複数の異なる照合順序が式中に現れるときに照合順序がどのように組み合わされるか、に影響を与えます。
明示的な照合順序の導出は、<code class="literal">COLLATE</code>句が使用されたときに発生します。
他の全ての照合順序は暗黙となります。例えば関数呼び出しの中では、次の規則が用いられます。

    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>入力式に明示的な照合順序の導出がある場合、入力式の中の明示的に導出された全ての照合順序は同一でなくてはなりません。
そうでない場合はエラーが発生します。もし明示的に導出された照合順序がある場合は、それは照合順序の組み合わせの結果となります。
      </p></li><li class="listitem"><p>そうでない場合は、全ての入力式は同一の暗黙の照合順序の導出またはデフォルトの照合順序を持たなくてはなりません。
もしデフォルトではない照合順序がある場合は、それは照合順序の組み合わせの結果となります。
もしそうでない場合は、結果はデフォルトの照合順序となります。
      </p></li><li class="listitem"><p>入力式内でデフォルトではない暗黙の照合順序が衝突している場合、決定不能な照合順序であるとみなされます。
これは、もし呼び出された特定の関数が適用するべき照合順序を知っておく必要がないかぎりエラーの条件ではありません。
もし知っておく必要がある場合は、実行時にエラーとなります。
      </p></li></ol></div><p>

例えば、このテーブル定義を考えてみます。
</p><pre class="programlisting">CREATE TABLE test1 (
    a text COLLATE "de_DE",
    b text COLLATE "es_ES",
    ...
);</pre><p>

このとき
</p><pre class="programlisting">SELECT a &lt; 'foo' FROM test1;</pre><p>
<code class="literal">&lt;</code>の比較は<code class="literal">de_DE</code>の規則により実行されます。
というのも式は暗黙的に導出されたデフォルトの照合順序と組み合わせます。しかし、

</p><pre class="programlisting">SELECT a &lt; ('foo' COLLATE "fr_FR") FROM test1;</pre><p>
このとき比較は、明示的な照合順序の導出は暗黙の照合順序をオーバライドするため<code class="literal">fr_FR</code>規則が用いられます。
さらに、次の例では
</p><pre class="programlisting">SELECT a &lt; b FROM test1;</pre><p>
パーサはどの照合順序を適用するか決定できません。というのも<code class="structfield">a</code>と<code class="structfield">b</code>列は暗黙の衝突する照合順序を持つためです。
<code class="literal">&lt;</code>演算子がどちらの照合順序を使用するか知る必要があるため、これはエラーとなります。

</p><pre class="programlisting">SELECT a &lt; b COLLATE "de_DE" FROM test1;</pre><p>
もしくは同じく
</p><pre class="programlisting">SELECT a COLLATE "de_DE" &lt; b FROM test1;</pre><p>
一方で、以下のように構造的に似たケースとして
</p><pre class="programlisting">SELECT a || b FROM test1;</pre><p>
これはエラーとなりません。というのも<code class="literal">||</code>演算子は、照合順序には関係がないためです。
この結果は照合順序とは関係なく同じになります。
   </p><p>もし関数や演算子が照合順序可能なデータ型の結果を出力する場合は、関数に割り当てられた照合順序、もしくは演算子の組み合わされた入力式は、関数もしくは演算子の結果に対しても
適用されると考えられます。よって、以下の例では
</p><pre class="programlisting">SELECT * FROM test1 ORDER BY a || 'foo';</pre><p>
順序は<code class="literal">de_DE</code>規則に基づき実行されますが、以下のクエリでは
</p><pre class="programlisting">SELECT * FROM test1 ORDER BY a || b;</pre><p>
エラーとなります。というのも<code class="literal">||</code>演算子が照合順序を知る必要がなかったとしても
<code class="literal">ORDER BY</code>句が照合順序を知る必要があるためです。
以前と同様、この衝突は明示的に照合順序を指定することにより解決できます。

</p><pre class="programlisting">SELECT * FROM test1 ORDER BY a || b COLLATE "fr_FR";</pre><p>
   </p></div><div class="sect2" id="COLLATION-MANAGING"><div class="titlepage"><div><div><h3 class="title">23.2.2. 照合順序の管理</h3></div></div></div><p>照合順序は、SQL名称を、オペレーティングシステム中にインストールされたライブラリによって提供されるロケールにマッピングするSQLスキーマオブジェクトです。
照合順序の定義には、ロケールデータを提供するライブラリを指定する<em class="firstterm">プロバイダ</em>(provider)が含まれます。
標準プロバイダの一つは<code class="literal">libc</code>で、オペレーティングシステムのCライブラリが提供するロケールを使用します。
オペレーティングシステムが提供するほとんどのツールが、このロケールを使用します。
他のプロバイダとしては<code class="literal">icu</code>があり、外部のICU<a id="id-1.6.10.4.5.2.4" class="indexterm"></a>ライブラリを使います。
ICUロケールは、PostgreSQLがビルドされた際にICUサポートが設定されていた場合にのみ利用可能です。
   </p><p><code class="literal">libc</code>が提供する照合順序は、<code class="literal">setlocale()</code>システムライブラリの呼び出しが許可する<code class="symbol">LC_COLLATE</code>と<code class="symbol">LC_CTYPE</code>の組み合わせ設定にマッピングします。
(名称から推測されるように、照合順序の主な目的はソート順序を制御する<code class="symbol">LC_COLLATE</code>を設定することです。
しかし実際には<code class="symbol">LC_CTYPE</code>の設定を<code class="symbol">LC_COLLATE</code>と異なるようにする必要はほとんどありません。
そのため、式ごとに<code class="symbol">LC_CTYPE</code>を設定するような別の機構を作成するより、これらの設定を収集する方が、より便利です。)
また、<code class="literal">libc</code>の照合順序は文字エンコーディングと結びついています(<a class="xref" href="multibyte.html" title="23.3. 文字セットサポート">Section 23.3</a>を参照下さい)。
同一の照合順序名称が異なるエンコーディングに対して存在しています。
   </p><p><code class="literal">icu</code>が提供する照合順序オブジェクトは、ICUライブラリが提供する照合順序機能(collator)にマップします。
ICUは<span class="quote">“<span class="quote">collate</span>”</span>と<span class="quote">“<span class="quote">ctype</span>”</span>を別々に設定する機能を提供しないので、それら常に同じものになります。
また、ICUの照合順序はエンコーディングからは独立しています。
ですから、データベース中のある名前のICU照合順序は、常にただひとつだけです。
   </p><div class="sect3" id="id-1.6.10.4.5.5"><div class="titlepage"><div><div><h4 class="title">23.2.2.1. 標準の照合順序</h4></div></div></div><p>すべてのプラットフォーム上で<code class="literal">default</code>、<code class="literal">C</code>そして<code class="literal">POSIX</code>という名称の照合順序が
利用できます。
オペレーティングシステムによっては追加の照合順序が利用可能な場合もあります。
<code class="literal">default</code>照合順序は、データベース作成時に<code class="symbol">LC_COLLATE</code>値と<code class="symbol">LC_CTYPE</code>値を
選択します。<code class="literal">C</code>と<code class="literal">POSIX</code>照合順序は共に<span class="quote">“<span class="quote">traditional C</span>”</span>の動作を指定します。
これはASCII文字の<span class="quote">“<span class="quote"><code class="literal">A</code></span>”</span>から<span class="quote">“<span class="quote"><code class="literal">Z</code></span>”</span>を文字として扱い、ソート順は厳密な文字コードのバイト値によります。
   </p><p>加えて、エンコーディング<code class="literal">UTF8</code>では、SQL標準の照合順序名<code class="literal">ucs_basic</code>が利用できます。
<code class="literal">ucs_basic</code>は<code class="literal">C</code>と同等のもので、ソート順はUnicodeのコードポイントです。
   </p></div><div class="sect3" id="id-1.6.10.4.5.6"><div class="titlepage"><div><div><h4 class="title">23.2.2.2. 定義済みの照合順序</h4></div></div></div><p>オペレーティングシステムが単一のプログラム内(<code class="function">newlocale</code>や関連する関数)で複数のロケールを使用することをサポートしているか、ICUサポートが組み込み済みの場合、データベースクラスタが初期化されると<code class="command">initdb</code>は、オペレーティングシステム上で見つけた全てのロケールに基づく照合順序をシステムカタログの<code class="literal">pg_collation</code>に書き込みます。
   </p><p>現在利用可能なロケールを調べるには、<code class="literal">SELECT * FROM pg_collation</code>という問合せを使うか、<span class="application">psql</span>内で<code class="command">\dOS+</code>コマンドを使用します。
   </p><div class="sect4" id="id-1.6.10.4.5.6.4"><div class="titlepage"><div><div><h5 class="title">23.2.2.2.1. libc照合順序</h5></div></div></div><p>例えば、オペレーティングシステムが<code class="literal">de_DE.utf8</code>という名称のロケールを提供した場合、<code class="command">initdb</code>は、<code class="literal">de_DE.utf8</code>に設定された<code class="symbol">LC_COLLATE</code>と<code class="symbol">LC_CTYPE</code>の両方を持つ<code class="literal">UTF8</code>エンコーディングの<code class="literal">de_DE.utf8</code>という名称の照合順序を作成します。
同時に照合順序の名称から<code class="literal">.utf8</code>タグを削除した照合順序も作成します。
これは手間を省き、名称がエンコーディングに依存しにくいようになります。
それにもかかわらず、照合順序名称の初期値はプラットフォーム依存となることに気をつけてください。
   </p><p><code class="literal">libc</code>が提供するデフォルトの照合順序の集合は、直接オペレーティングシステム内にインストールされたロケールにマップされ、コマンド<code class="literal">locale -a</code>で参照できます。
<code class="symbol">LC_COLLATE</code>と<code class="symbol">LC_CTYPE</code>で違う値を持つ<code class="literal">libc</code>照合順序が必要な場合、あるいはデータベースシステムが初期化された後に新しいロケールがインストールされた場合は、新しい照合順序を<a class="xref" href="sql-createcollation.html" title="CREATE COLLATION"><span class="refentrytitle">CREATE COLLATION</span></a>コマンドで作成できます。
また、新しいオペレーティングシステムロケールは、<a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-COLLATION" title="Table 9.86. 照合順序管理関数"><code class="function">pg_import_system_collations()</code></a>関数でインポートできます。
   </p><p>どのようなデータベース内でも、データベースのエンコーディングを使用している照合順序のみが興味の対象となります。
<code class="literal">pg_collation</code>内の他のエントリは無視されます。
よって<code class="literal">de_DE</code>といったようなエンコーディング名が省かれた照合順序は、一般的には一意でなくてもデータベース内では一意であるとみなされます。
エンコーディング名が省かれた照合順序を使用することを推奨します。
というのも、データベースのエンコーディングを変更するときに、変えなければならないものを１つ減らせるからです。
しかし、<code class="literal">default</code>、<code class="literal">C</code>そして<code class="literal">POSIX</code>照合順序は、データベースのエンコーディングに関係なく使用可能であることに注意してください。
   </p><p><span class="productname">PostgreSQL</span>は、異なる照合順序オブジェクトは、それらが同じプロパティを持っていても互換性がないものとみなします。
例えば、

</p><pre class="programlisting">SELECT a COLLATE "C" &lt; b COLLATE "POSIX" FROM test1;</pre><p>
は、<code class="literal">C</code>と<code class="literal">POSIX</code>照合順序が同じ動作であってもエラーとなります。
よってエンコーディング名が省かれた照合順序を混ぜて使用することは推奨されません。
   </p></div><div class="sect4" id="id-1.6.10.4.5.6.5"><div class="titlepage"><div><div><h5 class="title">23.2.2.2.2. ICU照合順序</h5></div></div></div><p>ICUにおいては、すべての可能なロケール名を列挙するのは賢明ではありません。
ICUはロケールの固有の名前付けシステムを使っています。
しかし、実際の個別のロケール名以上の名前を付ける多くの方法があります。
<code class="command">initdb</code>はICUのAPIを使い、照合順序の初期集合を入力するための
個別のロケールの集合を取り出します。
ICUが提供する照合順序は、libcロケールと区別するために、SQL環境において、<span class="quote">“<span class="quote">私的利用</span>”</span>拡張<code class="literal">-x-icu</code>を追加したBCP 47言語タグ形式の名前で作成されます。
   </p><p>以下は作成されるかもしれない照合順序の例です。

    </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">de-x-icu</code></span></dt><dd><p>ドイツ語照合順序、デフォルトの異型</p></dd><dt><span class="term"><code class="literal">de-AT-x-icu</code></span></dt><dd><p>オーストリアのドイツ語照合順序、デフォルトの異型</p><p>（他に、<code class="literal">de-DE-x-icu</code>あるいは<code class="literal">de-CH-x-icu</code>というのがあります。
しかし、本稿執筆時点では、それらは<code class="literal">de-x-icu</code>と同じです。）
       </p></dd><dt><span class="term"><code class="literal">und-x-icu</code> (<span class="quote">“<span class="quote">undefined</span>”</span>用)</span></dt><dd><p>ICU<span class="quote">“<span class="quote">root</span>”</span>照合順序。
言語に依存しない適当なソート順を得るために使用してください。
       </p></dd></dl></div><p>
   </p><p>ある種の（利用頻度が低い）エンコーディングをICUはサポートしません。
データベースエンコーディングがこのようなものであった場合、<code class="literal">pg_collation</code>中のICU照合順序は無視されます。
このようなものを使おうとすると、<span class="quote">“<span class="quote">collation "de-x-icu" for encoding "WIN874" does not exist</span>”</span>というメッセージを伴ったエラーが発生します。
   </p></div></div><div class="sect3" id="COLLATION-CREATE"><div class="titlepage"><div><div><h4 class="title">23.2.2.3. 新しい照合順序オブジェクの作成</h4></div></div></div><p>標準の定義済み照合順序が十分でない場合は、ユーザはSQLコマンド<a class="xref" href="sql-createcollation.html" title="CREATE COLLATION"><span class="refentrytitle">CREATE COLLATION</span></a>で照合順序オブジェクトを作成できます。
   </p><p>すべての定義済みオブジェクト同様、標準の定義済み照合順序は<code class="literal">pg_catalog</code>スキーマにあります。
これはまた、<code class="command">pg_dump</code>の保存対象になることを確実にします。
   </p><div class="sect4" id="id-1.6.10.4.5.7.4"><div class="titlepage"><div><div><h5 class="title">23.2.2.3.1. libc照合順序</h5></div></div></div><p>以下のようにして新しいlibc照合順序を作成できます。
</p><pre class="programlisting">CREATE COLLATION german (provider = libc, locale = 'de_DE');</pre><p>
コマンド中の<code class="literal">locale</code>句に使用できる正確な値は、オペレーティングシステムに依存します。
Unix系のシステムでは、<code class="literal">locale -a</code>コマンドでこのリストを表示できるでしょう。
    </p><p>定義済みのlibc照合順序は、データベースインスタンスが初期化された際に、オペレーティングシステムで定義されたすべての照合順序をすでに含んでいるので、新しいものを手動で作る必要はあまりないでしょう。
そうしたことをする理由があるとすれば、異なる命名規則が必要である（この場合は、<a class="xref" href="collation.html#COLLATION-COPY" title="23.2.2.3.3. 照合順序の複製">Section 23.2.2.3.3</a>も参照してください）、あるいはオペレーティングシステムが更新されて、新しい照合順序の定義が提供されるようになった場合です。（この場合は<a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-COLLATION" title="Table 9.86. 照合順序管理関数"><code class="function">pg_import_system_collations()</code></a>も参照してください。）
    </p></div><div class="sect4" id="id-1.6.10.4.5.7.5"><div class="titlepage"><div><div><h5 class="title">23.2.2.3.2. ICU照合順序</h5></div></div></div><p>ICUでは、<code class="command">initdb</code>であらかじめロードされた基本的な言語＋国の集合を超えて照合順序をカスタマイズできます。
ユーザが、これらの機能を利用して、ソート処理の挙動が自分の要件に適合する照合順序オブジェクトを定義することを推奨します。
ICUロケールの命名規則に関する情報に関しては、<a class="ulink" href="http://userguide.icu-project.org/locale" target="_top">http://userguide.icu-project.org/locale</a>と<a class="ulink" href="http://userguide.icu-project.org/collation/api" target="_top">http://userguide.icu-project.org/collation/api</a>を参照してください。
利用可能な名前と属性の集合は、ICUのバージョンに依存します。
   </p><p>例を示します。

    </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">CREATE COLLATION "de-u-co-phonebk-x-icu" (provider = icu, locale = 'de-u-co-phonebk');</code><br /></span><span class="term"><code class="literal">CREATE COLLATION "de-u-co-phonebk-x-icu" (provider = icu, locale = 'de@collation=phonebook');</code></span></dt><dd><p>電話帳照合順形式を伴うドイツ語の照合順序</p><p>
最初の例では、BCP 47による<span class="quote">“<span class="quote">language tag</span>”</span>を使ったICU照合順序を選択しています。
次の例は伝統的なICU固有のロケール構文を使用しています。
最初の形式を以後使用しますが、これは古いICUのバージョンではサポートされません。
       </p><p>SQL環境における照合順序オブジェクトにはどのような名前でも付けられることに注意してください。
この例では、定義済みの照合順序が使っている名前付け形式に従っているので、結果としてBCP 47に従っています。
しかし、これはユーザ定義照合順序では必須ではありません。
       </p></dd><dt><span class="term"><code class="literal">CREATE COLLATION "und-u-co-emoji-x-icu" (provider = icu, locale = 'und-u-co-emoji');</code><br /></span><span class="term"><code class="literal">CREATE COLLATION "und-u-co-emoji-x-icu" (provider = icu, locale = '@collation=emoji');</code></span></dt><dd><p>絵文字照合順序型を伴うRoot照合順序。Unicode標準51番による。
       </p><p>伝統的なICUロケール命名規則では、rootロケールは空文字列によって選択されることに注目してください。
       </p></dd><dt><span class="term"><code class="literal">CREATE COLLATION digitslast (provider = icu, locale = 'en-u-kr-latn-digit');</code><br /></span><span class="term"><code class="literal">CREATE COLLATION digitslast (provider = icu, locale = 'en@colReorder=latn-digit');</code></span></dt><dd><p>ラテン文字の後に数字が来るように並べます。（デフォルトでは文字の前に数字が来ます。）
       </p></dd><dt><span class="term"><code class="literal">CREATE COLLATION upperfirst (provider = icu, locale = 'en-u-kf-upper');</code><br /></span><span class="term"><code class="literal">CREATE COLLATION upperfirst (provider = icu, locale = 'en@colCaseFirst=upper');</code></span></dt><dd><p>小文字の前に大文字が来るように並べます。（デフォルトでは最初に小文字が来ます。）
       </p></dd><dt><span class="term"><code class="literal">CREATE COLLATION special (provider = icu, locale = 'en-u-kf-upper-kr-latn-digit');</code><br /></span><span class="term"><code class="literal">CREATE COLLATION special (provider = icu, locale = 'en@colCaseFirst=upper;colReorder=latn-digit');</code></span></dt><dd><p>上記のオプションを組み合わせます。
       </p></dd><dt><span class="term"><code class="literal">CREATE COLLATION numeric (provider = icu, locale = 'en-u-kn-true');</code><br /></span><span class="term"><code class="literal">CREATE COLLATION numeric (provider = icu, locale = 'en@colNumeric=yes');</code></span></dt><dd><p>数値の値により、数字の列を並べる数値の順序付けです。
例： <code class="literal">A-21</code> &lt; <code class="literal">A-123</code>
（自然順ソート(natural sort)としても知られています。）
       </p></dd></dl></div><p>

詳細は、<a class="ulink" href="http://unicode.org/reports/tr35/tr35-collation.html" target="_top">Unicode Technical Standard #35</a>と、<a class="ulink" href="https://tools.ietf.org/html/bcp47" target="_top">BCP 47</a>をご覧ください。
可能な照合順序型(<code class="literal">co</code>下位タグ)のリストは、<a class="ulink" href="http://www.unicode.org/repos/cldr/trunk/common/bcp47/collation.xml" target="_top">CLDR repository</a>で参照できます。
<a class="ulink" href="https://ssl.icu-project.org/icu-bin/locexp" target="_top">ICU Locale Explorer</a>で、特定のロケール定義の詳細を確認できます。
<code class="literal">k*</code>下位タグを使う例では、は少なくともICUのバージョン54が必要です。
   </p><p>このシステムでは、<span class="quote">“<span class="quote">大文字小文字の違いを無視</span>”</span>、あるいは<span class="quote">“<span class="quote">アクセントを無視</span>”</span>、あるいはその類似（<code class="literal">ks</code>を使用）の照合順序を作成できますが、PostgreSQLは今のところ、そのような照合順序が真の大文字小文字あるいはアクセントを無視するように動作しないことに注意してください。
照合順序としては同一に扱われるものの、バイトごとの比較では異なる文字列は、バイト値によってソートされます。
   </p><div class="note"><h3 class="title">Note</h3><p>設計上、ICUはロケール名としてどのような文字列も受け入れ、ドキュメントで説明されているフォールバック手続きを使って、ICUが提供するもっとも近いロケールにマッチさせます。
したがって、インストールされたICUが実際にはサポートしていない機能を使って照合順序の指定が構成されていたとしても、直接にはフィードバックはありません。
そういうわけで、照合順序の定義が要件を満たしているかどうかを確認するためのアプリケーションレベルのテストケースを作成することをお勧めします。
    </p></div></div><div class="sect4" id="COLLATION-COPY"><div class="titlepage"><div><div><h5 class="title">23.2.2.3.3. 照合順序の複製</h5></div></div></div><p>コマンド<a class="xref" href="sql-createcollation.html" title="CREATE COLLATION"><span class="refentrytitle">CREATE COLLATION</span></a>は、既存の照合順序から新しい照合順序を作る際にも利用できます。
これは、オペレーティングシステムから独立した照合順序名をアプリケーションで使用可能にしたり、互換性のある名称を作成したり、ICUが提供する照合順序を、よりわかりやすい名称で利用するのに役立ちます。
例を示します。
</p><pre class="programlisting">CREATE COLLATION german FROM "de_DE";
CREATE COLLATION french FROM "fr-x-icu";</pre><p>
   </p></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="locale.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="charset.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="multibyte.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">23.1. ロケールのサポート </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 23.3. 文字セットサポート</td></tr></table></div></body></html>