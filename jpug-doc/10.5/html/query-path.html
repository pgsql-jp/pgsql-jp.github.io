<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>50.1. 問い合わせの経路</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="overview.html" title="Chapter 50. PostgreSQL内部の概要" /><link rel="next" href="connect-estab.html" title="50.2. 接続の確立" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">50.1. 問い合わせの経路</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="overview.html" title="Chapter 50. PostgreSQL内部の概要">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="overview.html" title="Chapter 50. PostgreSQL内部の概要">Up</a></td><th width="60%" align="center">Chapter 50. PostgreSQL内部の概要</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="connect-estab.html" title="50.2. 接続の確立">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="QUERY-PATH"><div class="titlepage"><div><div><h2 class="title" style="clear: both">50.1. 問い合わせの経路</h2></div></div></div><p>ここでは、問い合わせが結果を得るためにたどる過程を簡単に説明します。
   </p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>アプリケーションプログラムから<span class="productname">PostgreSQL</span>サーバに接続が確立されなくてはなりません。
アプリケーションプログラムはサーバに問い合わせを送り、そしてサーバから送り返される結果を待ちます。
     </p></li><li class="step"><p><em class="firstterm">構文解析過程</em>で、アプリケーションプログラムから送られた問い合わせの構文が正しいかをチェックし、<em class="firstterm">問い合わせツリー</em>を作成します。
     </p></li><li class="step"><p><em class="firstterm">書き換えシステム</em>は構文解析過程で作られた問い合わせツリーを受け取り、問い合わせツリーに適用するための（<em class="firstterm">システムカタログ</em>に格納されている）<em class="firstterm">ルール</em>を探します。
そして<em class="firstterm">ルール本体</em>で与えられた変換を実行します。
     </p><p>書き換えシステムの適用例の1つとして<em class="firstterm">ビュー</em>の具現化が挙げられます。
ビュー（すなわち<em class="firstterm">仮想テーブル</em>）に対して問い合わせがあると、書き換えシステムが代わってユーザの問い合わせを、<em class="firstterm">ビュー定義</em>で与えられた<em class="firstterm">実テーブル</em>にアクセスする問い合わせに書き換えます。
     </p></li><li class="step"><p><em class="firstterm">プランナ/オプティマイザ</em>は、（書き換えられた）問い合わせツリーを見て、<em class="firstterm">エクゼキュータ</em>に渡すための<em class="firstterm">問い合わせ計画</em>を作ります。
     </p><p>そのためにまず同じ結果をもたらす全ての可能な限りの<em class="firstterm">経路</em>を作ります。
例えば、スキャンの対象となるリレーション上にインデックスがあるとすると2つの経路があります。
1つは単純なシーケンシャルスキャンで、もう1つはインデックスを使ったスキャンです。
次にそれぞれの経路を実行するためのコストが見積もられ、一番コストの小さい経路が選ばれます。
一番コストの小さな経路は、エクゼキュータが実行できるように完全な計画に拡張されます。
     </p></li><li class="step"><p>エクゼキュータは再帰的に<em class="firstterm">計画ツリー</em>上を進み、計画で示されている方法で行を抽出します。
エクゼキュータはリレーションをスキャンする間<em class="firstterm">保存システム</em>を利用して<em class="firstterm">ソート</em>と<em class="firstterm">結合</em>を実行し、<em class="firstterm">検索条件</em>の評価を行い、最後に得られた行を返します。
     </p></li></ol></div><p>これからの節では、<span class="productname">PostgreSQL</span>の内部制御とデータ構造をより良く理解するために、上に記載した事柄をさらに詳しく説明します。
   </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="overview.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="overview.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="connect-estab.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 50. PostgreSQL内部の概要 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 50.2. 接続の確立</td></tr></table></div></body></html>