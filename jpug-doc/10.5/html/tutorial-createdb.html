<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>1.3. データベースの作成</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="tutorial-arch.html" title="1.2. 構造的な基本事項" /><link rel="next" href="tutorial-accessdb.html" title="1.4. データベースへのアクセス" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">1.3. データベースの作成</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="tutorial-arch.html" title="1.2. 構造的な基本事項">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="tutorial-start.html" title="Chapter 1. さあ始めましょう">Up</a></td><th width="60%" align="center">Chapter 1. さあ始めましょう</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="tutorial-accessdb.html" title="1.4. データベースへのアクセス">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="TUTORIAL-CREATEDB"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.3. データベースの作成</h2></div></div></div><a id="id-1.4.3.4.2" class="indexterm"></a><a id="id-1.4.3.4.3" class="indexterm"></a><p>データベースサーバにアクセスできるかどうかがわかる最初の試験は、データベースの作成を試みることです。
稼働中の<span class="productname">PostgreSQL</span>サーバは多くのデータベースを管理することができます。
典型的には、プロジェクトやユーザごとに別々のデータベースが使用されます。
   </p><p>サイト管理者により使用できるデータベースが既に作成されている場合もあります。
この場合、この段階を飛ばして、次の節まで進んでください。
   </p><p>新しいデータベースを作成するには、以下のコマンドを使用してください。
この例では<code class="literal">mydb</code>という名前です。
</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>createdb mydb</code></strong></pre><p>
この手順で何も応答がなければ、この段階は成功し、本節の残りは飛ばすことができます。
   </p><p>以下のようなメッセージが現れた場合、<span class="productname">PostgreSQL</span>が正しくインストールされていません。
</p><pre class="screen">createdb: command not found</pre><p>
<span class="productname">PostgreSQL</span>がインストールされていないか、シェルの検索パスに含まれていないのいずれかです。
代わりに絶対パスでそのコマンドを実行してみてください。
</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>/usr/local/pgsql/bin/createdb mydb</code></strong></pre><p>
このパスはサイトによって異なるかもしれません。
この問題を解決するには、サイト管理者に連絡するか、インストール取扱説明書を調べてください。
   </p><p>他の応答として以下もあります。
</p><pre class="screen">createdb: could not connect to database postgres: could not connect to server: No such file or directory
        Is the server running locally and accepting
        connections on Unix domain socket "/tmp/.s.PGSQL.5432"?</pre><p>
これは、サーバが起動していないか、<code class="command">createdb</code>が想定している状態でサーバが起動していないかを示しています。
こちらも、インストール手順を点検するか管理者に相談してください。
   </p><p>他の応答として以下もあります。
</p><pre class="screen">createdb: could not connect to database postgres: FATAL:  role "joe" does not exist</pre><p>
ここでjoeのところには、ログインした時のユーザ名が記載されています。
これは、管理者がそのユーザ用の<span class="productname">PostgreSQL</span>ユーザアカウントを作成していない時に起こります
（<span class="productname">PostgreSQL</span>ユーザアカウントは、オペレーティングシステムのユーザアカウントとは別です）。
自身が管理者なら、アカウントの作成方法に関して<a class="xref" href="user-manag.html" title="Chapter 21. データベースロール">Chapter 21</a>を参照してください。
最初のユーザアカウントを作成するためには、<span class="productname">PostgreSQL</span>をインストールした時のオペレーティングシステムのユーザ（通常<code class="literal">postgres</code>）になる必要があります。
<span class="productname">PostgreSQL</span>ユーザアカウントがオペレーティングシステムのユーザ名と異なる名前で用意されているかもしれません。
その場合は、<span class="productname">PostgreSQL</span>のユーザ名を指定するために、<code class="option">-U</code>スイッチを使用するか、<code class="envar">PGUSER</code>環境変数を設定する必要があります。
   </p><p>ユーザアカウントを持っているが、データベースを作成するために必要な権限を持っていない場合は、以下のメッセージが現れます。
</p><pre class="screen">createdb: database creation failed: ERROR:  permission denied to create database</pre><p>
全てのユーザがデータベースを新規に作成できる権限を持っているわけではありません。
<span class="productname">PostgreSQL</span>がデータベースの作成を拒否した場合、サイト管理者からデータベースを作成する権限を付与してもらう必要があります。
これが発生した場合はサイト管理者に相談してください。
自身で<span class="productname">PostgreSQL</span>をインストールしたのであれば、このチュートリアルを実行する時は、サーバを起動したユーザアカウントでログインしてください。

    <a href="#ftn.id-1.4.3.4.10.4" class="footnote"><sup class="footnote" id="id-1.4.3.4.10.4">[1]</sup></a>
   </p><p>他の名前のデータベースを作成することもできます。
<span class="productname">PostgreSQL</span>は、与えられたサイトでいくつでもデータベースを作成することを許可しています。
データベース名は、先頭がアルファベット文字から始まる、63バイトまでの長さでなければなりません。
簡単な選択は、現在のユーザ名と同じ名前のデータベースを作成することです。
多くのツールでは、データベース名のデフォルトとしてそれを仮定していますので、これにより入力数を減らすことができます。
このデータベースを作成するには、単純に以下を実行します。
</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>createdb</code></strong></pre><p>
   </p><p>データベースを使用しなくなったら、削除することができます。
例えば、<code class="literal">mydb</code>データベースの所有者（作成者）であれば、以下のコマンドでそれを廃棄することができます。
</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>dropdb mydb</code></strong></pre><p>
（このコマンドでは、データベース名のデフォルトはユーザアカウント名ではありません。
常に指定しなければなりません。）
この動作は、そのデータベースに関する全てのファイルを物理的に削除しますので、取り消すことはできません。
事前に熟考した場合にのみこれを実施してください。
   </p><p><code class="command">createdb</code>や<code class="command">dropdb</code>の詳細は、それぞれ<a class="xref" href="app-createdb.html" title="createdb"><span class="refentrytitle"><span class="application">createdb</span></span></a>と<a class="xref" href="app-dropdb.html" title="dropdb"><span class="refentrytitle"><span class="application">dropdb</span></span></a>にあります。
   </p><div class="footnotes"><br /><hr style="width:100; text-align:left;margin-left: 0" /><div id="ftn.id-1.4.3.4.10.4" class="footnote"><p><a href="#id-1.4.3.4.10.4" class="para"><sup class="para">[1] </sup></a>何故これで上手くいくのかについての説明：<span class="productname">PostgreSQL</span>のユーザ名はオペレーティングシステムのユーザアカウントとは分離されています。
データベースに接続するとき、接続に利用する<span class="productname">PostgreSQL</span>のユーザ名を選択します。
選択しなければ、デフォルトで現在のオペレーティングシステムのアカウントと同じ名前となります。
これにより、サーバを開始したオペレーティングシステムのユーザと同じ名前の<span class="productname">PostgreSQL</span>ユーザアカウントが、常に存在するようになっています。
そしてまた、このユーザは常にデータベースを作成する権限を持ちます。
そのユーザとしてログインする代わりに、<code class="option">-U</code>オプションを毎回使用して、接続する<span class="productname">PostgreSQL</span>のユーザ名を選択することができます。
     </p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tutorial-arch.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="tutorial-start.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="tutorial-accessdb.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">1.2. 構造的な基本事項 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 1.4. データベースへのアクセス</td></tr></table></div></body></html>