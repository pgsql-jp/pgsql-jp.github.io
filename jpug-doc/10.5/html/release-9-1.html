<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.127. リリース9.1</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-9-1-1.html" title="E.126. リリース9.1.1" /><link rel="next" href="release-9-0-23.html" title="E.128. リリース9.0.23" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.127. リリース9.1</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-9-1-1.html" title="E.126. リリース9.1.1">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix E. リリースノート">Up</a></td><th width="60%" align="center">Appendix E. リリースノート</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="release-9-0-23.html" title="E.128. リリース9.0.23">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-9-1"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.127. リリース9.1</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-9-1.html#id-1.11.6.131.3">E.127.1. 概要</a></span></dt><dt><span class="sect2"><a href="release-9-1.html#id-1.11.6.131.4">E.127.2. バージョン9.1への移行</a></span></dt><dt><span class="sect2"><a href="release-9-1.html#id-1.11.6.131.5">E.127.3. 変更点</a></span></dt></dl></div><p><strong>リリース日: </strong>2011-09-12</p><div class="sect2" id="id-1.11.6.131.3"><div class="titlepage"><div><div><h3 class="title">E.127.1. 概要</h3></div></div></div><p>このリリースは、<span class="productname">PostgreSQL</span>が伝統的なリレーショナルデータベース機能群を超え、<span class="productname">PostgreSQL</span>独特の新しく革新的な機能を持つものになったことを表しています。
リリース9.0で導入されたストリーミングレプリケーション機能は、同期レプリケーションオプション、ストリームを使用したバックアップ、監視の改良を追加することにより非常に強化されました。
以下に多くの改良を示します。
   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="warm-standby.html#SYNCHRONOUS-REPLICATION" title="26.2.8. 同期レプリケーション">同期レプリケーション</a>が可能です。
     </p></li><li class="listitem"><p><a class="link" href="sql-createforeigntable.html" title="CREATE FOREIGN TABLE">外部テーブル</a>のサポートを追加しました。
     </p></li><li class="listitem"><p>列単位の<a class="link" href="collation.html" title="23.2. 照合順序サポート">照合順序</a>のサポートを追加しました。
     </p></li><li class="listitem"><p><span class="productname">PostgreSQL</span>の追加パッケージを簡略化する<a class="link" href="extend-extensions.html" title="37.15. 関連するオブジェクトを拡張としてパッケージ化">拡張</a>を追加しました。
     </p></li><li class="listitem"><p>本物の<a class="link" href="transaction-iso.html#XACT-SERIALIZABLE" title="13.2.3. シリアライザブル分離レベル">シリアライザブル隔離レベル</a>を追加しました。
     </p></li><li class="listitem"><p><a class="link" href="sql-createtable.html" title="CREATE TABLE"><code class="command">CREATE TABLE</code></a>内の<code class="literal">UNLOGGED</code>オプションを使用する、ログを取らないテーブルをサポートします。
     </p></li><li class="listitem"><p><a class="link" href="queries-with.html" title="7.8. WITH問い合わせ（共通テーブル式）"><code class="literal">WITH</code></a>句内でデータ変更コマンド（<code class="command">INSERT</code>/<code class="command">UPDATE</code>/<code class="command">DELETE</code>）が可能です。
     </p></li><li class="listitem"><p><a class="link" href="gist.html" title="Chapter 62. GiSTインデックス"><acronym class="acronym">GiST</acronym>インデックス</a>に（演算子で順序付けされた）近傍検索を追加しました。
     </p></li><li class="listitem"><p><a class="link" href="sql-security-label.html" title="SECURITY LABEL"><code class="command">SECURITY LABEL</code></a>コマンドと<a class="link" href="sepgsql.html" title="F.36. sepgsql"><acronym class="acronym">SELinux</acronym>権限制御</a>のサポートを追加しました。
     </p></li><li class="listitem"><p><a class="link" href="plpython.html" title="Chapter 45. PL/Python - Python手続き言語">PL/Python</a>サーバサイド言語を更新しました。
     </p></li></ul></div><p>上記の項目については後述の節で詳しく説明します。
   </p></div><div class="sect2" id="id-1.11.6.131.4"><div class="titlepage"><div><div><h3 class="title">E.127.2. バージョン9.1への移行</h3></div></div></div><p>全ての以前のリリースからデータの移行を行うためには、<span class="application">pg_dump</span>を使用したダンプ/リストア、または、<span class="application">pg_upgrade</span>の使用が必要です。
   </p><p>バージョン9.1には、以前のリリースとの互換性に影響する多くの変更が含まれます。
以下の非互換性に注意してください。
   </p><div class="sect3" id="id-1.11.6.131.4.4"><div class="titlepage"><div><div><h4 class="title">E.127.2.1. 文字列</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS"><code class="varname">standard_conforming_strings</code></a>のデフォルト値が有効に変わりました。(Robert Haas)
      </p><p>デフォルトで文字列リテラル内のバックスラッシュが通常の文字になります。
この変更により長く存在した標準SQLとの非互換性がなくなります。
長い間<a class="link" href="runtime-config-compatible.html#GUC-ESCAPE-STRING-WARNING"><code class="varname">escape_string_warning</code></a>がこの使用に関する警告を発生していました。
<code class="literal">E''</code>文字列が文字列内にバックスラッシュを埋め込む適切な方法であり、この変更による影響を受けません。
      </p><div class="warning"><h3 class="title">Warning</h3><p>この変更は、これを想定せずに古い規則にしたがった独自の文字列エスケープ処理を行うアプリケーションを破壊する可能性があります。
この結果SQLインジェクションセキュリティホールをもたらしてしまうほど厳しいものです。
信頼できない入力を外部にさらしだすアプリケーションを試験し、テキスト文字列内のバックスラッシュと単一引用符を正しく扱っていることを確認してください。
       </p></div></li></ul></div></div><div class="sect3" id="id-1.11.6.131.4.5"><div class="titlepage"><div><div><h4 class="title">E.127.2.2. キャスト</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>複合型に対する、関数形式の型キャストおよび属性形式の型キャストを許しません。(Tom Lane)
      </p><p>例えば<code class="literal"><em class="replaceable"><code>composite_value</code></em>.text</code>と<code class="literal">text(<em class="replaceable"><code>composite_value</code></em>)</code>は許されません。
意図しないこの構文の使用により頻繁に不具合報告がなされました。
これは不具合ではありませんが、こうした表現を拒絶するように戻す方が良いように考えました。
複合型全体のキャストを本当に意図している場合には<code class="literal">CAST</code>および<code class="literal">::</code>構文がまだ使用できます。
      </p></li><li class="listitem"><p>配列に基づくドメインに対するキャスト検査を厳しくしました。(Tom Lane)
      </p><p>ドメインが配列型に基づく場合、要素を取り出したり代入したりするためにドメイン値に添え字を付けるなど、配列要素にアクセスするためにドメイン型に<span class="quote">“<span class="quote">目を通す</span>”</span>ことができます。
例えば<code class="literal">UPDATE ... SET domaincol[5] = ...</code>などこうしたドメイン値の要素への代入はドメイン型の制約で再検査されるようになりました。
これまではこの検査は飛ばされていました。
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.131.4.6"><div class="titlepage"><div><div><h4 class="title">E.127.2.3. 配列</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="functions-array.html#ARRAY-FUNCTIONS-TABLE" title="Table 9.49. 配列関数"><code class="function">string_to_array()</code></a>が長さゼロの文字列に対して空の配列を返すように変更しました。(Pavel Stehule)
      </p><p>これまではNULL値を返しました。
      </p></li><li class="listitem"><p><code class="literal">NULL</code>セパレータが文字列を文字に分割するように<a class="link" href="functions-array.html#ARRAY-FUNCTIONS-TABLE" title="Table 9.49. 配列関数"><code class="function">string_to_array()</code></a>を変更しました。(Pavel Stehule)
      </p><p>これまではNULL値を返しました。
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.131.4.7"><div class="titlepage"><div><div><h4 class="title">E.127.2.4. オブジェクトの操作</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>BEFORE/AFTERトリガに対する不適切な検査を修正しました。(Tom Lane)
      </p><p>トリガが次の３つの場合で発行できるようになりました。
<code class="literal">BEFORE</code>、<code class="literal">AFTER</code>、何らかの作業の<code class="literal">INSTEAD OF</code>（代わり）。
トリガ関数の作者は、３つの場合すべてにおいてロジックが健全であることを検証しなければなりません。
      </p></li><li class="listitem"><p>ロールにコメントを設定するためにはスーパーユーザ権限または<code class="literal">CREATEROLE</code>権限が必要です。(Tom Lane)
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.131.4.8"><div class="titlepage"><div><div><h4 class="title">E.127.2.5. サーバの設定</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>返り値が減少することのないように<a class="link" href="functions-admin.html#FUNCTIONS-RECOVERY-INFO-TABLE" title="Table 9.80. リカバリ情報関数"><code class="function">pg_last_xlog_receive_location()</code></a>を変更しました。(Fujii Masao)
      </p><p>これまでは、ストリーミングレプリケーションが再開する時に<code class="function">pg_last_xlog_receive_location()</code>の値が減少することがあり得ました。
      </p></li><li class="listitem"><p><a class="link" href="runtime-config-logging.html#GUC-LOG-CONNECTIONS"><code class="varname">log_connections</code></a>にしたがったレプリケーション接続のログが取られます。(Magnus Hagander)
      </p><p>これまでは、レプリケーション接続のログは常に取られていました。
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.131.4.9"><div class="titlepage"><div><div><h4 class="title">E.127.2.6. <a class="link" href="plpgsql.html" title="Chapter 42. PL/pgSQL - SQL手続き言語">PL/pgSQL</a>サーバサイド言語</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>付与された例外ブロックで例外が捕捉できるようにパラメータを持たないPL/pgSQLの<code class="literal">RAISE</code>コマンドを変更しました。(Piyush Newe)
      </p><p>これまではコードブロック内の<code class="literal">RAISE</code>は常に付与された例外ブロックのスコープと同じになりました。
このため同じスコープのものは捕捉できませんでした。
      </p></li><li class="listitem"><p>他の手続き言語と一貫性を持つようにPL/pgSQLのエラー行のコードの番号付けを調整しました。(Pavel Stehule)
      </p><p>これまでのPL/pgSQLでは、関数本体の先頭にある空行を無視していました(数えませんでした)。
これは他のすべての言語と一貫していませんでしたので、この特別な扱いを取りやめました。
      </p></li><li class="listitem"><p>INパラメータとOUTパラメータの名前に競合がある場合にPL/pgSQLが警告を出すようにしました。(Tom Lane)
      </p><p>これまでは重複を検出しませんでした。
その名前は警告なく単にOUTパラメータのみを参照していました。
      </p></li><li class="listitem"><p>PL/pgSQL変数の型修飾子がSQLパーサから可視になりました。(Tom Lane)
      </p><p>PL/pgSQL変数に付与された（varchar型の長さ制限などの）型修飾子はこれまで代入時に強制されていましたが、他の目的のためにはすべて無視されていました。
こうした変数が、より同じ修飾子を付けて宣言されたテーブル列のように動作するようになりました。
ほとんどの場合で目に見えるような違いが発生するとは思われませんが、
PL/pgSQL関数で発行された同じSQLコマンドで微妙な違いが発生するかもしれません。
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.131.4.10"><div class="titlepage"><div><div><h4 class="title">E.127.2.7. Contrib</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>すべてのcontribモジュールは、独自のSQLスクリプトを手作業で呼び出すのではなく、<a class="link" href="sql-createextension.html" title="CREATE EXTENSION"><code class="command">CREATE EXTENSION</code></a>を用いてインストールされます。(Dimitri Fontaine、Tom Lane)
      </p><p>バージョン9.0のcontribモジュールを含む既存のデータベースを更新する場合は、既存のcontribモジュールのオブジェクトを拡張としてまとめるために<code class="literal">CREATE EXTENSION ... FROM unpackaged</code>を使用してください。
9.0より前のバージョンから更新する場合は、古いアンインストールスクリプトを使用してcontribモジュールのオブジェクトを削除してから<code class="literal">CREATE EXTENSION</code>を使用してください。
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.131.4.11"><div class="titlepage"><div><div><h4 class="title">E.127.2.8. その他の非互換性</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="monitoring-stats.html#MONITORING-STATS-FUNCS-TABLE" title="Table 28.19. その他の統計情報関数"><code class="function">pg_stat_reset()</code></a>がすべてのデータベースレベルの統計情報を再初期化するようになりました。(Tomas Vondra)
      </p><p>一部の<code class="structname">pg_stat_database</code>カウンタが再初期化されていませんでした。
      </p></li><li class="listitem"><p><a class="link" href="infoschema-triggers.html" title="36.55. triggers"><code class="structname">information_schema.triggers</code></a>の一部の列名を新しい標準SQLの名前に合致するように修正しました。(Dean Rasheed)
      </p></li><li class="listitem"><p><span class="application">ECPG</span>のカーソル名を大文字小文字を区別せずに扱います。(Zoltan Boszormenyi)
      </p></li></ul></div></div></div><div class="sect2" id="id-1.11.6.131.5"><div class="titlepage"><div><div><h3 class="title">E.127.3. 変更点</h3></div></div></div><p><span class="productname">PostgreSQL</span> 9.1と前回のメジャーリリースとの間の変更について詳細を以下に記します。
   </p><div class="sect3" id="id-1.11.6.131.5.3"><div class="titlepage"><div><div><h4 class="title">E.127.3.1. サーバ</h4></div></div></div><div class="sect4" id="id-1.11.6.131.5.3.2"><div class="titlepage"><div><div><h5 class="title">E.127.3.1.1. 性能</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="sql-createtable.html" title="CREATE TABLE"><code class="command">CREATE TABLE</code></a>内の<code class="literal">UNLOGGED</code>オプションを使用する、ログを取らないテーブルをサポートします。(Robert Haas)
       </p><p>こうしたテーブルは通常のテーブルよりも優れた更新性能を提供しますが、クラッシュ時に安全ではありません。
サーバがクラッシュした場合、その内容は自動的に消去されます。
またその内容はレプリケーションのスレーブには伝播されません。
       </p></li><li class="listitem"><p><code class="literal">FULL OUTER JOIN</code>をハッシュ結合として実現することができます。
また、<code class="literal">LEFT OUTER JOIN</code>または<code class="literal">RIGHT OUTER JOIN</code>の片側をハッシュ化することができます。(Tom Lane)
       </p><p>これまでの<code class="literal">FULL OUTER JOIN</code>ではマージ結合としてのみ実現することができました。
また<code class="literal">LEFT OUTER JOIN</code>と<code class="literal">RIGHT OUTER JOIN</code>は結合のNULLを持つ側のみをハッシュ化することができました。
これらの変更により、さらに問い合わせ最適化の可能性が加わりました。
       </p></li><li class="listitem"><p>fsync要求をまとめます。(Robert Haas、Greg Smith)
       </p><p>これは非常に書き込み負荷が高い状況での性能を大きく改良します。
       </p></li><li class="listitem"><p><a class="link" href="runtime-config-wal.html#GUC-COMMIT-SIBLINGS"><code class="varname">commit_siblings</code></a>の性能を向上しました。(Greg Smith)
       </p><p>これにより、より少ないオーバーヘッドで<code class="varname">commit_siblings</code>を使用することができます。
       </p></li><li class="listitem"><p>大規模なispell辞書で必要とされるメモリ量を減少しました。(Pavel Stehule、Tom Lane)
       </p></li><li class="listitem"><p><span class="quote">“<span class="quote">blind writes</span>”</span>後データファイルが開いたままになることを防止します。(Alvaro Herrera)
       </p><p>これは、バックエンドが削除された後も長い間開いた状態のファイルを保持するかもしれず、カーネルによるディスク領域の回収を妨げるという状況を修正します。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.3.3"><div class="titlepage"><div><div><h5 class="title">E.127.3.1.2. オプティマイザ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>継承テーブルのスキャンが有意にソートされた結果を返すことができます。(Greg Stark、Hans-Jurgen Schonig、Robert Haas、Tom Lane)
       </p><p>これにより、継承テーブルを持ち、<code class="literal">ORDER BY</code>、<code class="literal">LIMIT</code>、<code class="literal">MIN</code>/<code class="literal">MAX</code>を使用する問い合わせをより良く最適化することができます。
       </p></li><li class="listitem"><p>GINインデックススキャンのコスト推定を改良しました。(Teodor Sigaev)
       </p></li><li class="listitem"><p>集約およびウィンドウ関数のコスト推定を改良しました。(Tom Lane)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.3.4"><div class="titlepage"><div><div><h5 class="title">E.127.3.1.3. 認証</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="auth-pg-hba-conf.html" title="20.1. pg_hba.confファイル"><code class="filename">pg_hba.conf</code></a>において、ホスト名およびホスト接尾辞（<code class="literal">.example.com</code>など）をサポートします。(Peter Eisentraut)
       </p><p>これまではホストの<acronym class="acronym">IP</acronym>アドレスと<acronym class="acronym">CIDR</acronym>値のみがサポートされていました。
       </p></li><li class="listitem"><p><a class="link" href="auth-pg-hba-conf.html" title="20.1. pg_hba.confファイル"><code class="filename">pg_hba.conf</code></a>のホスト列において<code class="literal">all</code>キーワードをサポートします。(Peter Eisentraut)
       </p><p>これまでは、このために<code class="literal">0.0.0.0/0</code>または<code class="literal">::/0</code>を使用していました。
       </p></li><li class="listitem"><p>Unixソケット接続をサポートしないプラットフォームにおいて、<a class="link" href="auth-pg-hba-conf.html" title="20.1. pg_hba.confファイル"><code class="filename">pg_hba.conf</code></a>内の<code class="literal">local</code>行を拒絶します。(Magnus Hagander)
       </p><p>これまではこうした行は警告なく無視されましたが、驚くような結果を招くかもしれませんでした。
これにより他の未サポートの場合とより同じように動作するようになりました。
       </p></li><li class="listitem"><p><a class="link" href="auth-methods.html#GSSAPI-AUTH" title="20.3.3. GSSAPI認証"><acronym class="acronym">GSSAPI</acronym></a>を<a class="link" href="auth-methods.html#SSPI-AUTH" title="20.3.4. SSPI認証"><acronym class="acronym">SSPI</acronym></a>を介したサーバ認証に使用できるようになりました。(Christian Ullrich)
       </p><p>特にこれによりUnixベースの<acronym class="acronym">GSSAPI</acronym>クライアントがWindowsサーバで<acronym class="acronym">SSPI</acronym>認証させることができます。
       </p></li><li class="listitem"><p>ローカルソケット経由の<a class="link" href="auth-methods.html#AUTH-IDENT" title="20.3.5. Ident認証"><code class="literal">ident</code></a>認証を<a class="link" href="auth-methods.html#AUTH-PEER" title="20.3.6. Peer認証"><code class="literal">peer</code></a>と名付けました。(Magnus Hagander)
       </p><p>古い用語はまだ後方互換性のために受け入れられます。
しかし２つの方式は根本的に異なるものですので、別の名前を採用する方が良いのかもしれません。
       </p></li><li class="listitem"><p>資格制御メッセージの使用を防止するために、<a class="link" href="auth-methods.html#AUTH-PEER" title="20.3.6. Peer認証"><acronym class="acronym">peer</acronym></a>認証を書き直しました。(Tom Lane)
       </p><p>この変更によりピア認証コードがより単純に、より良い性能がでるようになりました。
しかし、<code class="function">getpeereid</code>関数か同等のソケット操作を提供するプラットフォームが必要です。
分かっている限りでは、これまでピア認証が動作し、このバージョンで動作しなくなったプラットフォームは5.0より前のNetBSDのみです。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.3.5"><div class="titlepage"><div><div><h5 class="title">E.127.3.1.4. 監視</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="runtime-config-logging.html#GUC-LOG-CHECKPOINTS"><code class="varname">log_checkpoints</code></a>により制御される、リスタートポイントおよびチェックポイントのログ処理に詳細を追加しました。(Fujii Masao、Greg Smith)
       </p><p><acronym class="acronym">WAL</acronym>ファイルの詳細や同期処理に関する詳細が含まれるようになりました。
       </p></li><li class="listitem"><p>ログ収集機構により作成されるログファイルの権限を制御する、<a class="link" href="runtime-config-logging.html#GUC-LOG-FILE-MODE"><code class="varname">log_file_mode</code></a>が追加されました。(Martin Pihlak)
       </p></li><li class="listitem"><p><span class="application">syslog</span>ログ処理用の最大行長を接頭辞分と900バイトをたし合わせた値に減らしました。(Noah Misch)
       </p><p>これにより、一般的な2kBではなく1kBの長さ制限を持つsyslog実装における長大な行の切り詰めを防止します。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.3.6"><div class="titlepage"><div><div><h5 class="title">E.127.3.1.5. 統計情報ビュー</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="structfield">client_hostname</code>列を<a class="link" href="monitoring-stats.html#MONITORING-STATS-VIEWS-TABLE" title="Table 28.2. 収集済み統計情報ビュー"><code class="structname">pg_stat_activity</code></a>に追加しました。(Peter Eisentraut)
       </p><p>これまではクライアントのアドレスのみが報告されていました。
       </p></li><li class="listitem"><p><a class="link" href="monitoring-stats.html#MONITORING-STATS-VIEWS-TABLE" title="Table 28.2. 収集済み統計情報ビュー"><code class="structname">pg_stat_xact_*</code></a>統計情報関数およびビューを追加しました。(Joel Jacobson)
       </p><p>これらはデータベース全体の統計情報カウンタビューと似ていますが、現在のトランザクションのみを計数に反映します。
       </p></li><li class="listitem"><p>データベースレベルおよびバックグラウンドライタの統計情報ビューに最終再初期化時間を追加しました。(Tomas Vondra)
       </p></li><li class="listitem"><p><a class="link" href="monitoring-stats.html#MONITORING-STATS-VIEWS-TABLE" title="Table 28.2. 収集済み統計情報ビュー"><code class="structname">pg_stat_*_tables</code></a>ビューにバキューム操作および解析操作の回数を示す列を追加しました。(Magnus Hagander)
       </p></li><li class="listitem"><p><code class="structfield">buffers_backend_fsync</code>列を<a class="link" href="monitoring-stats.html#MONITORING-STATS-VIEWS-TABLE" title="Table 28.2. 収集済み統計情報ビュー"><code class="structname">pg_stat_bgwriter</code></a>に追加しました。(Greg Smith)
       </p><p>この新しい列は、バッファのバックグラウンドfsyncの回数を数えます。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.3.7"><div class="titlepage"><div><div><h5 class="title">E.127.3.1.6. サーバの設定</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="runtime-config-wal.html#GUC-WAL-BUFFERS"><code class="varname">wal_buffers</code></a>の自動調整を提供します。(Greg Smith)
       </p><p><code class="varname">wal_buffers</code>の値はデフォルトで<code class="varname">shared_buffers</code>の容量に応じて自動的に調整されるようになりました。
       </p></li><li class="listitem"><p><a class="link" href="runtime-config-locks.html#GUC-DEADLOCK-TIMEOUT"><code class="varname">deadlock_timeout</code></a>、<a class="link" href="runtime-config-logging.html#GUC-LOG-MIN-DURATION-STATEMENT"><code class="varname">log_min_duration_statement</code></a>、<a class="link" href="runtime-config-autovacuum.html#GUC-LOG-AUTOVACUUM-MIN-DURATION"><code class="varname">log_autovacuum_min_duration</code></a>の最大値を増やしました。(Peter Eisentraut)
       </p><p>これまでのこれらのパラメータの最大値はそれぞれおよそ35分でしかありませんでした。
もっと大きな値が許されるようになりました。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.131.5.4"><div class="titlepage"><div><div><h4 class="title">E.127.3.2. レプリケーションとリカバリ</h4></div></div></div><div class="sect4" id="id-1.11.6.131.5.4.2"><div class="titlepage"><div><div><h5 class="title">E.127.3.2.1. ストリーミングレプリケーションと継続的アーカイブ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="warm-standby.html#SYNCHRONOUS-REPLICATION" title="26.2.8. 同期レプリケーション">同期レプリケーション</a>が可能です。(Simon Riggs、Fujii Masao)
      </p><p>これによりプライマリサーバは、コミットを認める前にスタンバイがトランザクション情報をディスクに書き出すまで待機することができます。
一度に１つのスタンバイのみが、<a class="link" href="runtime-config-replication.html#GUC-SYNCHRONOUS-STANDBY-NAMES"><code class="varname">synchronous_standby_names</code></a>設定で制御される同期スタンバイの役割を果たすことができます。
同期レプリケーションは、<a class="link" href="runtime-config-wal.html#GUC-SYNCHRONOUS-COMMIT"><code class="varname">synchronous_commit</code></a>設定を用いてトランザクション単位で有効にしたり無効にしたりすることができます。
      </p></li><li class="listitem"><p>ストリーミングレプリケーション接続を使用してファイルシステムバックアップをスタンバイサーバに送信するためのプロトコルサポートを追加しました。(Magnus Hagander、Heikki Linnakangas)
      </p><p>これによりスタンバイサーバを構築すると気にファイルシステムバックアップを手作業で転送する必要性がなくなります。
      </p></li><li class="listitem"><p><code class="varname">replication_timeout</code>設定を追加しました。(Fujii Masao、Heikki Linnakangas)
      </p><p><code class="varname">replication_timeout</code>間隔より長く待機状態であったレプリケーション接続は自動的に終了します。
これまでは失敗している接続は、多くの状況で不便な長さであるTCPタイムアウトに達するまで通常検出されませんでした。
      </p></li><li class="listitem"><p>新しいスタンバイサーバの作成やデータベースバックアップのための<a class="link" href="app-pgbasebackup.html" title="pg_basebackup"><span class="application">pg_basebackup</span></a>コマンドラインツールを追加しました。(Magnus Hagander)
      </p></li><li class="listitem"><p>ロール用に<a class="link" href="sql-createrole.html" title="CREATE ROLE">replication権限</a>を追加しました。(Magnus Hagander)
      </p><p>これはストリーミングレプリケーションで使用される読み取り専用の権限です。
これによりスーパーユーザ以外のロールがレプリケーション用接続を使用することができます。
以前はスーパーユーザのみがレプリケーション用接続を初期化することができました。
デフォルトでスーパーユーザは引き続きこの権限を持ちます。
      </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.4.3"><div class="titlepage"><div><div><h5 class="title">E.127.3.2.2. レプリケーションの監視</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><acronym class="acronym">WAL</acronym>送信プロセスの活動を表示する<a class="link" href="monitoring-stats.html#PG-STAT-REPLICATION-VIEW" title="Table 28.5. pg_stat_replicationビュー"><code class="structname">pg_stat_replication</code></a>システムビューを追加しました。(Itagaki Takahiro、Simon Riggs)
       </p><p>これは接続されたスタンバイサーバすべての状態を報告します。
       </p></li><li class="listitem"><p><a class="link" href="functions-admin.html#FUNCTIONS-RECOVERY-INFO-TABLE" title="Table 9.80. リカバリ情報関数"><code class="function">pg_last_xact_replay_timestamp()</code></a>監視用関数を追加しました。(Fujii Masao)
       </p><p>これは、もっとも最近プライマリでコミットまたはアボートしたレコードがスタンバイに適用された時間を報告します。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.4.4"><div class="titlepage"><div><div><h5 class="title">E.127.3.2.3. ホットスタンバイ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>スタンバイがプライマリの古い行バージョンの整理を延期させることを有効にする<a class="link" href="runtime-config-replication.html#GUC-HOT-STANDBY-FEEDBACK"><code class="varname">hot_standby_feedback</code></a>設定パラメータを追加しました。(Simon Riggs)
      </p><p>これはスタンバイ上で長時間実行している問い合わせがキャンセルされることを防ぐために役立ちます。
      </p></li><li class="listitem"><p>キャンセルされた問い合わせとその理由を示す<a class="link" href="monitoring-stats.html#MONITORING-STATS-VIEWS-TABLE" title="Table 28.2. 収集済み統計情報ビュー"><code class="structname">pg_stat_database_conflicts</code></a>システムビューを追加しました。(Magnus Hagander)
       </p><p>キャンセルは、削除されたテーブル空間、ロックタイムアウト、古いスナップショット、ピン付けされたバッファ、デッドロックが原因で起こり得ます。
       </p></li><li class="listitem"><p><a class="link" href="monitoring-stats.html#MONITORING-STATS-VIEWS-TABLE" title="Table 28.2. 収集済み統計情報ビュー"><code class="structname">pg_stat_database</code></a>に<code class="structfield">conflicts</code>カウントを追加しました。(Magnus Hagander)
       </p><p>これはデータベース内で発生した競合回数です。
       </p></li><li class="listitem"><p><a class="link" href="runtime-config-replication.html#GUC-MAX-STANDBY-ARCHIVE-DELAY"><code class="varname">max_standby_archive_delay</code></a>および<a class="link" href="runtime-config-replication.html#GUC-MAX-STANDBY-STREAMING-DELAY"><code class="varname">max_standby_streaming_delay</code></a>の最大値を増やしました。
       </p><p>これまでのこれらのパラメータの最大値はそれぞれおよそ35分でしかありませんでした。
もっと大きな値が許されるようになりました。
       </p></li><li class="listitem"><p>削除されたデータベースが原因のリカバリの競合を報告する<a class="link" href="errcodes-appendix.html#ERRCODES-TABLE" title="Table A.1. PostgreSQLエラーコード"><code class="literal">ERRCODE_T_R_DATABASE_DROPPED</code></a>エラーコードを追加しました。(Tatsuo Ishii)
       </p><p>これは接続プールソフトウェアで有用です。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.4.5"><div class="titlepage"><div><div><h5 class="title">E.127.3.2.4. リカバリの制御</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ストリーミングレプリケーションの再生を制御する関数を追加しました。(Simon Riggs)
       </p><p>新しい関数は、<a class="link" href="functions-admin.html#FUNCTIONS-RECOVERY-CONTROL-TABLE" title="Table 9.81. リカバリ制御関数"><code class="function">pg_xlog_replay_pause()</code></a>、<a class="link" href="functions-admin.html#FUNCTIONS-RECOVERY-CONTROL-TABLE" title="Table 9.81. リカバリ制御関数"><code class="function">pg_xlog_replay_resume()</code></a>、および、<a class="link" href="functions-admin.html#FUNCTIONS-RECOVERY-CONTROL-TABLE" title="Table 9.81. リカバリ制御関数"><code class="function">pg_is_xlog_replay_paused()</code></a>状態関数です。
       </p></li><li class="listitem"><p>指定対象でリカバリを休止させるために<code class="varname">pause_at_recovery_target</code>設定を<code class="filename">recovery.conf</code>に追加しました。(Simon Riggs)
       </p><p>これによりリカバリ中のサーバに問い合わせて、リカバリポイントが希望のものかどうかを検査することができます。
       </p></li><li class="listitem"><p><a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-BACKUP-TABLE" title="Table 9.79. バックアップ制御関数"><code class="function">pg_create_restore_point()</code></a>を使用して、リストアポイントを名前を付けて作成する機能を追加しました。(Jaime Casanova)
       </p><p><code class="filename">recovery.conf</code>の新しい<a class="link" href="recovery-target-settings.html#RECOVERY-TARGET-NAME"><code class="varname">recovery_target_name</code></a>設定を使用して、これらの名前付きリストアポイントをリカバリ対象として指定することができます。
       </p></li><li class="listitem"><p>スタンバイリカバリが新しい時系列に自動的に切り替えることができます。(Heikki Linnakangas)
       </p><p>スタンバイサーバは新しい時系列用のアーカイブディレクトリを定期的にスキャンします。
       </p></li><li class="listitem"><p>バックエンドのクラッシュ後の自動サーバ再起動を無効にする<a class="link" href="runtime-config-error-handling.html#GUC-RESTART-AFTER-CRASH"><code class="varname">restart_after_crash</code></a>設定を追加しました。(Robert Haas)
       </p><p>これにより外部のクラスタ管理ソフトウェアがサーバを再起動すべきかどうかを制御できるようになります。
       </p></li><li class="listitem"><p><a class="link" href="recovery-config.html" title="Chapter 27. リカバリの設定"><code class="filename">recovery.conf</code></a>で<code class="filename">postgresql.conf</code>と同じ引用符付けを使用できるようになりました。(Dimitri Fontaine)
       </p><p>これまではすべての値を引用符付けしなければなりませんでした。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.131.5.5"><div class="titlepage"><div><div><h4 class="title">E.127.3.3. 問い合わせ</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>本物の<a class="link" href="transaction-iso.html#XACT-SERIALIZABLE" title="13.2.3. シリアライザブル分離レベル">シリアライザブル隔離レベル</a>を追加しました。
       </p><p>これまでは、シリアライザブルを要求した場合に、そのトランザクション全体で単一MVCCスナップショットが使用されることのみが保証され、文書化された特定の例外が許容されていました。
これまでのスナップショット隔離動作は、<a class="link" href="transaction-iso.html#XACT-REPEATABLE-READ" title="13.2.2. リピータブルリード分離レベル"><code class="literal">REPEATABLE READ</code></a>隔離レベルを要求することでまだ使用することができます。
       </p></li><li class="listitem"><p><a class="link" href="queries-with.html" title="7.8. WITH問い合わせ（共通テーブル式）"><code class="literal">WITH</code></a>句内でデータ変更コマンド（<code class="command">INSERT</code>/<code class="command">UPDATE</code>/<code class="command">DELETE</code>）が可能です。(Marko Tiikkaja、Hitoshi Harada)
       </p><p>これらのコマンドは<code class="literal">RETURNING</code>を使用して含有する問い合わせにデータを渡すことができます。
       </p></li><li class="listitem"><p><a class="link" href="queries-with.html" title="7.8. WITH問い合わせ（共通テーブル式）"><code class="literal">WITH</code></a>句を<code class="command">INSERT</code>、<code class="command">UPDATE</code>、<code class="command">DELETE</code>文に付与することができます。(Marko Tiikkaja、Hitoshi Harada)
       </p></li><li class="listitem"><p>主キーが<code class="literal">GROUP BY</code>句で指定されていた場合、問い合わせの対象リスト内で<a class="link" href="queries-table-expressions.html#QUERIES-GROUP" title="7.2.3. GROUP BY句とHAVING句"><code class="literal">GROUP BY</code></a>されていない列が許されます。(Peter Eisentraut)
       </p><p>標準SQLではすでにこの動作が許されています。
また主キーですので結果にあいまいさはありません。
       </p></li><li class="listitem"><p><a class="link" href="queries-union.html" title="7.4. 問い合わせの結合"><code class="literal">UNION</code>/<code class="literal">INTERSECT</code>/<code class="literal">EXCEPT</code></a>句内で<code class="literal">DISTINCT</code>キーワードを使用することができます。(Tom Lane)
       </p><p><code class="literal">DISTINCT</code>はデフォルトの動作ですので、このキーワードは冗長です。
しかし標準SQLでは許されています。
       </p></li><li class="listitem"><p><code class="command">EXPLAIN ANALYZE</code>の時、ルールを持つ普通の問い合わせが同じスナップショットを使用するように修正しました。(Marko Tiikkaja)
       </p><p>これまでの<code class="command">EXPLAIN ANALYZE</code>は、ルールを持つ問い合わせに対して多少時期が異なるスナップショットを使用していました。
<code class="command">EXPLAIN ANALYZE</code>の動作はより論理的になるべきと評価されました。
       </p></li></ul></div><div class="sect4" id="id-1.11.6.131.5.5.3"><div class="titlepage"><div><div><h5 class="title">E.127.3.3.1. 文字列</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>列単位の<a class="link" href="collation.html" title="23.2. 照合順序サポート">照合順序</a>のサポートを追加しました。(Peter Eisentraut、Tom Lane)
       </p><p>これまでの照合順序（テキスト文字列のソート順序）はデータベース作成時のみで設定することができました。
照合順序は、標準SQLの<code class="literal">COLLATE</code>句を用いて、列、ドメイン、インデックス、式単位で設定することができるようになりました。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.131.5.6"><div class="titlepage"><div><div><h4 class="title">E.127.3.4. オブジェクトの操作</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="productname">PostgreSQL</span>の追加パッケージを簡略化する<a class="link" href="extend-extensions.html" title="37.15. 関連するオブジェクトを拡張としてパッケージ化">拡張</a>を追加しました。(Dimitri Fontaine、Tom Lane)
       </p><p>拡張は新しい<a class="link" href="sql-createextension.html" title="CREATE EXTENSION"><code class="command">CREATE</code></a>/<a class="link" href="sql-alterextension.html" title="ALTER EXTENSION"><code class="command">ALTER</code></a>/<a class="link" href="sql-dropextension.html" title="DROP EXTENSION"><code class="command">DROP EXTENSION</code></a>コマンドで制御されます。
これは、<span class="productname">PostgreSQL</span>インストレーションにまとまったオブジェクトを追加するためのその場しのぎの方法を置き換えます。
       </p></li><li class="listitem"><p><a class="link" href="sql-createforeigntable.html" title="CREATE FOREIGN TABLE">外部テーブル</a>のサポートを追加しました。(Shigeru Hanada、Robert Haas、Jan Urbanski、Heikki Linnakangas)
       </p><p>これによりデータベースの外部に格納されたデータを<span class="productname">PostgreSQL</span>に格納されたデータそのものであるかのように使用することができます。
しかし現時点では外部テーブルは読み取り専用です。
       </p></li><li class="listitem"><p><a class="link" href="sql-altertype.html" title="ALTER TYPE"><code class="command">ALTER TYPE</code></a>を用いて既存の列挙型に新しい値を追加することができます。(Andrew Dunstan)
      </p></li><li class="listitem"><p><a class="link" href="sql-altertype.html" title="ALTER TYPE"><code class="command">ALTER TYPE ... ADD/DROP/ALTER/RENAME ATTRIBUTE</code></a>を追加しました。(Peter Eisentraut)
       </p><p>これにより複合型の変更ができます。
       </p></li></ul></div><div class="sect4" id="id-1.11.6.131.5.6.3"><div class="titlepage"><div><div><h5 class="title">E.127.3.4.1. オブジェクトに対する<code class="command">ALTER</code></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>型付けされたテーブルに対する<a class="link" href="sql-altertype.html" title="ALTER TYPE"><code class="command">ALTER TYPE</code></a>操作に<code class="literal">RESTRICT</code>/<code class="literal">CASCADE</code>を追加しました。(Peter Eisentraut)
       </p><p>これは<code class="literal">ADD</code>/<code class="literal">DROP</code>/<code class="literal">ALTER</code>/<code class="literal">RENAME ATTRIBUTE</code>のカスケード動作を制御します。
       </p></li><li class="listitem"><p><code class="literal">ALTER TABLE <em class="replaceable"><code>name</code></em> {OF | NOT OF}<em class="replaceable"><code>type</code></em></code>をサポートします。(Noah Misch)
       </p><p>この構文により、スタンドアローンのテーブルを型付けされたテーブルにすること、型付けされたテーブルをスタンドアローンにすることができます。
       </p></li><li class="listitem"><p><code class="command">ALTER ... SET SCHEMA</code>コマンド内でより多くのオブジェクトに対するサポートを追加しました。(Dimitri Fontaine)
       </p><p>このコマンドは、変換、演算子、演算子クラス、演算子族、全文検索設定、全文検索辞書、全文検索パーサ、全文検索テンプレートをサポートするようになりました。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.6.4"><div class="titlepage"><div><div><h5 class="title">E.127.3.4.2. <a class="link" href="sql-createtable.html" title="CREATE TABLE"><code class="command">CREATE/ALTER TABLE</code></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">ALTER TABLE ... ADD UNIQUE/PRIMARY KEY USING INDEX</code>を追加しました。(Gurjeet Singh)
       </p><p>これにより主キーまたは一意性制約を、同時に作成された一意性インデックスを含む、既存の一意性インデックスを用いて定義することができます。
       </p></li><li class="listitem"><p><code class="command">ALTER TABLE</code>で検証なく外部キーを追加することができます。(Simon Riggs)
       </p><p>新しいオプションは<code class="literal">NOT VALID</code>という名前です。
この制約の状態を後で<code class="literal">VALIDATED</code>に変更することで有効性検査を行うことができます。
これらを用いて、読み書き操作に対して最小限の影響で外部キーを追加することができます。
       </p></li><li class="listitem"><p>適切な状況においてテーブル書き換えを行わない<a class="link" href="sql-altertable.html" title="ALTER TABLE"><code class="command">ALTER TABLE ... SET DATA TYPE</code></a>が可能です。(Noah Misch、Robert Haas)
       </p><p>例えば、<code class="type">varchar</code>列を<code class="type">text</code>に変換する場合にテーブルの書き換えが必要なくなりました。
しかし<code class="type">varchar</code>列の長さ制限を増やす場合にはまだテーブルの書き換えが必要です。
       </p></li><li class="listitem"><p><a class="link" href="sql-createtable.html" title="CREATE TABLE"><code class="command">CREATE TABLE IF NOT EXISTS</code></a>構文を追加しました。(Robert Haas)
       </p><p>これにより、テーブルがすでに存在する場合でもエラーを発生することなく、テーブル作成が許されます。
       </p></li><li class="listitem"><p>２つのバックエンドが同時に１つのテーブルに継承した子テーブルを追加しようとした時に潜在する<span class="quote">“<span class="quote">tuple concurrently updated</span>”</span>エラーを修正しました。(Robert Haas)
       </p><p>セッションが親テーブルを同時に更新できなくするために、<a class="link" href="sql-altertable.html" title="ALTER TABLE"><code class="command">ALTER TABLE</code></a>が親テーブルに対してより強いロックを取得するようになりました。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.6.5"><div class="titlepage"><div><div><h5 class="title">E.127.3.4.3. オブジェクトの権限</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="sql-security-label.html" title="SECURITY LABEL"><code class="command">SECURITY LABEL</code></a>コマンドを追加しました。(KaiGai Kohei)
       </p><p>これによりオブジェクトにセキュリティラベルを付与することができます。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.131.5.7"><div class="titlepage"><div><div><h4 class="title">E.127.3.5. ユーティリティ操作</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>トランザクションレベルの<a class="link" href="explicit-locking.html#ADVISORY-LOCKS" title="13.3.5. 勧告的ロック">勧告的ロック</a>を追加しました。(Marko Tiikkaja)
      </p><p>これは既存のセッションレベルの勧告的ロックと似ていますが、こうしたロックはトランザクション終了時に自動的に解放されます。
      </p></li><li class="listitem"><p><a class="link" href="sql-truncate.html" title="TRUNCATE"><code class="command">TRUNCATE ... RESTART IDENTITY</code></a>はトランザクション的にシーケンスを再開始させます。(Steve Singer)
      </p><p>これまでのカウンタは、バックエンドがコミット中のトランザクション処理とコミット完了の間にクラッシュした場合、同期されないままとなる可能性がありました。
      </p></li></ul></div><div class="sect4" id="id-1.11.6.131.5.7.3"><div class="titlepage"><div><div><h5 class="title">E.127.3.5.1. <a class="link" href="sql-copy.html" title="COPY"><code class="command">COPY</code></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">ENCODING</code>オプションを<a class="link" href="sql-copy.html" title="COPY"><code class="command">COPY TO/FROM</code></a>に追加しました。(Hitoshi Harada、Itagaki Takahiro)
       </p><p>これにより<code class="command">COPY</code>ファイルの符号化方式をクライアント符号化方式とは別に指定することができます。
       </p></li><li class="listitem"><p>双方向<a class="link" href="sql-copy.html" title="COPY"><code class="command">COPY</code></a>プロトコルのサポートを追加しました。(Fujii Masao)
       </p><p>現時点ではストリーミングレプリケーションによってのみ使用されています。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.7.4"><div class="titlepage"><div><div><h5 class="title">E.127.3.5.2. <a class="link" href="sql-explain.html" title="EXPLAIN"><code class="command">EXPLAIN</code></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">EXPLAIN VERBOSE</code>が、<code class="literal">FunctionScan</code>ノード内の関数呼び出し式を示すようにしました。(Tom Lane)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.7.5"><div class="titlepage"><div><div><h5 class="title">E.127.3.5.3. <a class="link" href="sql-vacuum.html" title="VACUUM"><code class="command">VACUUM</code></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="sql-vacuum.html" title="VACUUM"><code class="command">VACUUM FULL VERBOSE</code></a>および<a class="link" href="sql-cluster.html" title="CLUSTER"><code class="command">CLUSTER VERBOSE</code></a>の出力にさらに詳細を追加しました。(Itagaki Takahiro)
       </p><p>新しい情報には、有効タプル数、無効タプル数、<code class="command">CLUSTER</code>が再構築するためにインデックスを使用するかどうかが含まれます。
       </p></li><li class="listitem"><p>テーブルロックを獲得できなかった場合に<a class="link" href="routine-vacuuming.html#AUTOVACUUM" title="24.1.6. 自動バキュームデーモン">自動バキューム</a>が待機することを防ぎます。(Robert Haas)
       </p><p>後でそのテーブルのバキュームを試みます。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.7.6"><div class="titlepage"><div><div><h5 class="title">E.127.3.5.4. <a class="link" href="sql-cluster.html" title="CLUSTER"><code class="command">CLUSTER</code></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">CLUSTER</code>がインデックスをスキャンするよりも安価であるように見える場合にインデックスのスキャンではなく、テーブルをソートすることができます。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.7.7"><div class="titlepage"><div><div><h5 class="title">E.127.3.5.5. インデックス</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="gist.html" title="Chapter 62. GiSTインデックス"><acronym class="acronym">GiST</acronym>インデックス</a>に（演算子で順序付けされた）近傍検索を追加しました。(Teodor Sigaev、Tom Lane)
       </p><p>これにより<acronym class="acronym">GiST</acronym>インデックスが<code class="literal">LIMIT</code>を持つ問い合わせにおいて<em class="replaceable"><code>N</code></em>個の近傍値を素早く返すことができます。
例えば、
</p><pre class="programlisting">SELECT * FROM places ORDER BY location &lt;-&gt; point '(101,456)' LIMIT 10;</pre><p>
は指定された対象位置に最も近い10点を見つけ出します。
       </p></li><li class="listitem"><p><a class="link" href="gin.html" title="Chapter 64. GINインデックス"><acronym class="acronym">GIN</acronym>インデックス</a>がNULL値と空値をインデックス付けすることができます。(Tom Lane)
       </p><p>これにより完全な<acronym class="acronym">GIN</acronym>インデックススキャンができ、GINスキャンが失敗していた各種境界条件を修正することができます。
       </p></li><li class="listitem"><p><a class="link" href="gin.html" title="Chapter 64. GINインデックス"><acronym class="acronym">GIN</acronym>インデックス</a>がより良く重複する検索項目を認識することができます。(Tom Lane)
       </p><p>これは、特に不要な完全なインデックススキャンを防止できる場合に、インデックススキャンのコストを軽減します。
       </p></li><li class="listitem"><p><a class="link" href="gist.html" title="Chapter 62. GiSTインデックス"><acronym class="acronym">GiST</acronym>インデックス</a>が完全にクラッシュに対して安全になるように修正しました。(Heikki Linnakangas)
       </p><p>これまでは<code class="command">REINDEX</code>が必要となる（通知される）まれな場合がありました。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.131.5.8"><div class="titlepage"><div><div><h4 class="title">E.127.3.6. データ型</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="type">numeric</code>をより小さな容量で使用できます。
通常は２バイトのヘッダです。(Robert Haas)
      </p><p>これまではすべての<code class="type">numeric</code>値は４バイトのヘッダを持ちました。
この変更によりディスク容量が少なく済みます。
      </p></li><li class="listitem"><p><code class="type">money</code>による<code class="type">money</code>の除算のサポートを追加しました。(Andy Balholm)
      </p></li><li class="listitem"><p><code class="type">void</code>型に対するバイナリI/Oができます。(Radoslaw Smogura)
      </p></li><li class="listitem"><p>幾何演算における斜辺計算を改良しました。(Paul Matthews)
      </p><p>これは不要なオーバーフローを防止します。
またより正確になる可能性があります。
      </p></li><li class="listitem"><p>配列値のハッシュ化をサポートします。(Tom Lane)
      </p><p>これはさらに問い合わせ最適化の選択肢を提供します。
      </p></li><li class="listitem"><p>すべての列の型がソート可能でない限り、複合型をソート可能として扱いません。(Tom Lane)
      </p><p>これは、ソート処理なく問い合わせを実現できる場合、実行時に潜在する<span class="quote">“<span class="quote">could not identify a comparison function</span>”</span>失敗を防止します。
また<code class="command">ANALYZE</code>は、こうした複合型の列に対する不適切な統計情報収集メソッドの使用を試みません。
      </p></li></ul></div><div class="sect4" id="id-1.11.6.131.5.8.3"><div class="titlepage"><div><div><h5 class="title">E.127.3.6.1. キャスト</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="type">money</code>と<code class="type">numeric</code>間のキャストのサポートを追加しました。(Andy Balholm)
      </p></li><li class="listitem"><p><code class="type">int4</code>および<code class="type">int8</code>から<code class="type">money</code>へのキャストのサポートを追加しました。(Joey Adams)
      </p></li><li class="listitem"><p>型付けされたテーブルの場合、テーブルの行型からテーブルのスーパー型へのキャストが可能です。(Peter Eisentraut)
       </p><p>これは、行型からスーパーテーブルの行型へのキャストが可能であるという既存の機能に類似したものです。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.8.4"><div class="titlepage"><div><div><h5 class="title">E.127.3.6.2. <a class="link" href="functions-xml.html" title="9.14. XML関数"><acronym class="acronym">XML</acronym></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="functions-xml.html#XML-EXISTS" title="9.14.2.3. XMLEXISTS"><code class="literal">XMLEXISTS</code></a>および<a class="link" href="functions-xml.html#XML-EXISTS" title="9.14.2.3. XMLEXISTS"><code class="function">xpath_exists()</code></a> <acronym class="acronym">XML</acronym>関数を追加しました。(Mike Fowler)
       </p><p>これらはXPathマッチに使用されます。
       </p></li><li class="listitem"><p><a class="link" href="functions-xml.html#XML-IS-WELL-FORMED" title="9.14.2.4. xml_is_well_formed"><code class="function">xml_is_well_formed()</code></a>、<a class="link" href="functions-xml.html#XML-IS-WELL-FORMED" title="9.14.2.4. xml_is_well_formed"><code class="function">xml_is_well_formed_document()</code></a>、<a class="link" href="functions-xml.html#XML-IS-WELL-FORMED" title="9.14.2.4. xml_is_well_formed"><code class="function">xml_is_well_formed_content()</code></a> <acronym class="acronym">XML</acronym>関数を追加しました。(Mike Fowler)
       </p><p>これらは、入力が適切に整形された<acronym class="acronym">XML</acronym>かどうかを検査します。
これらは、これまで廃止予定の<code class="filename">contrib/xml2</code>モジュールでのみ利用できた機能を提供するものです。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.131.5.9"><div class="titlepage"><div><div><h4 class="title">E.127.3.7. 関数</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cの<code class="function">printf()</code>と類似の動作を行う<a class="link" href="functions-string.html#FORMAT"><code class="function">format(text, ...)</code></a> SQL関数を追加しました。(Pavel Stehule、Robert
        Haas)
       </p><p>現時点では文字列、SQLリテラル、SQL識別子の書式付けをサポートします。
       </p></li><li class="listitem"><p><a class="link" href="functions-string.html#FUNCTIONS-STRING-OTHER" title="Table 9.9. その他の文字列関数"><code class="function">concat()</code></a>、<a class="link" href="functions-string.html#FUNCTIONS-STRING-OTHER" title="Table 9.9. その他の文字列関数"><code class="function">concat_ws()</code></a>、<a class="link" href="functions-string.html#FUNCTIONS-STRING-OTHER" title="Table 9.9. その他の文字列関数"><code class="function">left()</code></a>、<a class="link" href="functions-string.html#FUNCTIONS-STRING-OTHER" title="Table 9.9. その他の文字列関数"><code class="function">right()</code></a>、<a class="link" href="functions-string.html#FUNCTIONS-STRING-OTHER" title="Table 9.9. その他の文字列関数"><code class="function">reverse()</code></a>文字列関数を追加しました。(Pavel Stehule)
       </p><p>これらは他のデータベース製品との互換性を高めます。
       </p></li><li class="listitem"><p>バイナリファイルを読み取る<a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-GENFILE" title="9.26.9. 汎用ファイルアクセス関数"><code class="function">pg_read_binary_file()</code></a>関数を追加しました。(Dimitri Fontaine、Itagaki Takahiro)
       </p></li><li class="listitem"><p>ファイル全体を読み取る<a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-GENFILE" title="9.26.9. 汎用ファイルアクセス関数"><code class="function">pg_read_file()</code></a>関数の単一パラメータ版を追加しました。(Dimitri Fontaine、Itagaki Takahiro)
       </p></li><li class="listitem"><p>NULL値の処理を制御するために、３つのパラメータを持つ<a class="link" href="functions-array.html#ARRAY-FUNCTIONS-TABLE" title="Table 9.49. 配列関数"><code class="function">array_to_string()</code></a>、<a class="link" href="functions-array.html#ARRAY-FUNCTIONS-TABLE" title="Table 9.49. 配列関数"><code class="function">string_to_array()</code></a>の構文を追加しました。(Pavel Stehule)
       </p></li></ul></div><div class="sect4" id="id-1.11.6.131.5.9.3"><div class="titlepage"><div><div><h5 class="title">E.127.3.7.1. オブジェクト情報関数</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE" title="Table 9.63. システムカタログ情報関数"><code class="function">pg_describe_object()</code></a>関数を追加しました。(Alvaro Herrera)
       </p><p>この関数は、<a class="link" href="catalog-pg-class.html" title="51.11. pg_class"><code class="structname">pg_class</code></a> OID、オブジェクトOID、副オブジェクトIDに基づいてオブジェクトを説明する可読性が高い文字列を入手するために使用されます。
これを<a class="link" href="catalog-pg-depend.html" title="51.18. pg_depend"><code class="structname">pg_depend</code></a>の内容を解釈する補助として使用することができます。
       </p></li><li class="listitem"><p>組み込み演算子とその基になる関数についてのコメントを更新しました。(Tom Lane)
       </p><p>関連する演算子を介して使用されることを意図した関数についてその旨をコメント付けしました。
       </p></li><li class="listitem"><p><code class="command">EXPLAIN</code>内および<a class="link" href="functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE" title="Table 9.63. システムカタログ情報関数"><code class="function">pg_get_viewdef()</code></a>のようなシステムカタログ関数内の識別子すべてを強制的に引用符付けする<a class="link" href="runtime-config-compatible.html#GUC-QUOTE-ALL-IDENTIFIERS"><code class="varname">quote_all_identifiers</code></a>変数を追加しました。(Robert Haas)
       </p><p>これにより、スキーマを引用符付けに関して異なる規則を持つツールや他のデータベースにエクスポートすることがより簡単になります。
       </p></li><li class="listitem"><p><a class="link" href="infoschema-sequences.html" title="36.42. sequences"><code class="structname">information_schema.sequences</code></a>システムビューに列を追加しました。(Peter Eisentraut)
       </p><p>これまでもビューは存在していましたが、シーケンスパラメータに関する列は実装されていませんでした。
       </p></li><li class="listitem"><p><a class="link" href="functions-info.html#FUNCTIONS-INFO-ACCESS-TABLE" title="Table 9.61. アクセス権限照会関数"><code class="function">has_table_privilege()</code></a>および関連する関数内で仮想ロール名として<code class="literal">public</code>が許されます。
       </p><p>これによりpublic権限に対する検査を行うことができます。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.9.4"><div class="titlepage"><div><div><h5 class="title">E.127.3.7.2. 関数およびトリガの作成</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ビューに対する<a class="link" href="sql-createtrigger.html" title="CREATE TRIGGER"><code class="literal">INSTEAD OF</code></a>トリガをサポートします。(Dean Rasheed)
       </p><p>この機能を更新可能なビューを完全に実装するために使用することができます。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.131.5.10"><div class="titlepage"><div><div><h4 class="title">E.127.3.8. サーバサイド言語</h4></div></div></div><div class="sect4" id="id-1.11.6.131.5.10.2"><div class="titlepage"><div><div><h5 class="title">E.127.3.8.1. <a class="link" href="plpgsql.html" title="Chapter 42. PL/pgSQL - SQL手続き言語">PL/pgSQL</a>サーバサイド言語</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="plpgsql-control-structures.html#PLPGSQL-FOREACH-ARRAY" title="42.6.5. 配列を巡回"><code class="command">FOREACH IN ARRAY</code></a>をPL/pgSQLに追加しました。(Pavel Stehule)
       </p><p>これは、配列値の要素を使用する反復についてのこれまでの方法より効率と可読性を向上します。
       </p></li><li class="listitem"><p>パラメータを持たない<code class="command">RAISE</code>を<code class="command">RAISE ERROR</code>を捕捉できる同じ場所で捕捉できるようになりました。(Piyush Newe)
       </p><p>これまでのコードでは、実行中の例外ハンドラを含むブロックからこのエラーを発生させました。
新しい動作は他のDBMS製品とより一貫性があります。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.10.3"><div class="titlepage"><div><div><h5 class="title">E.127.3.8.2. <a class="link" href="plperl.html" title="Chapter 44. PL/Perl - Perl手続き言語">PL/Perl</a>サーバサイド言語</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>PL/Perl関数で一般的なレコード引数が許されます。(Andrew Dunstan)
       </p><p>PL/Perl関数を<code class="type">record</code>型を受け付けるように宣言することができるようになりました。
この動作は任意の名前付き複合型に対するものと同じです。
       </p></li><li class="listitem"><p>PL/Perlの配列引数をPerl配列に変換します。(Alexey Klyukin、Alex Hunsaker)
       </p><p>文字列表現もまだ可能です。
       </p></li><li class="listitem"><p>PL/Perlの複合型引数をPerlのハッシュに変換します。(Alexey Klyukin、Alex Hunsaker)
       </p><p>文字列表現もまだ可能です。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.10.4"><div class="titlepage"><div><div><h5 class="title">E.127.3.8.3. <a class="link" href="plpython.html" title="Chapter 45. PL/Python - Python手続き言語">PL/Python</a>サーバサイド言語</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>PL/Pythonにテーブル関数のサポートを追加しました。(Jan Urbanski)
       </p><p>PL/Pythonが複数の<code class="literal">OUT</code>パラメータとレコードセットを返すことができるようになりました。
       </p></li><li class="listitem"><p>PL/Pythonに検証関数を追加しました。(Jan Urbanski)
       </p><p>これによりPL/Python関数は関数生成時に構文検査を行うことができます。
       </p></li><li class="listitem"><p>PL/Python内でSQL問い合わせに対する例外を許します。(Jan Urbanski)
       </p><p>これによりSQLが生成する例外エラーコードをPL/Python例外ブロックからアクセスすることができます。
       </p></li><li class="listitem"><p>PL/Pythonに明示的な副トランザクションを追加しました。(Jan Urbanski)
       </p></li><li class="listitem"><p>文字列の引用符付けを行うPL/Python関数を追加しました。(Jan Urbanski)
       </p><p>これらの関数は<a class="link" href="plpython-util.html" title="45.9. ユーティリティ関数"><code class="literal">plpy.quote_ident</code></a>、<a class="link" href="plpython-util.html" title="45.9. ユーティリティ関数"><code class="literal">plpy.quote_literal</code></a>、<a class="link" href="plpython-util.html" title="45.9. ユーティリティ関数"><code class="literal">plpy.quote_nullable</code></a>です。
       </p></li><li class="listitem"><p>PL/Pythonエラーにトレースバック情報を追加しました。(Jan Urbanski)
       </p></li><li class="listitem"><p><code class="literal">PLy_elog</code>を用いて反復子からのPL/Pythonエラーを報告します。(Jan Urbanski)
       </p></li><li class="listitem"><p>Python 3での例外処理を修正しました。(Jan Urbanski)
       </p><p>これまではPython 3下の<code class="literal">plpy</code>では例外クラスを利用することができませんでした。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.131.5.11"><div class="titlepage"><div><div><h4 class="title">E.127.3.9. クライアントアプリケーション</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">createlang</span>および<span class="application">droplang</span>を廃止予定とし、拡張コマンドを呼び出すだけのものにしました。(Tom Lane)
      </p></li></ul></div><div class="sect4" id="id-1.11.6.131.5.11.3"><div class="titlepage"><div><div><h5 class="title">E.127.3.9.1. <a class="link" href="app-psql.html" title="psql"><span class="application">psql</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>現在の接続情報を示す<code class="literal">\conninfo</code> <span class="application">psql</span>コマンドを追加しました。(David Christensen)
       </p></li><li class="listitem"><p>関数定義を示す<code class="literal">\sf</code> <span class="application">psql</span>コマンドを追加しました。(Pavel Stehule)
       </p></li><li class="listitem"><p>言語を列挙する<code class="literal">\dL</code> <span class="application">psql</span>コマンドを追加しました。(Fernando Ike)
       </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="literal">\dn</code>(スキーマ列挙)コマンドに<code class="option">S</code>（<span class="quote">“<span class="quote">システム</span>”</span>）オプションを追加しました。(Tom Lane)
       </p><p><code class="literal">S</code>のない<code class="literal">\dn</code>ではシステムスキーマを表示しないようになりました。
       </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="literal">\e</code>および<code class="literal">\ef</code>コマンドが、エディタにおけるカーソル位置を設定するために使用される行番号を受け付けることができます。(Pavel Stehule)
       </p><p>これは<code class="envar">PSQL_EDITOR_LINENUMBER_ARG</code>環境変数にしたがってエディタに渡されます。
       </p></li><li class="listitem"><p><span class="application">psql</span>がデフォルトでオペレーティングシステムのロケールからクライアント符号化方式を設定するようにしました。(Heikki Linnakangas)
       </p><p>これは<code class="envar">PGCLIENTENCODING</code>環境変数が設定されていない場合に起こります。
       </p></li><li class="listitem"><p><code class="literal">\d</code>が一意性インデックスと一意性制約を区別するようにしました。(Josh Kupershmidt)
       </p></li><li class="listitem"><p>9.0以降のサーバと接続している場合、<code class="literal">\dt+</code>が<code class="function">pg_relation_size</code>ではなく<code class="function">pg_table_size</code>を報告するようにしました。(Bernd Helmle)
       </p><p>これはテーブルサイズの測定にはより有用です。
しかしこれまで同じ表示で報告された値と同じではないことに注意してください。
       </p></li><li class="listitem"><p>タブ補完サポートを追加しました。(Itagaki Takahiro、Pavel Stehule、Andrey Popp、Christoph Berg、David Fetter、Josh Kupershmidt)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.11.4"><div class="titlepage"><div><div><h5 class="title">E.127.3.9.2. <a class="link" href="app-pgdump.html" title="pg_dump"><span class="application">pg_dump</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>すべての識別子を強制的に引用符付けする<code class="option">--quote-all-identifiers</code>オプションを<a class="link" href="app-pgdump.html" title="pg_dump"><span class="application">pg_dump</span></a>および<a class="link" href="app-pg-dumpall.html" title="pg_dumpall"><span class="application">pg_dumpall</span></a>に追加しました。(Robert Haas)
       </p></li><li class="listitem"><p><code class="literal">directory</code>形式を<span class="application">pg_dump</span>に追加しました。(Joachim Wieland、Heikki Linnakangas)
       </p><p>これは内部的には<code class="literal">tar</code> <span class="application">pg_dump</span>形式と似ています。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.11.5"><div class="titlepage"><div><div><h5 class="title">E.127.3.9.3. <a class="link" href="app-pg-ctl.html" title="pg_ctl"><span class="application">pg_ctl</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>サーバが稼動していないと間違った報告をしないように<span class="application">pg_ctl</span>を修正しました。(Bruce Momjian)
       </p><p>これまではサーバが稼動していても<span class="application">pg_ctl</span>が認証させられなかった場合にこれが起こることがありました。
       </p></li><li class="listitem"><p><span class="application">pg_ctl</span> startの<span class="quote">“<span class="quote">待機</span>”</span>（<code class="option">-w</code>）オプションを改良しました。(Bruce Momjian、Tom Lane)
       </p><p>待機モードは非常に堅牢になりました。
デフォルト以外のポート番号、デフォルト以外のUnixソケット位置、権限問題、古いpostmasterのロックファイルにより混乱することがなくなります。
       </p></li><li class="listitem"><p>スタンバイサーバをプライマリに切り替える<code class="literal">promote</code>オプションを<span class="application">pg_ctl</span>に追加しました。(Fujii Masao)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.131.5.12"><div class="titlepage"><div><div><h4 class="title">E.127.3.10. <span class="application">開発ツール</span></h4></div></div></div><div class="sect4" id="id-1.11.6.131.5.12.2"><div class="titlepage"><div><div><h5 class="title">E.127.3.10.1. <a class="link" href="libpq.html" title="Chapter 33. libpq - C ライブラリ"><span class="application">libpq</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="envar">PGCLIENTENCODING</code>環境変数と同様に振舞う<a class="link" href="libpq-connect.html#LIBPQ-CONNECT-CLIENT-ENCODING"><code class="literal">client_encoding</code></a> libpq接続オプションを追加しました。(Heikki Linnakangas)
       </p><p><code class="literal">auto</code>という値はオペレーティングシステムのロケールに基づいてクライアント符号化方式を設定します。
       </p></li><li class="listitem"><p>libpqライブラリのバージョンを返す<a class="link" href="libpq-misc.html#LIBPQ-PQLIBVERSION"><code class="function">PQlibVersion()</code></a>を追加しました。(Magnus Hagander)
       </p><p>libpqはサーババージョンを返す<code class="function">PQserverVersion()</code>をすでに有していました。
       </p></li><li class="listitem"><p>Unixドメインソケット経由で接続している場合に、libpqデータベースクライアントは新しい接続オプション<a class="link" href="libpq-connect.html#LIBPQ-CONNECT-REQUIREPEER"><code class="literal">requirepeer</code></a>を使用してサーバプロセスのユーザ名を検査することができます。(Peter Eisentraut)
       </p><p><span class="productname">PostgreSQL</span>ではすでにサーバにUnixドメインソケット経由で接続するクライアントユーザ名を検査させることが可能でした。
       </p></li><li class="listitem"><p>libpqに<a class="link" href="libpq-connect.html#LIBPQ-PQPING"><code class="function">PQping()</code></a>および<a class="link" href="libpq-connect.html#LIBPQ-PQPINGPARAMS"><code class="function">PQpingParams()</code></a>を追加しました。(Bruce Momjian、Tom Lane)
       </p><p>これらの関数により、新しくセッションを開こうとしなくても、サーバの状態を検出することができます。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.12.3"><div class="titlepage"><div><div><h5 class="title">E.127.3.10.2. <a class="link" href="ecpg.html" title="Chapter 35. ECPG - C言語による埋め込みSQL"><span class="application">ECPG</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ECPGは<code class="literal">WHERE CURRENT OF</code>句の中であっても動的カーソル名を受け付けることができます。(Zoltan Boszormenyi)
       </p></li><li class="listitem"><p><span class="application">ecpglib</span>が<code class="type">double</code>値をこれまでの14桁ではなく15桁の精度で書き込むようにしました。(Akira Kurosawa)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.131.5.13"><div class="titlepage"><div><div><h4 class="title">E.127.3.11. 構築オプション</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>HP-UX Cコンパイラで受け付けられる<code class="literal">+Olibmerrno</code>コンパイルオプションを使用します。(Ibrar Ahmed)
       </p><p>これは最近のHPプラットフォームで起こり得る数学ライブラリ呼び出し誤動作を防止します。
       </p></li></ul></div><div class="sect4" id="id-1.11.6.131.5.13.3"><div class="titlepage"><div><div><h5 class="title">E.127.3.11.1. Makefiles</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>並行makeのサポートを改良しました。(Peter Eisentraut)
       </p><p>これによりコンパイルがより高速になります。
また<code class="literal">make -k</code>がより一貫性をもって動作します。
       </p></li><li class="listitem"><p><acronym class="acronym">GNU</acronym> <a class="link" href="install-requirements.html" title="16.2. 必要条件"><span class="application">make</span></a> 3.80以降が必要です。(Peter Eisentraut)
       </p><p>並行makeの改良のためこれが必要です。
       </p></li><li class="listitem"><p><code class="literal">make maintainer-check</code>ターゲットを追加しました。(Peter Eisentraut)
       </p><p>このターゲットは、構築やリグレッションテストでは不適切な、様々なソースコード検査を行います。
現時点では、duplicate_oids、SGMLの構文およびタブの検査、NLS構文検査があります。
       </p></li><li class="listitem"><p><code class="filename">contrib</code>内の<code class="literal">make check</code>をサポートします。(Peter Eisentraut)
       </p><p>従来は<code class="literal">make installcheck</code>のみが動作していましたが、一時的なインストレーション内での試験をサポートするようになりました。
最上位レベルの<code class="literal">make check-world</code>ターゲットに、この方法による<code class="filename">contrib</code>の試験が含まれるようになりました。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.13.4"><div class="titlepage"><div><div><h5 class="title">E.127.3.11.2. Windows</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Windowsにおいて、<a class="link" href="app-pg-ctl.html" title="pg_ctl"><span class="application">pg_ctl</span></a>がサービスを自動または手動として登録することができます。(Quan Zongliang)
       </p></li><li class="listitem"><p>Windowsにおいて<a class="link" href="installation-platform-notes.html#WINDOWS-CRASH-DUMPS" title="16.7.4.1. Windows上でのクラッシュダンプの収集">クラッシュダンプ</a>の収集サポートを追加しました。(Craig Ringer、Magnus Hagander)
       </p><p><span class="productname">minidumps</span>がデバッグ用ではないWindowsバイナリで生成でき、標準のデバッグツールで解析できるようになりました。
       </p></li><li class="listitem"><p>MinGW64コンパイラを使用する構築を有効にしました。(Andrew Dunstan)
       </p><p>これにより、Windowsプラットフォーム以外であってもクロスコンパイルすることにより64ビットWindowsバイナリを構築することができます。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.131.5.14"><div class="titlepage"><div><div><h4 class="title">E.127.3.12. ソースコード</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>GUC変数の代入フック用のAPIを改良しました。(Tom Lane)
       </p><p>これまでの代入フック機能が、検査フックと代入フックに分離されました。
前者は失敗しても構いませんが、後者は失敗してはなりません。
この変更は、独自のGUCパラメータを定義する追加モジュールに影響を与えます。
       </p></li><li class="listitem"><p>イベントの待機をサポートするためにソースコードにラッチを加えました。(Heikki Linnakangas)
       </p></li><li class="listitem"><p>データ変更の権限検査ロジックをまとめました。(KaiGai Kohei)
       </p></li><li class="listitem"><p>一貫性を目的に、なくなった<code class="function">get_<em class="replaceable"><code>object</code></em>_oid()</code>関数を追加しました。(Robert Haas)
       </p></li><li class="listitem"><p>競合するキーワードを除去することにより、
<a class="link" href="xfunc-c.html" title="37.9. C言語関数">追加モジュールのコンパイル</a>でのC++コンパイラを使用する機能を改良しました。(Tom Lane)
       </p></li><li class="listitem"><p>DragonFly <acronym class="acronym">BSD</acronym>に対するサポートを追加しました。(Rumko)
       </p></li><li class="listitem"><p>バックエンドで使用するために<code class="function">quote_literal_cstr()</code>を公開しました。(Robert Haas)
       </p></li><li class="listitem"><p>デフォルトの符号化方式で<a class="link" href="install-procedure.html#BUILD" title="構築">リグレッションテスト</a>を実行します。(Peter Eisentraut)
       </p><p>これまでのリグレッションテストでは常に<code class="literal">SQL_ASCII</code>符号化方式で実行していました。
       </p></li><li class="listitem"><p><span class="application">cvs2cl</span>と<span class="application">pgcvslog</span>を置き換える<span class="application">src/tools/git_changelog</span>を追加しました。(Robert Haas、Tom Lane)
       </p></li><li class="listitem"><p><span class="application">git-external-diff</span>スクリプトを<code class="filename">src/tools</code>に追加しました。(Bruce Momjian)
       </p><p>これはgitからコンテキストdiffを生成するために使用されます。
       </p></li><li class="listitem"><p><span class="application">Clang</span>を用いた構築のサポートを改良しました。(Peter Eisentraut)
       </p></li></ul></div><div class="sect4" id="id-1.11.6.131.5.14.3"><div class="titlepage"><div><div><h5 class="title">E.127.3.12.1. サーバフック</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>権限を編さするソースコードフックを追加しました。(Robert Haas、Stephen Frost)
       </p></li><li class="listitem"><p>セキュリティフレームワークで使用するためのpost-object-creation関数フックを追加しました。(KaiGai Kohei)
       </p></li><li class="listitem"><p>クライアント認証フックを追加しました。(KaiGai Kohei)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.131.5.15"><div class="titlepage"><div><div><h4 class="title">E.127.3.13. Contrib</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>新しい<a class="link" href="extend-extensions.html" title="37.15. 関連するオブジェクトを拡張としてパッケージ化">拡張</a>機構を用いて<code class="filename">contrib</code>モジュールと手続き言語をインストールするように変更しました。(Tom Lane、Dimitri Fontaine)
      </p></li><li class="listitem"><p><a class="link" href="file-fdw.html" title="F.15. file_fdw"><code class="filename">contrib/file_fdw</code></a>外部データラッパを追加しました。(Shigeru Hanada)
      </p><p>この外部データラッパを使用する外部テーブルは、<code class="command">COPY</code>と非常によく似た方法で通常のファイルを読み取ることができます。
      </p></li><li class="listitem"><p><a class="link" href="pgtrgm.html" title="F.32. pg_trgm"><code class="filename">contrib/pg_trgm</code></a>および<a class="link" href="btree-gist.html" title="F.7. btree_gist"><code class="filename">contrib/btree_gist</code></a>に近傍検索サポートを追加しました。(Teodor Sigaev)
      </p></li><li class="listitem"><p>等価以外の検索に対する<a class="link" href="btree-gist.html" title="F.7. btree_gist"><code class="filename">contrib/btree_gist</code></a>サポートを追加しました。(Jeff Davis)
      </p></li><li class="listitem"><p>マルチバイト文字を扱うように<a class="link" href="fuzzystrmatch.html" title="F.16. fuzzystrmatch"><code class="filename">contrib/fuzzystrmatch</code></a>の<code class="function">levenshtein()</code>関数を修正しました。(Alexander Korotkov)
      </p></li><li class="listitem"><p><a class="link" href="sslinfo.html" title="F.38. sslinfo"><code class="filename">contrib/sslinfo</code></a>に<code class="function">ssl_cipher()</code>および<code class="function">ssl_version()</code>関数を追加しました。(Robert Haas)
      </p></li><li class="listitem"><p>インデックス付けされた空配列に関して一貫した結果になるように<a class="link" href="intarray.html" title="F.19. intarray"><code class="filename">contrib/intarray</code></a>および<a class="link" href="hstore.html" title="F.17. hstore"><code class="filename">contrib/hstore</code></a>を修正しました。(Tom Lane)
      </p><p>これまでは、インデックスを使用する空配列の問い合わせは、シーケンシャルスキャンを使用した場合の結果と異なる結果が返る可能性がありました。
      </p></li><li class="listitem"><p><a class="link" href="intarray.html" title="F.19. intarray"><code class="filename">contrib/intarray</code></a>が多次元の配列に対して適切に動作するようにしました。(Tom Lane)
      </p></li><li class="listitem"><p><a class="link" href="intarray.html" title="F.19. intarray"><code class="filename">contrib/intarray</code></a>において、実際にはNULL値が無い場合でもNULLが存在するとしてエラーになることを防止しました。(Tom Lane)
      </p></li><li class="listitem"><p><a class="link" href="intarray.html" title="F.19. intarray"><code class="filename">contrib/intarray</code></a>において、含有演算子が空配列を考慮するように修正しました。(Tom Lane)
      </p><p>空配列は他の任意の配列に含まれるものと、正しくみなされるようになりました。
      </p></li><li class="listitem"><p><a class="link" href="xml2.html" title="F.46. xml2"><code class="filename">contrib/xml2</code></a>において、<code class="function">xslt_process()</code>で取り扱うことができる、<em class="replaceable"><code>parameter</code></em>=<em class="replaceable"><code>value</code></em>の組み合わせ数についての独断的な制限を除去しました。(Pavel Stehule)
      </p><p>以前の制限は10でした。
      </p></li><li class="listitem"><p><a class="link" href="pageinspect.html" title="F.23. pageinspect"><code class="filename">contrib/pageinspect</code></a>において、32ビット値としてinfomaskを返すようにheap_page_itemを修正しました。(Alvaro Herrera)
      </p><p>これは混乱を招く負の値が返されることを防ぎます。
基になる値は16ビット符号なし整数です。
      </p></li></ul></div><div class="sect4" id="id-1.11.6.131.5.15.3"><div class="titlepage"><div><div><h5 class="title">E.127.3.13.1. セキュリティ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><acronym class="acronym">SELinux</acronym>と権限検査をやりとりする<a class="link" href="sepgsql.html" title="F.36. sepgsql"><code class="filename">contrib/sepgsql</code></a>を追加しました。(KaiGai Kohei)
       </p><p>これは新しい<a class="link" href="sql-security-label.html" title="SECURITY LABEL"><code class="command">SECURITY LABEL</code></a>機能を使用します。
       </p></li><li class="listitem"><p><a class="link" href="auth-delay.html" title="F.3. auth_delay"><code class="filename">auth_delay</code></a> contribモジュールを追加しました。(KaiGai Kohei)
       </p><p>これは、認証失敗を返す前にサーバを休止します。
ブルートフォースパスワード攻撃をより困難にするために設計されました。
       </p></li><li class="listitem"><p><code class="filename">dummy_seclabel</code> contribモジュールを追加しました。(KaiGai Kohei)
       </p><p>これは権限に関するリグレッションテストで使用されます。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.15.4"><div class="titlepage"><div><div><h5 class="title">E.127.3.13.2. 性能</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="pgtrgm.html" title="F.32. pg_trgm"><code class="filename">contrib/pg_trgm</code></a>に<code class="literal">LIKE</code>および<code class="literal">ILIKE</code>インデックス検索のサポートを追加しました。(Alexander Korotkov)
       </p></li><li class="listitem"><p><a class="link" href="fuzzystrmatch.html" title="F.16. fuzzystrmatch"><code class="filename">contrib/fuzzystrmatch</code></a>に小さな距離を最適化する<code class="function">levenshtein_less_equal()</code>関数を追加しました。(Alexander Korotkov)
       </p></li><li class="listitem"><p><a class="link" href="seg.html" title="F.35. seg"><code class="filename">contrib/seg</code></a>列のインデックス検索の性能を向上しました。(Alexander Korotkov)
       </p></li><li class="listitem"><p>多くのリレーションを持つデータベースにおいての<a class="link" href="pgupgrade.html" title="pg_upgrade"><span class="application">pg_upgrade</span></a>の性能を向上しました。(Bruce Momjian)
       </p></li><li class="listitem"><p>文単位の遅延を報告するフラグを<a class="link" href="pgbench.html" title="pgbench"><code class="filename">contrib/pgbench</code></a>に追加しました。(Florian Pflug)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.131.5.15.5"><div class="titlepage"><div><div><h5 class="title">E.127.3.13.3. Fsyncの試験</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">src/tools/test_fsync</code>を<a class="link" href="pgtestfsync.html" title="pg_test_fsync"><code class="filename">contrib/pg_test_fsync</code></a>に移動しました。(Bruce Momjian、Tom Lane)
       </p></li><li class="listitem"><p><a class="link" href="pgtestfsync.html" title="pg_test_fsync"><code class="filename">contrib/pg_test_fsync</code></a>に<code class="literal">O_DIRECT</code>サポートを追加しました。(Bruce Momjian)
       </p><p>これは、<a class="link" href="runtime-config-wal.html#GUC-WAL-SYNC-METHOD"><code class="varname">wal_sync_method</code></a>による<code class="literal">O_DIRECT</code>の使用に対応します。
       </p></li><li class="listitem"><p><a class="link" href="pgtestfsync.html" title="pg_test_fsync"><code class="filename">contrib/pg_test_fsync</code></a>に新しい試験を追加しました。(Bruce Momjian)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.131.5.16"><div class="titlepage"><div><div><h4 class="title">E.127.3.14. 文書</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ecpg.html" title="Chapter 35. ECPG - C言語による埋め込みSQL"><span class="application">ECPG</span></a>の文書を大きく改良しました。(Satoshi Nagayasu)
      </p></li><li class="listitem"><p>大量の校正と文書の改良を行いました。(Thom Brown、Josh Kupershmidt、Susanne Ebrecht)
      </p></li><li class="listitem"><p><a class="link" href="runtime-config-error-handling.html#GUC-EXIT-ON-ERROR"><code class="varname">exit_on_error</code></a>についての文書を追加しました。(Robert Haas)
      </p><p>このパラメータは任意のエラーでセッションを終了させます。
      </p></li><li class="listitem"><p><a class="link" href="functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE" title="Table 9.63. システムカタログ情報関数"><code class="function">pg_options_to_table()</code></a>についての文書を追加しました。(Josh Berkus)
      </p><p>この関数は可読性の高い書式でテーブル格納オプションを表示します。
      </p></li><li class="listitem"><p><a class="link" href="sql-expressions.html#FIELD-SELECTION" title="4.2.4. フィールド選択"><code class="literal">(compositeval).*</code></a>構文を使用することですべての複合型のフィールドにアクセスできることを文書化しました。(Peter Eisentraut)
      </p></li><li class="listitem"><p><a class="link" href="functions-string.html#FUNCTIONS-STRING-OTHER" title="Table 9.9. その他の文字列関数"><code class="function">translate()</code></a>が、対応する<code class="literal">to</code>文字を持たない<code class="literal">from</code>内の文字を除去することを文書化しました。(Josh Kupershmidt)
      </p></li><li class="listitem"><p><code class="command">CREATE CONSTRAINT TRIGGER</code>と<a class="link" href="sql-createtrigger.html" title="CREATE TRIGGER"><code class="command">CREATE TRIGGER</code></a>の文書をまとめました。(Alvaro Herrera)
      </p></li><li class="listitem"><p><a class="link" href="ddl-priv.html" title="5.6. 権限">permission</a>と<a class="link" href="upgrading.html" title="18.6. PostgreSQLクラスタのアップグレード処理">upgrade</a>の文書を中心に集めました。(Bruce Momjian)
      </p></li><li class="listitem"><p>Solaris10についての<a class="link" href="kernel-resources.html#SYSVIPC-PARAMETERS" title="Table 18.1. System V IPCパラメータ">カーネルチューニング文書</a>を追加しました。(Josh Berkus)
      </p><p>これまではSolaris9のみについてカーネルチューニングが文書化されていました。
      </p></li><li class="listitem"><p><code class="filename">HISTORY</code>ファイル内の非ASCII文字を一貫して扱います。(Peter Eisentraut)
      </p><p><code class="filename">HISTORY</code>ファイルは英語で記述されていますが、貢献者の名前を非ASCII文字で扱う必要がありました。
文字セットに関して前提を置くことなく合理的に判読できるように書き直されました。
      </p></li></ul></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-9-1-1.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="release-9-0-23.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">E.126. リリース9.1.1 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> E.128. リリース9.0.23</td></tr></table></div></body></html>