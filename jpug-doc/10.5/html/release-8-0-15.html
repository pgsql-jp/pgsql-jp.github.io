<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.258. リリース8.0.15</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-8-0-16.html" title="E.257. リリース8.0.16" /><link rel="next" href="release-8-0-14.html" title="E.259. リリース8.0.14" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.258. リリース8.0.15</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-8-0-16.html" title="E.257. リリース8.0.16">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix E. リリースノート">Up</a></td><th width="60%" align="center">Appendix E. リリースノート</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="release-8-0-14.html" title="E.259. リリース8.0.14">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-8-0-15"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.258. リリース8.0.15</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-8-0-15.html#id-1.11.6.262.5">E.258.1. バージョン8.0.15への移行</a></span></dt><dt><span class="sect2"><a href="release-8-0-15.html#id-1.11.6.262.6">E.258.2. 変更点</a></span></dt></dl></div><p><strong>リリース日: </strong>2008-01-07</p><p>このリリースは、重大なセキュリティ問題の修正を含む、8.0.14の各種不具合を修正したものです。
8.0メジャーリリースにおける新機能については<a class="xref" href="release-8-0.html" title="E.273. リリース8.0">Section E.273</a>を参照してください。
  </p><p>これが、<span class="productname">PostgreSQL</span>コミュニティが<span class="productname">Windows</span>用のバイナリパッケージを作成する、最後の8.0.Xリリースです。
8.2.Xでは、過去のバージョンに移植することが現実的ではない、Windows固有の修正が行われていますので、Windowsユーザは8.2.X以降への移行が推奨されています。
他のプラットフォームでは8.0.Xはまだサポートされます。
  </p><div class="sect2" id="id-1.11.6.262.5"><div class="titlepage"><div><div><h3 class="title">E.258.1. バージョン8.0.15への移行</h3></div></div></div><p>8.0.Xからの移行ではダンプ/リストアは不要です。
しかしながら、8.0.6より前のバージョンからアップグレードする場合は、<a class="xref" href="release-8-0-6.html" title="E.267. リリース8.0.6">Section E.267</a>を参照してください。
   </p></div><div class="sect2" id="id-1.11.6.262.6"><div class="titlepage"><div><div><h3 class="title">E.258.2. 変更点</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>インデックス内の関数が<code class="command">VACUUM</code>、<code class="command">ANALYZE</code>などを実行するユーザの権限で実行されることを防止します。(Tom)
     </p><p>インデックス式内で使用される関数および部分インデックスの述語は、新しいテーブル項目が作成されると評価されます。
これが、もし信頼できないユーザが所有するテーブルを変更したとすると、トロイの木馬となるコードの実行という危険性を引き起こすことは以前から解っていました。
（トリガ、デフォルト、検査制約なども同種の危険性を引き起こします。）
しかしインデックス内の関数は、<code class="command">VACUUM FULL</code>などの日常の保守作業で実行される可能性があるため、さらに危険です。
こうした保守作業は通常自動的にスーパーユーザ権限で行われます。
例えば、極悪なユーザがトロイの木馬となるインデックス定義を設定し、次回の日常のバキューム処理を待つことで、スーパーユーザ権限でコードを実行することが可能です。
この修正は、<code class="literal">SECURITY DEFINER</code>関数で使用されていた権限変更機構を使用して、標準的な保守作業（<code class="command">VACUUM</code>、<code class="command">ANALYZE</code>、<code class="command">REINDEX</code>、<code class="command">CLUSTER</code>を含む）が呼び出したユーザではなくテーブル所有者として実行するように調整しました。
こうしたセキュリティ制限の迂回を防ぐために、<code class="command">SET SESSION AUTHORIZATION</code>および<code class="command">SET ROLE</code>が<code class="literal">SECURITY DEFINER</code>コンテキストで禁止されるようになりました。(CVE-2007-6600)
     </p></li><li class="listitem"><p>正規表現パッケージ内のさまざまな不具合を修正しました。(Tom, Will Drewry)
     </p><p>より巧妙な正規表現パターンにより、信頼できないソースから正規表現検索パターンを受け付けるアプリケーションでは、クラッシュ、無限または無限に近いループ、大量のメモリの浪費、DoS攻撃を引き起こすすべてが発生する可能性がありました。(CVE-2007-4769、CVE-2007-4772、CVE-2007-6067)
     </p></li><li class="listitem"><p><code class="filename">/contrib/dblink</code>を使用する非スーパーユーザは、パスワード認証のみをセキュリティ制限として使用しなければなりません。(Joe)
     </p><p>8.0.14で行った修正は不十分で、一部の<code class="filename">dblink</code>関数に対してのみ問題を解消していました。(CVE-2007-6601,CVE-2007-3278)
     </p></li><li class="listitem"><p>時間帯ファイルを<span class="application">tzdata</span>リリース2007kに更新しました（具体的には最近のアルゼンチンの変更）。(Tom)
     </p></li><li class="listitem"><p>一部の<code class="literal">WHERE false AND var IN (SELECT ...)</code>におけるプランナの失敗を修正しました。 (Tom)
     </p></li><li class="listitem"><p><code class="command">ALTER TABLE ... ALTER COLUMN TYPE</code>で再構築されるインデックスのテーブル空間と格納パラメータを保持します。(Tom)
     </p></li><li class="listitem"><p>アーカイブリカバリが、リカバリの停止時間が使用された時だけではなく、常に新しいWAL時系列から始まるようにしました。(Simon)
     </p><p>これは、まれに起こる可能性のある既存の最後のWALセグメントのアーカイブされたコピーを上書きしようとする危険を防止します。
また元の定義より単純、明確になったと考えられます。
     </p></li><li class="listitem"><p>テーブルが小さすぎて有用でない場合、<code class="command">VACUUM</code>がすべての<code class="varname">maintenance_work_mem</code>を使用しないようにしました。(Alvaro)
     </p></li><li class="listitem"><p>マルチバイトデータベース符号化方式を使用している時に潜在する、<code class="function">translate()</code>のクラッシュを修正しました。(Tom)
     </p></li><li class="listitem"><p>プラットフォームのPerlが<code class="literal">bool</code>型を<code class="literal">char</code>ではなく<code class="literal">int</code>として定義した場合に対応するようにPL/Perlを修正しました。(Tom)
     </p><p>これは理論上どこでも発生する可能性がありましたが、標準的に構築されたPerlではこうなりませんでした。<span class="productname">macOS</span> 10.5までは…。
     </p></li><li class="listitem"><p>長い例外メッセージでクラッシュしないようPL/Pythonを修正しました。(Alvaro)
     </p></li><li class="listitem"><p>親テーブルと異なるデフォルト式を持つ、継承子テーブルを正しく扱うよう<span class="application">pg_dump</span>を修正しました。(Tom)
     </p></li><li class="listitem"><p><span class="application">ecpg</span>パーサを修正しました。(Michael)
     </p></li><li class="listitem"><p><code class="filename">contrib/tablefunc</code>の<code class="function">crosstab()</code>が、クラッシュするのではなく、独自の意味でカテゴリとしてNULL行識別子を扱うようにしました。(Joe)
     </p></li><li class="listitem"><p><code class="type">tsvector</code>および<code class="type">tsquery</code>出力関数が正しくバックスラッシュをエスケープするように修正しました。(Teodor, Bruce)
     </p></li><li class="listitem"><p>入力文字列が大きな場合に<code class="function">to_tsvector()</code>がクラッシュすることを修正しました。(Teodor)
     </p></li><li class="listitem"><p><code class="command">configure</code>スクリプトを再生成する場合、特定のバージョンの<span class="productname">Autoconf</span>を使用することが必要になりました。(Peter)
     </p><p>これは開発者とパッケージ作成者のみに影響します。
この変更は、<span class="productname">Autoconf</span>と<span class="productname">PostgreSQL</span>の未確認のバージョンの組み合わせを使用する事故を防ぐためになされました。
その結果がうまくいくかどうかについて責任を負う限り、異なるバージョンの<span class="productname">Autoconf</span>を本当に使用したい場合は、このバージョン検査を取り除くことができます。
     </p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-8-0-16.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="release-8-0-14.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">E.257. リリース8.0.16 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> E.259. リリース8.0.14</td></tr></table></div></body></html>