<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>31.3. コンフリクト</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="logical-replication-subscription.html" title="31.2. サブスクリプション" /><link rel="next" href="logical-replication-restrictions.html" title="31.4. 制限事項" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">31.3. コンフリクト</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="logical-replication-subscription.html" title="31.2. サブスクリプション">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="logical-replication.html" title="Chapter 31. 論理レプリケーション">Up</a></td><th width="60%" align="center">Chapter 31. 論理レプリケーション</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="logical-replication-restrictions.html" title="31.4. 制限事項">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="LOGICAL-REPLICATION-CONFLICTS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">31.3. コンフリクト</h2></div></div></div><p>サブスクライバーノードでローカルにデータが変更された場合でも、データが更新されるという点では、論理レプリケーションは通常のDML操作と同じように振る舞います。
到着したデータが制約に違反すると、レプリケーションは停止します。
これは、<em class="firstterm">コンフリクト</em>と呼ばれます。
<code class="command">UPDATE</code>あるいは<code class="command">DELETE</code>操作をレプリケーションする場合は、存在しないデータによってコンフリクトは起こらず、そのような操作は単にスキップされます。
  </p><p>コンフリクトはエラーを生じさせ、レプリケーションを停止させます。
コンフリクトはユーザが手動で解消しなければなりません。
コンフリクトの詳細は、サブスクライバーのサーバーログに出力されます。
  </p><p>コンフリクトの解消は、到着した更新とコンフリクトしないようにサブスクライバーのデータを変更するか、既存のデータとコンフリクトしているトランザクションをスキップさせることで達成できます。
トランザクションは、<a class="link" href="functions-admin.html#PG-REPLICATION-ORIGIN-ADVANCE"><code class="function">pg_replication_origin_advance()</code></a>関数にサブスクリプション名に関連する<em class="parameter"><code>node_name</code></em>と位置を引数で渡すことによりスキップできます。
オリジンの現在位置は<a class="link" href="view-pg-replication-origin-status.html" title="51.79. pg_replication_origin_status"><code class="structname">pg_replication_origin_status</code></a>システムビューで参照できます。
  </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="logical-replication-subscription.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="logical-replication.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="logical-replication-restrictions.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">31.2. サブスクリプション </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 31.4. 制限事項</td></tr></table></div></body></html>