<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.311. リリース7.3.15</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-7-3-16.html" title="E.310. リリース7.3.16" /><link rel="next" href="release-7-3-14.html" title="E.312. リリース7.3.14" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.311. リリース7.3.15</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-7-3-16.html" title="E.310. リリース7.3.16">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix E. リリースノート">Up</a></td><th width="60%" align="center">Appendix E. リリースノート</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="release-7-3-14.html" title="E.312. リリース7.3.14">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-7-3-15"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.311. リリース7.3.15</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-7-3-15.html#id-1.11.6.315.4">E.311.1. バージョン7.3.15への移行</a></span></dt><dt><span class="sect2"><a href="release-7-3-15.html#id-1.11.6.315.5">E.311.2. 変更点</a></span></dt></dl></div><p><strong>リリース日: </strong>2006-05-23</p><p>このリリースは7.3.14の各種不具合を修正したもので、非常に深刻なセキュリティ問題を解消するパッチを含みます。
  </p><div class="sect2" id="id-1.11.6.315.4"><div class="titlepage"><div><div><h3 class="title">E.311.1. バージョン7.3.15への移行</h3></div></div></div><p>7.3.Xからの移行ではダンプ/リストアは不要です。
しかしながら、7.3.13より前のバージョンからアップグレードする場合は、<a class="xref" href="release-7-3-13.html" title="E.313. リリース7.3.13">Section E.313</a>を参照してください。
   </p><p>CVE-2006-2313およびCVE-2006-2314に示されたSQLインジェクション攻撃を完全に防ぐためには、アプリケーション側のコードの変更が必要となる場合があります。
SQLコマンド内に信頼できない文字列を埋め込むアプリケーションでは、できる限り早く、その文字列が推奨するエスケープ技法を使用していることを確実に検証しなければなりません。
ほとんどの場合、アプリケーションは文字列のエスケープ処理に、<span class="foreignphrase"><em class="foreignphrase">その場しのぎ</em></span>のコードではなく、ライブラリやドライバが提供する（<span class="application">libpq</span>の<code class="function">PQescapeStringConn()</code>のような）関数を使用しなければなりません。
   </p></div><div class="sect2" id="id-1.11.6.315.5"><div class="titlepage"><div><div><h3 class="title">E.311.2. 変更点</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>すべての場合において、符号化が無効なマルチバイト文字を拒絶するようにサーバを変更しました。
(Tatsuo, Tom)</p><p><span class="productname">PostgreSQL</span>は少し前からこのような方向に移行していましたが、この検査がすべての符号化方式とすべてのテキスト入力に対して統一的に適用されるようになりました。
さらに、単なる警告ではなく常にエラーとなるようになりました。
この変更はCVE-2006-2313で示されるような種類のSQLインジェクション攻撃から保護します。</p></li><li class="listitem"><p>文字列リテラル内の<code class="literal">\'</code>の安全ではない使用を拒絶します。</p><p>CVE-2006-2314で示されるような種類のSQLインジェクション攻撃からのサーバ側の保護として、
サーバは、SQL文字列リテラル内のASCII単一引用符の表現として、<code class="literal">''</code>のみを受付け、<code class="literal">\'</code>を受付けないようになりました。
デフォルトでは、SQLインジェクションが可能となる状況である、<code class="varname">client_encoding</code>がクライアント側のみの符号化方式（SJIS、BIG5、GBK、GB18030、UHC）に設定された場合にのみ<code class="literal">\'</code>は拒絶されます。
新しい設定パラメータ<code class="varname">backslash_quote</code>により、必要な場合にこの動作を調整できます。
CVE-2006-2314に対して完全に保護するには、クライアント側を変更する必要があるかもしれないことに注意してください。
安全ではないクライアントを安全ではないものとして明らかにすることが、<code class="varname">backslash_quote</code>の目的の一つです。</p></li><li class="listitem"><p><span class="application">libpq</span>の文字列エスケープルーチンを、符号化方式と<code class="varname">standard_conforming_strings</code>を考慮するように変更しました。</p><p>これは、CVE-2006-2313およびCVE-2006-2314で示されるセキュリティ問題に対し、<span class="application">libpq</span>を使用したアプリケーションを修正します。
また、将来予定されるSQL標準文字列リテラル構文への移行に対しても保護しています。
同時に複数の<span class="productname">PostgreSQL</span>接続を使用するアプリケーションは、各データベース接続において使用される設定に合わせてエスケープ処理が正しく行われるように、<code class="function">PQescapeStringConn()</code>と<code class="function">PQescapeByteaConn()</code>に移行しなければなりません。
<span class="quote">“<span class="quote">独自に</span>”</span>文字列エスケープ処理を行うアプリケーションはライブラリルーチンを使用するように変更しなければなりません。</p></li><li class="listitem"><p>一部の不正な符号化方式変換関数を修正しました。</p><p><code class="function">win1251_to_iso</code>、<code class="function">alt_to_iso</code>、<code class="function">euc_tw_to_big5</code>、<code class="function">euc_tw_to_mic</code>、<code class="function">mic_to_euc_tw</code>はすべて可変拡張に関して正しくありませんでした。</p></li><li class="listitem"><p>文字列における偶然残る<code class="literal">\'</code>の使用を整理しました。
(Bruce, Jan)</p></li><li class="listitem"><p>独自のDH SSLパラメータを正しく使用するようにサーバを修正しました。(Michael Fuhr)</p></li><li class="listitem"><p>さまざまな小規模のメモリリークを修正しました。</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-7-3-16.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="release-7-3-14.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">E.310. リリース7.3.16 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> E.312. リリース7.3.14</td></tr></table></div></body></html>