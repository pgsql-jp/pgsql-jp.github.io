<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>ecpg</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="app-dropuser.html" title="dropuser" /><link rel="next" href="app-pgbasebackup.html" title="pg_basebackup" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center"><span xmlns="http://www.w3.org/1999/xhtml" class="application">ecpg</span></th></tr><tr><td width="10%" align="left"><a accesskey="p" href="app-dropuser.html" title="dropuser">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="reference-client.html" title="PostgreSQLクライアントアプリケーション">Up</a></td><th width="60%" align="center">PostgreSQLクライアントアプリケーション</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="app-pgbasebackup.html" title="pg_basebackup">Next</a></td></tr></table><hr></hr></div><div class="refentry" id="APP-ECPG"><div class="titlepage"></div><a id="id-1.9.4.8.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle"><span class="application">ecpg</span></span></h2><p><span class="application">ecpg</span> — 埋め込みSQL用Cプリプロセッサ</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p id="id-1.9.4.8.4.1"><code class="command">ecpg</code> [<em class="replaceable"><code>option</code></em>...]  <em class="replaceable"><code>file</code></em>... </p></div></div><div class="refsect1" id="APP-ECPG-DESCRIPTION"><h2>説明</h2><p><code class="command">ecpg</code>は、Cプログラム用の埋め込みSQLプリプロセッサです。
SQL呼び出しを特別な関数呼び出しに置き換えることによって、埋め込みSQL文を含むCプログラムを、通常のCコードに変換します。
これにより、出力ファイルは、任意のCコンパイラツールを使用して処理することができます。
  </p><p><code class="command">ecpg</code>は、コマンドラインで指定される各入力ファイルを対応するCの出力ファイルに変換します。
入力ファイルは<code class="filename">.pgc</code>という拡張子であることが望ましいです。
出力ファイル名の決定にあたり、拡張子が<code class="filename">.c</code>に置き換えられます。
出力ファイル名は<code class="option">-o</code>オプションによっても指定でき、こちらが優先します。
  </p><p>このマニュアルページでは埋め込みSQL言語については説明しません。
<a class="xref" href="ecpg.html" title="Chapter 35. ECPG - C言語による埋め込みSQL">Chapter 35</a>を参照してください。
  </p></div><div class="refsect1" id="id-1.9.4.8.6"><h2>オプション</h2><p>   <code class="command">ecpg</code>は、以下のコマンドライン引数を受け付けます。

   </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-c</code></span></dt><dd><p>SQLコードから有効なCコードを自動的に生成します。
現在、このオプションは<code class="literal">EXEC SQL TYPE</code>に対して使用できます。
      </p></dd><dt><span class="term"><code class="option">-C <em class="replaceable"><code>mode</code></em></code></span></dt><dd><p>互換モードを設定します。
<em class="replaceable"><code>mode</code></em>は<code class="literal">INFORMIX</code>もしくは<code class="literal">INFORMIX_SE</code>のどちらかを取ることができます。
      </p></dd><dt><span class="term"><code class="option">-D <em class="replaceable"><code>symbol</code></em></code></span></dt><dd><p>Cプリプロセッサのシンボルを定義します。
      </p></dd><dt><span class="term"><code class="option">-i</code></span></dt><dd><p>同様にシステムインクルードファイルも解析します。
      </p></dd><dt><span class="term"><code class="option">-I <em class="replaceable"><code>directory</code></em></code></span></dt><dd><p>追加のインクルード用パスを指定します。
これは、<code class="literal">EXEC SQL INCLUDE</code>を使用してインクルードされるファイルを検索する際に使用されます。
デフォルトでは順に、<code class="filename">.</code>（カレントディレクトリ）、<code class="filename">/usr/local/include</code>、コンパイル時に定義される<span class="productname">PostgreSQL</span>のインクルードディレクトリ（デフォルトでは<code class="filename">/usr/local/pgsql/include</code>）、<code class="filename">/usr/include</code>です。
      </p></dd><dt><span class="term"><code class="option">-o <em class="replaceable"><code>filename</code></em></code></span></dt><dd><p><code class="command">ecpg</code>が全ての出力を<em class="replaceable"><code>filename</code></em>に書き込むことを指定します。
      </p></dd><dt><span class="term"><code class="option">-r <em class="replaceable"><code>option</code></em></code></span></dt><dd><p>実行時の動作を選択します。
以下のいずれかを<em class="replaceable"><code>option</code></em>として取ることができます。
       </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">no_indicator</code></span></dt><dd><p>指示子を使用せずにNULL値を表す特殊な値を使用します。
歴史的にこの方式を使用したデータベースが存在します。
         </p></dd><dt><span class="term"><code class="option">prepare</code></span></dt><dd><p>すべての文を使用する前に準備(プリペア)します。
libecpgはプリペアド文のキャッシュを保持し、再実行される場合に文を再利用します。
キャッシュが満杯になった場合、libecpgは最も使用されていない文を解放します。
         </p></dd><dt><span class="term"><code class="option">questionmarks</code></span></dt><dd><p>互換性のためにクエスチョンマークをプレースホルダとして許します。
これは大昔にデフォルトでした。
         </p></dd></dl></div></dd><dt><span class="term"><code class="option">-t</code></span></dt><dd><p>トランザクションの自動コミットを有効にします。
このモードでは、各SQLコマンドは明示的なトランザクションブロックの内部にない限り、自動的にコミットされます。
デフォルトのモードでは、<code class="command">EXEC SQL COMMIT</code>が発行された時にのみコマンドがコミットされます。
      </p></dd><dt><span class="term"><code class="option">-v</code></span></dt><dd><p>バージョンやインクルード用パスなどの補足情報を表示します。
      </p></dd><dt><span class="term"><code class="option">--version</code></span></dt><dd><p><span class="application">ecpg</span>のバージョンを表示し、終了します。
      </p></dd><dt><span class="term"><code class="option">-?</code><br /></span><span class="term"><code class="option">--help</code></span></dt><dd><p><span class="application">ecpg</span>のコマンドライン引数の使用方法を表示し、終了します。
      </p></dd></dl></div><p>
  </p></div><div class="refsect1" id="id-1.9.4.8.7"><h2>注釈</h2><p>前処理されたCコードファイルをコンパイルする際、コンパイラが<span class="productname">PostgreSQL</span>のインクルードディレクトリ内にある<span class="application">ECPG</span>ヘッダファイルを検索できるようにしなければなりません。
そのため、コンパイラの呼び出し時に、<code class="option">-I</code>オプションを使用しなければならない可能性があります（例：<code class="literal">-I/usr/local/pgsql/include</code>）。
  </p><p>SQLが埋め込まれたCプログラムには、リンカオプション<code class="literal">-L/usr/local/pgsql/lib -lecpg</code>を使用するなどして、<code class="filename">libecpg</code>ライブラリをリンクする必要があります。
  </p><p>使用するシステムにおいて上記の2つに対応するディレクトリを調べるには、<a class="xref" href="app-pgconfig.html" title="pg_config"><span class="refentrytitle">pg_config</span></a>を使用します。
  </p></div><div class="refsect1" id="id-1.9.4.8.8"><h2>例</h2><p>埋め込みSQLを使用した<code class="filename">prog1.pgc</code>というCソースファイルがある場合、次のコマンドを順番に実行すれば、実行可能プログラムを作成することができます。
</p><pre class="programlisting">ecpg prog1.pgc
cc -I/usr/local/pgsql/include -c prog1.c
cc -o prog1 prog1.o -L/usr/local/pgsql/lib -lecpg</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="app-dropuser.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="reference-client.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="app-pgbasebackup.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"><span class="application">dropuser</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> pg_basebackup</td></tr></table></div></body></html>