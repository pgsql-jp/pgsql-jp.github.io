<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>GRANT</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="sql-fetch.html" title="FETCH" /><link rel="next" href="sql-importforeignschema.html" title="IMPORT FOREIGN SCHEMA" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">GRANT</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="sql-fetch.html" title="FETCH">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="sql-commands.html" title="SQLコマンド">Up</a></td><th width="60%" align="center">SQLコマンド</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="sql-importforeignschema.html" title="IMPORT FOREIGN SCHEMA">Next</a></td></tr></table><hr></hr></div><div class="refentry" id="SQL-GRANT"><div class="titlepage"></div><a id="id-1.9.3.144.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle">GRANT</span></h2><p>GRANT — アクセス権限を定義する</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><pre class="synopsis">GRANT { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER }
    [, ...] | ALL [ PRIVILEGES ] }
    ON { [ TABLE ] <em class="replaceable"><code>table_name</code></em> [, ...]
         | ALL TABLES IN SCHEMA <em class="replaceable"><code>schema_name</code></em> [, ...] }
    TO <em class="replaceable"><code>role_specification</code></em> [, ...] [ WITH GRANT OPTION ]

GRANT { { SELECT | INSERT | UPDATE | REFERENCES } ( <em class="replaceable"><code>column_name</code></em> [, ...] )
    [, ...] | ALL [ PRIVILEGES ] ( <em class="replaceable"><code>column_name</code></em> [, ...] ) }
    ON [ TABLE ] <em class="replaceable"><code>table_name</code></em> [, ...]
    TO <em class="replaceable"><code>role_specification</code></em> [, ...] [ WITH GRANT OPTION ]

GRANT { { USAGE | SELECT | UPDATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON { SEQUENCE <em class="replaceable"><code>sequence_name</code></em> [, ...]
         | ALL SEQUENCES IN SCHEMA <em class="replaceable"><code>schema_name</code></em> [, ...] }
    TO <em class="replaceable"><code>role_specification</code></em> [, ...] [ WITH GRANT OPTION ]

GRANT { { CREATE | CONNECT | TEMPORARY | TEMP } [, ...] | ALL [ PRIVILEGES ] }
    ON DATABASE <em class="replaceable"><code>database_name</code></em> [, ...]
    TO <em class="replaceable"><code>role_specification</code></em> [, ...] [ WITH GRANT OPTION ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON DOMAIN <em class="replaceable"><code>domain_name</code></em> [, ...]
    TO <em class="replaceable"><code>role_specification</code></em> [, ...] [ WITH GRANT OPTION ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON FOREIGN DATA WRAPPER <em class="replaceable"><code>fdw_name</code></em> [, ...]
    TO <em class="replaceable"><code>role_specification</code></em> [, ...] [ WITH GRANT OPTION ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON FOREIGN SERVER <em class="replaceable"><code>server_name</code></em> [, ...]
    TO <em class="replaceable"><code>role_specification</code></em> [, ...] [ WITH GRANT OPTION ]

GRANT { EXECUTE | ALL [ PRIVILEGES ] }
    ON { FUNCTION <em class="replaceable"><code>function_name</code></em> [ ( [ [ <em class="replaceable"><code>argmode</code></em> ] [ <em class="replaceable"><code>arg_name</code></em> ] <em class="replaceable"><code>arg_type</code></em> [, ...] ] ) ] [, ...]
         | ALL FUNCTIONS IN SCHEMA <em class="replaceable"><code>schema_name</code></em> [, ...] }
    TO <em class="replaceable"><code>role_specification</code></em> [, ...] [ WITH GRANT OPTION ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON LANGUAGE <em class="replaceable"><code>lang_name</code></em> [, ...]
    TO <em class="replaceable"><code>role_specification</code></em> [, ...] [ WITH GRANT OPTION ]

GRANT { { SELECT | UPDATE } [, ...] | ALL [ PRIVILEGES ] }
    ON LARGE OBJECT <em class="replaceable"><code>loid</code></em> [, ...]
    TO <em class="replaceable"><code>role_specification</code></em> [, ...] [ WITH GRANT OPTION ]

GRANT { { CREATE | USAGE } [, ...] | ALL [ PRIVILEGES ] }
    ON SCHEMA <em class="replaceable"><code>schema_name</code></em> [, ...]
    TO <em class="replaceable"><code>role_specification</code></em> [, ...] [ WITH GRANT OPTION ]

GRANT { CREATE | ALL [ PRIVILEGES ] }
    ON TABLESPACE <em class="replaceable"><code>tablespace_name</code></em> [, ...]
    TO <em class="replaceable"><code>role_specification</code></em> [, ...] [ WITH GRANT OPTION ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON TYPE <em class="replaceable"><code>type_name</code></em> [, ...]
    TO <em class="replaceable"><code>role_specification</code></em> [, ...] [ WITH GRANT OPTION ]

<span class="phrase">ここで<em class="replaceable"><code>role_specification</code></em>は以下の通りです。</span>

    [ GROUP ] <em class="replaceable"><code>role_name</code></em>
  | PUBLIC
  | CURRENT_USER
  | SESSION_USER

GRANT <em class="replaceable"><code>role_name</code></em> [, ...] TO <em class="replaceable"><code>role_name</code></em> [, ...] [ WITH ADMIN OPTION ]</pre></div><div class="refsect1" id="SQL-GRANT-DESCRIPTION"><h2>説明</h2><p><code class="command">GRANT</code>には基本的に2つの種類があります。
1つはデータベースオブジェクト（テーブル、列、ビュー、外部テーブル、シーケンス、データベース、外部データラッパ、外部サーバ、関数、手続き言語、スキーマ、テーブル空間）に対する権限の付与、もう1つはロール内のメンバ資格の付与です。
これらの種類は多くの点で似ていますが、説明は別々に行わなければならない程違いがあります。
  </p><div class="refsect2" id="SQL-GRANT-DESCRIPTION-OBJECTS"><h3>データベースオブジェクトに対するGRANT</h3><p>この種類の<code class="command">GRANT</code>コマンドはデータベースオブジェクトの特定の権限を1つ以上のロールに付与します。
既に権限が他のロールに付与されている場合でも、追加として付与されます。
  </p><p>1つ以上のスキーマ内の同じ種類のオブジェクトすべてに対して権限を付与するオプションも存在します。
この機能は現在テーブル、シーケンス、関数のみでサポートされます。
（しかし<code class="literal">ALL TABLES</code>にはビューおよび外部テーブルが含まれるとみなされていることに注意してください。）
  </p><p><code class="literal">PUBLIC</code>キーワードは、今後作成されるロールを含む、全てのロールへの許可を示します。
<code class="literal">PUBLIC</code>は、全てのロールを常に含む、暗黙的に定義されたグループと考えることができます。
個々のロールは全て、ロールに直接許可された権限、ロールが現在属しているロールに許可された権限、そして、<code class="literal">PUBLIC</code>に許可された権限を合わせた権限を持っています。
  </p><p><code class="literal">WITH GRANT OPTION</code>が指定されると、権限の受領者は、その後、他にその権限を与えることができます。
グラントオプションがない場合、受領者はこれを行うことができません。
グラントオプションは<code class="literal">PUBLIC</code>には与えることができません。
  </p><p>所有者（通常はオブジェクトを作成したユーザ）はデフォルトで全ての権限を保持しているため、オブジェクトの所有者に権限を許可する必要はありません
（ただし、オブジェクトの作成者が、安全性のために自らの権限を取り消すことは可能です）。
  </p><p>オブジェクトを削除する権限や何らかの方法でオブジェクトの定義を変更する権限は、付与可能な権限として扱われません。
これらの権限は、所有者固有のものであり、許可したり取り消したりすることはできません。
（しかし、オブジェクトを所有するロール内のメンバ関係を付与したり取り消すことで、同等な効果を得ることができます。
後で説明します。）
所有者は、オブジェクトに対する全てのグラントオプションも暗黙的に保持しています。
  </p><p>PostgreSQLは、一部の種類のオブジェクトに対し、デフォルトの権限を<code class="literal">PUBLIC</code>に付与します。
デフォルトでは、テーブル、列、シーケンス、外部データラッパ、外部サーバ、ラージオブジェクト、スキーマ、テーブル空間に関して<code class="literal">PUBLIC</code>に与えられるアクセス権限はありません。
他の種類のオブジェクトでは、<code class="literal">PUBLIC</code>に与えられる権限は次の通りです。
データベースでは<code class="literal">CONNECT</code>および<code class="literal">TEMPORARY</code>（一時テーブルの作成）権限、関数では<code class="literal">EXECUTE</code>権限、言語とデータ型（ドメインを含む）では<code class="literal">USAGE</code>権限です。
もちろんオブジェクトの所有者はデフォルトで与えられた権限と明示的に与えられた権限の両方を<code class="command">REVOKE</code>することができます。
（最大限の安全性を得るには、オブジェクトを作成したトランザクションと同じトランザクション内で<code class="command">REVOKE</code>コマンドを発行してください。
そうすれば、他のユーザがそのオブジェクトを使用できる隙間はなくなります）。
また、これらの初期デフォルト権限の設定は<a class="xref" href="sql-alterdefaultprivileges.html" title="ALTER DEFAULT PRIVILEGES"><span class="refentrytitle">ALTER DEFAULT PRIVILEGES</span></a>コマンドを使用して変更可能です。
  </p><p>設定可能な権限は以下のものです。

   </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">SELECT</code></span></dt><dd><p>指定したテーブル、ビュー、シーケンスの任意の列あるいは指定した列リストに対する<a class="xref" href="sql-select.html" title="SELECT"><span class="refentrytitle">SELECT</span></a>を許可します。
また、<a class="xref" href="sql-copy.html" title="COPY"><span class="refentrytitle">COPY</span></a> TOの使用も許可します。
存在する列の値を<a class="xref" href="sql-update.html" title="UPDATE"><span class="refentrytitle">UPDATE</span></a>や<a class="xref" href="sql-delete.html" title="DELETE"><span class="refentrytitle">DELETE</span></a>で参照するためにも、この権限は必要です。
シーケンスでは、この権限によって<code class="function">currval</code>関数を使用することができます。
ラージオブジェクトでは、この権限によってオブジェクトを読み取ることができます。
      </p></dd><dt><span class="term"><code class="literal">INSERT</code></span></dt><dd><p>指定したテーブルへの新規の行の<a class="xref" href="sql-insert.html" title="INSERT"><span class="refentrytitle">INSERT</span></a>を許可します。
列リストが指定された場合は、これらの列のみを<code class="command">INSERT</code>コマンド内で設定することができます（従って、その他の列はデフォルト値となります）。
また、<a class="xref" href="sql-copy.html" title="COPY"><span class="refentrytitle">COPY</span></a> FROMの使用も許可します。
      </p></dd><dt><span class="term"><code class="literal">UPDATE</code></span></dt><dd><p>指定したテーブルの任意の列あるいは指定した列リストに対する<a class="xref" href="sql-update.html" title="UPDATE"><span class="refentrytitle">UPDATE</span></a>を許可します。
（実際には、単純ではない<code class="command">UPDATE</code>コマンドはすべて、<code class="literal">SELECT</code>権限を同様に必要とします。
どの行を更新すべきかを決めるため、または、列の新しい値を計算するため、またはその両方のため、テーブル列を参照する必要があるからです。）
<code class="literal">SELECT ... FOR UPDATE</code>および<code class="literal">SELECT ... FOR SHARE</code>も、<code class="literal">SELECT</code>権限に加えて、少なくとも1つの列に対するこの権限を必要とします。
シーケンスでは、この権限により<code class="function">nextval</code>および<code class="function">setval</code>関数の使用が許可されます。
ラージオブジェクトでは、この権限によりオブジェクトの書き出しや切り詰めを行うことができます。
      </p></dd><dt><span class="term"><code class="literal">DELETE</code></span></dt><dd><p>指定したテーブルからの行の<a class="xref" href="sql-delete.html" title="DELETE"><span class="refentrytitle">DELETE</span></a>を許可します。
（実際には、単純ではない<code class="command">DELETE</code>コマンドはすべて、<code class="literal">SELECT</code>権限を同様に必要とします。
どの行を削除すべきかを決めるためにテーブルの列を参照する必要があるからです。）
      </p></dd><dt><span class="term"><code class="literal">TRUNCATE</code></span></dt><dd><p>指定したテーブルに対して<a class="xref" href="sql-truncate.html" title="TRUNCATE"><span class="refentrytitle">TRUNCATE</span></a>を行うことができます。
      </p></dd><dt><span class="term"><code class="literal">REFERENCES</code></span></dt><dd><p>指定したテーブル、またはテーブルの指定した列を参照する外部キー制約を作ることができます。
（<a class="xref" href="sql-createtable.html" title="CREATE TABLE"><span class="refentrytitle">CREATE TABLE</span></a>文を参照してください。）
      </p></dd><dt><span class="term"><code class="literal">TRIGGER</code></span></dt><dd><p>指定したテーブル上のトリガの作成を許可します
（<a class="xref" href="sql-createtrigger.html" title="CREATE TRIGGER"><span class="refentrytitle">CREATE TRIGGER</span></a>文を参照してください）。
      </p></dd><dt><span class="term"><code class="literal">CREATE</code></span></dt><dd><p>対象がデータベースの場合は、データベース内での新規スキーマおよびパブリケーションの作成を許可します。
      </p><p>対象がスキーマの場合は、スキーマ内での新規オブジェクトの作成を許可します。
既存のオブジェクトの名前を変更するには、オブジェクトを所有し、<span class="emphasis"><em>かつ</em></span>、そのオブジェクトが入っているスキーマに対してこの権限を保持していなければなりません。
      </p><p>対象がテーブル空間の場合は、テーブル空間内でのテーブルとインデックス、一時ファイルの作成と、デフォルトのテーブル空間としてこのテーブル空間を持つデータベースの作成を許可します
（この権限の取り消しによって既存のデータベースやスキーマの配置が変わることはないことに注意してください）。
      </p></dd><dt><span class="term"><code class="literal">CONNECT</code></span></dt><dd><p>ユーザは指定されたデータベースに接続することができます。
この権限は（<code class="filename">pg_hba.conf</code>で組み込まれる制限の検査に加え）接続開始時に検査されます。
      </p></dd><dt><span class="term"><code class="literal">TEMPORARY</code><br /></span><span class="term"><code class="literal">TEMP</code></span></dt><dd><p>指定したデータベースの使用中に一時テーブルを作成することを許可します。
      </p></dd><dt><span class="term"><code class="literal">EXECUTE</code></span></dt><dd><p>指定された関数、さらにその関数で実装されている任意の演算子の使用を許可します。
これは、関数に適用することができる唯一の権限です
（この構文は集約関数についても同じように機能します）。
      </p></dd><dt><span class="term"><code class="literal">USAGE</code></span></dt><dd><p>対象が手続き言語の場合、その言語で関数を作成することを許可します。
これは、手続き言語に適用することができる唯一の権限です。
      </p><p>対象がスキーマの場合、指定したスキーマに含まれるオブジェクトへのアクセスを許可します（オブジェクト自体の権限要件も満たされている必要があります）。
本質的には、この権限によってスキーマ内のオブジェクトを<span class="quote">“<span class="quote">検索</span>”</span>する権限が認められます。
この権限がなくても、例えばシステムテーブルを問い合わせることでオブジェクト名を知ることは可能です。
また、この権限を取り消した後でも、存在し続けているバックエンドがこうした検索を以前に実行していた文を持っている可能性があります。
このため、これはオブジェクトへのアクセスを防ぐ、完全に安全な方法ではありません。
      </p><p>対象がシーケンスの場合、この権限は<code class="function">currval</code>および<code class="function">nextval</code>関数の使用を許可します。
      </p><p>対象が型あるいはドメインの場合、この権限により、テーブル、関数、その他のスキーマオブジェクトの作成の際に、この型またはドメインを使用できるようになります。
（問い合わせにおけるその型の値に対する操作など、一般的な型の<span class="quote">“<span class="quote">使用</span>”</span>を制御するものではないことに注意してください。
その型に依存したオブジェクトが作成されることを防止するだけです。
この権限の主な目的は、どのユーザが型に依存するものを作成するかを制御することです。
そのようなオブジェクトが作成されると、所有者がその型を後で変更できなくなるかもしれないからです。）
      </p><p>対象が外部データラッパの場合、この権限を与えられると外部データラッパを使用する新しいサーバを作成することができます。
      </p><p>対象がサーバの場合、この権限を与えられると、サーバを使用する外部テーブルの作成を行うことができます。
また、サーバと関連し自身が所有するユーザのユーザマップを作成、変更、削除を行うことができます。
      </p></dd><dt><span class="term"><code class="literal">ALL PRIVILEGES</code></span></dt><dd><p>利用可能な全ての権限を一度に付与します。
<code class="literal">PRIVILEGES</code>キーワードは<span class="productname">PostgreSQL</span>では省略可能ですが、厳密なSQLでは必須です。
      </p></dd></dl></div><p>

その他のコマンドの実行に必要な権限は、そのコマンドのリファレンスページにて示されています。
  </p></div><div class="refsect2" id="SQL-GRANT-DESCRIPTION-ROLES"><h3>ロールに対するGRANT</h3><p>この種類の<code class="command">GRANT</code>コマンドは、ロール内のメンバ資格を1つ以上の他のロールに付与します。
これによりロールに付与された権限が各メンバに与えられるので、ロール内のメンバ資格は重要です。
  </p><p><code class="literal">WITH ADMIN OPTION</code>が指定された場合、メンバはロール内のメンバ資格を他に付与することができるようになります。
また同様にロール内のメンバ資格を取り消すこともできるようになります。
アドミンオプションがないと、一般ユーザは他への権限の付与や取り消しを行うことができません。
ロールはそれ自体についての<code class="literal">WITH ADMIN OPTION</code>を保持しているとはみなされませんが、データベースセッションのユーザがロールにマッチする場合について、ロール内のメンバ資格を付与あるいは取り消しを行うことができます。
データベーススーパーユーザはすべてのロール内のメンバ資格を誰にでも付与したり、取り消したりすることができます。
<code class="literal">CREATEROLE</code>権限を持つロールは、スーパーユーザロール以外の任意のロール内のメンバ資格の付与、取り上げが可能です。
  </p><p>権限の場合と異なり、ロール内のメンバ資格を<code class="literal">PUBLIC</code>に付与することはできません。
また、このコマンド構文では無意味な<code class="literal">GROUP</code>という単語を受け付けないことに注意してください。
  </p></div></div><div class="refsect1" id="SQL-GRANT-NOTES"><h2>注釈</h2><p>アクセス権限を取り消すには、<a class="xref" href="sql-revoke.html" title="REVOKE"><span class="refentrytitle">REVOKE</span></a>コマンドが使用されます。
   </p><p><span class="productname">PostgreSQL</span> 8.1から、ユーザとグループという概念は、ロールと呼ばれる１種類の実体に統合されました。
そのため、付与者がユーザかグループかどうかを識別するために<code class="literal">GROUP</code>キーワードを使用する必要はなくなりました。
このコマンドではまだ<code class="literal">GROUP</code>を使うことはできますが、何の意味もありません。
   </p><p>ユーザは特定の列あるいはテーブル全体に対する権限を持つ場合に<code class="command">SELECT</code>、<code class="command">INSERT</code>などを実行することができます。
テーブルレベルの権限を付与してからある列に対する権限を取り消しても、望むことは実現できません。
テーブルレベルの権限は列レベルの操作による影響を受けないからです。
   </p><p>オブジェクトの所有者でもなく、そのオブジェクトに何の権限も持たないユーザが、そのオブジェクトの権限を<code class="command">GRANT</code>しようとしても、コマンドの実行は直ちに失敗します。
何らかの権限を持っている限り、コマンドの実行は進行しますが、与えることのできる権限は、そのユーザがグラントオプションを持つ権限のみです。
グラントオプションを持っていない場合、<code class="command">GRANT ALL PRIVILEGES</code>構文は警告メッセージを発します。
一方、その他の構文では、コマンドで名前を指定した権限に関するグラントオプションを持っていない場合に警告メッセージを発します
（原理上、ここまでの説明はオブジェクトの所有者に対しても当てはまりますが、所有者は常に全てのグラントオプションを保持しているものとして扱われるため、こうした状態は決して起こりません）。
   </p><p>データベーススーパーユーザは、オブジェクトに関する権限設定に関係なく、全てのオブジェクトにアクセスできることには注意しなければなりません。
スーパーユーザが持つ権限は、Unixシステムにおける<code class="literal">root</code>権限に似ています。
<code class="literal">root</code>と同様、どうしても必要という場合以外は、スーパーユーザとして操作を行わないのが賢明です。
   </p><p>スーパーユーザが<code class="command">GRANT</code>や<code class="command">REVOKE</code>の発行を選択した場合、それらのコマンドは対象とするオブジェクトの所有者が発行したかのように実行されます。
特に、こうしたコマンドで与えられる権限は、オブジェクトの所有者によって与えられたものとして表されます。
（ロールのメンバ資格では、メンバ資格は含まれるロール自身が与えたものとして表されます。）
   </p><p><code class="command">GRANT</code>および<code class="command">REVOKE</code>は、対象のオブジェクトの所有者以外のロールによって実行することもできますが、
オブジェクトを所有するロールのメンバであるか、そのオブジェクトに対し<code class="literal">WITH GRANT OPTION</code>権限を持つロールのメンバでなければなりません。
この場合、その権限は、そのオブジェクトの実際の所有者ロールまたは<code class="literal">WITH GRANT OPTION</code>権限を持つロールによって付与されたものとして記録されます。
例えば、テーブル<code class="literal">t1</code>がロール<code class="literal">g1</code>によって所有され、ロール<code class="literal">u1</code>がロール<code class="literal">g1</code>のメンバであるとします。
この場合、<code class="literal">u1</code>は<code class="literal">t1</code>に関する権限を<code class="literal">u2</code>に付与できます。
しかし、これらの権限は<code class="literal">g1</code>によって直接付与されたものとして現れます。
後でロール<code class="literal">g1</code>の他のメンバがこの権限を取り消すことができます。
   </p><p><code class="command">GRANT</code>を実行したロールが、ロールの持つ複数メンバ資格の経路を通して間接的に必要な権限を持つ場合、
どのロールが権限を付与したロールとして記録されるかについては指定されません。
こうした場合、<code class="command">SET ROLE</code>を使用して、<code class="command">GRANT</code>を行わせたい特定のロールになることを推奨します。
   </p><p>テーブルへの権限付与によって、<code class="type">SERIAL</code>列によって関連付けされたシーケンスを含め、そのテーブルで使用されるシーケンスへの権限の拡張は自動的に行われません。
シーケンスへの権限は別途設定しなければなりません。
   </p><p>既存のテーブルおよび列に対する権限についての情報を得るには、以下の例のように<a class="xref" href="app-psql.html" title="psql"><span class="refentrytitle"><span class="application">psql</span></span></a>の<code class="command">\dp</code>コマンドを使用してください。
</p><pre class="programlisting">=&gt; \dp mytable
                              Access privileges
 Schema |  Name   | Type  |   Access privileges   | Column access privileges 
--------+---------+-------+-----------------------+--------------------------
 public | mytable | table | miriam=arwdDxt/miriam | col1:
                          : =r/miriam             :   miriam_rw=rw/miriam
                          : admin=arw/miriam        
(1 row)</pre><p>
<code class="command">\dp</code>で表される項目は、以下のように解釈することができます。
</p><pre class="literallayout">rolename=xxxx -- ロールに与えられた権限
=xxxx -- PUBLICに与えられた権限

            r -- SELECT（読み取り（read））
            w -- UPDATE（書き込み（write））
            a -- INSERT（追加（append））
            d -- DELETE
            D -- TRUNCATE
            x -- REFERENCES
            t -- TRIGGER
            X -- EXECUTE
            U -- USAGE
            C -- CREATE
            c -- CONNECT
            T -- TEMPORARY
      arwdDxt -- すべての権限 (テーブル用。他のオブジェクトでは異なります。)
            * -- 直前の権限に関するグラントオプション

        /yyyy -- この権限を付与したロール</pre><p>

上記の例は、<code class="literal">mytable</code>テーブルを作成し、次のコマンドを実行した後に<code class="literal">miriam</code>ユーザに表示されます。

</p><pre class="programlisting">GRANT SELECT ON mytable TO PUBLIC;
GRANT SELECT, UPDATE, INSERT ON mytable TO admin;
GRANT SELECT (col1), UPDATE (col1) ON mytable TO miriam_rw;</pre><p>
   </p><p>テーブル以外のオブジェクトでは、その権限を表示することができる他の<code class="command">\d</code>コマンドがあります。
   </p><p>あるオブジェクトの<span class="quote">“<span class="quote">アクセス権限</span>”</span>列が空の場合、そのオブジェクトはデフォルトの権限を持っていることを意味します（つまり権限フィールドがNULL）。
所有者に対しては、デフォルト権限として常に全ての権限が含まれていますが、オブジェクトの種類によっては、<code class="literal">PUBLIC</code>の権限が含まれていることがあります。
これについては既に説明した通りです。
オブジェクトに対する最初の<code class="command">GRANT</code>または<code class="command">REVOKE</code>が実行されるとデフォルトの権限がインスタンス化され（例えば<code class="literal">{miriam=arwdDxt/miriam}</code>のように作成されます）、与えられた要求によってこれらを変更します。
同様に、デフォルト以外の権限を持つ列に対してのみ<span class="quote">“<span class="quote">列アクセス権限</span>”</span>内で項目が表示されます。
（注意：
この目的のために、<span class="quote">“<span class="quote">デフォルト権限</span>”</span>とはそのオブジェクト種類の組み込みのデフォルト権限を意味します。
<code class="command">ALTER DEFAULT PRIVILEGES</code>コマンドにより影響をうける権限を持つオブジェクトは常に、この<code class="command">ALTER</code>による影響を含め、明示的な権限項目を持って表示されます。）
   </p><p>所有者が暗黙のうちに持つグラントオプションは、上記のアクセス権限の表示に出力されていない点に注目してください。
<code class="literal">*</code>は、グラントオプションが明示的に誰かに与えられた場合にのみ出力されます。
   </p></div><div class="refsect1" id="SQL-GRANT-EXAMPLES"><h2>例</h2><p>テーブル<code class="literal">films</code>にデータを追加する権限を全てのユーザに与えます。

</p><pre class="programlisting">GRANT INSERT ON films TO PUBLIC;</pre><p>
  </p><p>ビュー<code class="literal">kinds</code>における利用可能な全ての権限を、ユーザ<code class="literal">manuel</code>に与えます。

</p><pre class="programlisting">GRANT ALL PRIVILEGES ON kinds TO manuel;</pre><p>

上のコマンドをスーパーユーザや<code class="literal">kinds</code>の所有者が実行した場合は、全ての権限が付与されますが、他のユーザが実行した場合は、そのユーザがグラントオプションを持つ権限のみが付与されることに注意してください。
  </p><p>ロール<code class="literal">admins</code>内のメンバ資格をユーザ<code class="literal">joe</code>に与えます。

</p><pre class="programlisting">GRANT admins TO joe;</pre></div><div class="refsect1" id="SQL-GRANT-COMPATIBILITY"><h2>互換性</h2><p>標準SQLでは、<code class="literal">ALL PRIVILEGES</code>内の<code class="literal">PRIVILEGES</code>キーワードは必須です。
標準SQLでは、1つのコマンドで複数のオブジェクトに権限を設定することはサポートしていません。
   </p><p><span class="productname">PostgreSQL</span>では、オブジェクトの所有者は、自身が持つ権限を取り消すことができます。
例えば、テーブル所有者は自身の<code class="literal">INSERT</code>、<code class="literal">UPDATE</code>、<code class="literal">DELETE</code>、<code class="literal">TRUNCATE</code>権限を取り消すことで、自分にとってそのテーブルが読み取り専用になるよう変更することができます。
これは、標準SQLでは不可能です。
<span class="productname">PostgreSQL</span>では、所有者の権限を、所有者自身により与えられたものとして扱っているため、同様に所有者自身で権限を取り消すことができるようになっています。
標準SQLでは、所有者の権限は仮想的なエンティティ<span class="quote">“<span class="quote">_SYSTEM</span>”</span>によって与えられたものとして扱っています。
所有者は<span class="quote">“<span class="quote">_SYSTEM</span>”</span>ではないため、その権限を取り消すことができません。
   </p><p>標準SQLにしたがうと、グラントオプションは<code class="literal">PUBLIC</code>に対して与えることができます。
PostgreSQLではグラントオプションはロールに対して与えることのみをサポートしています。
   </p><p>標準SQLでは、文字セット、照合順序、翻訳といったその他の種類のオブジェクトに対して、<code class="literal">USAGE</code>権限を付与することができます。
   </p><p>標準SQLでは、シーケンスは<code class="literal">USAGE</code>権限のみを持ちます。
これはPostgreSQLにおける<code class="function">nextval</code>関数と等価な<code class="literal">NEXT VALUE FOR</code>式の使用を制御するものです。
シーケンスに関する<code class="literal">SELECT</code>権限と<code class="literal">UPDATE</code>権限はPostgreSQLの拡張です。
シーケンスに関する<code class="literal">USAGE</code>権限が<code class="literal">currval</code>関数にも適用される点もPostgreSQLの拡張です(この関数自体が拡張です)。
   </p><p>データベース、テーブル空間、スキーマ、言語についての権限は<span class="productname">PostgreSQL</span>の拡張です。
   </p></div><div class="refsect1" id="id-1.9.3.144.9"><h2>関連項目</h2><span class="simplelist"><a class="xref" href="sql-revoke.html" title="REVOKE"><span class="refentrytitle">REVOKE</span></a>, <a class="xref" href="sql-alterdefaultprivileges.html" title="ALTER DEFAULT PRIVILEGES"><span class="refentrytitle">ALTER DEFAULT PRIVILEGES</span></a></span></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sql-fetch.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="sql-commands.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="sql-importforeignschema.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">FETCH </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> IMPORT FOREIGN SCHEMA</td></tr></table></div></body></html>