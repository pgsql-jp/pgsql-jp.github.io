<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>5. バグレポートガイドライン</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="resources.html" title="4. より進んだ情報" /><link rel="next" href="tutorial.html" title="Part I. チュートリアル" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">5. バグレポートガイドライン</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="resources.html" title="4. より進んだ情報">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="preface.html" title="はじめに">Up</a></td><th width="60%" align="center">はじめに</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="tutorial.html" title="Part I. チュートリアル">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="BUG-REPORTING"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5. バグレポートガイドライン</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="bug-reporting.html#id-1.3.8.5">5.1. バグの特定</a></span></dt><dt><span class="sect2"><a href="bug-reporting.html#id-1.3.8.6">5.2. 報告すべきこと</a></span></dt><dt><span class="sect2"><a href="bug-reporting.html#id-1.3.8.7">5.3. バグ報告先</a></span></dt></dl></div><p><span class="productname">PostgreSQL</span>に関してバグを発見した場合、ぜひ我々に連絡してください。
最大限の注意を払っても、全てのプラットフォーム、全ての環境で<span class="productname">PostgreSQL</span>の機能全てが正常に動くことは保証できませんので、バグレポートは<span class="productname">PostgreSQL</span>をより信頼性の高いものにするために、大変重要になります。
 </p><p>下記の助言は、有効に活用され得るバグレポートを作成する際に、作成者を支援することを狙ったものです。
これに従う義務はありませんが、沿った方がより有益なものとなるでしょう。
 </p><p>私たちは、すべてのバグを直ちに修正することを約束することはできません。
そのバグが明確で、重大で、あるいは他の多くのユーザにも影響を与えるものであれば、誰かがすぐに調査する可能性が高くなるでしょう。
また、より新しいバージョンに変えて、そこでも同じようなことが起こるかを確認してもらうように伝える場合もあります。
あるいは、現在計画中の大きな変更が終了するまで、バグを修正できないと判断する場合もあります。
また、単に修正が非常に困難であり、より重要な他の事項があることもあります。
早急に処置が必要な場合は、商用サポートの購入を検討してください。
 </p><div class="sect2" id="id-1.3.8.5"><div class="titlepage"><div><div><h3 class="title">5.1. バグの特定</h3></div></div></div><p>バグ報告を行う前に、ドキュメントを読み、もう一度読み返し、実行しようとしている処理が実行可能かどうか確認してください。
実行可能かどうかが不明な場合は、その旨を報告してください。
それはドキュメントのバグです。
また、ドキュメントに書かれていることと実際の結果が異なる場合にはバグとなります。
以下のような状況が考えられます。
但し、これらに限定しているわけではありません。

   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>プログラムが致命的なシグナル、またはオペレーティングシステムのエラーメッセージで終了し、それがプログラム内部の問題を指摘している場合。
（逆に、<span class="quote">“<span class="quote">disk full</span>”</span>のようなメッセージはプログラムの問題ではありませんから、この場合は自分で修正してください。）
     </p></li><li class="listitem"><p>あるプログラムで、入力された値に対して間違った結果を返す場合。
     </p></li><li class="listitem"><p>（ドキュメントで定義されている）有効な値を入力してもプログラムで受け付けない場合。
     </p></li><li class="listitem"><p>プログラムが、無効な入力値を通知やエラーメッセージなどを表示せずに受け入れる場合。
但し、無効な入力と思われるものでも、拡張、あるいは過去の経緯による互換性と考えられている可能性があることに注意してください。
     </p></li><li class="listitem"><p>サポートされているプラットフォームで、<span class="productname">PostgreSQL</span>が手順通りにコンパイル、ビルド、インストールできない場合。
     </p></li></ul></div><p>

ここでは、<span class="quote">“<span class="quote">プログラム</span>”</span>とはバックエンドプロセスだけではなく、すべての実行可能ファイルを意味します。
  </p><p>プログラムの実行が遅かったり、リソースを大量に使用するのは必ずしもバグではありません。
アプリケーションを改善するためには、ドキュメントを読んだり、どこかのメーリングリストで尋ねてみたりしてください。
標準<acronym class="acronym">SQL</acronym>の要求に応じない場合も、その機能の互換性を明確にうたっていない限り、バグとは言えません。
  </p><p>以降に進む前に、TODOリストやFAQを参照して、そのバグが既知のものかどうか確認してください。
もしTODOリストの情報を読み取ることができなければ、問題を報告してください。
少なくともTODOリストを分かりやすくすることができます。
  </p></div><div class="sect2" id="id-1.3.8.6"><div class="titlepage"><div><div><h3 class="title">5.2. 報告すべきこと</h3></div></div></div><p>バグ報告で最も重要なことは、全ての事実を、そして事実のみを明確に記述することです。
何が起こったのか、または、プログラムのどこが問題か、<span class="quote">“<span class="quote">何々が起こっているようだ</span>”</span>などの憶測や推測を記述しないでください。
実装にさほど詳しくない方の推測は正しくない場合があり、有効なバグ報告になりません。
実装に精通している方の場合であっても、根拠のある説明は参考情報となりますが、やはり正しい事実が一番役に立ちます。
バグを修正するためには、まず開発者自身がそのバグを再現する必要があります。
ありのままの事実を報告することは、単刀直入（多くの場合は画面からメッセージをコピー&amp;ペーストを行うのみ）ですが、えてして、重要でないだろうと想像したり、省いても理解してもらえるだろうという思い込みによって、重要な情報が洩れてしまう場合がかなり多くあります。
  </p><p>全てのバグ報告では、下記の内容が記述されていなければいけません。

   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>問題を再現できるように、<span class="emphasis"><em>プログラムの起動から</em></span>行った作業を順序通りに記述してください。
例えば、出力がテーブルのデータに依存するならば、単に<code class="command">SELECT</code>文を記述していても、それ以前に行われた、<code class="command">CREATE TABLE</code>や<code class="command">INSERT</code>文が記述されていなければ十分とはいえません。
我々は、ユーザのデータベーススキーマをリバースエンジニアリングするための時間を取ることができませんし、推測してデータを構築したとしても、おそらく間違えることになるでしょう。
     </p><p>SQL関連の問題のテストケースの最適な書式は、<span class="application">psql</span>フロントエンドに直接読み込ませて問題を再現することができるファイルを用意することです
（<code class="filename">~/.psqlrc</code>の起動ファイルに何も書かれていないことを確認してください）。
このファイルを簡単に作成するには、<span class="application">pg_dump</span>を使ってテーブル定義とその状況を再現させるために必要なデータを取り出し、問題の起こった問い合わせを追加します。
サンプルデータの量を減らすことは、推奨されますが必ずしも必要ではありません。
どのような方法であれ、バグが再現できればよいのです。
     </p><p>アプリケーションが<span class="application">PHP</span>など何か別のクライアントインタフェースを使用している場合、問題となる問い合わせを切り出してください。
問題を再現させるために我々がWebサーバをセットアップすることは、おそらくないでしょう。
どのような場合においても、正確な入力ファイルを提供することを忘れないでください。
<span class="quote">“<span class="quote">大規模ファイル</span>”</span>や<span class="quote">“<span class="quote">中規模データベース</span>”</span>で発生する問題である、といった推測は行わないでください。
こうした情報は不正確過ぎて役に立ちません。
     </p></li><li class="listitem"><p>得られた出力そのもの。
<span class="quote">“<span class="quote">うまくいかなかった</span>”</span>、あるいは<span class="quote">“<span class="quote">クラッシュした</span>”</span>といった報告はしないでください。
エラーメッセージがあるならば、たとえ意味が理解できなくてもそれを報告してください。
オペレーティングシステムのエラーでプログラムが強制終了してしまったら、どのエラーでそうなったのかを報告してください。
何も起こらない場合も、その旨を報告してください。
たとえテストケースの結果がプログラムのクラッシュなど明確な場合でも、我々のプラットフォームで再現できない場合があります。
最も容易な方法は、出力をターミナルからコピーすることです。
     </p><div class="note"><h3 class="title">Note</h3><p>エラーメッセージを報告する場合、そのメッセージを最大限詳細に取得してください。
<span class="application">psql</span>では、前もって<code class="literal">\set VERBOSITY verbose</code>を指定してください。
サーバログからメッセージを取り出す場合は、全ての詳細をログに取得できるように<a class="xref" href="runtime-config-logging.html#GUC-LOG-ERROR-VERBOSITY">log_error_verbosity</a>実行時パラメータを<code class="literal">verbose</code>に設定してください。
      </p></div><div class="note"><h3 class="title">Note</h3><p>致命的なエラーが起こった場合、クライアント側で報告されるエラーメッセージには得られる情報が全て書かれているとは限りません。
データベースサーバのログも見てみてください。
もしログを取っていないならば、取る習慣を付けるいいタイミングです。
      </p></div></li><li class="listitem"><p>どのような出力を望んでいたのかを記述することも非常に重要です。
ただ単に<span class="quote">“<span class="quote">このコマンドはこのような出力を返した</span>”</span>や、<span class="quote">“<span class="quote">期待していた結果ではない</span>”</span>だけでは、再現して結果を検証した際、開発者は、これは期待した通りの正しい結果である、と考えるかもしれません。
送られてきたコマンドの背後にある文脈を全て把握することはできません。
また、特に<span class="quote">“<span class="quote">SQLではこう書かれていない/Oracleではこのようにならない</span>”</span>というコメントはご遠慮願います。
<acronym class="acronym">SQL</acronym>の正確な動作を探し出すのは楽しい作業ではありませんし、また、世にある他のリレーショナルデータベースの動作全てをPostgreSQLの開発者が把握しているわけでもありません
（問題がプログラムのクラッシュである場合、この内容は言うまでもなく省略できます）。
     </p></li><li class="listitem"><p>すべてのコマンドラインオプションと起動時のオプション、デフォルトから変更した関連する環境変数や設定ファイル。
繰り返しますが、正確な情報を提供してください。
OSの起動時にデータベースサーバを起動するようにパッケージされたディストリビューションを使用している場合は、それらがどのように実行されているかを確認する必要があります。
     </p></li><li class="listitem"><p>インストールの手順書から変更して実行したすべての内容。
     </p></li><li class="listitem"><p><span class="productname">PostgreSQL</span>のバージョン。
<code class="literal">SELECT version();</code>で、接続しているサーバのバージョンがわかります。
多くの実行可能なプログラムでは<code class="option">--version</code>オプションも使用できます。
少なくとも<code class="literal">postgres --version</code>と<code class="literal">psql --version</code>は実行できるはずです。
これらの関数やオプションが使用できない場合、アップグレードが保証されているものよりも、さらに古いバージョンです。
RPMなどパッケージ化されたものを使用している場合は、その旨を連絡し、パッケージに付加されたバージョン番号があれば、それも記載してください。
Git版に対するバグ報告の場合は、その旨も記載し、コミットハッシュの情報も含めてください。
     </p><p>10.5よりもバージョンが古い場合、アップグレードすることをお勧めします。
新しいリリースでは多くのバグ修正や改良がなされているからです。
ですので、古めの<span class="productname">PostgreSQL</span>のリリースを使用していて遭遇した不具合が修正されている可能性がかなりあります。
古い<span class="productname">PostgreSQL</span>のリリースを使用しているサイトに対して、我々は限定されたサポートしか提供することができません。
それ以上のサポートが必要であれば、商用サポート契約を結ぶことを検討してください。
     </p><p>     </p></li><li class="listitem"><p>プラットフォーム情報。
カーネル名とバージョン、Cライブラリ、プロセッサ、メモリ情報なども含めて報告してください。
多くの場合、ベンダ名とそのバージョンを明記するだけで十分ですが、<span class="quote">“<span class="quote">Debian</span>”</span>の正確な構成要素を全ての人間が把握している、であるとか、全ての人間がi386系を使用しているなどの思い込みは止めてください。
インストールに関する問題の場合は、マシンのツール群（コンパイラや<span class="application">make</span>など）の情報も必要となります。
     </p></li></ul></div><p>

バグ報告が長文になってもそれは仕方がないことなので、気にしないでください。
最初に全ての情報を入手できる方が、開発者が事実を聞き出さなければいけない状況よりも良いです。
その一方、ファイルが大きいならば、その情報に誰か興味があるかを最初に尋ねるのが得策かもしれません。
<a class="ulink" href="http://www.chiark.greenend.org.uk/~sgtatham/bugs.html" target="_top">記事</a>には、バグ報告に関するその他のコツの概要があります。
  </p><p>問題を解決する入力を見つけ出すための試行錯誤に時間をかけないでください。
これはおそらく問題解決の助けになりません。
バグが即座に修正されない場合、その時間を利用すれば、あなた自身のワークアラウンドを探して共有することができます。
繰り返しになりますが、バグがなぜあるのかを解明するのに余計な時間をかける必要はありません。
開発者の方が十分速くそれを見つけ出します。
  </p><p>バグ報告をする際、理解しやすい用語を使用してください。
このソフトウェアパッケージ全体は<span class="quote">“<span class="quote">PostgreSQL</span>”</span>と呼ばれていますが、略して<span class="quote">“<span class="quote">Postgres</span>”</span>とも呼ばれます。
特にバックエンドプロセスに関して述べる時は、そのように明記し、<span class="quote">“<span class="quote">PostgreSQLがクラッシュする</span>”</span>とは記述しないでください。
1つのバックエンドプロセスのクラッシュと、その親プロセス<span class="quote">“<span class="quote">postgres</span>”</span>のクラッシュとはかなり異なります。
1つのバックエンドがダウンしてしまったことを、<span class="quote">“<span class="quote">サーバがクラッシュした</span>”</span>とは記述しないでください。
その逆の場合にも当てはまります。
また、<span class="quote">“<span class="quote"><span class="application">psql</span></span>”</span>対話式フロントエンドなどのクライアントプログラムはバックエンドとは完全に分離されています。
問題がクライアント側かサーバ側かの切り分けを試みてください。
  </p></div><div class="sect2" id="id-1.3.8.7"><div class="titlepage"><div><div><h3 class="title">5.3. バグ報告先</h3></div></div></div><p>一般論として、バグ報告は<code class="email">&lt;<a class="email" href="mailto:pgsql-bugs@postgresql.org">pgsql-bugs@postgresql.org</a>&gt;</code>というバグ報告用メーリングリストに送ってください。
バグ報告の題名には、エラーメッセージの一部分などわかりやすいものを使ってください。
  </p><p>その他の方法として、プロジェクトの<a class="ulink" href="https://www.postgresql.org/" target="_top">Webサイト</a>にあるバグ報告フォームの項目を埋める方法があります。
この方法で入力したバグ報告は、<code class="email">&lt;<a class="email" href="mailto:pgsql-bugs@postgresql.org">pgsql-bugs@postgresql.org</a>&gt;</code>メーリングリストに送信されます。
  </p><p>バグ報告にセキュリティが関連する場合や公開アーカイブからすぐに閲覧できることを好まない場合、<code class="literal">pgsql-bugs</code>には送信しないでください。
セキュリティの問題については、非公開で<code class="email">&lt;<a class="email" href="mailto:security@postgresql.org">security@postgresql.org</a>&gt;</code>に報告することができます。
  </p><p><code class="email">&lt;<a class="email" href="mailto:pgsql-sql@postgresql.org">pgsql-sql@postgresql.org</a>&gt;</code>や<code class="email">&lt;<a class="email" href="mailto:pgsql-general@postgresql.org">pgsql-general@postgresql.org</a>&gt;</code>などのユーザ向けのメーリングリストには決してバグ報告を送らないでください。
これらのメーリングリストはユーザからの質問に答えるためのもので、ほとんどの購読者はバグ報告を受け取りたくないと思われます。
さらに重要なのは、これらのリストの購読者によってバグが修正されることはほとんどないということです。
  </p><p>また、開発者向けの<code class="email">&lt;<a class="email" href="mailto:pgsql-hackers@postgresql.org">pgsql-hackers@postgresql.org</a>&gt;</code>にもバグ報告を<span class="emphasis"><em>送らないで</em></span>ください。
ここは<span class="productname">PostgreSQL</span>の開発に関して議論する場で、バグ報告とは切り離している方が良いとされています。
もしその問題により多くのレビューが必要な場合は、そのバグ報告を<code class="literal">pgsql-hackers</code>で議論することになります。
  </p><p>ドキュメントに関して問題がある場合は、ドキュメント用のメーリングリスト、<code class="email">&lt;<a class="email" href="mailto:pgsql-docs@postgresql.org">pgsql-docs@postgresql.org</a>&gt;</code>が最適な報告先です。
その際、問題になった箇所がどの部分かを明記してください。
  </p><p>また、サポートされていないプラットフォームへの移植に関係するバグ報告である場合は<code class="email">&lt;<a class="email" href="mailto:pgsql-hackers@postgresql.org">pgsql-hackers@postgresql.org</a>&gt;</code>に報告してください。
そのプラットフォームへ<span class="productname">PostgreSQL</span>を移植するように（報告者と一緒に）最善の努力をします。
  </p><div class="note"><h3 class="title">Note</h3><p>spamメールを防止するために、残念なことに、これらのメーリングリストは非公開となっています。
つまり、これらのメーリングリストに投稿するには、講読していなければいけません
（但し、Webフォームによるバグ報告の場合には、メーリングリストを購読している必要はありません）。
メーリングリストからのメールを受け取らずに単にメールを送りたい場合は、購読登録を行い、講読オプションを<code class="literal">nomail</code>に設定してください。
詳細な情報については<code class="email">&lt;<a class="email" href="mailto:majordomo@postgresql.org">majordomo@postgresql.org</a>&gt;</code>宛に、<code class="literal">help</code>とだけ本文に書いてメールを送ってください。
   </p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="resources.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="preface.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="tutorial.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">4. より進んだ情報 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Part I. チュートリアル</td></tr></table></div></body></html>