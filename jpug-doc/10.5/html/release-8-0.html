<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.273. リリース8.0</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-8-0-1.html" title="E.272. リリース8.0.1" /><link rel="next" href="release-7-4-30.html" title="E.274. リリース7.4.30" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.273. リリース8.0</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-8-0-1.html" title="E.272. リリース8.0.1">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix E. リリースノート">Up</a></td><th width="60%" align="center">Appendix E. リリースノート</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="release-7-4-30.html" title="E.274. リリース7.4.30">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-8-0"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.273. リリース8.0</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-8-0.html#id-1.11.6.277.3">E.273.1. 概要</a></span></dt><dt><span class="sect2"><a href="release-8-0.html#id-1.11.6.277.4">E.273.2. バージョン8.0への移行</a></span></dt><dt><span class="sect2"><a href="release-8-0.html#id-1.11.6.277.5">E.273.3. 廃止予定の機能</a></span></dt><dt><span class="sect2"><a href="release-8-0.html#id-1.11.6.277.6">E.273.4. 変更点</a></span></dt></dl></div><p><strong>リリース日: </strong>2005-01-19</p><div class="sect2" id="id-1.11.6.277.3"><div class="titlepage"><div><div><h3 class="title">E.273.1. 概要</h3></div></div></div><p>以下に本リリースにおける大きな変更点を示します。
   </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Microsoft Windowsネイティブサーバ
     </span></dt><dd><p>このリリースは、<span class="trademark">Microsoft Windows</span>®上でサーバとしてネイティブに稼動する最初の<span class="productname">PostgreSQL</span>リリースです。
これは<span class="productname">Windows</span>サービスとしても稼動可能です。
このリリースでは、<span class="productname">Windows 2000 SP4</span>、<span class="productname">Windows XP</span>、および、<span class="productname">Windows 2003</span>などのNTベースのWindowsをサポートします。
<span class="productname">Windows 95</span>、<span class="productname">Windows 98</span>、および、<span class="productname">Windows ME</span>などの古めのリリースはサポートされていません。
これらのオペレーティングシステムでは<span class="productname">PostgreSQL</span>をサポートするための基盤が存在しないためです。
別に、<span class="productname">Windows</span>上でのインストールを簡単に行うために、インストーラプロジェクトが設立されました。
<a class="ulink" href="http://www.postgresql.org/ftp/win32/" target="_top">http://www.postgresql.org/ftp/win32/</a>を参照してください。
      </p><p>リリース工程を通して試験を行いましたが、Windowsへの移植においては<span class="productname">PostgreSQL</span>がUnixプラットフォームで培ってきた長年の製作環境の経験という利点がありません。
そのため、新しい製品を使用する時と同等の注意をもってこれを扱ってください。
      </p><p>以前のリリースでは、Windowsオペレーティングシステムでサーバをサポートするためには<span class="productname">Cygwin</span> Unixエミュレーションツールキットが必要でした。
<span class="productname">PostgreSQL</span>は数年に渡ってWindows上のネイティブなクライアントをサポートしていました。
      </p></dd><dt><span class="term">セーブポイント
     </span></dt><dd><p>セーブポイントにより、トランザクションの特定の一部を他の部分に影響することなく、アボートさせることができます。
以前のリリースではこうした機能はありませんでした。
トランザクション全体をアボートさせる以外に、トランザクション内のある文の失敗から復旧させる方法はありませんでした。
この機能は、複雑なトランザクション内でエラーからの復旧が必要なアプリケーション作成者にとって有意です。
      </p></dd><dt><span class="term">ポイントインタイムリカバリ
     </span></dt><dd><p>これまでのリリースでは、以前のバックアップからリストアする、もしくは、スタンバイ・リプリケーションサーバを使用する以外に、ディスク装置の障害から復旧させる方法はありませんでした。
ポイントインタイムリカバリにより、サーバの連続的なバックアップが可能です。
障害発生時点まで復旧させることも過去のあるトランザクションまで復旧させることも可能です。
      </p></dd><dt><span class="term">テーブル空間
     </span></dt><dd><p>テーブル空間を使用して、管理者は個々のテーブル、インデックス、および、データベース全体を格納するために異なるファイルシステムを選ぶことができます。
これは、性能を改善し、また、ディスク領域全体の使用状況を制御できます。
これまでのリリースでは、<span class="application">initlocation</span>を使用し、こうした処理のためには手作業によってシンボリックリンクを管理していました。
      </p></dd><dt><span class="term">バッファ管理、<code class="command">CHECKPOINT</code>、<code class="command">VACUUM</code>の改良
     </span></dt><dd><p>このリリースでは、より高度なバッファ交換戦略を使用します。
これにより、利用可能な共有バッファの使用が改善され、性能が向上します。
バキューム処理やチェックポイント処理が性能に与える影響も軽減されます。
      </p></dd><dt><span class="term">列データ型の変更
     </span></dt><dd><p><code class="command">ALTER TABLE</code>で列のデータ型が変更できるようになりました。
      </p></dd><dt><span class="term">新しいPerlサーバサイド言語
     </span></dt><dd><p>新しいバージョンの<span class="application">plperl</span>サーバサイド言語では、永続的共有格納領域、トリガ、レコードを返すこと、レコードの配列を返すこと、データベースにアクセスするSPI呼び出しをサポートするようになりました。
      </p></dd><dt><span class="term"><code class="command">COPY</code>におけるカンマ区切り値書式(CSV)サポート
     </span></dt><dd><p><code class="command">COPY</code>で、カンマ区切り値書式ファイルの読み書きが可能になりました。
これはまた、非標準的な引用符や文字の区切りを柔軟に解釈できます。
      </p></dd></dl></div></div><div class="sect2" id="id-1.11.6.277.4"><div class="titlepage"><div><div><h3 class="title">E.273.2. バージョン8.0への移行</h3></div></div></div><p>全ての以前のリリースからデータの移行を行うためには、<span class="application">pg_dump</span>を使用したダンプ、リストアが必要です。
   </p><p>以下の非互換性に注意してください。
   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="option">READ COMMITTED</code>シリアライゼーションモードにおいて、揮発性関数が、その関数の呼び出し元となったコマンドが始まるまでではなく、その関数内の各文が始まるまでに同時実行中のトランザクションによってコミットされた結果を参照できるようになりました。
     </p></li><li class="listitem"><p><code class="option">STABLE</code>もしくは<code class="option">IMMUTABLE</code>と宣言された関数は常に呼び出し中の問い合わせのスナップショットを使用します。
そのため、呼び出し中の問い合わせが始まってから行われた活動の影響を、その活動が自身のトランザクションであっても他のトランザクションであっても、参照しません。
こうした関数は読み取りのみでなければなりません。
つまり、<code class="command">SELECT</code>以外のSQLコマンドを全く使用することができません。
     </p></li><li class="listitem"><p>非遅延の<code class="option">AFTER</code>トリガが、現在の対話的コマンドの完了後ではなく、トリガの発行元となる問い合わせの完了後、即座に発行されるようになりました。
これはトリガの発行元となる問い合わせが関数内にある時に差異が現れます。
この場合トリガは、関数が次の操作を進める前に呼び出されます。
     </p></li><li class="listitem"><p>サーバ設定パラメータ<code class="varname">virtual_host</code>と<code class="varname">tcpip_socket</code>が、より一般的なパラメータ<code class="varname">listen_addresses</code>に置き換えられました。
また、サーバはデフォルトで<code class="literal">localhost</code>に対する監視を行うようになりました。
これにより、多くの状況において<code class="literal">-i</code> postmasterスイッチの必要性がなくなりました。
     </p></li><li class="listitem"><p>サーバ設定パラメータ<code class="varname">SortMem</code>および<code class="varname">VacuumMem</code>の名前が、より使用状況に合った<code class="varname">work_mem</code>および<code class="varname">maintenance_work_mem</code>という名前に変更されました。
元の名前は<code class="command">SET</code>や<code class="command">SHOW</code>でまだサポートされています。
     </p></li><li class="listitem"><p>サーバ設定パラメータ<code class="varname">log_pid</code>、<code class="varname">log_timestamp</code>、<code class="varname">log_source_port</code>が、より柔軟な<code class="varname">log_line_prefix</code>に置き換えられました。
     </p></li><li class="listitem"><p>サーバ設定パラメータ<code class="varname">syslog</code>がより論理的な<code class="varname">log_destination</code>変数に置き換えられ、この変数によってログの出力先を制御するようになりました。
     </p></li><li class="listitem"><p>データ変更のみやデータ定義文のみを選択できるように、サーバ設定パラメータ<code class="varname">log_statement</code>が変更されました。
サーバ設定パラメータ<code class="varname">log_duration</code>は、<code class="varname">log_statement</code>が問い合わせを出力する場合にのみ出力するようになりました。
     </p></li><li class="listitem"><p>サーバ設定パラメータ<code class="varname">max_expr_depth</code>が<code class="varname">max_stack_depth</code>に置き換えられました。
これは、式の入れ子レベルではなく物理的なスタックサイズを単位とします。
再帰的な関数によって引き起こされるスタックオーバーフローが原因で、セッションが終了してしまうことを防止するために、これは役に立ちます。
     </p></li><li class="listitem"><p><code class="function">length()</code>が、<code class="type">CHAR(n)</code>の値の最後に含まれる空白を数えないようになりました。
     </p></li><li class="listitem"><p>整数から<code class="type">BIT(N)</code>へのキャストにおいて、整数の右からNビットが選択されるようになりました。
以前は左からNビットを選択していました。
    </p></li><li class="listitem"><p>NULL配列値の一要素もしくは一部を更新することで、非NULLの配列、すなわち、代入された位置だけからなる配列が生成されるようになりました。
    </p></li><li class="listitem"><p>配列への入力値の構文検査がかなり厳しくなりました。
これまではおかしな場所に入力でき、おかしな結果を返していたごみが、エラーになるようになりました。
空文字列の要素値は、何も入力しないのではなく、<code class="literal">""</code>と記述しなければなりません。
また、配列要素の前後の空白に関する動作も変更されました。
後にある空白が、前にある空白と同義（これはこれまでも無視されていました）となるように無視されるようになりました。
     </p></li><li class="listitem"><p>整数演算操作のオーバーフローが検出されるようになりました。エラーとして報告されます。
     </p></li><li class="listitem"><p>単一バイトの<span class="quote">“<span class="quote">char</span>”</span>データ型に関連する算術演算子が削除されました。
     </p></li><li class="listitem"><p>extract()関数（<code class="function">date_part</code>とも呼ばれます）が紀元前の時間に対して正確な年を返すようになりました。
以前は正しい値よりも1少ない値が返されていました。
また、この関数が千年紀や世紀についても正しい値を返すようになりました。
     </p></li><li class="listitem"><p><code class="type">CIDR</code>値のマスクされないビットがゼロでなければならなくなりました。
例えば、<code class="literal">204.248.199.1/31</code>は<code class="type">CIDR</code>の値としてもはや許されません。
こうした値はこれまでも<span class="productname">PostgreSQL</span>で受け付けられないはずでしたが、これが拒絶されるようになりました。
    </p></li><li class="listitem"><p><code class="command">EXECUTE</code>が、実行した文に合った完了タグを返すようになりました。
     </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="command">\copy</code>コマンドが、<span class="application">psql</span>の<code class="literal">stdin/stdout</code>ではなく問い合わせの<code class="literal">stdin/stdout</code>を読み書きするようになりました。
新しい<code class="option">pstdin</code>/<code class="option">pstdout</code>パラメータ経由でアクセスすることで以前の動作を行うことができます。
     </p></li><li class="listitem"><p>JDBCクライアントインタフェースが標準配布から削除され、<a class="ulink" href="http://jdbc.postgresql.org" target="_top">http://jdbc.postgresql.org</a>から提供されるようになりました。
     </p></li><li class="listitem"><p>Tclクライアントインタフェースも削除されました。
<a class="ulink" href="http://gborg.postgresql.org" target="_top">http://gborg.postgresql.org</a>で、複数のTclインタフェースが提供されています。
     </p></li><li class="listitem"><p>サーバが、オペレーティングシステムで提供されるものではなく、独自の時間帯データベースを使用するようになりました。
これにより全てのプラットフォームにおいて一貫性のある振舞いが提供されます。
ほとんどの場合、時間帯の動作における注意すべき差異はほぼありませんが、<code class="command">SET</code>/<code class="command">SHOW</code> <code class="varname">TimeZone</code>で使用される時間帯名称はプラットフォームが提供する名称と異なる可能性があることに注意してください。
     </p></li><li class="listitem"><p><span class="application">configure</span>のスレッド用オプションのために、ユーザによる試験やファイルの編集が不要になりました。
スレッド用オプションが自動的に検出されるようになりました。
     </p></li><li class="listitem"><p>テーブル空間が実装されました。
そのため<span class="application">initlocation</span>が削除されました。
     </p></li><li class="listitem"><p>ユーザ定義のGiSTインデックス用のAPIが変更されました。
UnionおよびPickSplitメソッドで、<code class="type">bytea</code>ではなく、特別な<code class="structname">GistEntryVector</code>構造体へのポインタが渡されるようになりました。
     </p></li></ul></div></div><div class="sect2" id="id-1.11.6.277.5"><div class="titlepage"><div><div><h3 class="title">E.273.3. 廃止予定の機能</h3></div></div></div><p><span class="productname">PostgreSQL</span>の動作の一部は準最適となることが決定されています。
後方互換性のために、これらは8.0では削除されませんでしたが、非推奨であり、次のメジャーリリースで削除される予定です。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>リリース8.1ではintervalに対する<code class="function">to_char()</code>関数は削除される予定です。
     </p></li><li class="listitem"><p><code class="type">oid</code>/<code class="type">float4</code>/<code class="type">float8</code>データ型に空文字列を代入した時に、サーバが警告を発するようになりました。
これまで同様に、0として解釈して処理を継続します。
次のメジャーリリースでは、空文字列はこうしたデータ型では無効とみなす予定です。
      </p></li><li class="listitem"><p>デフォルトでは、<span class="productname">PostgreSQL</span> 8.0以前のテーブルは<code class="type">OID</code>付きで作成されます。
次のリリースでは、これは事実でなくなる予定です。
<code class="type">OID</code>付きでテーブルを作成するためには、<code class="option">WITH OIDS</code>句を指定する、あるいは、<code class="varname">default_with_oids</code>設定パラメータを設定する必要があります。
将来のリリースの<span class="productname">PostgreSQL</span>との互換性のために、OIDが必要なテーブルを使用しているユーザは明示的に<code class="option">WITH OIDS</code>を指定することを勧めます。
     </p></li></ul></div></div><div class="sect2" id="id-1.11.6.277.6"><div class="titlepage"><div><div><h3 class="title">E.273.4. 変更点</h3></div></div></div><p>以下に、リリース8.0とこれまでのメジャーリリースとの間での変更点の詳細な内容を示します。
   </p><div class="sect3" id="id-1.11.6.277.6.3"><div class="titlepage"><div><div><h4 class="title">E.273.4.1. 性能向上</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>データ型を跨るインデックスの使用をサポート(Tom)
      </p><p>この変更を行うまで、データ型が完全に一致しない場合、多くの問い合わせがインデックスを使用しませんでした。
この改良によりインデックスの使用がより直感的かつ一貫的になります。
      </p></li><li class="listitem"><p>新しいバッファ交換戦略によるキャッシュ処理の改良(Jan)
      </p><p>これまでのリリースでは最長未使用時間（LRU）キャッシュを使用して、最近に参照されたページをメモリ内に保持していました。
このLRUアルゴリズムでは、特定のキャッシュ項目が何回アクセスされたかを考慮しませんでした。
そのため、大規模なテーブルスキャンにより、よく使用されるキャッシュページがメモリ外に追いやられてしまいます。
新しいキャッシュアルゴリズムは、4つの独立したリストを使用して、最も最近に使用されたキャッシュページ、最もよく使用されたキャッシュページを管理し、作業負荷に基づいてその交換を動的に最適化します。
これにより共有バッファキャッシュが非常に効率的に使用されるようになるはずです。
これまで共有バッファのサイズを試行錯誤して決定していた管理者は、この新しいキャッシュ交換ポリシーで再度決定してください。
      </p></li><li class="listitem"><p>定期的にダーティバッファを書き出すサブプロセスの追加によりチェックポイント時の書き出しを低減(Jan)
      </p><p>これまでのリリースでは、数分程度の周期で実行されるチェックポイントプロセスが全てのダーティバッファをオペレーティングシステムのキャッシュに書き込み、オペレーティングシステムのダーティバッファをディスクに書き出していました。
これによりディスクの使用に関して周期的なピークが現れるようになり、性能を悪化させることがよく起こりました。
新しいコードでは、バックグラウンドライタを使用して、一定のペースで小刻みに書き出すようにしたので、チェックポイントの際にダーティページの書き出しがかなり少なくなりました。
更に新しいコードでは、大域的な<code class="function">sync()</code>を呼び出さずに、直前のチェックポイント以降に書き込まれたファイルのみに対する<code class="function">fsync()</code>を呼び出します。
これにより性能は向上し、チェックポイント時の性能劣化も最小限になります。
      </p></li><li class="listitem"><p>バキュームを延長する機能の追加により性能への影響を軽減(Jan)
      </p><p>負荷が高いシステムにおいて<code class="command">VACUUM</code>処理は、多くのI/O要求を行いますので、他のユーザにとっての性能を悪化させてしまいます。
このリリースでは、<code class="command">VACUUM</code>速度を低めることで、他のユーザへの影響を低減させることができます。
しかし、これは<code class="command">VACUUM</code>の処理時間を多くしてしまいます。
      </p></li><li class="listitem"><p>重複キーに対するB-treeインデックス性能の向上(Dmitry Tkach, Tom)
      </p><p>インデックス内に重複する値が多い場合のインデックスのスキャン方法が改良されました。
      </p></li><li class="listitem"><p>計画作成時、動的に生成されるテーブルサイズ推定値を使用する(Tom)
      </p><p>これまでプランナは、最後に実行した<code class="command">VACUUM</code>または<code class="command">ANALYZE</code>によって判明した値を使用して、テーブルの物理サイズ(ページ数)や行数などのテーブルサイズを推定していました。
現在のテーブルの物理サイズをカーネルから取得し、このテーブルサイズに最後に実行した<code class="command">VACUUM</code>または<code class="command">ANALYZE</code>によって判明した行密度(1ページあたりの行数)を乗じて行数を推定するようになりました。
これにより、最後に保守用のコマンドを実行してからテーブルサイズに大きな変更があった場合でも、より信頼できる推定ができるようになるはずです。
      </p></li><li class="listitem"><p><code class="literal">OR</code>句のある場合のインデックス使用の改良(Tom)
      </p><p>これにより、オプティマイザは、インデックス付けされていない、多くのOR句を持つ文に対してインデックスを使用できるようになりました。
また、複数列に対するインデックスが、その最初の列が指定され、2番目の列が<code class="literal">OR</code>句の一部である場合でも使用できるようになりました。
      </p></li><li class="listitem"><p>部分インデックス句の一致処理の改良(Tom)
      </p><p>サーバが、複雑な<code class="option">WHERE</code>句を持つ問い合わせにおける部分インデックスの使用に関してより賢明になりました。
      </p></li><li class="listitem"><p>GEQOオプティマイザの性能向上(Tom)
      </p><p>多く（デフォルトでは12以上）のテーブルを持つ問い合わせの計画を作成する時、GEQOオプティマイザが使用されます。
このリリースでは、最適化に費やされる時間を減らすために、問い合わせの解析方法を高速化しました。
      </p></li><li class="listitem"><p>雑多なオプティマイザの改良
      </p><p>実施された小規模な改良を全てここで示すことはできませんが、特定状況における多くの改善がこれまでのリリースよりなされています。
      </p></li><li class="listitem"><p>C関数の検索速度の改良(Tom)
      </p><p>このリリースでは、動的にロードされたC関数の情報を検索する時にハッシュテーブルを使用します。
これにより、検索がサーバの実行形式に組み込まれた関数とほぼ同等の速度で実行されますので、速度が向上します。
      </p></li><li class="listitem"><p>型固有の<code class="command">ANALYZE</code>統計処理機能の追加(Mark Cave-Ayland)
      </p><p>この機能により、より柔軟な非標準のデータ型用の統計情報の生成が可能です。
      </p></li><li class="listitem"><p><code class="command">ANALYZE</code>が式インデックスに対する統計情報を収集するようになりました(Tom)
      </p><p>式インデックス（関数インデックスとも呼ばれます）により、ユーザは単なる列だけではなく式や関数呼び出しの結果に対してインデックスを付けることができます。
このリリースでは、オプティマイザは式インデックスの内容に関する統計情報を収集、使用することができます。
これにより式インデックスが最適な問い合わせに対して作成される計画の質がかなり向上します。
      </p></li><li class="listitem"><p><code class="command">ANALYZE</code>用の新しい2段階サンプリング手法(Manfred Koizar)
      </p><p>これにより、テーブルの領域によって有効な行の密度が非常に異なる場合により優れた統計情報が得られます。
      </p></li><li class="listitem"><p><code class="command">TRUNCATE</code>の速度向上 (Tom)
      </p><p>7.4で見受けられた<code class="command">TRUNCATE</code>の性能劣化を、トランザクションセーフのまま取り戻しました。
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.277.6.4"><div class="titlepage"><div><div><h4 class="title">E.273.4.2. サーバにおける変更</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>WALファイルアーカイブとポイントインタイムリカバリの追加(Simon Riggs)
      </p></li><li class="listitem"><p>ディスクレイアウトの制御ができるテーブル空間の追加(Gavin)
      </p></li><li class="listitem"><p>組み込みログ回転プログラムの追加(Andreas Pflug)
      </p><p><span class="application">syslog</span>や他のログ回転プログラムに依存することなく簡単にサーバメッセージのログができるようになりました。
      </p></li><li class="listitem"><p>以下のサーバコンパイル時の設定を表示するための、読み取りのみのサーバ設定パラメータの追加
<code class="varname">block_size</code>、<code class="varname">integer_datetimes</code>、<code class="varname">max_function_args</code>、<code class="varname">max_identifier_length</code>、<code class="varname">max_index_keys</code>  (Joe)
      </p></li><li class="listitem"><p><code class="literal">sameuser</code>、<code class="literal">samegroup</code>、<code class="literal">all</code>という引用符付けによる<code class="filename">pg_hba.conf</code>での特殊な意味付けを取消し(Andrew)
      </p></li><li class="listitem"><p>デフォルトの<code class="filename">pg_hba.conf</code>内にてより明瞭な<code class="literal">localhost</code>用のIPv6名<code class="literal">::1/128</code>を使用(Andrew)
      </p></li><li class="listitem"><p><code class="filename">pg_hba.conf</code>の例においてCIDR書式を使用(Andrew)
      </p></li><li class="listitem"><p>サーバ設定パラメータ<code class="varname">SortMem</code>と<code class="varname">VacuumMem</code>の名前を<code class="varname">work_mem</code>と<code class="varname">maintenance_work_mem</code>に変更(古い名前もまだサポートします)(Tom)
      </p><p>この変更は、インデックスや外部キーの作成などのバルク操作には<code class="varname">maintenance_work_mem</code>、問い合わせの実行中に使用される作業空間用には<code class="varname">work_mem</code>、と明確に分けるために行われました。
      </p></li><li class="listitem"><p><code class="varname">log_disconnections</code>サーバ設定を使用したセッション切断のログを可能にした (Andrew)
      </p></li><li class="listitem"><p>各ログ行に発行される情報を制御できるように<code class="varname">log_line_prefix</code>サーバ設定パラメータを新規追加(Andrew)
      </p><p>ユーザ名、データベース名、リモートのIPアドレス、セッションの開始時刻を含めることができます。
      </p></li><li class="listitem"><p><code class="varname">log_pid</code>、<code class="varname">log_timestamp</code>、<code class="varname">log_source_port</code>サーバ設定パラメータの削除。これらの機能は<code class="varname">log_line_prefix</code>で置き換えられました。(Andrew)
      </p></li><li class="listitem"><p><code class="varname">virtual_host</code>と<code class="varname">tcpip_socket</code>パラメータを統合し<code class="varname">listen_addresses</code>パラメータに置き換えた(Andrew, Tom)
      </p><p><code class="varname">virtual_host</code>では単一の接続監視用IPアドレスしか指定できませんでした。
<code class="varname">listen_addresses</code>では複数のアドレスを指定することができます。
      </p></li><li class="listitem"><p>デフォルトでローカルホストの接続監視を行い、多くの状況で<code class="option">-i</code> postmasterスイッチの必要性を省いた(Andrew)
      </p><p>ローカルホスト(<code class="literal">127.0.0.1</code>)の接続監視によってセキュリティ問題が発生することはありません。
更に、ローカルソケットをサポートしないWindowsやJDBCなどの設定において特別な調整を行うことなく動作させることができます。
      </p></li><li class="listitem"><p><code class="varname">syslog</code>サーバ設定パラメータを削除。ログ出力先を制御する、より論理的な<code class="varname">log_destination</code>変数を追加。
      </p></li><li class="listitem"><p>どの問い合わせをログに記録するかを選択するために<code class="varname">log_statement</code>サーバ設定パラメータが<code class="varname">all</code>、<code class="varname">mod</code>、<code class="varname">ddl</code>、<code class="varname">none</code>を取るように変更(Bruce)
      </p><p>これにより、管理者はデータ定義の変更のみやデータ変更文のみのログを取得することができます。
      </p></li><li class="listitem"><p>一部のログ取得関連の設定パラメータは以前から普通のユーザによって調整可能でしたが、<span class="quote">“<span class="quote">より冗長</span>”</span>方向でのみにしか調整できませんでした。
これらがより厳密に扱われるようになり、スーパーユーザのみがこれらを設定することができます。
しかし、スーパーユーザは<code class="command">ALTER USER</code>を使用して、ユーザ単位で非スーパーユーザ用の設定を提供することができます。
また、スーパーユーザは<code class="literal">PGOPTIONS</code>を介してスーパーユーザのみの設定パラメータの値を設定することもできます。
      </p></li><li class="listitem"><p>設定ファイルをデータディレクトリ外に格納できるようにした(mlw)
      </p><p>デフォルトでは、設定ファイルはクラスタの最上位ディレクトリにあります。
この追加によって、設定ファイルをデータディレクトリ以外に格納することができるようになり、管理しやすくなりました。
      </p></li><li class="listitem"><p>最初に実行される時のみに準備済み問い合わせの計画を作成。これで定数を統計処理に使用することが可能。(Oliver Jowett)
      </p><p>準備済み文はその計画を一度作成し、何回も実行します。
準備済み文では、その使用時に再計画分のオーバヘッドを防ぐことができますが、計画の質は、問い合わせで使用される正確なパラメータが不明である分劣化します。
このリリースでは、無名の準備済み分の計画作成は最初の実行まで遅延され、そしてその実行時に使用された実際のパラメータ値を最適化のヒントとして使用します。
これにより、行外のパラメータ渡しを性能を落とすことなく使用できるようになりました。
      </p></li><li class="listitem"><p>パラメータを取る<code class="command">DECLARE CURSOR</code>が可能(Oliver Jowett)
      </p><p>パラメータ付き<code class="function">Parse</code>メッセージにて<code class="command">DECLARE CURSOR</code>を発行する際に有用です。
<code class="function">Bind</code>時点で送信されるパラメータ値が、カーソルの問い合わせの実行時に置き換えられます。
      </p></li><li class="listitem"><p><code class="type">inet</code>と<code class="type">cidr</code>データ型に対するハッシュ結合と集約の修正(Tom)
      </p><p>リリース7.4における、<code class="type">inet</code>と<code class="type">cidr</code>値が混在した場合のハッシュ処理に不具合がありました。
（これらの型のハッシュを作成することはありませんので、この不具合はそれまでのリリースでは存在しません。）
      </p></li><li class="listitem"><p><code class="varname">log_statement</code>が問い合わせを出力する場合のみに <code class="varname">log_duration</code>を出力するようにしました。(Ed L.)
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.277.6.5"><div class="titlepage"><div><div><h4 class="title">E.273.4.3. 問い合わせにおける変更</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>セーブポイント(入れ子のトランザクション)機能の追加(Alvaro)
      </p></li><li class="listitem"><p>未サポートの隔離レベルを受け付け、サポートされたレベルの中で最も近いレベルに移るようになりました。(Peter)
      </p><p>SQL仕様では、データベースが指定した隔離レベルをサポートしない場合はその次に厳しいレベルを使用すべきであると規定しています。
この変更はこの推奨に従ったものです。
      </p></li><li class="listitem"><p><code class="command">START TRANSACTION</code>同様<code class="command">BEGIN WORK</code>でトランザクション隔離レベルを指定可能です。
      </p></li><li class="listitem"><p>受け付けた元の問い合わせと異なる問い合わせ型を生成するルールについてテーブル権限の検査を修正(Tom)
      </p></li><li class="listitem"><p>単一引用符の使用を簡単にするドル引用符の実装(Andrew, Tom, David Fetter)
      </p><p>これまでのリリースでは、関数本体に引用符を付けるために単一引用符が使用されていましたので、関数テキストの内部の単一引用符を、二重の単一引用符、もしくはエラーが起こりやすい記述とする必要がありました。
このリリースでは、テキストブロックの引用符付けに「ドル引用符付け」を使用できるように機能を追加しました。
この機能により、異なる入れ子レベルで異なる引用符区切り文字を使用できますので、正確な引用符付けという処理がかなり簡単になりました。
      </p></li><li class="listitem"><p><code class="literal">CASE val WHEN compval1 THEN ...</code>における<code class="literal">val</code>の評価を1回だけにしました(Tom)
      </p><p><code class="option">CASE</code>が試験済みの式を複数回評価しないようになりました。
式が複雑な場合や揮発性がある場合に利点があります。
      </p></li><li class="listitem"><p>集約問い合わせの目的リストを計算する前の<code class="option">HAVING</code>検査(Tom)
      </p><p><code class="literal">SELECT SUM(win)/SUM(lose) ... GROUP BY ... HAVING SUM(lose) &gt; 0</code>などの場合における不適切な失敗を改修しました。
これは正常動作すべきでしたが、これまではゼロ割で失敗することがありました。
      </p></li><li class="listitem"><p><code class="varname">max_expr_depth</code>パラメータを、スタックサイズをキロバイトで指定した<code class="varname">max_stack_depth</code>パラメータで置き換えました(Tom)
      </p><p>再帰的な関数の暴走によるクラッシュに対する防弾処理として提供される機能です。
式の入れ子の深さを単位にするのではなく、直接実行スタックのサイズを単位にするようになりました。
      </p></li><li class="listitem"><p>任意の行式の許可(Tom)
      </p><p>このリリースでは、SQL式が任意の複合型、つまり行値を持つことができます。
これにより、関数がより簡単に行を引数として取ることも行値を返すことができます。
      </p></li><li class="listitem"><p>行内の演算子や副問い合わせの比較として<code class="option">LIKE</code>/<code class="option">ILIKE</code>が使用できます(Fabien Coelho)
      </p></li><li class="listitem"><p>識別子やキーワード内の基本ASCII文字についてロケール固有の大文字小文字の変換を行わない(Tom)
      </p><p><code class="literal">I</code>と<code class="literal">i</code>を含む単語が誤動作する<span class="quote">“<span class="quote">トルコ語問題</span>”</span>を解消します。
7ビットASCIIセット以外の文字の組み合わせは依然ロケールを無視します。
      </p></li><li class="listitem"><p>構文エラー報告の改良(Fabien, Tom)
      </p><p>構文エラーの報告が以前より使いやすくなりました。
      </p></li><li class="listitem"><p>実行した文に対応する完全なタグを返すよう<code class="command">EXECUTE</code>を変更(Kris Jurka)
      </p><p>これまでのリリースでは、全ての<code class="command">EXECUTE</code>呼び出しは<code class="command">EXECUTE</code>タグを返していました。
このリリースでは、実行されたコマンドを反映したタグを返します。
      </p></li><li class="listitem"><p>ルールの展開において<code class="option">NATURAL CROSS JOIN</code>の発行を行わない(Tom)
      </p><p>こうした句は論理的な意味がありません。
しかし、ルールでコンパイラがこの構文を生成することがありました。
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.277.6.6"><div class="titlepage"><div><div><h4 class="title">E.273.4.4. オブジェクト操作における変更</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>キャスト、変換、言語、演算子クラス、ラージオブジェクトに対する<code class="command">COMMENT ON</code>の追加(Christopher)
      </p></li><li class="listitem"><p>デフォルトで<code class="type">OID</code>付きのテーブルを作成するかどうかを制御する<code class="varname">default_with_oids</code>サーバ設定パラメータの新規追加(Neil)
      </p><p>これにより管理者は<code class="command">CREATE TABLE</code>をデフォルトで<code class="type">OID</code>列を持つテーブルを作成するか持たないテーブルを作成するかを制御することができます。
(現在の出荷時でデフォルトでは、<code class="varname">default_with_oids</code>は<code class="literal">TRUE</code>ですが、将来のリリースではデフォルトで<code class="literal">FALSE</code>となります。)
      </p></li><li class="listitem"><p><code class="command">CREATE TABLE AS</code> に<code class="option">WITH</code> / <code class="option">WITHOUT OIDS</code>句を追加(Neil)
      </p></li><li class="listitem"><p><code class="command">ALTER TABLE DROP COLUMN</code>で<code class="type">OID</code>列を削除することが可能(<code class="command">ALTER TABLE SET WITHOUT OIDS</code>もまだ動作します) (Tom)
      </p></li><li class="listitem"><p>テーブル列として複合型が可能(Tom)
      </p></li><li class="listitem"><p>SQL仕様通りの、<code class="command">ALTER ... ADD COLUMN</code>でのデフォルトと<code class="option">NOT NULL</code>制約が可能(Rod)
      </p><p>NULLではなく指定されたデフォルト値を初期値として列を生成する<code class="option">ADD COLUMN</code>が可能になりました。
      </p></li><li class="listitem"><p>列の型を変更する<code class="command">ALTER COLUMN TYPE</code>が可能(Rod)
      </p><p>列を削除し、再度追加することなく、列のデータ型が変更できるようになりました。
      </p></li><li class="listitem"><p>複数の<code class="command">ALTER</code>操作を単一の<code class="command">ALTER TABLE</code>コマンドにまとめることが可能(Rod)
      </p><p>これは特に、テーブルの書き換えを行う<code class="command">ALTER</code>コマンド(<code class="option">ALTER COLUMN TYPE</code>とデフォルト付きの<code class="option">ADD COLUMN</code>があります)で便利です。
<code class="command">ALTER</code>コマンドをまとめることにより、必要なテーブルの書き換えは1回だけになります。
      </p></li><li class="listitem"><p><code class="type">SERIAL</code>列を追加する<code class="command">ALTER TABLE</code>が可能(Tom)
      </p><p>これは、新規列にデフォルトを付与する新機能の結果によるものです。
      </p></li><li class="listitem"><p>集約、変換、データベース、関数、演算子、演算子クラス、スキーマ、型、テーブル空間の所有者の変更が可能(Christopher, Euler Taveira de Oliveira)
      </p><p>これまでは、直接システムテーブルを変更する必要がありました。
      </p></li><li class="listitem"><p>一時オブジェクトの作成を<code class="option">SECURITY DEFINER</code>関数に制限することを許可(Sean Chittenden)
      </p></li><li class="listitem"><p><code class="option">ALTER TABLE ... SET WITHOUT CLUSTER</code>を追加 (Christopher)
      </p><p>これまでのリリースでは、システムテーブルを変更する他、自動クラスタ指定を削除する方法がありませんでした。
      </p></li><li class="listitem"><p>スキーマ内での一意性を保証するために制約/インデックス/<code class="type">SERIAL</code>名が番号付きの<em class="replaceable"><code>table_column_type</code></em>になりました(Tom)
      </p><p>SQL仕様では、こうした名前はスキーマ内で一意であるべきと規定してます。
      </p></li><li class="listitem"><p><code class="type">SERIAL</code>列のシーケンス名を返す<code class="function">pg_get_serial_sequence()</code>の追加(Christopher)
      </p><p>これにより自動スクリプトが確実に<code class="type">SERIAL</code>シーケンス名を見つけることができます。
      </p></li><li class="listitem"><p>プライマリ/外部キーのデータ型の不一致が高価な検索になる時の警告
      </p></li><li class="listitem"><p>テーブル空間間でインデックスを移動することができる新しい<code class="command">ALTER INDEX</code>コマンドの追加(Gavin)
      </p></li><li class="listitem"><p><code class="command">ALTER TABLE OWNER</code>により依存するシーケンスの所有者も変更するようにした(Alvaro)
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.277.6.7"><div class="titlepage"><div><div><h4 class="title">E.273.4.5. ユーティリティコマンドにおける変更</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">CREATE SCHEMA</code>によりトリガ、インデックス、シーケンスの作成が可能(Neil)
      </p></li><li class="listitem"><p><code class="command">CREATE RULE</code>に<code class="option">ALSO</code>キーワードを追加(Fabien Coelho)
      </p><p><code class="option">ALSO</code>がルール生成に追加できるようになりました。
これは<code class="option">INSTEAD</code>ルールと反対です。
      </p></li><li class="listitem"><p><code class="command">LOCK</code>に<code class="option">NOWAIT</code>オプションを追加(Tatsuo)
      </p><p><code class="command">LOCK</code>が、要求したロックを待機する必要がある場合に失敗することができるようになりました。
      </p></li><li class="listitem"><p><code class="command">COPY</code>により、カンマ区切り値(CSV)ファイルの読み書きが可能(Andrew, Bruce)
      </p></li><li class="listitem"><p><code class="command">COPY</code>の区切りとNULL文字列が競合する場合にエラーを生成(Bruce)
      </p></li><li class="listitem"><p><code class="command">GRANT</code>/<code class="command">REVOKE</code>の動作をよりSQL仕様に従うように変更
      </p></li><li class="listitem"><p><code class="command">CREATE INDEX</code>と<code class="command">CHECKPOINT</code>間のロック競合を防止(Tom)
      </p><p>7.3と7.4では、長時間実行されるB-treeインデックスの構築により同時実行される<code class="command">CHECKPOINT</code>の完了がブロックされることがありました。
これにより、WALログの再利用を行うことができないためWALが膨れ上がることがありました。
      </p></li><li class="listitem"><p>データベース全体の<code class="command">ANALYZE</code>はテーブルを跨ってロックを保持しない(Tom)
      </p><p>これは、テーブルの排他ロックを必要とする他のバックエンドがデッドロックする可能性を低減します。
この変更をうまく使用するために、データベース全体に対する<code class="command">ANALYZE</code>をトランザクションブロック(<code class="command">BEGIN</code>ブロック)内で実行しないでください。
これは各テーブルに対してコミットされ新しいトランザクションが生成できなければなりません。
      </p></li><li class="listitem"><p><code class="command">REINDEX</code>はインデックスの親テーブルの排他的ロックを全く取得しません。
      </p><p>インデックス自体はまだ排他的にロックされます。
しかし構築中のインデックスを使用していない場合はテーブルの読み込みを続行することができます。
      </p></li><li class="listitem"><p>ユーザ名を変更したときにMD5ユーザパスワードを消去(Bruce)
      </p><p><span class="productname">PostgreSQL</span>は、MD5を使用してパスワードを暗号化する時にユーザ名をソルトとして使用します。
ユーザ名が変更された場合、そのソルトは保存されたMD5パスワードと一致しませんので、過去のパスワードを使用することができなくなります。
このリリースでは、注意が表示され、パスワードが削除されます。
その後、そのユーザでパスワード認証を行う場合には、新しいパスワードを割り当てなければなりません。
      </p></li><li class="listitem"><p>Windows用の新しい<span class="application">pg_ctl</span> <code class="literal">kill</code> オプション(Andrew)
      </p><p>Windowsはバックエンドにシグナルを送信するための<code class="literal">kill</code>コマンドがありません。
そこで<span class="application">pg_ctl</span>にこの機能が追加されました。
      </p></li><li class="listitem"><p>情報スキーマの改良
      </p></li><li class="listitem"><p>GUIツールで初期パスワードを設定できるように<span class="application">initdb</span>に<code class="option">--pwfile</code>オプションを追加(Magnus)
      </p></li><li class="listitem"><p><span class="application">initdb</span>におけるロケール/符号化方式の不一致の検出 (Peter)
      </p></li><li class="listitem"><p>Windowsオペレーティングシステムサービスに登録するための<code class="option">register</code>コマンドを<span class="application">pg_ctl</span>に追加(Dave Page)
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.277.6.8"><div class="titlepage"><div><div><h4 class="title">E.273.4.6. データ型および関数における変更</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>より完全な複合型(行型)のサポート(Tom)
      </p><p>これまでスカラ型の値のみが動作していた多くの場所で複合型の値が使用できるようになりました。
      </p></li><li class="listitem"><p>非長方配列値をエラーとして拒絶(Joe)
      </p><p>これまでは<code class="function">array_in</code>は何もメッセージを出さずにおかしな結果を構築しました。
      </p></li><li class="listitem"><p>整数算術計算におけるオーバーフローの検出(Tom)
       </p></li><li class="listitem"><p>単一バイトの<code class="type">"char"</code>データ型に関する算術演算子の削除
       </p><p>これまでは、パーサは、<code class="literal">null * null</code>など<span class="quote">“<span class="quote">unable to select an operator</span>”</span>エラーとなることがより適切である多くの場合で、こうした演算子を選択していました。
実際に<code class="type">"char"</code>列に対する算術演算を行いたいのであれば、明示的に整数型にキャストしてください。
       </p></li><li class="listitem"><p>配列への入力における構文検査をできるだけ厳密化(Joe)
       </p><p>これまでおかしな場所に許され、おかしな結果を生成したごみが<code class="literal">ERROR</code>になるようになりました。
例えば、右閉じ括弧の後の空白以外の文字。
       </p></li><li class="listitem"><p>空文字列配列要素値は何も記述しないのではなく<code class="literal">""</code>と記述しなければならない(Joe)
       </p><p>これまでは、どちらの方法でも空文字列要素値を記述できましたが、引用符付きの文字列のみが有効になりました。
何も指定しないところは、おそらく将来のリリースではNULL要素値とみなされる予定です。
       </p></li><li class="listitem"><p>配列要素の終わりの空白を無視(Joe)
       </p><p>これまでは要素値と区切り文字もしくは右括弧の間で、前方の空白は無視され、後方の空白は意味がありました。
現在は、後方の空白も無視されます。
       </p></li><li class="listitem"><p>下限が1でない場合、明示的な配列境界付きで配列値を発行
       (Joe)
      </p></li><li class="listitem"><p>日付文字列として<code class="literal">YYYY-monthname-DD</code>を受け付ける(Tom)
      </p></li><li class="listitem"><p><code class="function">netmask</code>と<code class="function">hostmask</code>関数が最大のマスク長を返す(Tom)
      </p></li><li class="listitem"><p>階乗関数が<code class="type">numeric</code>を返すように変更(Gavin)
      </p><p><code class="type">numeric</code>を返すことにより、階乗関数はより広範な入力値で動作するようになりました。
      </p></li><li class="listitem"><p><code class="function">to_char</code>/<code class="function">to_date()</code>による日付変換の改良(Kurt Roeckx, Fabien Coelho)
      </p></li><li class="listitem"><p><code class="type">CHAR(n)</code>において<code class="function">length()</code>が最後の空白を考慮しないようにした (Gavin)
      </p><p>この変更は整合性を高めるために行われました。
<code class="type">CHAR(n)</code>データにおける最後に続く空白は重要な意味を持ちません。
ですので、これらを<code class="function">length()</code>で数えるべきではありません。
      </p></li><li class="listitem"><p><code class="type">OID</code>/<code class="type">float4</code>/<code class="type">float8</code>データ型に空文字列を渡した場合の警告(Neil)
      </p><p>8.1ではエラーになる予定です。
      </p></li><li class="listitem"><p><code class="type">int2</code>/<code class="type">int4</code>/<code class="type">int8</code>/<code class="type">float4</code>/<code class="type">float8</code>入力関数で値の前後の空白文字を許可(Neil)
      </p></li><li class="listitem"><p><code class="type">float4</code>, <code class="type">float8</code>におけるIEEE <code class="literal">Infinity</code>と<code class="literal">NaN</code>のサポートの改良(Neil)
      </p><p>IEEE準拠の浮動小数点演算をサポートする全てのプラットフォームで動作するようになりました。
      </p></li><li class="listitem"><p><code class="function">date_trunc()</code>に <code class="option">week</code>オプションの追加(Robert Creager)
      </p></li><li class="listitem"><p><code class="literal">1 BC</code>に対する<code class="function">to_char</code>の修正(以前は<code class="literal">1 AD</code>を返しました)(Bruce)
      </p></li><li class="listitem"><p>BC日付用の<code class="function">date_part(year)</code>を修正(以前は正しい年から1引いた値を返していました)(Bruce)
      </p></li><li class="listitem"><p><code class="function">date_part()</code>が適切な千年紀と世紀を返すように修正(Fabien Coelho)
      </p><p>これまでのバージョンでは、世紀と千年紀は、標準的な計算方法と比べて、間違った値を返し、また、間違った年から数えていました。
      </p></li><li class="listitem"><p>標準に従うように、<code class="function">ceil()</code>の別名<code class="function">ceiling()</code>、<code class="function">pow()</code>の別名<code class="function">power()</code>を追加(Neil)
      </p></li><li class="listitem"><p>特定のエラー条件でSQL:2003で指定された正しい<code class="literal">SQLSTATE</code>エラーコードを発行するように<code class="function">ln()</code>、<code class="function">log()</code>、<code class="function">power()</code>、<code class="function">sqrt()</code>を変更(Neil)
      </p></li><li class="listitem"><p>SQL:2003の定義通りの<code class="function">width_bucket()</code>関数の追加(Neil)
      </p></li><li class="listitem"><p>数値集合への操作を簡略化する<code class="function">generate_series()</code>関数の追加(Joe)
      </p></li><li class="listitem"><p>マルチバイト符号化方式を扱う<code class="function">upper/lower/initcap()</code>関数の修正(Tom)
      </p></li><li class="listitem"><p>booleanおよびビット単位の整数に対する<code class="option">AND</code>/<code class="option">OR</code>集約の追加(Fabien Coelho)
      </p></li><li class="listitem"><p>クライアント、サーバのネットワークアドレスを返すセッション情報関数の追加(Sean Chittenden)
      </p></li><li class="listitem"><p>閉経路の領域を求める関数の追加(Sean Chittenden)
      </p></li><li class="listitem"><p>他のバックエンドにキャンセル要求を送信する関数の追加(Magnus)
      </p></li><li class="listitem"><p><code class="type">interval</code>に<code class="type">datetime</code>を加算する演算子(Tom)
      </p><p>順番が反対の<code class="type">datetime</code>に<code class="type">interval</code>を加算するほうは既にサポートされていましたが、標準SQLでは両方とも必要です。
      </p></li><li class="listitem"><p>整数から<code class="type">BIT(N)</code>へのキャストにて、整数の右側からNビットを選択
       (Tom)
      </p><p>これまでのリリースでは、左から数えてNビットが選択されていましたが、いうまでもありませんが、BITからintへのキャスト時に整合性がないため、役に立つものとは思われません。
      </p></li><li class="listitem"><p><code class="type">CIDR</code>値の非マスクビットは0でなければなりません(Kevin Brintnall)
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.277.6.9"><div class="titlepage"><div><div><h4 class="title">E.273.4.7. サーバサイド言語における変更</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">READ COMMITTED</code>シリアライゼーションモードにて、volatile関数は、その関数の呼び出しに対応するコマンドの始まるまでではなく、その関数内の各行が始まるまでに同時実行トランザクションがコミットした結果を参照するようになりました。
      </p></li><li class="listitem"><p><code class="literal">STABLE</code>または<code class="literal">IMMUTABLE</code>と宣言された関数は常に問い合わせ呼び出し時のスナップショットを使用します。
従って、問い合わせ呼び出し開始後に行われた操作は、それが自身のトランザクション内であろうと他のトランザクション内であろうと、その影響を受けません。
関数は読み取りのみでなければなりません。
つまり、<code class="command">SELECT</code>以外のSQLコマンドを使用することはできません。
関数を<code class="literal">VOLATILE</code>で宣言するのではなく<code class="literal">STABLE</code>または<code class="literal">IMMUTABLE</code>で宣言することで、かなりの性能向上があります。
      </p></li><li class="listitem"><p>非遅延の<code class="option">AFTER</code>トリガは、対応するコマンドの完了時ではなく、トリガを発行した問い合わせの完了直後に発行されるようになりました。
関数内にある問い合わせがトリガを発行する時に違いが現れます。
トリガは関数が次の操作に進む前に実行されます。
例えば、関数がテーブルに新規行を挿入する場合、関数の処理が進む前に非遅延の外部キー検査が行われます。
      </p></li><li class="listitem"><p>名前付きで宣言した関数パラメータの許可(Dennis Björklund)
      </p><p>関数の文書化を改善することができます。
この名前を実際にどう使用できるかは使用する関数言語に依存します。
      </p></li><li class="listitem"><p>PL/pgSQLパラメータ名による関数内での参照を許可(Dennis Björklund)
      </p><p>これは基本的に、名前付きパラメータに対する別名を自動的に作成します。
      </p></li><li class="listitem"><p>PL/pgSQL生成時の最低限の構文検査の実施(Tom)
      </p><p>これにより、より早く構文エラーを検出することができます。
      </p></li><li class="listitem"><p>PL/pgSQLにおける複合型(行変数とレコード変数)のサポートの強化
      </p><p>例えば、関数に単一の値として行型の値を渡すことができるようになりました。
      </p></li><li class="listitem"><p>前もって宣言された変数を参照するPL/pgSQL変数のデフォルト値の許可
      </p></li><li class="listitem"><p>PL/pgSQL FORループの解析の改良(Tom)
      </p><p><code class="option">FOR</code>変数のデータ型ではなく<code class="literal">".."</code>の存在によって解析が開始されるようになりました。
これは、正常な関数では違いがありませんが、結果として失敗があった時のエラーメッセージがより判りやすくなります。
      </p></li><li class="listitem"><p>PL/Perlサーバサイド言語の大規模な改良(Command Prompt, Andrew Dunstan)
      </p></li><li class="listitem"><p>PL/Tclにおいて、SPIコマンドが副トランザクション内で実行されるようになりました。
エラーが発生した場合、副トランザクションは消え、通常のTclエラーと同様にエラーが報告されます。
このエラーは<code class="literal">catch</code>で捕捉可能です。
これまでは、こうしたエラーを捕捉できませんでした。
      </p></li><li class="listitem"><p>PL/pgSQLで<code class="command">ELSEIF</code>を受け付けるようになりました。(Neil)
      </p><p>これまではPL/pgSQLでは<code class="command">ELSIF</code>しか解釈できませんでした。
しかし、多くのユーザはこの<code class="command">ELSEIF</code>キーワードという綴りに慣れています。
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.277.6.10"><div class="titlepage"><div><div><h4 class="title">E.273.4.8. <span class="application">psql</span>における変更</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>データベースオブジェクトに関する<span class="application">psql</span>の情報表示の改良(Christopher)
      </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="command">\du</code>と<code class="command">\dg</code>におけるグループメンバシップの表示を許可(Markus Bertheau)
      </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="command">\dn</code>による一時スキーマの表示を防止(Bruce)
      </p></li><li class="listitem"><p><span class="application">psql</span>のファイル名の扱いにてチルダユーザ展開を許可(Zach Irmen)
      </p></li><li class="listitem"><p><span class="application">readline</span>経由、配色を含む、<span class="application">psql</span>の装飾付きプロンプトの表示を許可(Reece Hart, Chet Ramey)
      </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="command">\copy</code>を<code class="command">COPY</code>コマンドの構文に完全に一致するように変更(Tom)
      </p></li><li class="listitem"><p>構文エラーの場所を表示(Fabien Coelho, Tom)
      </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="command">\d</code>表示に<code class="command">CLUSTER</code>情報を追加
       (Bruce)
      </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="command">\copy stdin/stdout</code>をコマンドの入出力を使用するように変更(Bruce)
      </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="literal">stdin</code>/<code class="literal">stdout</code>から読み取る<code class="option">pstdin</code>/<code class="option">pstdout</code>を追加(Mark Feit)
      </p></li><li class="listitem"><p>グローバルな<span class="application">psql</span>設定ファイル<code class="filename">psqlrc.sample</code>の追加
       (Bruce)
      </p><p>これにより、全体的な<span class="application">psql</span>起動コマンドを格納できる中核的なファイルを持つことができます。
      </p></li><li class="listitem"><p>テーブルが<code class="type">OID</code>列を持つ場合の<span class="application">psql</span> <code class="command">\d+</code>に指示子を持たせる(Neil)
      </p></li><li class="listitem"><p>Windowsでは、Control-Zがend-of-fileと取られないように<span class="application">psql</span>内でバイナリモードを使用する
      </p></li><li class="listitem"><p><code class="command">\dn+</code>でスキーマの権限と説明を表示させる(Dennis Björklund)
      </p></li><li class="listitem"><p>タブ補完サポートの改良(Stefan Kaltenbrunn, Greg Sabino Mullane)
      </p></li><li class="listitem"><p>論理値を大文字でも小文字でも設定可能にした(Michael Paesold)
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.277.6.11"><div class="titlepage"><div><div><h4 class="title">E.273.4.9. <span class="application">pg_dump</span>における変更</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">pg_dump</span>の信頼性を向上させるために依存性情報を使用(Tom)
      </p><p>これにより、関連するオブジェクトが稀に間違った順序でダンプされるという長い間存在した問題が解決したはずです。
      </p></li><li class="listitem"><p>可能な限りアルファベット順で<span class="application">pg_dump</span>にオブジェクトの出力を行う(Tom)
      </p><p>これによりダンプファイル間の変更を簡単に区別できるようになるはずです。
      </p></li><li class="listitem"><p><span class="application">pg_restore</span>におけるいくつかのSQLエラーを無視(Fabien Coelho)
      </p><p>これにより、<span class="application">pg_restore</span>の動作は、<span class="application">pg_dump</span>の出力スクリプトを<span class="application">psql</span>に渡した時の動作と同様になりました。
ほとんどの場合、エラーを無視して先に進めることは使いやすくなるでしょう。
また、エラー時に終了する旧来の動作を指定するためにpg_restoreにオプションが追加されました。
      </p></li><li class="listitem"><p><span class="application">pg_restore</span> <code class="option">-l</code>で、含有するオブジェクトのスキーマ名を表示
      </p></li><li class="listitem"><p><span class="application">pg_dump</span>のテキスト出力にbegin/end印を追加(Bruce)
      </p></li><li class="listitem"><p><span class="application">pg_dump</span>/<span class="application">pg_dumpall</span>の冗長モードで開始時刻、終了時刻を追加(Bruce)
      </p></li><li class="listitem"><p><span class="application">pg_dumpall</span>で<span class="application">pg_dump</span>のほとんどのオプションを許可(Christopher)
      </p></li><li class="listitem"><p><span class="application">pg_dump</span>はデフォルトで<code class="command">SET SESSION AUTHORIZATION</code>ではなく<code class="command">ALTER OWNER</code>を使用する(Christopher)
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.277.6.12"><div class="titlepage"><div><div><h4 class="title">E.273.4.10. libpqにおける変更</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>libpqの<code class="option">SIGPIPE</code>例外処理をスレッドセーフに変更(Bruce)
      </p></li><li class="listitem"><p>表示用の文字長を返す<code class="function">PQmbdsplen()</code>の追加(Tatsuo)
      </p></li><li class="listitem"><p><span class="application">SSL</span>と<span class="application">Kerberos</span>接続をロックするスレッドを追加(Manfred Spraul)
      </p></li><li class="listitem"><p><code class="function">PQoidValue()</code>、<code class="function">PQcmdTuples()</code>、および<code class="function">PQoidStatus()</code>が<code class="command">EXECUTE</code>コマンドで動作可能(Neil)
      </p></li><li class="listitem"><p>サーバのバージョン番号に、より簡単なアクセスを提供する<code class="function">PQserverVersion()</code>の追加
      </p></li><li class="listitem"><p>パラメータのデータ型を指定する必要がない文の準備をサポートする<code class="function">PQprepare/PQsendPrepared()</code>の追加(Abhijit Menon-Sen)
      </p></li><li class="listitem"><p><code class="command">SET DESCRIPTOR</code>など、多くのECPGの改良(Michael)
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.277.6.13"><div class="titlepage"><div><div><h4 class="title">E.273.4.11. ソースコードにおける変更</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>データベースサーバがWindows上でネイティブに動作可能(Claudio, Magnus, Andrew)
      </p></li><li class="listitem"><p>WindowsをサポートするためにシェルスクリプトコマンドをC言語版に変換(Andrew)
      </p></li><li class="listitem"><p>拡張メークファイル基盤の作成(Fabien Coelho, Peter)
      </p><p>元のソースツリーの外部で拡張を構築する作業を簡単にします。
      </p></li><li class="listitem"><p>再割当て可能なインストレーションのサポート(Bruce)
      </p><p>再設定や再構築を行わずにインストレーションのツリーを別の場所に移動できるように、インストールされるファイルのディレクトリパス(<code class="filename">/share</code>ディレクトリなど)が実行ファイルの実際のパスから相対的に計算されるようになりました。
      </p></li><li class="listitem"><p>文書のインストール先を指定するための<code class="option">--with-docdir</code>の使用。<code class="option">--infodir</code>も可能(Peter)
      </p></li><li class="listitem"><p>文書のインストールを防止する<code class="option">--without-docdir</code>の追加(Peter)
      </p></li><li class="listitem"><p><span class="application">DocBook</span> V4.2 SGMLへの更新 (Peter)
      </p></li><li class="listitem"><p>新しい<code class="literal">PostgreSQL</code> <span class="application">CVS</span>タグ(Marc)
      </p><p><span class="productname">PostgreSQL</span>の<span class="application">CVS</span>リポジトリの独自のコピーを管理する組織でより簡単に行うことができるようにするために変更されました。
マスタリポジトリのファイルバージョンスタンプが、コピーされたリポジトリへのチェックイン、チェックアウトによって破壊されないようになります。
      </p></li><li class="listitem"><p>ロック処理の明確化(Manfred Koizar)
      </p></li><li class="listitem"><p>バッファ管理の整理(Neil)
      </p></li><li class="listitem"><p>プラットフォーム試験からCPUスピンロックコードを分離(Bruce, Tom)
      </p></li><li class="listitem"><p>PA-RISCの<span class="application">gcc</span>用のインラインのtest-and-setコードを追加(ViSolve, Tom)
      </p></li><li class="listitem"><p>i386スピンロックコードの改良(Manfred Spraul)
      </p></li><li class="listitem"><p>最近の<span class="application">gcc</span>リリースでの警告を防ぐためのスピンロックアセンブルコードの整理(Tom)
      </p></li><li class="listitem"><p>ソースツリーからJDBCを削除。別のプロジェクトになりました。
      </p></li><li class="listitem"><p>ソースツリーからlibpgtclを削除。別のプロジェクトになりました。
      </p></li><li class="listitem"><p>メモリとファイル記述子の使用状況の推定を高精度化(Tom)
      </p></li><li class="listitem"><p>macOS用の起動スクリプトの改良(Ray A.)
      </p></li><li class="listitem"><p>新しい<code class="function">fsync()</code>試験プログラム(Bruce)
      </p></li><li class="listitem"><p>文書の大規模な改良(Neil, Peter)
      </p></li><li class="listitem"><p><span class="application">pg_encoding</span>の削除。もはや不要
      </p></li><li class="listitem"><p><span class="application">pg_id</span>の削除。もはや不要

      </p></li><li class="listitem"><p><span class="application">initlocation</span>の削除。もはや不要
      </p></li><li class="listitem"><p>スレッドフラグの自動検出(手作業での試験は不要) (Bruce)
      </p></li><li class="listitem"><p>Olsonのパブリックドメインの<span class="application">timezone</span>ライブラリの使用(Magnus)
      </p></li><li class="listitem"><p>スレッド処理が有効であれば、Unixwareではバックエンド実行形式同様にスレッドフラグを使用(Bruce)
      </p><p>Unixwareでは、スレッド化されたオブジェクトとスレッド化されないオブジェクトを混在させることができません。
そのため全てスレッド化されるものとしてコンパイルされなければなりません。
      </p></li><li class="listitem"><p>コマンド文字列の解析に<span class="application">psql</span>は<span class="application">flex</span>が生成する字句解析を使用
      </p></li><li class="listitem"><p>バックエンド全体で使用されるリンクリストデータ構造を再実装(Neil)
      </p><p>リストへの追加ができることにより性能が向上します。また、length操作がより効率的になります。
      </p></li><li class="listitem"><p>動的にロードされるモジュールが独自のサーバ設定パラメータを生成可能(Thomas Hallgren)
      </p></li><li class="listitem"><p>ブラジル語によるFAQの追加(Euler Taveira de Oliveira)
      </p></li><li class="listitem"><p>フランス語によるFAQの追加(Guillaume Lelarge)
      </p></li><li class="listitem"><p>Windowsのログ処理用の<span class="application">pgevent</span>を追加
      </p></li><li class="listitem"><p>macOSにおいて、libpqとECPGが適切な共有ライブラリとして構築可能(Tom)
      </p></li></ul></div></div><div class="sect3" id="id-1.11.6.277.6.14"><div class="titlepage"><div><div><h4 class="title">E.273.4.12. Contribにおける変更</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">contrib/dblink</code>の修正(Joe)
      </p></li><li class="listitem"><p><code class="filename">contrib/dbmirror</code>の改良(Steven Singer)
      </p></li><li class="listitem"><p><code class="filename">contrib/xml2</code>の追加(John Gray, Torchbox)
      </p></li><li class="listitem"><p><code class="filename">contrib/mysql</code>の更新
      </p></li><li class="listitem"><p>新バージョンの<code class="filename">contrib/btree_gist</code> (Teodor)
      </p></li><li class="listitem"><p><span class="productname">PostgreSQL</span>用trigramマッチング、<code class="filename">contrib/trgm</code>の追加(Teodor)
      </p></li><li class="listitem"><p><code class="filename">contrib/tsearch2</code>の多くの改良(Teodor)
      </p></li><li class="listitem"><p><code class="filename">contrib/fuzzystrmatch</code>に二重metaphoneを追加(Andrew)
      </p></li><li class="listitem"><p><code class="filename">contrib/pg_autovacuum</code>がWindowsサービスとして動作可能(Dave Page)
      </p></li><li class="listitem"><p><code class="filename">contrib/dbsize</code>に機能追加(Andreas Pflug)
      </p></li><li class="listitem"><p><code class="filename">contrib/pg_logger</code>の削除。
ログ取得副プロセスへの統合によって廃止されました。
      </p></li><li class="listitem"><p><code class="filename">contrib/rserv</code>の削除。
各種の別プロジェクトにより廃棄されました。
      </p></li></ul></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-8-0-1.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="release-7-4-30.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">E.272. リリース8.0.1 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> E.274. リリース7.4.30</td></tr></table></div></body></html>