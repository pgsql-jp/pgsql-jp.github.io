<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.99. リリース9.2.3</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-9-2-4.html" title="E.98. リリース9.2.4" /><link rel="next" href="release-9-2-2.html" title="E.100. リリース9.2.2" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.99. リリース9.2.3</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-9-2-4.html" title="E.98. リリース9.2.4">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix E. リリースノート">Up</a></td><th width="60%" align="center">Appendix E. リリースノート</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="release-9-2-2.html" title="E.100. リリース9.2.2">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-9-2-3"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.99. リリース9.2.3</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-9-2-3.html#id-1.11.6.103.4">E.99.1. バージョン9.2.3への移行</a></span></dt><dt><span class="sect2"><a href="release-9-2-3.html#id-1.11.6.103.5">E.99.2. 変更点</a></span></dt></dl></div><p><strong>リリース日: </strong>2013-02-07</p><p>このリリースは9.2.2に対し、各種不具合を修正したものです。
9.2メジャーリリースにおける新機能については、<a class="xref" href="release-9-2.html" title="E.102. リリース9.2">Section E.102</a>を参照してください。
  </p><div class="sect2" id="id-1.11.6.103.4"><div class="titlepage"><div><div><h3 class="title">E.99.1. バージョン9.2.3への移行</h3></div></div></div><p>9.2.Xからの移行ではダンプ/リストアは不要です。
   </p><p>しかしながら、9.2.2以前のバージョンからアップグレードする場合は、<a class="xref" href="release-9-2-2.html" title="E.100. リリース9.2.2">Section E.100</a>を参照してください。
   </p></div><div class="sect2" id="id-1.11.6.103.5"><div class="titlepage"><div><div><h3 class="title">E.99.2. 変更点</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>SQLから<code class="function">enum_recv</code>を実行できないようにしました。(Tom Lane)
     </p><p>この関数は誤った宣言をされており、単純なSQLコマンドでサーバをクラッシュさせることが可能でした。
実際のところ、サーバのメモリの内容を検査するために攻撃者がこれを利用することが可能になっていました。
この問題を(Secunia SVCRP経由で)報告してくれたSumit Soniに感謝します。(CVE-2013-0255)
     </p></li><li class="listitem"><p>WALの再生時にデータベースが一貫性のある状態に到達したことを検知するときの複数の問題を修正しました。(Fujii Masao、Heikki Linnakangas、Simon Riggs、Andres Freund)
     </p></li><li class="listitem"><p>実際の再実行作業が必要でない場合における、バックアップの終了点の検出について修正しました。(Heikki Linnakangas)
     </p><p>この誤りにより、間違って<span class="quote">“<span class="quote">WAL ends before end of online backup</span>”</span>(オンラインバックアップの終了前にWALが終了)のエラーを起こすことがありました。
     </p></li><li class="listitem"><p>リレーションのファイルを切り詰めるときに、最小復旧地点を更新するようにしました。(Heikki Linnakangas)
     </p><p>データが捨てられた後は、タイムライン上のそれより前の地点で復旧を止めることは、もはや安全ではありません。
     </p></li><li class="listitem"><p>復旧対象のタイムラインを変更した後のWALセグメントの再利用について修正しました。(Heikki Linnakangas)
     </p></li><li class="listitem"><p>カスケードしたスタンバイサーバ上でタイムラインの履歴ファイルをアーカイブから適切にリストアするようにしました。(Heikki Linnakangas)
     </p></li><li class="listitem"><p>ホットスタンバイのサーバ上でのロック競合の検出について修正しました。(Andres Freund、Robert Haas)
     </p></li><li class="listitem"><p>ホットスタンバイモードで問い合わせの取り消しに失敗するのを修正しました。(Noah Misch、Simon Riggs)
     </p><p>ホットスタンバイでの競合する問い合わせを取り消す要求が失敗することがあり、これらの問い合わせで一貫性のないデータを見ることがありました。
     </p></li><li class="listitem"><p>復旧停止機能について、ユーザが接続できるようになる前には停止しないようにしました。(Tom Lane)
     </p></li><li class="listitem"><p>副SELECTの結果から添字付けあるいは列選択できるようSQLの文法を修正しました。(Tom Lane)
     </p></li><li class="listitem"><p>負荷が大きい時の自動バキュームの切り詰めの性能問題を修正しました。(Jan Wieck)
     </p><p>テーブルの最後にある空のページを切り詰めるときに排他的ロックが必要ですが、競合するロック要求があるとき、自動バキュームのプログラムはそれに失敗してテーブルロックを解放するようになっていました。
負荷が重いと切り詰めが全く起こらず、テーブルが大きくなるということが容易に起こり得ました。
部分的な切り詰めを実行、ロックを解放、その後にロックの再取得と処理の継続を試みるように修正しました。
この修正により、競合するロック要求がある場合に、自動バキュームがロックを解放するまでの平均時間が大きく短縮されます。
     </p></li><li class="listitem"><p><code class="function">SPI_execute</code>および関連する関数の性能を改善しました。
これにより、PL/pgSQLの<code class="literal">EXECUTE</code>が改善されます。(Heikki Linnakangas、Tom Lane)
     </p><p>計画をキャッシュする機能の見直しの結果として9.2で追加されたデータコピーのオーバーヘッドを削除しました。
これにより9.1と比較した性能の劣化がなくなり、また特に実行される問い合わせ文字列が多数のSQL文を含むときにメモリを節約します。
     </p><p>副次的効果は、複数の文からなる問い合わせの文字列が完全に逐次的に処理されることです。
つまり、前の文の実行が終わってから、次の文の解析と計画をするようになります。
これにより、以前からあった問題が解決され、後の文の動作に影響を与えるDDLは期待通りに動作するようになります。
     </p></li><li class="listitem"><p>インデックスの利用について、9.2以前のコスト推定に戻しました。(Tom Lane)
     </p><p>誤差についての適切でない変更により、非常に大きなインデックスを利用する場合について、コストの推定が高くなりすぎることがありました。
     </p></li><li class="listitem"><p><code class="literal">DROP INDEX CONCURRENTLY</code>で時々クラッシュするのを修正しました。(Tom Lane)
     </p></li><li class="listitem"><p><code class="command">CREATE/DROP INDEX CONCURRENTLY</code>の実行中に、共有メモリのロック表が破損する可能性があるのを修正しました。(Tom Lane)
     </p></li><li class="listitem"><p>1つのタプルが(ページサイズ−フィルファクタ)より大きい場合について、<code class="command">COPY</code>で複数タプルを挿入するコードを修正しました。(Heikki Linnakangas)
     </p><p>以前のコードでは無限ループに陥る可能性がありました。
     </p></li><li class="listitem"><p><code class="structname">pg_tablespace</code>をスキャンするときに競合問題が発生しないようにしました。(Stephen Frost、Tom Lane)
     </p><p><code class="structname">pg_tablespace</code>のエントリに複数の同時更新があるとき、<code class="command">CREATE DATABASE</code>および<code class="command">DROP DATABASE</code>が正しく動作しない場合がありました。
     </p></li><li class="listitem"><p><code class="command">DROP OWNED</code>がデータベース全体あるいはテーブル空間を削除しようとしないようにしました。(Álvaro Herrera)
     </p><p>安全のため、これらのオブジェクトは削除するのでなく、所有権を変更すべきです。
     </p></li><li class="listitem"><p><a class="link" href="runtime-config-client.html#GUC-VACUUM-FREEZE-TABLE-AGE"><code class="varname">vacuum_freeze_table_age</code></a>の実装の誤りを修正しました。(Andres Freund)
     </p><p><a class="link" href="runtime-config-client.html#GUC-VACUUM-FREEZE-MIN-AGE"><code class="varname">vacuum_freeze_min_age</code></a>の値よりも多くのトランザクションを実行したインストール環境では、この誤りにより自動バキュームが部分テーブルスキャンを実行できなくなり、その結果、必ずテーブル全体のスキャンが発生します。
     </p></li><li class="listitem"><p><code class="symbol">RowExpr</code>あるいは<code class="symbol">XmlExpr</code>が2度、解析された時に、誤った動作をしないようにしました。(Andres Freund、Tom Lane)
     </p><p>この誤りは<code class="literal">CREATE TABLE LIKE INCLUDING INDEXES</code>などの状況においてユーザに明らかになることがありました。
     </p></li><li class="listitem"><p>ハッシュテーブルのサイズ計算で整数のオーバーフローが起きないようにする仕組みを改善しました。(Jeff Davis)
     </p></li><li class="listitem"><p>データ型の権限に関連するいくつかのバグを修正しました。(Tom Lane)
     </p><p>型のデフォルト権限にいくつかの問題があり、<span class="application">pg_dump</span>はそのような権限を全くダンプ出力できませんでした。
     </p></li><li class="listitem"><p>サーバがクラッシュした後、残されていた一時テーブルを無視しないという問題を修正しました。(Tom Lane)
     </p></li><li class="listitem"><p>Windowsにおいて、postmasterのログファイルをサイズの問題で再利用しないという問題を修正しました。(Jeff Janes、Heikki Linnakangas)
     </p></li><li class="listitem"><p><code class="function">to_date()</code>が範囲外の日付を拒絶するようにしました。(Hitoshi Harada)
     </p></li><li class="listitem"><p><code class="function">pg_extension_config_dump()</code>が拡張のアップデートについて適切に処理するよう修正しました。(Tom Lane)
     </p><p>この関数は、対象のテーブルのすべての既存のエントリを置換するようになりました。
これにより、拡張をアップデートするスクリプトから利用可能になります。
     </p></li><li class="listitem"><p>PL/pgSQLが単純な式について計画時エラーを出す場合があるのを修正しました。(Tom Lane)
     </p><p>以前のコードでは、このエラーにより、<code class="literal">CONTEXT</code>トレースバックの1行目を無視することがありました。
     </p></li><li class="listitem"><p>関数が複数のテーブルのトリガーとして使われる場合について、PL/Pythonの処理を修正しました。(Andres Freund)
     </p></li><li class="listitem"><p>Windowsで非ASCIIのプロンプト文字列が、確実に正しいコードページに変換されるようにしました。(Alexander Law、Noah Misch)
     </p><p>このバグは<span class="application">psql</span>および他のいくつかのクライアントプログラムに影響がありました。
     </p></li><li class="listitem"><p>データベースに接続していないとき、<span class="application">psql</span>の<code class="command">\?</code>コマンドがクラッシュする可能性があったのを修正しました。(Meng Qingzhong)
     </p></li><li class="listitem"><p><span class="application">pg_basebackup</span>の実行中にリレーションのファイルが削除された時にエラーが起きる可能性があるのを修正しました。(Heikki Linnakangas)
     </p></li><li class="listitem"><p><code class="literal">pg_basebackup -X fetch</code>でスタンバイサーバのバックアップをしているときに、タイムラインの切り替えをできるようにしました。(Heikki Linnakangas)
     </p></li><li class="listitem"><p><span class="application">pg_dump</span>をホットスタンバイのサーバで実行するとき、ログを取らないテーブルのデータを除外するようにしました。(Magnus Hagander)
     </p><p>スタンバイのサーバにはログを取らないテーブルのデータがありませんから、これはいずれにせよ失敗します。
従って、自動的に<code class="option">--no-unlogged-table-data</code>と見なすのが最も良い方法であると思われます。
     </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>が不正なインデックスを安全に扱うよう修正しました。(Bruce Momjian)
     </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>の-O/-oオプションを修正しました。(Marti Raudsepp)
     </p></li><li class="listitem"><p><span class="application">libpq</span>の<code class="function">PQprintTuples</code>でバッファを1バイト行き過ぎてしまう問題を修正しました。(Xi Wang)
     </p><p>この古い関数は<span class="productname">PostgreSQL</span>本体によっては使われていませんが、クライアントのプログラムでは今でも使われているかもしれません。
     </p></li><li class="listitem"><p><span class="application">ecpglib</span>で翻訳されたメッセージを適切に使うようにしました。(Chen Huajun)
     </p></li><li class="listitem"><p>MSVC上で<span class="application">ecpg_compat</span>および<span class="application">pgtypes</span>のライブラリを適切にインストールするようにしました。(Jiang Guiqing)
     </p></li><li class="listitem"><p><code class="function">isinf()</code>をシステムが提供していなければ、我々のバージョンを<span class="application">libecpg</span>に含めるようにしました。(Jiang Guiqing)
     </p></li><li class="listitem"><p>libedit/libreadlineからの誤ったエクスポートに騙されないよう、configureによる提供関数の確認の順序を調整しました。(Christoph Berg)
     </p></li><li class="listitem"><p>Windowsのビルド番号が時とともに確実に大きくなるようにしました。(Magnus Hagander)
     </p></li><li class="listitem"><p>Windows用にクロスコンパイルしたときに、<span class="application">pgxs</span>が正しく<code class="literal">.exe</code>の拡張子の付いた実行プログラムを生成するようにしました。(Zoltan Boszormenyi)
     </p></li><li class="listitem"><p>新しい時間帯の略号<code class="literal">FET</code>を追加しました。(Tom Lane)
     </p><p>これは一部の東ヨーロッパの時間帯で使われています。
     </p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-9-2-4.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="release-9-2-2.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">E.98. リリース9.2.4 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> E.100. リリース9.2.2</td></tr></table></div></body></html>