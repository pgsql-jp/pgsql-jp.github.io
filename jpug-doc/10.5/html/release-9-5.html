<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.32. リリース9.5</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-9-5-1.html" title="E.31. リリース9.5.1" /><link rel="next" href="release-9-4-19.html" title="E.33. Release 9.4.19" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.32. リリース9.5</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-9-5-1.html" title="E.31. リリース9.5.1">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix E. リリースノート">Up</a></td><th width="60%" align="center">Appendix E. リリースノート</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="release-9-4-19.html" title="E.33. Release 9.4.19">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-9-5"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.32. リリース9.5</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-9-5.html#id-1.11.6.36.3">E.32.1. 概要</a></span></dt><dt><span class="sect2"><a href="release-9-5.html#id-1.11.6.36.4">E.32.2. バージョン9.5への移行</a></span></dt><dt><span class="sect2"><a href="release-9-5.html#id-1.11.6.36.5">E.32.3. 変更点</a></span></dt></dl></div><p><strong>リリース日: </strong>2016-01-07</p><div class="sect2" id="id-1.11.6.36.3"><div class="titlepage"><div><div><h3 class="title">E.32.1. 概要</h3></div></div></div><p>    <span class="productname">PostgreSQL</span>9.5の主な強化点には以下のものがあります。
   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>制約違反を起こす<a class="link" href="sql-insert.html#SQL-ON-CONFLICT" title="ON CONFLICT句"><code class="command">INSERT</code></a>を<code class="command">UPDATE</code>に変換するか、無視することができるようにしました。
     </p></li><li class="listitem"><p><code class="literal">GROUP BY</code>分析機能に<a class="link" href="queries-table-expressions.html#QUERIES-GROUPING-SETS" title="7.2.4. GROUPING SETS、CUBE、ROLLUP"><code class="literal">GROUPING SETS</code></a>、<a class="link" href="queries-table-expressions.html#QUERIES-GROUPING-SETS" title="7.2.4. GROUPING SETS、CUBE、ROLLUP"><code class="literal">CUBE</code></a>、<a class="link" href="queries-table-expressions.html#QUERIES-GROUPING-SETS" title="7.2.4. GROUPING SETS、CUBE、ROLLUP"><code class="literal">ROLLUP</code></a>を加えました。
     </p></li><li class="listitem"><p><a class="link" href="ddl-rowsecurity.html" title="5.7. 行セキュリティポリシー">行単位セキュリティ制御</a>を加えました。
     </p></li><li class="listitem"><p><a class="link" href="replication-origins.html" title="Chapter 49. レプリケーション進捗の追跡">レプリケーション進行</a>を観測する仕組みを作りました。ロジカルレプリケーション時に個々の変更の起点を識別する手段も含まれます。
     </p></li><li class="listitem"><p><a class="link" href="brin.html" title="Chapter 65. BRINインデックス">ブロック範囲インデックス</a>(Block Range Indexes, <acronym class="acronym">BRIN</acronym>)を追加しました
     </p></li><li class="listitem"><p>ソート性能を大幅に改善しました。
     </p></li><li class="listitem"><p>多CPUマシンでの性能を大幅に改善しました。
     </p></li></ul></div><p>上記の項目については、以下でより詳細に説明します。
   </p></div><div class="sect2" id="id-1.11.6.36.4"><div class="titlepage"><div><div><h3 class="title">E.32.2. バージョン9.5への移行</h3></div></div></div><p>以前のリリースからデータを移行したい時は、どのリリースについても、
<a class="xref" href="app-pg-dumpall.html" title="pg_dumpall"><span class="refentrytitle"><span class="application">pg_dumpall</span></span></a>を利用したダンプとリストア、
あるいは<a class="xref" href="pgupgrade.html" title="pg_upgrade"><span class="refentrytitle"><span class="application">pg_upgrade</span></span></a>の利用が必要です。

   </p><p>バージョン9.5には、以前のバージョンとの互換性に影響する多数の変更点が含まれています。
以下の非互換性に注意してください。
   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><acronym class="acronym">SQL</acronym>標準に適合するように<a class="link" href="sql-syntax-lexical.html#SQL-PRECEDENCE" title="4.1.6. 演算子の優先順位">演算子の優先順位</a>を調整しました。
(Tom Lane)
     </p><p><code class="literal">&lt;=</code>、<code class="literal">&gt;=</code>、<code class="literal">&lt;&gt;</code>の優先順位が、
<code class="literal">&lt;</code>, <code class="literal">&gt;</code>、<code class="literal">=</code>と同じに下げられました。
<code class="literal">IS</code>検査（例: <em class="replaceable"><code>x</code></em> <code class="literal">IS NULL</code>）の優先順位がこれら6つの比較演算子のすぐ下まで下げられました。
また、<code class="literal">NOT</code>で始まる複数キーワード演算子はその基底演算子と同じ優先順位を持つようになります（例えば、<code class="literal">NOT BETWEEN</code>は<code class="literal">BETWEEN</code>と同じ優先順位となります）。
<code class="literal">NOT</code>は左辺要素を尊重するけれどもその基底演算子は右辺要素を尊重するといったように、これまで一貫性に欠けた優先順位になっていました。
新たな設定パラメータ<a class="xref" href="runtime-config-compatible.html#GUC-OPERATOR-PRECEDENCE-WARNING">operator_precedence_warning</a>で本優先順位変更で異なった解析結果になる問い合わせについての警告を有効にできます。
     </p></li><li class="listitem"><p><a class="xref" href="app-pg-ctl.html" title="pg_ctl"><span class="refentrytitle"><span class="application">pg_ctl</span></span></a>のデフォルトシャットダウンモードを<code class="literal">smart</code>から<code class="literal">fast</code>に変更しました。
(Bruce Momjian)
     </p><p>停止時のデフォルトの振る舞いが、既存のデータベースセッションが終了するのを待つのでなく、強制的にセッションを中断するようになることを意味します。
     </p></li><li class="listitem"><p><span class="application">PL/pgSQL</span>の代入でのデータ型変換に、テキストから、あるいは、テキストへの変換ではなく、代入キャストの動作を用います。
(Tom Lane)
     </p><p>この変更により、boolean型から文字列への変換で、<code class="literal">t</code>や<code class="literal">f</code>ではなく、<code class="literal">true</code>や<code class="literal">false</code>が生じます。
他の型変換はおそらくこれまでより多くの場合で成功するようになります。
例えば、数値<code class="literal">3.9</code>をinteger変数に代入すると、これからはエラーになるのでなく4が代入されます。
当該の変換元と変換先の型について代入級キャストが定義されていないときには、<span class="application">PL/pgSQL</span>は従来のI/Oによる変換で代替します。
     </p></li><li class="listitem"><p><a class="link" href="libpq-connect.html#LIBPQ-CONNECT-OPTIONS">サーバむけコマンドラインオプション</a>でバックスラッシュで文字をエスケープできるようにしました。
(Andres Freund)
     </p><p>これまでは、オプション文字列中の空白文字が常にオプション区切になっていて、オプション内容に空白文字を含める方法がありませんでした。
オプション内容にバックスラッシュ(\)を含めるにはこれからは<code class="literal">\\</code>と書く必要があります。
     </p></li><li class="listitem"><p>GSSAPIの<a class="link" href="auth-methods.html#GSSAPI-AUTH" title="20.3.3. GSSAPI認証"><code class="varname">include_realm</code></a>パラメータのデフォルト値を1に変更しました。
そのため、デフォルトでは<acronym class="acronym">GSS</acronym>および<acronym class="acronym">SSPI</acronym>のプリンシパル名からレルムは取り除かれません。
(Stephen Frost)
     </p></li><li class="listitem"><p>設定パラメータ<code class="varname">checkpoint_segments</code>を<a class="xref" href="runtime-config-wal.html#GUC-MIN-WAL-SIZE">min_wal_size</a>と<a class="xref" href="runtime-config-wal.html#GUC-MAX-WAL-SIZE">max_wal_size</a>で置き換えました。
(Heikki Linnakangas)
     </p><p>これまで<code class="varname">checkpoint_segments</code>を調整していたのであれば、以下の式でおおよそ同等の設定が得られます。
</p><pre class="programlisting">max_wal_size = (3 * checkpoint_segments) * 16MB</pre><p>
<code class="varname">max_wal_size</code>のデフォルト設定は、以前の<code class="varname">checkpoint_segments</code>のデフォルト値よりもずっと大きいことに注意してください。そのため、これらを調整することはもはや不要になるかもしれません。
     </p></li><li class="listitem"><p>Linuxの<acronym class="acronym">OOM</acronym> killerを、コンパイル時のオプション<code class="literal">LINUX_OOM_SCORE_ADJ</code>、<code class="literal">LINUX_OOM_ADJ</code>に代えて、環境変数<a class="link" href="kernel-resources.html#LINUX-MEMORY-OVERCOMMIT" title="18.4.4. Linuxのメモリオーバーコミット"><code class="envar">PG_OOM_ADJUST_FILE</code></a>、<a class="link" href="kernel-resources.html#LINUX-MEMORY-OVERCOMMIT" title="18.4.4. Linuxのメモリオーバーコミット"><code class="envar">PG_OOM_ADJUST_VALUE</code></a>で制御します。
(Gurjeet Singh)
       </p></li><li class="listitem"><p>以前のリリースで非推奨とされていたサーバ設定パラメータ<code class="varname">ssl_renegotiation_limit</code>を廃止しました。
(Andres Freund)
     </p><p>理論上はSSL再ネゴシエーションは良い考えですが、実際には差引マイナスと考えられるほど多くのバグを引き起こしており、さらに、関連する標準の将来バージョンから除去されることになっています。
そのため、私たちは<span class="productname">PostgreSQL</span>から本機能のサポートを外しました。
パラメータ<code class="varname">ssl_renegotiation_limit</code>は未だ在りますが、0（無効）以外には設定できませんし、ドキュメントにも記載されません。
     </p></li><li class="listitem"><p>既に非推奨かつ使用不能となっていたサーバ設定パラメータ<code class="varname">autocommit</code>を除きました。
(Tom Lane)
     </p></li><li class="listitem"><p>不用であったため、システムカタログ<a class="link" href="catalog-pg-authid.html" title="51.8. pg_authid"><code class="structname">pg_authid</code></a>のフィールド<code class="structfield">rolcatupdate</code>を除きました。
(Adam Brightwell)
     </p></li><li class="listitem"><p>システムビュー<a class="link" href="monitoring-stats.html#PG-STAT-REPLICATION-VIEW" title="Table 28.5. pg_stat_replicationビュー"><code class="structname">pg_stat_replication</code></a>のフィールド<code class="structfield">sent</code>は、有効な値を持たないときゼロでなくNULLとしました。
(Magnus Hagander)
     </p></li><li class="listitem"><p><code class="type">json</code>および<code class="type">jsonb</code>の配列抽出演算子で、JSON配列を後ろから数える、負の添え字を可能にしました。
(Peter Geoghegan, Andrew Dunstan)
     </p><p>これまでは、これらの演算子は負の添え字に<code class="literal">NULL</code>を返しました。
     </p></li></ul></div></div><div class="sect2" id="id-1.11.6.36.5"><div class="titlepage"><div><div><h3 class="title">E.32.3. 変更点</h3></div></div></div><p>前回のメジャーリリースからの<span class="productname">PostgreSQL</span> 9.5
の変更点の詳細説明を以下に示します。
   </p><div class="sect3" id="id-1.11.6.36.5.3"><div class="titlepage"><div><div><h4 class="title">E.32.3.1. サーバ</h4></div></div></div><div class="sect4" id="id-1.11.6.36.5.3.2"><div class="titlepage"><div><div><h5 class="title">E.32.3.1.1. インデックス</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="brin.html" title="Chapter 65. BRINインデックス">ブロック範囲インデックス</a>(Block Range Indexes, <acronym class="acronym">BRIN</acronym>)を追加しました。
(Álvaro Herrera)
       </p><p><acronym class="acronym">BRIN</acronym>インデックスは、ヒープブロック範囲の（最大値、最小値のような）摘要データのみを格納します。そのため、非常にサイズが小さく、更新コストも軽微です。それでいて、データが自然にクラスタ化されているなら、かなりの検索速度向上も実現します。
       </p></li><li class="listitem"><p>
<a class="link" href="gist.html" title="Chapter 62. GiSTインデックス">GiST</a>インデックスを使った、外接矩形でインデックス付けされるオブジェクト（polygon や circle）の距離によるフィルタを正確に行う問い合わせを可能にしました。
(Alexander Korotkov, Heikki Linnakangas)
       </p><p>これまで、このようなインデックスを利用するには、副問い合わせで多数の行を外接矩形の距離で並び替えて、さらにその結果をより正確な距離計算でフィルタする必要がありました。
       </p></li><li class="listitem"><p><a class="link" href="gist.html" title="Chapter 62. GiSTインデックス">GiST</a>インデックスでインデックスオンリースキャンを可能にしました。
(Anastasia Lubennikova, Heikki Linnakangas, Andreas Karlsson)
       </p></li><li class="listitem"><p><acronym class="acronym">GIN</acronym>の待機リストのサイズを制御する設定パラメータ<a class="xref" href="runtime-config-client.html#GUC-GIN-PENDING-LIST-LIMIT">gin_pending_list_limit</a>を追加しました。
(Fujii Masao)
       </p><p>本パラメータはインデックスごとにインデックスのストレージパラメータとして設定することも可能です。これまで待機リストサイズは<a class="xref" href="runtime-config-resource.html#GUC-WORK-MEM">work_mem</a>で制御されていましたが、適切な<code class="varname">work_mem</code>値が待機リストサイズむけには大きすぎることがよくあり、扱いにくいものとなっていました。
       </p></li><li class="listitem"><p><a class="link" href="indexes-types.html" title="11.2. インデックスの種類">hash</a>インデックスはクラッシュ時に安全でないため、それを作るときに警告を出します。
(Bruce Momjian)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.36.5.3.3"><div class="titlepage"><div><div><h5 class="title">E.32.3.1.2. 性能全般</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="quote">“<span class="quote">短縮</span>”</span>キーにより、<code class="type">varchar</code>型、<code class="type">text</code>型、<code class="type">numeric</code>型フィールドのソート速度を改善しました。
(Peter Geoghegan, Andrew Gierth, Robert Haas)
       </p></li><li class="listitem"><p>ソートをインラインで実行できるように基盤を拡張しました。
<acronym class="acronym">SQL</acronym>から呼び出しできない比較関数が<code class="command">CREATE INDEX</code>、<code class="command">REINDEX</code>、<code class="command">CLUSTER</code>に適用されます。
(Peter Geoghegan)
       </p></li><li class="listitem"><p>ハッシュ結合の性能を改善しました。
(Tomas Vondra, Robert Haas)
       </p></li><li class="listitem"><p>共有バッファの置き換えにおける同時実行性を改善しました。
(Robert Haas, Amit Kapila, Andres Freund)
       </p></li><li class="listitem"><p>インデックススキャン中のページロックとピンの数を減らしました。
(Kevin Grittner)
       </p><p>主な恩恵はインデックスのバキュームがあまりブロックされなくなることです。
       </p></li><li class="listitem"><p>バックエンド毎のバッファピンの追跡でメモリ利用効率を改善しました。
(Andres Freund)
       </p></li><li class="listitem"><p>ロックのスケーラビリティを改善しました。
(Andres Freund)
       </p><p>これは特に複数の<acronym class="acronym">CPU</acronym>ソケットをもつシステムで動作させるときのスケーラビリティ問題を解決します。
       </p></li><li class="listitem"><p>オプティマイザが左結合された副問い合わせの不要な参照を取り除けるようにしました。
(David Rowley)
       </p></li><li class="listitem"><p>適切な場所においては、問い合わせの制約を<a class="link" href="tutorial-window.html" title="3.5. ウィンドウ関数">ウィンドウ関数</a>を伴う副問い合わせにプッシュダウンできるようにしました。
(David Rowley)
       </p></li><li class="listitem"><p>LEAKPROOFでない関数を、その関数がビューの出力列を受け取らないなら、セキュリティバリアビューにプッシュダウンできるようにしました。
(Dean Rasheed)
       </p></li><li class="listitem"><p>プランナが、<code class="literal">WHERE</code>句に照合する関数の呼び出しがあったとき、真偽値を返す関数の式インデックスから得た統計情報を使うようにしました。
(Tom Lane)
       </p></li><li class="listitem"><p><code class="command">ANALYZE</code>で列のデータ型が等価関数を持たなくても基本的な統計（null比率、列の平均長）の計算をするようにしました。
(Oleksandr Shulgin)
       </p></li><li class="listitem"><p><acronym class="acronym">CRC</acronym>(巡回冗長検査)計算を高速化し、また、CRC-32Cに切り替えました。
(Abhijit Menon-Sen, Heikki Linnakangas)
       </p></li><li class="listitem"><p>ビットマップインデックススキャンの性能を改善しました。
(Teodor Sigaev, Tom Lane)
       </p></li><li class="listitem"><p>不要なメモリコピーを避けることで<code class="command">CREATE INDEX</code>を高速化しました。
(Robert Haas)
       </p></li><li class="listitem"><p>バッファマッピングのパーティション数を増やしました。
(Amit Kapila, Andres Freund, Robert Haas)
       </p><p>これは並列性の高い負荷に対して性能を改善します。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.36.5.3.4"><div class="titlepage"><div><div><h5 class="title">E.32.3.1.3. 監視</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>新たなストレージパラメータ<code class="varname">log_autovacuum_min_duration</code>によるテーブル単位での自動バキュームのログ制御を追加しました。
(Michael Paquier)
       </p></li><li class="listitem"><p>新たな設定パラメータ<a class="xref" href="runtime-config-logging.html#GUC-CLUSTER-NAME">cluster_name</a>を追加しました。
(Thomas Munro)
       </p><p>通常<a class="link" href="config-setting.html#CONFIG-SETTING-CONFIGURATION-FILE" title="19.1.2. 設定ファイルによるパラメータ操作"><code class="filename">postgresql.conf</code></a>に設定されるこの文字列によりクライアントはクラスタを識別できます。
この名称は全サーバプロセスのプロセスタイトルにも出て、同じクラスタに属するプロセス群を識別するのを容易にします。
       </p></li><li class="listitem"><p>スーパーユーザ以外が<a class="xref" href="runtime-config-logging.html#GUC-LOG-DISCONNECTIONS">log_disconnections</a>を接続当初に変更することを防ぎました。
(Fujii Masao)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.36.5.3.5"><div class="titlepage"><div><div><h5 class="title">E.32.3.1.4. <acronym class="acronym">SSL</acronym></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><acronym class="acronym">SSL</acronym>サーバ証明書で<a class="link" href="libpq-ssl.html" title="33.18. SSLサポート"><span class="quote">“<span class="quote">サブジェクト別名</span>”</span></a>があるなら、それを確認します。
(Alexey Klyukin)
       </p><p>サブジェクト別名があるなら証明書の<span class="quote">“<span class="quote">Common Name</span>”</span>にむけた確認を代替します。
       </p></li><li class="listitem"><p><acronym class="acronym">SSL</acronym>接続情報を報告するシステムビュー<a class="link" href="monitoring-stats.html#PG-STAT-SSL-VIEW" title="Table 28.8. pg_stat_sslビュー"><code class="structname">pg_stat_ssl</code></a>を追加しました。
(Magnus Hagander)
       </p></li><li class="listitem"><p>実装に独立な方法で<acronym class="acronym">SSL</acronym>情報を返す<span class="application">libpq</span>関数を追加しました。
(Heikki Linnakangas)
       </p><p><span class="productname">OpenSSL</span>関数を呼ぶ<a class="link" href="libpq-status.html#LIBPQ-PQGETSSL"><code class="function">PQgetssl()</code></a>関数は未だ使用することができますが、<span class="application">libpq</span>の将来バージョンは別の<acronym class="acronym">SSL</acronym>実装に対応するかもしれないため、これからは非推奨とみなされます。
可能であれば、<acronym class="acronym">SSL</acronym>情報取得に<acronym class="acronym">SSL</acronym>実装独立な新たな関数<a class="link" href="libpq-status.html#LIBPQ-PQSSLATTRIBUTE"><code class="function">pqsslattribute()</code></a>、<a class="link" href="libpq-status.html#LIBPQ-PQSSLATTRIBUTENAMES"><code class="function">pqsslattributenames()</code></a>、<a class="link" href="libpq-status.html#LIBPQ-PQSSLINUSE"><code class="function">PQsslInUse()</code></a>を使ってください。
       </p></li><li class="listitem"><p><span class="application">libpq</span>であらゆる<span class="productname">OpenSSL</span>のスレッドコールバックを尊重するようにしました。
(Jan Urbanski)
       </p><p>これまでは上書きされていました。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.36.5.3.6"><div class="titlepage"><div><div><h5 class="title">E.32.3.1.5. サーバ設定</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>設定パラメータ<code class="varname">checkpoint_segments</code>を<a class="xref" href="runtime-config-wal.html#GUC-MIN-WAL-SIZE">min_wal_size</a>と<a class="xref" href="runtime-config-wal.html#GUC-MAX-WAL-SIZE">max_wal_size</a>で置き換えました。
(Heikki Linnakangas)
       </p><p>この変更により、多数の<acronym class="acronym">WAL</acronym>ファイルを、それらが不要になったあとも維持することなく、割り当てできます。
それゆえに、<code class="varname">max_wal_size</code>のデフォルトは、従来の<code class="varname">checkpoint_segments</code>のデフォルトよりもずっと大きい<code class="literal">1GB</code>です。
また、スタンバイサーバがWAL領域の消費を<code class="varname">max_wal_size</code>で制限するように努めてリスタートポイント処理を実行することにも注意してください。これまでは<code class="varname">checkpoint_segments</code>に注意をはらっていませんでした。
       </p></li><li class="listitem"><p>Linuxの<acronym class="acronym">OOM</acronym> killerを新たな環境変数<a class="link" href="kernel-resources.html#LINUX-MEMORY-OVERCOMMIT" title="18.4.4. Linuxのメモリオーバーコミット"><code class="envar">pg_oom_adjust_file</code></a>、<a class="link" href="kernel-resources.html#LINUX-MEMORY-OVERCOMMIT" title="18.4.4. Linuxのメモリオーバーコミット"><code class="envar">PG_OOM_ADJUST_VALUE</code></a>により制御します。
(Gurjeet Singh)
       </p><p>これまでの<acronym class="acronym">OOM</acronym>制御基盤はコンパイル時のオプション<code class="literal">LINUX_OOM_SCORE_ADJ</code>、<code class="literal">LINUX_OOM_ADJ</code>を必要としました。これらはサポートされなくなります。新たな動作は全てのビルドで利用できます。
       </p></li><li class="listitem"><p>設定パラメータ<a class="xref" href="runtime-config-replication.html#GUC-TRACK-COMMIT-TIMESTAMP">track_commit_timestamp</a>を有効にすることで、トランザクションコミットのタイムスタンプを記録できるようにしました。
(Álvaro Herrera, Petr Jelínek)
       </p><p>タイムスタンプ情報は関数<a class="link" href="functions-info.html#FUNCTIONS-COMMIT-TIMESTAMP" title="Table 9.71. コミットされたトランザクションの情報"><code class="function">pg_xact_commit_timestamp()</code></a>と<code class="function">pg_last_committed_xact()</code>を使って参照できます。
       </p></li><li class="listitem"><p><a class="xref" href="runtime-config-client.html#GUC-LOCAL-PRELOAD-LIBRARIES">local_preload_libraries</a>を<code class="command">ALTER ROLE SET</code>から設定できるようにしました。
(Peter Eisentraut, Kyotaro Horiguchi)
       </p></li><li class="listitem"><p><a class="link" href="routine-vacuuming.html#AUTOVACUUM" title="24.1.6. 自動バキュームデーモン">自動バキュームワーカ</a>が処理中に設定パラメータ変更に反応できるようにしました。
(Michael Paquier)
       </p></li><li class="listitem"><p>設定パラメータ<a class="xref" href="runtime-config-preset.html#GUC-DEBUG-ASSERTIONS">debug_assertions</a>を読み取り専用にしました。
(Andres Freund)
       </p><p>これは、コンパイル時にアサート有効にしたならもはやoffにできないようにして、より効果的なコード最適化を可能にする意味があります。
本変更では、<a class="link" href="app-postgres.html#APP-POSTGRES-OPTIONS" title="オプション">postgres</a> <code class="option">-A</code>オプションも削除されます。
       </p></li><li class="listitem"><p><a class="xref" href="runtime-config-resource.html#GUC-EFFECTIVE-IO-CONCURRENCY">effective_io_concurrency</a>を効果の無いシステムにおいても設定できるようにしました。
(Peter Eisentraut)
       </p></li><li class="listitem"><p>サーバの設定ファイル内容を表示するシステムビュー<a class="link" href="view-pg-file-settings.html" title="51.69. pg_file_settings"><code class="structname">pg_file_settings</code></a>を追加しました。
(Sawada Masahiko)
       </p></li><li class="listitem"><p>システムビュー<a class="link" href="view-pg-settings.html" title="51.85. pg_settings"><code class="structname">pg_settings</code></a>に、変更されたけれどもデータベース再起動まで反映されない内容があるかを示す<code class="structname">pending_restart</code>列を追加しました。
(Peter Eisentraut)
       </p></li><li class="listitem"><p><a class="link" href="sql-altersystem.html" title="ALTER SYSTEM"><code class="command">ALTER SYSTEM</code></a>の設定値を<code class="command">ALTER SYSTEM RESET</code>でリセットできるようにしました。
(Vik Fearing)
       </p><p>このコマンドは<code class="filename">postgresql.auto.conf</code>から指定した設定項目を削除します。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.36.5.4"><div class="titlepage"><div><div><h4 class="title">E.32.3.2. レプリケーションとリカバリ</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="replication-origins.html" title="Chapter 49. レプリケーション進捗の追跡">レプリケーション進行</a>を観測する仕組みを作りました。
ロジカルレプリケーションで個々の変更の起点を識別する方法も含まれます。
(Andres Freund)
       </p><p>これはレプリケーションソリューションを構築するときの助けとなります。
       </p></li><li class="listitem"><p>マルチトランザクションのコミットログの切り捨て処理を適切にWAL記録されるように作り直しました。
(Andres Freund)
       </p><p>コードを相当程度より単純でより頑健にしました。
       </p></li><li class="listitem"><p>リカバリ後の動作を制御する<a class="link" href="recovery-config.html" title="Chapter 27. リカバリの設定"><code class="filename">recovery.conf</code></a>パラメータ<a class="link" href="recovery-target-settings.html#RECOVERY-TARGET-ACTION"><code class="varname">recovery_target_action</code></a>を追加しました。
(Petr Jelínek)
       </p><p>これは旧来のパラメータ<code class="varname">pause_at_recovery_target</code>を置き換えます。
       </p></li><li class="listitem"><p><a class="xref" href="runtime-config-wal.html#GUC-ARCHIVE-MODE">archive_mode</a>の新しい値<code class="literal">always</code>を追加しました。
スタンバイで受け取った<acronym class="acronym">WAL</acronym>ファイルを常にアーカイブできるようになります。
(Fujii Masao)
       </p></li><li class="listitem"><p><acronym class="acronym">WAL</acronym>読み込みの失敗したあとのリトライを制御する設定パラメータ<a class="xref" href="runtime-config-replication.html#GUC-WAL-RETRIEVE-RETRY-INTERVAL">wal_retrieve_retry_interval</a>を追加しました。
(Alexey Vasiliev, Michael Paquier)
       </p><p>これは特にウォームスタンバイに役立ちます。
       </p></li><li class="listitem"><p><acronym class="acronym">WAL</acronym>にフルページイメージを圧縮して格納できるようにしました。
(Rahila Syed, Michael Paquier)
       </p><p>この機能は、WAL記録とWAL再生によりCPU時間を費やすことで、WAL量を減らします。新たな設定パラメータ<a class="xref" href="runtime-config-wal.html#GUC-WAL-COMPRESSION">wal_compression</a>で制御します。今のところデフォルトはoffです。
       </p></li><li class="listitem"><p>スタンバイが昇格するとき、<acronym class="acronym">WAL</acronym>ファイルに<code class="literal">.partial</code>拡張子を付けてアーカイブします。
(Heikki Linnakangas)
       </p></li><li class="listitem"><p>レプリケーションコマンドをログ記録する設定パラメータ<a class="xref" href="runtime-config-logging.html#GUC-LOG-REPLICATION-COMMANDS">log_replication_commands</a>を追加しました。
(Fujii Masao)
       </p><p>デフォルトでは<a class="link" href="protocol-replication.html" title="52.4. ストリーミングレプリケーションプロトコル"><code class="literal">IDENTIFY_SYSTEM</code></a>などのレプリケーションコマンドはたとえ<a class="xref" href="runtime-config-logging.html#GUC-LOG-STATEMENT">log_statement</a>を<code class="literal">all</code>に設定してもログ記録されません
       </p></li><li class="listitem"><p>レプリケーションスロットを保持しているプロセスを<a class="link" href="view-pg-replication-slots.html" title="51.80. pg_replication_slots"><code class="structname">pg_replication_slots</code></a>で報告します。
(Craig Ringer)
       </p><p>このために<code class="structname">active_pid</code>列を追加しました。
       </p></li><li class="listitem"><p><code class="filename">recovery.conf</code>の<a class="link" href="standby-settings.html#PRIMARY-CONNINFO"><code class="varname">primary_conninfo</code></a>設定で接続<acronym class="acronym">URI</acronym>（例: <code class="literal">postgres://</code>）を使えるようにしました。
(Alexander Shulgin)
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.36.5.5"><div class="titlepage"><div><div><h4 class="title">E.32.3.3. 問い合わせ</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="sql-insert.html#SQL-ON-CONFLICT" title="ON CONFLICT句"><code class="command">INSERT</code></a>で制約違反が生じたのを、<code class="command">UPDATE</code>に転換したり、無視したりできるようにしました。
(Peter Geoghegan, Heikki Linnakangas, Andres Freund)
       </p><p><code class="command">INSERT ... ON CONFLICT DO NOTHING/UPDATE</code> という構文を使用します。
これは人気のある<code class="command">UPSERT</code>コマンドのPostgreSQLにおける実装となります。
       </p></li><li class="listitem"><p><code class="literal">GROUP BY</code>分析機能に<a class="link" href="queries-table-expressions.html#QUERIES-GROUPING-SETS" title="7.2.4. GROUPING SETS、CUBE、ROLLUP"><code class="literal">GROUPING SETS</code></a>、<a class="link" href="queries-table-expressions.html#QUERIES-GROUPING-SETS" title="7.2.4. GROUPING SETS、CUBE、ROLLUP"><code class="literal">CUBE</code></a>、<a class="link" href="queries-table-expressions.html#QUERIES-GROUPING-SETS" title="7.2.4. GROUPING SETS、CUBE、ROLLUP"><code class="literal">ROLLUP</code></a>を加えました。
(Andrew Gierth, Atri Sharma)
       </p></li><li class="listitem"><p><a class="link" href="sql-update.html" title="UPDATE"><code class="command">UPDATE</code></a>で複数対象カラムに一つの副問い合わせ結果から値を設定できるようにしました。
(Tom Lane)
       </p><p><code class="command">UPDATE tab SET (col1, col2, ...) = (SELECT ...)</code> という構文で実現されます。
       </p></li><li class="listitem"><p>ロックされた行を読み飛ばす<a class="link" href="sql-select.html" title="SELECT"><code class="command">SELECT</code></a>オプション<code class="literal">SKIP LOCKED</code>を追加しました。
(Thomas Munro)
       </p><p><code class="literal">NOWAIT</code>と異なり、ロック行に対してエラーを出すことはありません。
       </p></li><li class="listitem"><p>テーブルの部分集合を返す<a class="link" href="sql-select.html" title="SELECT"><code class="command">SELECT</code></a>オプション<code class="literal">TABLESAMPLE</code>を追加しました。
       </p><p>この機能はSQL標準のテーブルサンプリングメソッドをサポートします。加えて、<a class="link" href="tablesample-method.html" title="Chapter 57. テーブルサンプリングメソッドの書き方">ユーザ定義サンプリングメソッド</a>を提供します。
       </p></li><li class="listitem"><p>ミスタイプしたカラム名に対し、類推される候補をヒント提示します。
(Peter Geoghegan, Robert Haas)
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.36.5.6"><div class="titlepage"><div><div><h4 class="title">E.32.3.4. ユーティリティコマンド</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="sql-explain.html" title="EXPLAIN"><code class="command">EXPLAIN</code></a>がソート順についてより詳細に出力します。
(Marius Timmer, Lukas Kreft, Arne Scheffer)
       </p><p>出力に<code class="literal">COLLATE</code>、<code class="literal">DESC</code>、<code class="literal">USING</code>および<code class="literal">NULLS FIRST</code><code class="literal">/LAST</code>が含まれます。
       </p></li><li class="listitem"><p><a class="link" href="sql-vacuum.html" title="VACUUM"><code class="command">VACUUM</code></a>がピンのために読み飛ばしたページ数をログ出力するようにしました。
(Jim Nasby)
       </p></li><li class="listitem"><p><a class="link" href="sql-truncate.html" title="TRUNCATE"><code class="command">TRUNCATE</code></a>が<code class="literal">pg_stat</code>*タプルカウンタを適切に更新するようにしました。
(Alexander Shulgin)
       </p></li></ul></div><div class="sect4" id="id-1.11.6.36.5.6.3"><div class="titlepage"><div><div><h5 class="title">E.32.3.4.1. <a class="xref" href="sql-reindex.html" title="REINDEX"><span class="refentrytitle">REINDEX</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">REINDEX</code>が<code class="literal">SCHEMA</code>オプションでスキーマ全体についてインデックス再作成できるようにしました。
(Sawada Masahiko)
       </p></li><li class="listitem"><p><code class="command">REINDEX</code>に<code class="literal">VERBOSE</code>オプションを追加しました。
(Sawada Masahiko)
       </p></li><li class="listitem"><p><code class="command">REINDEX DATABASE</code>/<code class="command">SCHEMA</code>で、<code class="literal">VERBOSE</code>が使われない限り、オブジェクト名を出力しないようにしました。
(Simon Riggs)
       </p></li><li class="listitem"><p><code class="command">REINDEX</code>から現在用いられない<code class="literal">FORCE</code>オプションを除きました。
(Fujii Masao)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.36.5.7"><div class="titlepage"><div><div><h4 class="title">E.32.3.5. オブジェクト操作</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ddl-rowsecurity.html" title="5.7. 行セキュリティポリシー">行単位セキュリティ制御</a>を追加しました。
(Craig Ringer, KaiGai Kohei, Adam Brightwell, Dean Rasheed, Stephen Frost)
       </p><p>本機能は、あるテーブルに対しどのユーザが追加、変更、参照できるかの行ごとの制御を可能にします。新しいコマンド<a class="link" href="sql-createpolicy.html" title="CREATE POLICY"><code class="command">create</code></a>/<a class="link" href="sql-alterpolicy.html" title="ALTER POLICY"><code class="command">alter</code></a>/<a class="link" href="sql-droppolicy.html" title="DROP POLICY"><code class="command">drop policy</code></a>、および、<a class="link" href="sql-altertable.html" title="ALTER TABLE"><code class="command">ALTER TABLE ... ENABLE/DISABLE ROW SECURITY</code></a>によって制御されます。
       </p></li><li class="listitem"><p>テーブルを作った後に<a class="link" href="sql-altertable.html" title="ALTER TABLE"><code class="command">ALTER TABLE ... SET LOGGED / UNLOGGED</code></a>で<acronym class="acronym">WAL</acronym>ログ書き出し状態を変更できるようにしました。
(Fabrízio de Royes Mello)
       </p></li><li class="listitem"><p><a class="link" href="sql-createtableas.html" title="CREATE TABLE AS"><code class="command">create table as</code></a>、<a class="link" href="sql-createindex.html" title="CREATE INDEX"><code class="command">create index</code></a>、<a class="link" href="sql-createsequence.html" title="CREATE SEQUENCE"><code class="command">create sequence</code></a>、および、<a class="link" href="sql-creatematerializedview.html" title="CREATE MATERIALIZED VIEW"><code class="command">CREATE MATERIALIZED VIEW</code></a>に<code class="literal">IF NOT EXISTS</code>句を追加しました。
(Fabrízio de Royes Mello)
       </p></li><li class="listitem"><p><a class="link" href="sql-altertable.html" title="ALTER TABLE"><code class="command">ALTER TABLE ... RENAME CONSTRAINT</code></a>が<code class="literal">IF EXISTS</code>に対応しました。
(Bruce Momjian)
       </p></li><li class="listitem"><p>いくつかのDDLコマンドでユーザ名を指定する箇所にカレントユーザ、セッションユーザの意味で<code class="literal">CURRENT_USER</code>、<code class="literal">SESSION_USER</code>を使用できるようにしました。
(Kyotaro Horiguchi, Álvaro Herrera)
       </p><p>現在、<a class="xref" href="sql-alteruser.html" title="ALTER USER"><span class="refentrytitle">ALTER USER</span></a>、<a class="xref" href="sql-altergroup.html" title="ALTER GROUP"><span class="refentrytitle">ALTER GROUP</span></a>、<a class="xref" href="sql-alterrole.html" title="ALTER ROLE"><span class="refentrytitle">ALTER ROLE</span></a>、<a class="xref" href="sql-grant.html" title="GRANT"><span class="refentrytitle">GRANT</span></a>、および、<code class="command">ALTER <em class="replaceable"><code>object</code></em> OWNER TO</code>の各コマンドにて対応しています。
       </p></li><li class="listitem"><p><a class="link" href="sql-createdomain.html" title="CREATE DOMAIN">ドメインの制約</a>へのコメントに対応しました。
(Álvaro Herrera)
       </p></li><li class="listitem"><p>いくつかのトリガ、外部キーを作成、変更するコマンドでロックレベルを下げました。
(Simon Riggs, Andreas Karlsson)
       </p></li><li class="listitem"><p>対象テーブルに対する<code class="command">INSERT</code>権限で<a class="link" href="sql-lock.html" title="LOCK"><code class="command">LOCK TABLE ... ROW EXCLUSIVE MODE</code></a>を可能にしました。
(Stephen Frost)
       </p><p>これまではこのコマンドは<code class="command">UPDATE</code>、<code class="command">DELETE</code>、<code class="command">TRUNCATE</code>のいずれか権限が必要でした。
       </p></li><li class="listitem"><p>テーブルとドメインで<code class="literal">CHECK</code>制約を名前順に適用します。
(Tom Lane)
       </p><p>これまでは順番は不確定でした。
       </p></li><li class="listitem"><p><a class="link" href="sql-createdatabase.html" title="CREATE DATABASE"><code class="command">create</code></a>/<a class="link" href="sql-alterdatabase.html" title="ALTER DATABASE"><code class="command">ALTER DATABASE</code></a>で<code class="structname">datistemplate</code>と<code class="structname">datallowconn</code>を操作可能にしました。
(Vik Fearing)
       </p><p>これによりシステムカタログ<a class="link" href="catalog-pg-database.html" title="51.15. pg_database"><code class="structname">pg_database</code></a>の手動操作なしにこれらデータベースごとの設定を変更できます。
       </p></li></ul></div><div class="sect4" id="id-1.11.6.36.5.7.3"><div class="titlepage"><div><div><h5 class="title">E.32.3.5.1. <a class="link" href="ddl-foreign-data.html" title="5.11. 外部データ">外部テーブル</a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="sql-importforeignschema.html" title="IMPORT FOREIGN SCHEMA"><span class="refentrytitle">IMPORT FOREIGN SCHEMA</span></a>コマンドを追加しました。
(Ronan Dunklau, Michael Paquier, Tom Lane)
       </p><p>このコマンドはリモートサーバに在るテーブル群の構造に対応したローカルの外部テーブルを自動で作成します。
       </p></li><li class="listitem"><p><code class="literal">CHECK</code>制約を外部テーブルに置けるようにしました。
(Shigeru Hanada, Etsuro Fujita)
       </p><p>このような制約は、リモートサーバ上で強制されるものと仮定され、ローカル側では強制されません。しかしながら、<a class="link" href="ddl-partitioning.html#DDL-PARTITIONING-CONSTRAINT-EXCLUSION" title="5.10.4. パーティショニングと制約による除外">制約による排除</a>など、問い合わせの最適化では制約が成立しているものと仮定されます。
       </p></li><li class="listitem"><p>外部テーブルが継承に参加できるようにしました。
(Shigeru Hanada, Etsuro Fujita)
       </p><p>これを自然に働かせるため、外部テーブルが無効とマークされたチェック制約を持てるように、また、ストレージと<code class="type">OID</code>属性の設定を可能としました。
ただし、これらの操作は外部テーブルに対して何の効果もありません。
       </p></li><li class="listitem"><p>外部データラッパとカスタムスキャンで結合プッシュダウンの実装を可能にしました。
(KaiGai Kohei)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.36.5.7.4"><div class="titlepage"><div><div><h5 class="title">E.32.3.5.2. <a class="link" href="event-triggers.html" title="Chapter 39. イベントトリガ">イベントトリガ</a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">ddl_command_end</code>イベントトリガが導入されたときはいつでも、<acronym class="acronym">DDL</acronym>動作の調査するための詳細を取得します。
(Álvaro Herrera)
        </p><p>この情報は集合を返す関数<a class="link" href="functions-event-triggers.html#PG-EVENT-TRIGGER-DDL-COMMAND-END-FUNCTIONS" title="9.28.1. コマンド側での変更を捕らえる"><code class="function">pg_event_trigger_ddl_commands()</code></a>、あるいは、それでは不十分であるならC言語データ構造の解析を通して、利用できます。
        </p></li><li class="listitem"><p>テーブルのイベントトリガを<a class="link" href="sql-altertable.html" title="ALTER TABLE"><code class="command">ALTER TABLE</code></a>により書換え可能にしました。
(Dimitri Fontaine)
        </p></li><li class="listitem"><p>データベースレベルの<a class="link" href="sql-comment.html" title="COMMENT"><code class="command">comment</code></a>、<a class="link" href="sql-security-label.html" title="SECURITY LABEL"><code class="command">security label</code></a>、および、<a class="link" href="sql-grant.html" title="GRANT"><code class="command">grant</code></a>/<a class="link" href="sql-revoke.html" title="REVOKE"><code class="command">REVOKE</code></a>のイベントトリガに対応しました。
(Álvaro Herrera)
        </p></li><li class="listitem"><p>
<a class="link" href="functions-event-triggers.html#PG-EVENT-TRIGGER-SQL-DROP-FUNCTIONS" title="9.28.2. DDLコマンドで削除されたオブジェクトの処理"><code class="function">pg_event_trigger_dropped_objects</code></a>の出力列をいくつか追加しました。
(Álvaro Herrera)
        </p><p>これにより削除操作の処理を容易にします。
        </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.36.5.8"><div class="titlepage"><div><div><h4 class="title">E.32.3.6. データ型</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="datatype-xml.html" title="8.13. XML型"><code class="type">xml</code></a>データ型が空もしくは全て空白文字の内容を受け入れできるようにしました。
(Peter Eisentraut)
      </p><p>これは<acronym class="acronym">SQL</acronym>/<acronym class="acronym">XML</acronym>仕様で必要とされています。
      </p></li><li class="listitem"><p><a class="link" href="datatype-net-types.html#DATATYPE-MACADDR" title="8.9.4. macaddr"><code class="type">macaddr</code></a>型の入力に<code class="literal">xxxx-xxxx-xxxx</code>形式が使えるようにしました。
(Herwin Weststrate)
      </p></li><li class="listitem"><p><a class="link" href="datatype-datetime.html#DATATYPE-INTERVAL-INPUT" title="8.5.4. 時間間隔の入力"><code class="type">interval</code></a>型で精度とフィールド定義について非SQL標準の構文を禁止しました。
(Bruce Momjian)
      </p><p>標準では、このような型定義は、例えば <code class="literal">INTERVAL MINUTE TO SECOND(2)</code> というように書かなければいけません。<span class="productname">PostgreSQL</span>はこれまで <code class="literal">INTERVAL(2) MINUTE TO SECOND</code> と書くことを許していましたが、これからは標準の方法で書かなければいけません。
      </p></li><li class="listitem"><p><a class="link" href="datatype-net-types.html#DATATYPE-INET" title="8.9.1. inet"><code class="type">inet</code></a>/<a class="link" href="datatype-net-types.html#DATATYPE-CIDR" title="8.9.2. cidr"><code class="type">cidr</code></a>型演算子の選択率見積もり関数を追加しました。また、テキスト検索関数の見積関数を改善しました。
(Emre Hasegeli, Tom Lane)
      </p></li><li class="listitem"><p>ロールや名前空間の<code class="type">OID</code>の入力や見栄えよい表示を簡単にするためのデータ型<a class="link" href="datatype-oid.html#DATATYPE-OID-TABLE" title="Table 8.24. オブジェクト識別子データ型"><code class="type">regrole</code></a>、<a class="link" href="datatype-oid.html#DATATYPE-OID-TABLE" title="Table 8.24. オブジェクト識別子データ型"><code class="type">regnamespace</code></a>を追加しました。
(Kyotaro Horiguchi)
      </p></li></ul></div><div class="sect4" id="id-1.11.6.36.5.8.3"><div class="titlepage"><div><div><h5 class="title">E.32.3.6.1. <a class="link" href="datatype-json.html" title="8.14. JSONデータ型"><acronym class="acronym">JSON</acronym></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="type">jsonb</code>関数<a class="link" href="functions-json.html#FUNCTIONS-JSON-PROCESSING-TABLE" title="Table 9.46. JSON処理関数"><code class="function">jsonb_set()</code></a>、<a class="link" href="functions-json.html#FUNCTIONS-JSON-PROCESSING-TABLE" title="Table 9.46. JSON処理関数"><code class="function">jsonb_pretty()</code></a>を追加しました。
(Dmitry Dolgov, Andrew Dunstan, Petr Jelínek)
       </p></li><li class="listitem"><p><code class="type">jsonb</code>生成関数<a class="link" href="functions-json.html#FUNCTIONS-JSON-CREATION-TABLE" title="Table 9.45. JSON作成関数"><code class="function">to_jsonb()</code></a>、<a class="link" href="functions-json.html#FUNCTIONS-JSON-CREATION-TABLE" title="Table 9.45. JSON作成関数"><code class="function">jsonb_object()</code></a>、<a class="link" href="functions-json.html#FUNCTIONS-JSON-CREATION-TABLE" title="Table 9.45. JSON作成関数"><code class="function">jsonb_build_object()</code></a>、<a class="link" href="functions-json.html#FUNCTIONS-JSON-CREATION-TABLE" title="Table 9.45. JSON作成関数"><code class="function">jsonb_build_array()</code></a>、<a class="link" href="functions-aggregate.html#FUNCTIONS-AGGREGATE-TABLE" title="Table 9.52. 汎用集約関数"><code class="function">jsonb_agg()</code></a>、<a class="link" href="functions-aggregate.html#FUNCTIONS-AGGREGATE-TABLE" title="Table 9.52. 汎用集約関数"><code class="function">jsonb_object_agg()</code></a>を追加しました。
(Andrew Dunstan)
       </p><p><code class="type">json</code>型むけには同等の関数が既にありました。
       </p></li><li class="listitem"><p><a class="link" href="datatype-json.html" title="8.14. JSONデータ型"><code class="type">json</code></a>型から<a class="link" href="datatype-json.html" title="8.14. JSONデータ型"><code class="type">jsonb</code></a>型、あるいその逆の、キャストの必要性を減らしました。
(Tom Lane)
       </p></li><li class="listitem"><p><code class="type">jsonb</code>ドキュメントから、<code class="type">text</code>、<code class="type">text</code>配列、<code class="type">integer</code>の値を<a class="link" href="functions-json.html#FUNCTIONS-JSONB-OP-TABLE" title="Table 9.44. 追加jsonb演算子">引き算</a>できるようにしました。
(Dmitry Dolgov, Andrew Dunstan)
       </p></li><li class="listitem"><p><code class="type">jsonb</code>むけの<a class="link" href="functions-json.html#FUNCTIONS-JSONB-OP-TABLE" title="Table 9.44. 追加jsonb演算子"><code class="literal">||</code></a> 演算子を追加しました。
(Dmitry Dolgov, Andrew Dunstan)
       </p></li><li class="listitem"><p>JSONのヌル値をJSONドキュメントから取り除く関数<a class="link" href="functions-json.html#FUNCTIONS-JSON-PROCESSING-TABLE" title="Table 9.46. JSON処理関数"><code class="function">json_strip_nulls()</code></a>、<a class="link" href="functions-json.html#FUNCTIONS-JSON-PROCESSING-TABLE" title="Table 9.46. JSON処理関数"><code class="function">jsonb_strip_nulls()</code></a>を追加しました。
(Andrew Dunstan)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.36.5.9"><div class="titlepage"><div><div><h4 class="title">E.32.3.7. 関数</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="type">numeric</code>値の<a class="link" href="functions-srf.html" title="9.24. 集合を返す関数"><code class="function">generate_series()</code></a>を追加しました。
(Plato Malugin)
       </p></li><li class="listitem"><p><a class="link" href="functions-aggregate.html#FUNCTIONS-AGGREGATE-TABLE" title="Table 9.52. 汎用集約関数"><code class="function">array_agg()</code></a>と<code class="function">ARRAY()</code>が入力に配列を取れるようにしました。
(Ali Akbar, Tom Lane)
       </p></li><li class="listitem"><p>配列の添え字を返す関数<a class="link" href="functions-array.html#ARRAY-FUNCTIONS-TABLE" title="Table 9.49. 配列関数"><code class="function">array_position()</code></a>、<a class="link" href="functions-array.html#ARRAY-FUNCTIONS-TABLE" title="Table 9.49. 配列関数"><code class="function">array_positions()</code></a>を追加しました。
(Pavel Stehule)
       </p></li><li class="listitem"><p><code class="type">point</code>と<code class="type">polygon</code>の距離演算子<a class="link" href="functions-geometry.html#FUNCTIONS-GEOMETRY-OP-TABLE" title="Table 9.33. 幾何データ演算子">&lt;-&gt;</a>を追加しました。
(Alexander Korotkov)
       </p></li><li class="listitem"><p><a class="link" href="functions-matching.html#FUNCTIONS-SIMILARTO-REGEXP" title="9.7.2. SIMILAR TO正規表現"><code class="literal">similar to</code></a>と<a class="link" href="functions-string.html#FUNCTIONS-STRING-SQL" title="Table 9.8. SQL文字列関数と演算子"><code class="literal">SUBSTRING</code></a>でマルチバイト文字によるエスケープを可能にしました。
(Jeff Davis)
       </p><p>これまではシングルバイト文字のみエスケープとして使用可能でした。
       </p></li><li class="listitem"><p>任意のソート可能なデータ型と一様でないバケット幅に対応した、<a class="link" href="functions-math.html#FUNCTIONS-MATH-FUNC-TABLE" title="Table 9.5. 算術関数"><code class="function">width_bucket()</code></a>の別形を追加しました。
(Petr Jelínek)
       </p></li><li class="listitem"><p><a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-GENFILE-TABLE" title="Table 9.88. 汎用ファイルアクセス関数"><code class="function">pg_read_file()</code></a>や関連の関数にオプション引数<em class="replaceable"><code>missing_ok</code></em>を追加しました。
(Michael Paquier, Heikki Linnakangas)
       </p></li><li class="listitem"><p>関数呼び出しで<a class="link" href="sql-syntax-calling-funcs.html" title="4.3. 関数呼び出し"><code class="literal">=&gt;</code></a>で名前のついたパラメータを指定できるようにしました。
(Pavel Stehule)
       </p><p>これまでは <code class="literal">:=</code> だけが利用できました。これにより、<code class="literal">=&gt;</code>がユーザ定義演算子である可能性を排除することが必要となります。ユーザ定義演算子<code class="literal">=&gt;</code>の作成では PostgreSQL 9.0 から警告が出ていました。
       </p></li><li class="listitem"><p>PostgreSQLによる丸め関数を使うプラットフォームに<acronym class="acronym">POSIX</acronym>準拠の丸め処理を追加しました。
(Pedro Gimeno Fortea)
       </p></li></ul></div><div class="sect4" id="id-1.11.6.36.5.9.3"><div class="titlepage"><div><div><h5 class="title">E.32.3.7.1. システム情報関数</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>オブジェクトを一意に識別する<code class="type">OID</code>を返す関数<a class="link" href="functions-info.html#FUNCTIONS-INFO-OBJECT-TABLE" title="Table 9.67. オブジェクト情報とアドレスの関数"><code class="function">pg_get_object_address()</code></a>、<code class="type">OID</code>に基づきオブジェクト情報を返す関数<a class="link" href="functions-info.html#FUNCTIONS-INFO-OBJECT-TABLE" title="Table 9.67. オブジェクト情報とアドレスの関数"><code class="function">pg_identify_object_as_address()</code></a>を追加しました。
(Álvaro Herrera)
       </p></li><li class="listitem"><p><a class="link" href="monitoring-stats.html#PG-STAT-ACTIVITY-VIEW" title="Table 28.3. pg_stat_activityビュー"><code class="structname">pg_stat_activity</code></a>のビュー問い合わせ、<a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-SIGNAL-TABLE" title="Table 9.78. サーバシグナル送信関数"><code class="function">pg_cancel_backend()</code></a>の実行、<a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-SIGNAL-TABLE" title="Table 9.78. サーバシグナル送信関数"><code class="function">pg_terminate_backend()</code></a>の実行において、セキュリティチェックを緩めました。
(Stephen Frost)
       </p><p>これまでは対象のセッションを所有している特定のロールだけがこれら操作を実行できました。これからはこれらロールのメンバーであれば十分とします。
       </p></li><li class="listitem"><p>統計スナップショットのタイムスタンプを出力する関数<a class="link" href="monitoring-stats.html#MONITORING-STATS-FUNCS-TABLE" title="Table 28.19. その他の統計情報関数"><code class="function">pg_stat_get_snapshot_timestamp()</code></a>を追加しました。
(Matt Kelly)
       </p><p>これは最後のスナップショットファイルがファイルシステムに書かれた時点をあらわします。
       </p></li><li class="listitem"><p>マルチトランザクションIDの年代を計算する関数<a class="link" href="routine-vacuuming.html#VACUUM-FOR-MULTIXACT-WRAPAROUND" title="24.1.5.1. マルチトランザクションと周回"><code class="function">mxid_age()</code></a>を追加しました。
(Bruce Momjian)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.36.5.9.4"><div class="titlepage"><div><div><h5 class="title">E.32.3.7.2. 集約</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="datatype-net-types.html#DATATYPE-INET" title="8.9.1. inet"><code class="type">inet</code></a>/<a class="link" href="datatype-net-types.html#DATATYPE-CIDR" title="8.9.2. cidr"><code class="type">cidr</code></a>データ型に対する<code class="function">min()</code>/<code class="function">max()</code>集約を追加しました。
(Haribabu Kommi)
       </p></li><li class="listitem"><p>128ビットの整数がサポートされているなら、一部の集約関数で累算器に128ビット整数を使います。
(Andreas Karlsson)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.36.5.10"><div class="titlepage"><div><div><h4 class="title">E.32.3.8. サーバサイド言語</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="plpython.html" title="Chapter 45. PL/Python - Python手続き言語"><span class="application">PL/Python</span></a>で複合型への対応を改善しました。
(Ed Behn, Ronan Dunklau)
      </p><p>これにより<span class="application">PL/Python</span>関数が複合型の配列を返せるようになります。
      </p></li><li class="listitem"><p><a class="link" href="plpython.html" title="Chapter 45. PL/Python - Python手続き言語"><span class="application">PL/Python</span></a>の浮動小数点値の変換でデータ損失を減らしました。
(Marko Kreen)
      </p></li><li class="listitem"><p><acronym class="acronym">SQL</acronym>データ型と手続き言語のデータ型との変換処理を定義可能にしました。
(Peter Eisentraut)
      </p><p>この変更で新たなコマンド<a class="link" href="sql-createtransform.html" title="CREATE TRANSFORM"><code class="command">create</code></a>/<a class="link" href="sql-droptransform.html" title="DROP TRANSFORM"><code class="command">DROP TRANSFORM</code></a>が加わります。
また、<a class="link" href="hstore.html" title="F.17. hstore"><span class="application">hstore</span></a>型、<a class="link" href="ltree.html" title="F.22. ltree"><span class="application">ltree</span></a>型への、あるいはこれら型からの、<a class="link" href="plperl.html" title="Chapter 44. PL/Perl - Perl手続き言語"><span class="application">pl/perl</span></a>および<a class="link" href="plpython.html" title="Chapter 45. PL/Python - Python手続き言語"><span class="application">PL/Python</span></a>との任意選択の変換も追加されます。
      </p></li></ul></div><div class="sect4" id="id-1.11.6.36.5.10.3"><div class="titlepage"><div><div><h5 class="title">E.32.3.8.1. <a class="link" href="plpgsql.html" title="Chapter 42. PL/pgSQL - SQL手続き言語">PL/pgSQL</a> サーバサイド言語</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="plpgsql.html" title="Chapter 42. PL/pgSQL - SQL手続き言語"><span class="application">PL/pgSQL</span></a>配列の性能を改善しました。
(Tom Lane)
      </p></li><li class="listitem"><p><span class="application">PL/pgSQL</span>に<a class="link" href="plpgsql-errors-and-messages.html#PLPGSQL-STATEMENTS-ASSERT" title="42.8.2. アサート検査"><code class="command">ASSERT</code></a>文を追加しました。
(Pavel Stehule)
      </p></li><li class="listitem"><p>より多くの<a class="link" href="plpgsql.html" title="Chapter 42. PL/pgSQL - SQL手続き言語"><span class="application">PL/pgSQL</span></a>キーワードを識別子として使用可能にしました。
(Tom Lane)
      </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.36.5.11"><div class="titlepage"><div><div><h4 class="title">E.32.3.9. クライアントアプリケーション</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="pgarchivecleanup.html" title="pg_archivecleanup"><span class="application">pg_archivecleanup</span></a>、<a class="link" href="pgtestfsync.html" title="pg_test_fsync"><span class="application">pg_test_fsync</span></a>、<a class="link" href="pgtesttiming.html" title="pg_test_timing"><span class="application">pg_test_timing</span></a>、<a class="link" href="pgwaldump.html" title="pg_waldump"><span class="application">pg_xlogdump</span></a>を<code class="filename">contrib</code>から<code class="filename">src/bin</code>に移しました。
(Peter Eisentraut)
      </p><p>この変更により、ほとんどのインストールでこれらのプログラムがデフォルトでインストールされるようになります。
      </p></li><li class="listitem"><p>フェイルバック後にマスタサーバを再同期させることができる、<a class="link" href="app-pgrewind.html" title="pg_rewind"><span class="application">pg_rewind</span></a>を追加しました。
(Heikki Linnakangas)
      </p></li><li class="listitem"><p><a class="link" href="app-pgreceivewal.html" title="pg_receivewal"><span class="application">pg_receivexlog</span></a>で物理レプリケーションスロットを管理できるようにしました。
(Michael Paquier)
      </p><p>新たなオプション<code class="option">--create-slot</code>、<code class="option">--drop-slot</code>により制御します。
      </p></li><li class="listitem"><p>新たな<code class="option">--synchronous</code>オプションで<a class="link" href="app-pgreceivewal.html" title="pg_receivewal"><span class="application">pg_receivexlog</span></a>が<acronym class="acronym">WAL</acronym>を記憶装置に同期フラッシュするようにしました。
(Furuya Osamu, Fujii Masao)
      </p><p>このオプションが無いと、<acronym class="acronym">WAL</acronym>ファイルはクローズ時しかfsyncされません。
      </p></li><li class="listitem"><p>新たなオプション<code class="option">--jobs</code> により<a class="link" href="app-vacuumdb.html" title="vacuumdb"><span class="application">vacuumdb</span></a>が並列にバキュームできるようにしました。
(Dilip Kumar)
      </p></li><li class="listitem"><p><a class="link" href="app-vacuumdb.html" title="vacuumdb"><span class="application">vacuumdb</span></a>で複数の接続が必要であるとき、同じパスワードの入力を繰り返しプロンプトで要求しないようにしました。
(Haribabu Kommi, Michael Paquier)
      </p></li><li class="listitem"><p><a class="link" href="app-reindexdb.html" title="reindexdb"><span class="application">reindexdb</span></a>に<code class="option">--verbose</code>オプションを追加しました。
(Sawada Masahiko)
      </p></li><li class="listitem"><p><span class="systemitem">MS Windows</span>上で、<a class="link" href="app-pgbasebackup.html" title="pg_basebackup"><span class="application">pg_basebackup</span></a>が<span class="application">tar</span>フォーマットのときテーブル空間マッピングファイルを使い、シンボリックリンクと100文字以上の長さのファイルパスに対応しました。
(Amit Kapila)
      </p></li><li class="listitem"><p><a class="link" href="pgwaldump.html" title="pg_waldump"><span class="application">pg_xlogdump</span></a>に要約統計を表示するオプション<code class="option">--stats</code>を追加しました。
(Abhijit Menon-Sen)
      </p></li></ul></div><div class="sect4" id="id-1.11.6.36.5.11.3"><div class="titlepage"><div><div><h5 class="title">E.32.3.9.1. <a class="xref" href="app-psql.html" title="psql"><span class="refentrytitle"><span class="application">psql</span></span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">psql</span>でAsciiDocを出力できるようにしました。
(Szymon Guz)
        </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="varname">ECHO</code>変数に失敗したコマンドだけ表示する<code class="literal">errors</code>モードを追加しました。
(Pavel Stehule)
        </p><p>この振る舞いは<span class="application">psql</span>の<code class="option">-b</code>オプションでも指定できます。
        </p></li><li class="listitem"><p><span class="application">psql</span>の unicode linestyle で、カラム区切り、ヘッダ、境界線の制御ができます。
(Pavel Stehule)
        </p><p>一重線または二重線に対応しています。デフォルトは一重線（<code class="literal">single</code>）です。
        </p></li><li class="listitem"><p><span class="application">psql</span>の<a class="link" href="app-psql.html#APP-PSQL-VARIABLES" title="変数"><code class="envar">PROMPT</code></a>変数に複数行にわたる文の現在の行番号を表示する新オプション<code class="literal">%l</code>を追加しました。
(Sawada Masahiko)
        </p></li><li class="listitem"><p><code class="literal">\pset</code>オプションにページャ起動を制御する<a class="link" href="app-psql.html#APP-PSQL-META-COMMANDS" title="メタコマンド"><code class="varname">pager_min_lines</code></a>を追加しました。
(Andrew Dunstan)
        </p></li><li class="listitem"><p>ページャ起動を判断するときに使われる<span class="application">psql</span>の行数カウントを改善しました。
(Andrew Dunstan)
        </p></li><li class="listitem"><p><code class="option">--output</code>または<code class="option">--log-file</code>で指定されたファイルに書き込みできない場合、<span class="application">psql</span>は失敗するようになります。
(Tom Lane, Daniel Vérité)
        </p><p>これまで、このようなケースでは事実上指定が無視されていました。
        </p></li><li class="listitem"><p><a class="xref" href="runtime-config-client.html#GUC-SEARCH-PATH">search_path</a>変数を設定するときの<span class="application">psql</span>タブ補完を追加しました。
(Jeff Janes)
        </p><p>今のところ最初のスキーマのみタブ補完できます。
        </p></li><li class="listitem"><p>トリガとルールについて<span class="application">psql</span>のタブ補完を改善しました。
(Andreas Karlsson)
        </p></li></ul></div><div class="sect5" id="id-1.11.6.36.5.11.3.3"><div class="titlepage"><div><div><h6 class="title">E.32.3.9.1.1. <a class="link" href="app-psql.html#APP-PSQL-META-COMMANDS" title="メタコマンド">バックスラッシュコマンド</a></h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">psql</span>の<code class="command">\?</code>ヘルプに<code class="literal">variables</code>と<code class="literal">options</code>の項目を追加しました。
(Pavel Stehule)
        </p><p><code class="literal">\? variables</code>は、<span class="application">psql</span>の特別変数一覧を、<code class="literal">\? options</code>は、コマンドラインオプション一覧を表示します。
<code class="command">\? commands</code>は、従来の出力（単に <code class="command">\?</code> と指定した場合）で現在もデフォルトとなっているメタコマンド一覧を表示します。これらのヘルプはコマンドラインオプション<code class="literal">--help=<em class="replaceable"><code>項目</code></em></code>でも得られます。
        </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="literal">\db+</code>でテーブル空間の大きさを表示します。
(Fabrízio de Royes Mello)
        </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="literal">\dT+</code>でデータ型の所有者を表示します。
(Magnus Hagander)
        </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="command">\watch</code>で<code class="command">\timing</code>の情報を出力できるようにしました。
        </p><p>また、通常は不必要なので、<code class="option">--echo-hidden</code>に対して<code class="command">\watch</code>問い合わせのエコー出力を止めました。
        </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="literal">\sf</code>と<code class="literal">\ef</code>コマンドが<code class="envar">ECHO_HIDDEN</code>を尊重するようにしました。
(Andrew Dunstan)
        </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="command">\set</code>、<code class="command">\unset</code>、および、<code class="literal">:variable</code>（変数参照）に対するタブ補完を改善しました。
(Pavel Stehule)
        </p></li><li class="listitem"><p><span class="application">psql</span>の<code class="literal">\c</code>コマンドでロール名のタブ補完を可能にしました。
        </p></li></ul></div></div></div><div class="sect4" id="id-1.11.6.36.5.11.4"><div class="titlepage"><div><div><h5 class="title">E.32.3.9.2. <a class="xref" href="app-pgdump.html" title="pg_dump"><span class="refentrytitle">pg_dump</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">pg_dump</span>が<code class="option">--snapshot</code>オプションで他セッションとスナップショットを共有できるようにしました。
(Simon Riggs, Michael Paquier)
       </p><p>指定するリモートスナップショットは<code class="function">pg_export_snapshot()</code>またはロジカルレプリケーションスロットの作成によりエクスポートされたものでなければいけません。これは複数の<span class="application">pg_dump</span>プロセス間で一貫したスナップショットを共有するのに使えます。
       </p></li><li class="listitem"><p>tarアーカイブフォーマットにおいて8GBを超えるサイズのテーブルに対応しました。
(Tom Lane)
       </p><p>tarフォーマットのPOSIX標準では8GBを超えるtarアーカイブの要素を許可していませんが、ほとんどの近代的なtarの実装ではこれを可能とする拡張をサポートしています。
失敗させるのでなく、必要なら拡張フォーマットを使用するようにします。
       </p></li><li class="listitem"><p><span class="application">pg_dump</span>が常にサーバと<span class="application">pg_dump</span>のバージョンを表示するようにしました。
(Jing Wang)
       </p><p>これまでは<code class="option">--verbose</code>モードのときだけバージョン情報が表示されていました。
       </p></li><li class="listitem"><p>永らく無視されてきた<code class="option">-i</code>/<code class="option">--ignore-version</code>オプションを<span class="application">pg_dump</span>、<span class="application">pg_dumpall</span>、<span class="application">pg_restore</span>から取り除きました。
(Fujii Masao)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.36.5.11.5"><div class="titlepage"><div><div><h5 class="title">E.32.3.9.3. <a class="xref" href="app-pg-ctl.html" title="pg_ctl"><span class="refentrytitle"><span class="application">pg_ctl</span></span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">pg_ctl</span>で複数の<code class="option">-o</code>オプションに対応しました。これらの値は連結されます。
(Bruce Momjian)
       </p></li><li class="listitem"><p><span class="systemitem">MS Windows</span>でのログ出力において、<span class="application">pg_ctl</span>のイベントソースを制御できるようになりました。
(MauMau)
       </p><p>これは別に<code class="filename">postgresql.conf</code>に設定を持つサーバではなく、<span class="application">pg_ctl</span>のみ制御します。
       </p></li><li class="listitem"><p>サーバの監視するアドレスにワイルドカード値（IPv4では<code class="literal">0.0.0.0</code>、IPv6では<code class="literal">::</code>）が設定された場合、文字通りにワイルドカードアドレスを試みるのではなくループバックアドレスから接続します。
(Kondo Yuta)
       </p><p>この修正は主にWindowsに影響を及ぼします。
他のプラットフォームでは<span class="application">pg_ctl</span>はUnixドメインソケットを使うことを優先します。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.36.5.11.6"><div class="titlepage"><div><div><h5 class="title">E.32.3.9.4. <a class="xref" href="pgupgrade.html" title="pg_upgrade"><span class="refentrytitle"><span class="application">pg_upgrade</span></span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">pg_upgrade</span>を<code class="filename">contrib</code>から<code class="filename">src/bin</code>に移動しました。
(Peter Eisentraut)
       </p><p>この変更に関連して、<span class="application">pg_upgrade_support</span>モジュールで提供されていた機能をサーバコアに移動しました。
       </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>で複数の<code class="option">-o</code>/<code class="option">-O</code>オプションに対応しました。これらの値は連結されます。
(Bruce Momjian)
       </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>におけるデータベースの照合順序の比較を改善しました。
(Heikki Linnakangas)
       </p></li><li class="listitem"><p>8.3クラスタからのアップグレードのサポートを外しました。
(Bruce Momjian)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.36.5.11.7"><div class="titlepage"><div><div><h5 class="title">E.32.3.9.5. <a class="xref" href="pgbench.html" title="pgbench"><span class="refentrytitle"><span class="application">pgbench</span></span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>pgbenchを<code class="filename">contrib</code>から<code class="filename">src/bin</code>に移動しました。
(Peter Eisentraut)
       </p></li><li class="listitem"><p><span class="quote">“<span class="quote">excluding connections establishing</span>”</span>のTPS値の計算を修正しました。
(Tatsuo Ishii, Fabien Coelho)
       </p><p>pgbenchのスレッド数がクライアント接続数よりも少ないときには常に接続確立のオーバーヘッドが誤計算されていました。これは明らかにバグですが、TPS値がこれまでの結果と比較できなくなるため、9.5より前のバージョンへの修正は行いません。
       </p></li><li class="listitem"><p>指定時間以上要したpgbenchトランザクションをカウントできるようにしました。
(Fabien Coelho)
       </p><p>これは新たなオプション<code class="option">--latency-limit</code>で制御されます。
       </p></li><li class="listitem"><p>pgbenchの<code class="command">\setrandom</code>で正規分布/指数分布による生成を可能にしました。
(Kondo Mitsumasa, Fabien Coelho)
       </p></li><li class="listitem"><p><span class="application">pgbench</span>の<code class="command">\set</code>コマンドで複数の演算子を含む算術演算を扱えるようにし、また、サポートされる演算子に<code class="literal">%</code>(剰余)を加えました。

(Robert Haas, Fabien Coelho)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.36.5.12"><div class="titlepage"><div><div><h4 class="title">E.32.3.10. ソースコード</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="wal.html" title="Chapter 30. 信頼性とログ先行書き込み"><acronym class="acronym">WAL</acronym></a>レコードフォーマットを単純にしました。
(Heikki Linnakangas)
       </p><p>これにより外部ツールがより容易にどのブロックが変更されたかを追跡できます。
       </p></li><li class="listitem"><p>トランザクションコミットとアボートのWAL記録の表現を改善しました。
(Andres Freund)
       </p></li><li class="listitem"><p>原子的メモリ操作の<acronym class="acronym">API</acronym>を追加しました。
(Andres Freund)
       </p></li><li class="listitem"><p>カスタムパス、カスタムスキャン方式が可能になりました。
(KaiGai Kohei, Tom Lane)
       </p><p>これにより拡張でオプティマイザとエグゼキュータをより大幅に制御できます。
       </p></li><li class="listitem"><p>外部データラッパでフィルタ後のロックを可能にしました。
(Etsuro Fujita)
       </p></li><li class="listitem"><p>外部テーブルを<code class="command">INSERT ... ON CONFLICT DO NOTHING</code>問い合わせに含めることができます。
(Peter Geoghegan, Heikki Linnakangas, Andres Freund)
       </p><p>これを扱えるようにするため外部テーブルラッパの修正が必要です。
外部テーブルに対する<code class="command">INSERT ... ON CONFLICT DO UPDATE</code>はサポートされません。
       </p></li><li class="listitem"><p><code class="function">hash_create()</code>のシンプルバイナリキーハッシュ関数を選ぶAPIを改善しました。
(Teodor Sigaev, Tom Lane)
       </p></li><li class="listitem"><p>並列実行基盤を改善しました。
(Robert Haas, Amit Kapila, Noah Misch, Rushabh Lathia, Jeevan Chalke)
       </p></li><li class="listitem"><p><span class="productname">Alpha</span> (<acronym class="acronym">CPU</acronym>)、<span class="systemitem">Tru64</span> (OS)への移植を削除しました。
       </p></li><li class="listitem"><p><acronym class="acronym">ARM</acronym>v5とより古い<acronym class="acronym">CPU</acronym>むけのスワップバイト命令によるスピンロック実装を削除しました。
(Robert Haas)
       </p><p><acronym class="acronym">ARM</acronym>v5の弱いメモリ順序付けではこのロック実装は安全ではありません。
アトミックに対応した新しいgcc実装にてスピンロック対応は依然として可能です。
       </p></li><li class="listitem"><p>極端に長い（100文字超）ファイルパスがtarファイルに書かれたときエラーを出します。
(Peter Eisentraut)
       </p><p>tarはこのような長すぎるパスに対応しません。
       </p></li><li class="listitem"><p>カラム<a class="link" href="catalog-pg-seclabel.html" title="51.45. pg_seclabel"><code class="structname">pg_seclabel</code></a>.<code class="structname">provider</code>、<a class="link" href="catalog-pg-shseclabel.html" title="51.49. pg_shseclabel"><code class="structname">pg_shseclabel</code></a>.<code class="structname">provider</code>のインデックス演算子クラスを<code class="literal">text_pattern_ops</code>に変更しました。
       </p><p>これは、クラスタ内の異なるデータベースが異なるデフォルト照合順序をもつとき、これらインデックスが問題を惹き起こすことを防ぎます。
       </p></li><li class="listitem"><p>スピンロックの基本命令をコンパイラバリアの機能に変更しました。
(Robert Haas)
       </p></li></ul></div><div class="sect4" id="id-1.11.6.36.5.12.3"><div class="titlepage"><div><div><h5 class="title">E.32.3.10.1. MS Windows</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="systemitem">Windows 8</span>、<span class="systemitem">Windows Server 2012</span>、および以降の Windows systems で高精度タイムスタンプを可能としました。
(Craig Ringer)
       </p></li><li class="listitem"><p><span class="systemitem">MS Windows</span> では共有ライブラリを<code class="filename">bin</code>にインストールします。
(Peter Eisentraut, Michael Paquier)
       </p></li><li class="listitem"><p><span class="productname">MSVC</span>ビルドでは<code class="filename">src/test/modules</code>を<code class="filename">contrib</code>と一緒にインストールします。
(Michael Paquier)
       </p></li><li class="listitem"><p><a class="link" href="install-procedure.html" title="16.4. インストール手順">configure</a>の<code class="option">--with-extra-version</code>オプションを<span class="productname">MSVC</span>ビルドでも受け付けるようにしました。
(Michael Paquier)
       </p></li><li class="listitem"><p><code class="envar">PGFILEDESC</code>を<span class="productname">MSVC</span> contribビルドに渡します。
        (Michael Paquier)
       </p></li><li class="listitem"><p>全ての<span class="productname">MSVC</span>ビルドされたバイナリにアイコンを、また、全ての<span class="systemitem">MS Windows</span>バイナリにバージョン情報を添加しました。
(Noah Misch)
       </p><p>MinGWでは既にそのようにアイコンが与えられていました。
       </p></li><li class="listitem"><p><code class="function">getopt_long()</code>内部実装にオプション引数対応を加えました。
(Michael Paquier, Andres Freund)
       </p><p>これは<span class="productname">MSVC</span>で使われます。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.36.5.13"><div class="titlepage"><div><div><h4 class="title">E.32.3.11. 追加モジュール</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="pgstatstatements.html#PGSTATSTATEMENTS-COLUMNS" title="Table F.22. pg_stat_statementsの列"><span class="application">pg_stat_statements</span></a>に
時間の最小、最大、平均、標準偏差の統計を追加しました。
(Mitsumasa Kondo, Andrew Dunstan)
      </p></li><li class="listitem"><p><a class="link" href="pgcrypto.html" title="F.26. pgcrypto"><span class="application">pgcrypto</span></a>に<span class="productname">PGP</span> Armorヘッダから抽出をする<code class="function">pgp_armor_headers()</code>関数を追加しました。
(Marko Tiikkaja, Heikki Linnakangas)
      </p></li><li class="listitem"><p><a class="link" href="unaccent.html" title="F.44. unaccent"><span class="application">unaccent</span></a>で空の置き換え文字列を可能としました。
(Mohammad Alhashash)
      </p><p>これは発音区別記号が複数文字に分かれて表現される言語で有用です。
      </p></li><li class="listitem"><p><a class="link" href="unaccent.html" title="F.44. unaccent"><span class="application">unaccent</span></a>で複数文字からなる変換元文字を可能にしました。
(Tom Lane)
      </p><p>これは発音区別記号が複数文字に分かれて表現される言語で有用です。
また、より複雑なunaccent辞書も可能にします。
      </p></li><li class="listitem"><p>追加的なテーブルサンプリング方式をできるようにする<code class="filename">contrib</code>モジュール<a class="link" href="tsm-system-rows.html" title="F.42. tsm_system_rows"><span class="application">tsm_system_rows</span></a>、<a class="link" href="tsm-system-time.html" title="F.43. tsm_system_time"><span class="application">tsm_system_time</span></a>を追加しました。
(Petr Jelínek)
      </p></li><li class="listitem"><p><a class="link" href="pageinspect.html" title="F.23. pageinspect"><span class="application">pageinspect</span></a>に<a class="link" href="gin.html" title="Chapter 64. GINインデックス"><acronym class="acronym">GIN</acronym></a>インデックスを解析する関数を追加しました。
(Heikki Linnakangas, Peter Geoghegan, Michael Paquier)
      </p></li><li class="listitem"><p><a class="link" href="pgbuffercache.html" title="F.25. pg_buffercache"><span class="application">pg_buffercache</span></a>の表示にバッファピンについての情報を追加しました。
(Andres Freund)
      </p></li><li class="listitem"><p><a class="link" href="pgstattuple.html" title="F.31. pgstattuple"><span class="application">pgstattuple</span></a>が<code class="function">pgstattuple_approx()</code>でより少ない負荷でおおよその答えを報告できるようにしました。
(Abhijit Menon-Sen)
      </p></li><li class="listitem"><p><span class="application">dummy_seclabel</span>、<span class="application">test_shm_mq</span>、<span class="application">test_parser</span>、および、<span class="application">worker_spi</span>を、<code class="filename">contrib</code>から<code class="filename">src/test/modules</code>に移動しました。
(Álvaro Herrera)
      </p><p>これらモジュールはサーバテストだけのためのものであって、<span class="productname">PostgreSQL</span>をパッケージングする際のビルドやインストールでは必要とされません。
      </p></li></ul></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-9-5-1.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="release-9-4-19.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">E.31. リリース9.5.1 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> E.33. Release 9.4.19</td></tr></table></div></body></html>