<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>31.1. パブリケーション</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="logical-replication.html" title="Chapter 31. 論理レプリケーション" /><link rel="next" href="logical-replication-subscription.html" title="31.2. サブスクリプション" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">31.1. パブリケーション</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="logical-replication.html" title="Chapter 31. 論理レプリケーション">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="logical-replication.html" title="Chapter 31. 論理レプリケーション">Up</a></td><th width="60%" align="center">Chapter 31. 論理レプリケーション</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="logical-replication-subscription.html" title="31.2. サブスクリプション">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="LOGICAL-REPLICATION-PUBLICATION"><div class="titlepage"><div><div><h2 class="title" style="clear: both">31.1. パブリケーション</h2></div></div></div><p><em class="firstterm">パブリケーション</em>は、どのような物理レプリケーションのマスターにも定義できます。
パブリケーションが定義されたノードは、<em class="firstterm">パブリッシャー</em>と呼ばれます。
パブリケーションは、テーブルか、テーブルのグループから生成された更新の集合であると同時に、更新セットあるいはレプリケーションセットであるとも言えます。
一つのパブリケーションは一つのデータベースにのみ存在します。
  </p><p>パブリケーションはスキーマとは異なり、テーブルがどのようにアクセスされるかには影響しません。
必要ならば、テーブルを複数のパブリケーションに追加できます。
今のところパブリケーションはテーブルのみを含むことができます。
パブリケーションが<code class="literal">ALL TABLES</code>で作られた場合を除き、オブジェクトは明示的に追加されなければなりません。
  </p><p>パブリケーションは、生成される更新を、<code class="command">INSERT</code>、<code class="command">UPDATE</code>、<code class="command">DELETE</code>のうちのどのような組み合わせにも制限することができます。
これはトリガーが特定のイベント型によって起動されることに似ています。
デフォルトでは、すべての操作タイプがレプリケーションされます。
  </p><p>パブリッシュされたテーブルは、<code class="command">UPDATE</code>と<code class="command">DELETE</code>をレプリケーションできるようにするために、<span class="quote">“<span class="quote">レプリカアイデンティティ</span>”</span>の設定を含んでいなければなりません。
そうすることにより、サブスクライバー側で更新または削除する対象の正しい行が特定できるようになります。
デフォルトでは主キーがあれば、それがレプリカアイデンティティになります。
他に、ユニークキー（追加の要件を伴います）もレプリカアイデンティティにできます。
テーブルに適当なキーがなければ、レプリカアイデンティティを<span class="quote">“<span class="quote">full</span>”</span>にできます。
これは、行全体がキーになることを意味します。
しかし、これは非常に非効率なので、他の解決方法がない場合のみの代替手段にすべきです。
<span class="quote">“<span class="quote">full</span>”</span>以外のレプリカアイデンティティがパブリッシャー側に設定されている場合、同じか、より少ない列を含むレプリカアイデンティティがサブスクライバー側に設定されていなければなりません。
レプリカアイデンティティを設定する詳細な方法については、<a class="xref" href="sql-altertable.html#SQL-CREATETABLE-REPLICA-IDENTITY"><code class="literal">REPLICA IDENTITY</code></a>をご覧ください。
<code class="command">UPDATE</code>あるいは<code class="command">DELETE</code>操作をレプリケーションするパブリケーションに、レプリカアイデンティティがないテーブルが追加されると、以後<code class="command">UPDATE</code>あるいは<code class="command">DELETE</code>操作が行われるとパブリッシャー側でエラーが発生します。
<code class="command">INSERT</code>操作は、レプリカアイデンティティの設定に関わらず実行されます。
  </p><p>すべてのパブリケーションは、複数のサブスクライバーを持つことができます。
  </p><p>パブリケーションは、<a class="xref" href="sql-createpublication.html" title="CREATE PUBLICATION"><span class="refentrytitle">CREATE PUBLICATION</span></a>コマンドで作成し、対応するコマンドで変更や削除ができます。
  </p><p>個々のテーブルは<a class="xref" href="sql-alterpublication.html" title="ALTER PUBLICATION"><span class="refentrytitle">ALTER PUBLICATION</span></a>で動的に追加削除できます。
<code class="literal">ADD TABLE</code>および<code class="literal">DROP TABLE</code>操作はトランザクションの対象です。
ひとたびトランザクションがコミットされれば、正しいスナップショットでテーブルのレプリケーションが開始あるいは終了されます。
  </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="logical-replication.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="logical-replication.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="logical-replication-subscription.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 31. 論理レプリケーション </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 31.2. サブスクリプション</td></tr></table></div></body></html>