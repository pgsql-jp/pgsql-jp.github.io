<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>8.5. 日付/時刻データ型</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="datatype-binary.html" title="8.4. バイナリ列データ型" /><link rel="next" href="datatype-boolean.html" title="8.6. 論理値データ型" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">8.5. 日付/時刻データ型</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="datatype-binary.html" title="8.4. バイナリ列データ型">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="datatype.html" title="Chapter 8. データ型">Up</a></td><th width="60%" align="center">Chapter 8. データ型</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="datatype-boolean.html" title="8.6. 論理値データ型">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="DATATYPE-DATETIME"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.5. 日付/時刻データ型</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="datatype-datetime.html#DATATYPE-DATETIME-INPUT">8.5.1. 日付/時刻の入力</a></span></dt><dt><span class="sect2"><a href="datatype-datetime.html#DATATYPE-DATETIME-OUTPUT">8.5.2. 日付/時刻の出力</a></span></dt><dt><span class="sect2"><a href="datatype-datetime.html#DATATYPE-TIMEZONES">8.5.3. 時間帯</a></span></dt><dt><span class="sect2"><a href="datatype-datetime.html#DATATYPE-INTERVAL-INPUT">8.5.4. 時間間隔の入力</a></span></dt><dt><span class="sect2"><a href="datatype-datetime.html#DATATYPE-INTERVAL-OUTPUT">8.5.5. 時間間隔の出力</a></span></dt></dl></div><a id="id-1.5.7.13.2" class="indexterm"></a><a id="id-1.5.7.13.3" class="indexterm"></a><a id="id-1.5.7.13.4" class="indexterm"></a><a id="id-1.5.7.13.5" class="indexterm"></a><a id="id-1.5.7.13.6" class="indexterm"></a><a id="id-1.5.7.13.7" class="indexterm"></a><a id="id-1.5.7.13.8" class="indexterm"></a><a id="id-1.5.7.13.9" class="indexterm"></a><a id="id-1.5.7.13.10" class="indexterm"></a><a id="id-1.5.7.13.11" class="indexterm"></a><p><span class="productname">PostgreSQL</span>では、<a class="xref" href="datatype-datetime.html#DATATYPE-DATETIME-TABLE" title="Table 8.9. 日付/時刻データ型">Table 8.9</a>に示されている<acronym class="acronym">SQL</acronym>の日付と時刻データ型のすべてがサポートされています。
これらのデータ型で利用できる演算については<a class="xref" href="functions-datetime.html" title="9.9. 日付/時刻関数と演算子">Section 9.9</a>で説明します。
グレゴリオ暦が導入されるより前の年であっても（<a class="xref" href="datetime-units-history.html" title="B.4. 単位の歴史">Section B.4</a>参照）、日付はグレゴリオ暦にしたがって計算されます。
   </p><div class="table" id="DATATYPE-DATETIME-TABLE"><p class="title"><strong>Table 8.9. 日付/時刻データ型</strong></p><div class="table-contents"><table class="table" summary="日付/時刻データ型" border="1"><colgroup><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th>型名</th><th>格納サイズ</th><th>説明</th><th>最遠の過去</th><th>最遠の未来</th><th>精度</th></tr></thead><tbody><tr><td><code class="type">timestamp [ (<em class="replaceable"><code>p</code></em>) ] [ without time zone ]</code></td><td>8 バイト</td><td>日付と時刻両方（時間帯なし）</td><td>4713 BC</td><td>294276 AD</td><td>1マイクロ秒</td></tr><tr><td><code class="type">timestamp [ (<em class="replaceable"><code>p</code></em>) ] with time zone</code></td><td>8バイト</td><td>日付と時刻両方、時間帯付き</td><td>4713 BC</td><td>294276 AD</td><td>1マイクロ秒</td></tr><tr><td><code class="type">date</code></td><td>4バイト</td><td>日付（時刻なし）</td><td>4713 BC</td><td>5874897 AD</td><td>1日</td></tr><tr><td><code class="type">time [ (<em class="replaceable"><code>p</code></em>) ] [ without time zone ]</code></td><td>8バイト</td><td>時刻（日付なし）</td><td>00:00:00</td><td>24:00:00</td><td>1マイクロ秒</td></tr><tr><td><code class="type">time [ (<em class="replaceable"><code>p</code></em>) ] with time zone</code></td><td>12 バイト</td><td>時刻（日付なし)、時間帯付き</td><td>00:00:00+1459</td><td>24:00:00-1459</td><td>1 マイクロ秒</td></tr><tr><td><code class="type">interval [ <em class="replaceable"><code>fields</code></em> ] [ (<em class="replaceable"><code>p</code></em>) ]</code></td><td>16バイト</td><td>時間間隔</td><td>-178000000年</td><td>178000000年</td><td>1マイクロ秒</td></tr></tbody></table></div></div><br class="table-break" /><div class="note"><h3 class="title">Note</h3><p>標準SQLでは、単なる<code class="type">timestamp</code>という記述は<code class="type">timestamp without time zone</code>と同じであることを要求します。
<span class="productname">PostgreSQL</span>はこれに準じます。
<code class="type">timestamp with time zone</code>は<code class="type">timestamptz</code>と省略することができますが、これは<span class="productname">PostgreSQL</span>の拡張です。
    </p></div><p><code class="type">time</code>、<code class="type">timestamp</code>および<code class="type">interval</code>は秒フィールドに保有されている小数点以下の桁数を指定する精度値<em class="replaceable"><code>p</code></em>をオプションで受け付けます。
デフォルトでは、精度についての明示的な限界はありません。
<em class="replaceable"><code>p</code></em>の許容範囲は0から6です。
   </p><p><code class="type">time</code>型で8バイト整数が使用された場合には、<em class="replaceable"><code>p</code></em>は0から6までの範囲で使用可能です。
また、浮動小数点が使用される場合には0から10までが使用可能です。
   </p><p>   
<code class="type">interval</code>データ型には追加のオプションがあり、以下の１つの語句を使用して格納されるフィールドの集合を制約します。
</p><pre class="literallayout">YEAR
MONTH
DAY
HOUR
MINUTE
SECOND
YEAR TO MONTH
DAY TO HOUR
DAY TO MINUTE
DAY TO SECOND
HOUR TO MINUTE
HOUR TO SECOND
MINUTE TO SECOND</pre><p>
<em class="replaceable"><code>fields</code></em>および<em class="replaceable"><code>p</code></em>が共に指定されると、精度は秒のみに適用されるので、<em class="replaceable"><code>fields</code></em>は<code class="literal">SECOND</code>を含まなければならないことに注意してください。
   </p><p><code class="type">time with time zone</code>は標準SQLで定義されていますが、その定義は、その有用性を疑問視することになりかねない特性を示しています。
ほとんどの場合、<code class="type">date</code>、<code class="type">time</code>、<code class="type">timestamp without time zone</code>、<code class="type">timestamp with time zone</code>の組み合わせで、すべてのアプリケーションで要求される日付/時刻機能すべてを提供しているはずです。
   </p><p><code class="type">abstime</code>と<code class="type">reltime</code>は精度の低いデータ型で、内部で使用されます。
アプリケーションでこれらの型の使用を避けてください。
これら内部型は今後のリリースで削除される可能性があります。
   </p><div class="sect2" id="DATATYPE-DATETIME-INPUT"><div class="titlepage"><div><div><h3 class="title">8.5.1. 日付/時刻の入力</h3></div></div></div><p>日付と時刻の入力は、ISO 8601、<acronym class="acronym">SQL</acronym>互換、伝統的な<span class="productname">POSTGRES</span>、その他を含むほとんどの適正とみなされる書式を受け付けます。
一部の書式では日付の入力における日-月-年の順序が曖昧ですが、これらのフィールドの期待される順序を指定する方式が提供されています。
<a class="xref" href="runtime-config-client.html#GUC-DATESTYLE">DateStyle</a>パラメータを<code class="literal">MDY</code>に設定すれば、月日年という順で解釈され、<code class="literal">DMY</code>に設定すれば日月年という順で、<code class="literal">YMD</code>に設定すれば年月日という順で解釈されます。
    </p><p><span class="productname">PostgreSQL</span>は日付/時刻入力の取扱いにおいて標準<acronym class="acronym">SQL</acronym>の要求よりも柔軟です。
日付/時刻の入力における厳密な構文解析規則と、月および週、そして時間帯を含む使用可能なテキストフィールドに関しては<a class="xref" href="datetime-appendix.html" title="Appendix B. 日付/時刻のサポート">Appendix B</a>を参照してください。
    </p><p>日付や時刻リテラルの入力では、テキスト文字列のように、単一引用符で囲む必要があることを思い出してください。
詳細は<a class="xref" href="sql-syntax-lexical.html#SQL-SYNTAX-CONSTANTS-GENERIC" title="4.1.2.7. 他の型の定数">Section 4.1.2.7</a>を参照してください。
<acronym class="acronym">SQL</acronym>では下記の構文が要求されます。
</p><pre class="synopsis"><em class="replaceable"><code>type</code></em> [ (<em class="replaceable"><code>p</code></em>) ] '<em class="replaceable"><code>value</code></em>'</pre><p>
ここで、<em class="replaceable"><code>p</code></em>は秒フィールドの小数点以下の桁数を与えるオプションの精度の指定です。
精度は<code class="type">time</code>、<code class="type">timestamp</code>および<code class="type">interval</code>型に対して0から6の範囲で設定できます。
値の許容範囲は既に説明しています。
定数指定において精度指定がない場合は、リテラル値の精度がデフォルトとして使われます(ただし、６桁を超えることはありません)。
    </p><div class="sect3" id="id-1.5.7.13.20.5"><div class="titlepage"><div><div><h4 class="title">8.5.1.1. 日付</h4></div></div></div><a id="id-1.5.7.13.20.5.2" class="indexterm"></a><p><a class="xref" href="datatype-datetime.html#DATATYPE-DATETIME-DATE-TABLE" title="Table 8.10. 日付入力">Table 8.10</a>は<code class="type">date</code>型で入力可能なものの一部を示します。
    </p><div class="table" id="DATATYPE-DATETIME-DATE-TABLE"><p class="title"><strong>Table 8.10. 日付入力</strong></p><div class="table-contents"><table class="table" summary="日付入力" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>例</th><th>説明</th></tr></thead><tbody><tr><td>1999-01-08</td><td>ISO 8601。すべてのモードで1月8日になります（推奨書式）。</td></tr><tr><td>January 8, 1999</td><td>すべての<code class="varname">datestyle</code>入力モードにおいて曖昧さがありません。</td></tr><tr><td>1/8/1999</td><td><code class="literal">MDY</code>モードでは1月8日、<code class="literal">DMY</code>モードでは8月1日。</td></tr><tr><td>1/18/1999</td><td><code class="literal">MDY</code>モードでは1月18日、他のモードでは拒絶されます。</td></tr><tr><td>01/02/03</td><td><code class="literal">MDY</code>モードでは2003年1月2日、<code class="literal">DMY</code>モードでは2003年2月1日、<code class="literal">YMD</code>モードでは2001年2月3日。
         </td></tr><tr><td>1999-Jan-08</td><td>すべてのモードで1月8日になります。</td></tr><tr><td>Jan-08-1999</td><td>すべてのモードで1月8日になります。</td></tr><tr><td>08-Jan-1999</td><td>すべてのモードで1月8日になります。</td></tr><tr><td>99-Jan-08</td><td><code class="literal">YMD</code>モードで1月8日、他のモードではエラー。</td></tr><tr><td>08-Jan-99</td><td>1月8日。ただし<code class="literal">YMD</code>モードではエラー。</td></tr><tr><td>Jan-08-99</td><td>1月8日。ただし<code class="literal">YMD</code>モードではエラー。</td></tr><tr><td>19990108</td><td>ISO 8601。すべてのモードで1月8日になります。</td></tr><tr><td>990108</td><td>ISO 8601。すべてのモードで1月8日になります。</td></tr><tr><td>1999.008</td><td>年と年間通算日</td></tr><tr><td>J2451187</td><td>ユリウス日</td></tr><tr><td>January 8, 99 BC</td><td>西暦紀元前99年</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect3" id="id-1.5.7.13.20.6"><div class="titlepage"><div><div><h4 class="title">8.5.1.2. 時刻</h4></div></div></div><a id="id-1.5.7.13.20.6.2" class="indexterm"></a><a id="id-1.5.7.13.20.6.3" class="indexterm"></a><a id="id-1.5.7.13.20.6.4" class="indexterm"></a><p>ある一日の時刻を表す型は<code class="type">time [(<em class="replaceable"><code>p</code></em>) ] without time zone</code>と<code class="type">time [ (<em class="replaceable"><code>p</code></em>) ] with time zone</code>です。
<code class="type">time</code>単独では<code class="type">time without time zone</code>と同じです。
     </p><p>これらの型への有効な入力は、時刻、その後にオプションで時間帯からなります。
（<a class="xref" href="datatype-datetime.html#DATATYPE-DATETIME-TIME-TABLE" title="Table 8.11. 時刻入力">Table 8.11</a>と<a class="xref" href="datatype-datetime.html#DATATYPE-TIMEZONE-TABLE" title="Table 8.12. 時間帯入力">Table 8.12</a>を参照してください。）
<code class="type">time without time zone</code>への入力に時間帯が指定された場合、時間帯は警告なく無視されます。
また、日付を指定することもできますが、<code class="literal">America/New_York</code>のような夏時間規則を含む時間帯名を使用しているのでなければ、それは無視されます。
夏時間規則のある時間帯名の場合は、標準と夏時間のどちらを適用するかを決定できるように、日付の指定が必要です。
適切な時間帯オフセットは<code class="type">time with time zone</code>型の値に記録されています。
     </p><div class="table" id="DATATYPE-DATETIME-TIME-TABLE"><p class="title"><strong>Table 8.11. 時刻入力</strong></p><div class="table-contents"><table class="table" summary="時刻入力" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>例</th><th>説明</th></tr></thead><tbody><tr><td><code class="literal">04:05:06.789</code></td><td>ISO 8601</td></tr><tr><td><code class="literal">04:05:06</code></td><td>ISO 8601</td></tr><tr><td><code class="literal">04:05</code></td><td>ISO 8601</td></tr><tr><td><code class="literal">040506</code></td><td>ISO 8601</td></tr><tr><td><code class="literal">04:05 AM</code></td><td>04:05と同じ。AMは値に影響を与えない。</td></tr><tr><td><code class="literal">04:05 PM</code></td><td>16:05と同じ。時の入力は12以下でなければなりません。</td></tr><tr><td><code class="literal">04:05:06.789-8</code></td><td>ISO 8601</td></tr><tr><td><code class="literal">04:05:06-08:00</code></td><td>ISO 8601</td></tr><tr><td><code class="literal">04:05-08:00</code></td><td>ISO 8601</td></tr><tr><td><code class="literal">040506-08</code></td><td>ISO 8601</td></tr><tr><td><code class="literal">04:05:06 PST</code></td><td>省略形による時間帯の指定。</td></tr><tr><td><code class="literal">2003-04-12 04:05:06 America/New_York</code></td><td>名前による時間帯の指定。</td></tr></tbody></table></div></div><br class="table-break" /><div class="table" id="DATATYPE-TIMEZONE-TABLE"><p class="title"><strong>Table 8.12. 時間帯入力</strong></p><div class="table-contents"><table class="table" summary="時間帯入力" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>例</th><th>説明</th></tr></thead><tbody><tr><td><code class="literal">PST</code></td><td>省略形（米国太平洋標準時間）</td></tr><tr><td><code class="literal">America/New_York</code></td><td>完全な時間帯名</td></tr><tr><td><code class="literal">PST8PDT</code></td><td>POSIX書式の時間帯指定</td></tr><tr><td><code class="literal">-8:00</code></td><td>ISO 8601。PST用のオフセット</td></tr><tr><td><code class="literal">-800</code></td><td>ISO 8601。PST用のオフセット</td></tr><tr><td><code class="literal">-8</code></td><td>ISO 8601。PST用のオフセット</td></tr><tr><td><code class="literal">zulu</code></td><td>UTC用の軍事用略記</td></tr><tr><td><code class="literal">z</code></td><td><code class="literal">zulu</code>の略記</td></tr></tbody></table></div></div><br class="table-break" /><p>時間帯の指定方法に関する詳細は<a class="xref" href="datatype-datetime.html#DATATYPE-TIMEZONES" title="8.5.3. 時間帯">Section 8.5.3</a>を参照してください。
    </p></div><div class="sect3" id="id-1.5.7.13.20.7"><div class="titlepage"><div><div><h4 class="title">8.5.1.3. タイムスタンプ</h4></div></div></div><a id="id-1.5.7.13.20.7.2" class="indexterm"></a><a id="id-1.5.7.13.20.7.3" class="indexterm"></a><a id="id-1.5.7.13.20.7.4" class="indexterm"></a><p>タイムスタンプ型への有効な入力は、日付と時刻を連結し、さらにその後にオプションで時間帯、その後にオプションで<code class="literal">AD</code>もしくは<code class="literal">BC</code>からなります。
（他に<code class="literal">AD</code>/<code class="literal">BC</code>を時間帯の前に付ける方法もありますが、これは推奨される順序ではありません。）
したがって、

</p><pre class="programlisting">1999-01-08 04:05:06</pre><p>
と
</p><pre class="programlisting">1999-01-08 04:05:06 -8:00</pre><p>

は有効な値で、<acronym class="acronym">ISO</acronym> 8601に準拠しています。
また、広く使用されている
</p><pre class="programlisting">January 8 04:05:06 1999 PST</pre><p>
という書式もサポートされます。
     </p><p>標準<acronym class="acronym">SQL</acronym>では、<code class="type">timestamp without time zone</code>のリテラルと<code class="type">timestamp with time zone</code>のリテラルを、時刻の後の<span class="quote">“<span class="quote">+</span>”</span>もしくは<span class="quote">“<span class="quote">-</span>”</span>記号と時間帯補正の有無により区別します。
そのため、標準に従うと、

</p><pre class="programlisting">TIMESTAMP '2004-10-19 10:23:54'</pre><p>

は<code class="type">timestamp without time zone</code>に、

</p><pre class="programlisting">TIMESTAMP '2004-10-19 10:23:54+02'</pre><p>

は<code class="type">timestamp with time zone</code>になります。
<span class="productname">PostgreSQL</span>では、その型を決める前に文字列リテラルの内容を検証しません。
そのため上の例はいずれも<code class="type">timestamp without time zone</code>として扱います。
リテラルが確実に<code class="type">timestamp with time zone</code>として扱われるようにするには、例えば、</p><pre class="programlisting">TIMESTAMP WITH TIME ZONE '2004-10-19 10:23:54+02'</pre><p>のように正しい明示的な型を指定してください。
<code class="type">timestamp without time zone</code>と決定済みのリテラルでは、<span class="productname">PostgreSQL</span>は警告なく時間帯情報をすべて無視します。
つまり、結果の値は明示された入力値の日付/時刻フィールドから持ち込まれますが、時間帯の調整はなされません。
     </p><p><code class="type">timestamp with time zone</code>について内部に格納されている値は常にUTCです（協定世界時、歴史的にグリニッジ標準時<acronym class="acronym">GMT</acronym>として知られています）。
時間帯が明示的に指定された入力値は、その時間帯に適したオフセットを使用してUTCに変換されます。
入力文字列に時間帯が指定されていない場合は、システムの<a class="xref" href="runtime-config-client.html#GUC-TIMEZONE">TimeZone</a>パラメータに示されている値が時間帯とみなされ、<code class="varname">timezone</code>時間帯用のオフセットを使用してUTCに変換されます。
     </p><p><code class="type">timestamp with time zone</code>の値が出力されると、この値はUTCから現行の<code class="varname">timezone</code>に変換され、その時間帯のローカル時間として表示されます。
他の時間帯での時間を表示するには、<code class="varname">timezone</code>を変更するか、あるいは<code class="literal">AT TIME ZONE</code>構文（<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-ZONECONVERT" title="9.9.3. AT TIME ZONE">Section 9.9.3</a> を参照）を使用します。
     </p><p><code class="type">timestamp without time zone</code>と<code class="type">timestamp with time zone</code>の間の変換では、通常<code class="type">timestamp without time zone</code>の値は<code class="varname">timezone</code>のローカル時間としてみなされる、または、指定されるものと想定されます。
<code class="literal">AT TIME ZONE</code>を使用する変換では、異なる時間帯を指定できます。
     </p></div><div class="sect3" id="id-1.5.7.13.20.8"><div class="titlepage"><div><div><h4 class="title">8.5.1.4. 特別な値</h4></div></div></div><a id="id-1.5.7.13.20.8.2" class="indexterm"></a><a id="id-1.5.7.13.20.8.3" class="indexterm"></a><p><span class="productname">PostgreSQL</span>では利便性のために、<a class="xref" href="datatype-datetime.html#DATATYPE-DATETIME-SPECIAL-TABLE" title="Table 8.13. 特別な日付/時刻定数">Table 8.13</a>に示されているような特別な日付/時刻入力値をサポートしています。
<code class="literal">infinity</code>と<code class="literal">-infinity</code>の値は、特別にシステム内部で表現され、変更されずに表示されます。
他のものは、単に簡略化された表記で、読み込まれるときに通常の日付/時刻値に変換されます。
（特に<code class="literal">now</code>とその関連文字列は読み込まれるとすぐにその時点の値に変換されます。）
これらの値はすべて、SQLコマンドで定数として使う場合は、単一引用符でくくらなければなりません。
     </p><div class="table" id="DATATYPE-DATETIME-SPECIAL-TABLE"><p class="title"><strong>Table 8.13. 特別な日付/時刻定数</strong></p><div class="table-contents"><table class="table" summary="特別な日付/時刻定数" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>入力文字列</th><th>有効な型</th><th>説明</th></tr></thead><tbody><tr><td><code class="literal">epoch</code></td><td><code class="type">date</code>, <code class="type">timestamp</code></td><td>1970-01-01 00:00:00+00（Unixシステム時間におけるゼロ）</td></tr><tr><td><code class="literal">infinity</code></td><td><code class="type">date</code>, <code class="type">timestamp</code></td><td>他のすべてのタイムスタンプより将来</td></tr><tr><td><code class="literal">-infinity</code></td><td><code class="type">date</code>, <code class="type">timestamp</code></td><td>他のすべてのタイムスタンプより過去</td></tr><tr><td><code class="literal">now</code></td><td><code class="type">date</code>, <code class="type">time</code>, <code class="type">timestamp</code></td><td>現トランザクションの開始時刻</td></tr><tr><td><code class="literal">today</code></td><td><code class="type">date</code>, <code class="type">timestamp</code></td><td>今日の午前０時</td></tr><tr><td><code class="literal">tomorrow</code></td><td><code class="type">date</code>, <code class="type">timestamp</code></td><td>明日の午前０時</td></tr><tr><td><code class="literal">yesterday</code></td><td><code class="type">date</code>, <code class="type">timestamp</code></td><td>昨日の午前０時</td></tr><tr><td><code class="literal">allballs</code></td><td><code class="type">time</code></td><td>00:00:00.00 UTC</td></tr></tbody></table></div></div><br class="table-break" /><p><acronym class="acronym">SQL</acronym>互換の関数である、<code class="literal">CURRENT_DATE</code>、<code class="literal">CURRENT_TIME</code>、<code class="literal">CURRENT_TIMESTAMP</code>、<code class="literal">LOCALTIME</code>、<code class="literal">LOCALTIMESTAMP</code>も、対応するデータ型の現在の日付または時間の値を取得するために使用できます。
後の4つでは、オプションとして秒以下の精度指定が可能です。
（<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT" title="9.9.4. 現在の日付/時刻">Section 9.9.4</a> を参照してください。）
これらはSQL関数であり、データ入力文字列として認識<span class="emphasis"><em>されない</em></span>ことに注意してください。
     </p></div></div><div class="sect2" id="DATATYPE-DATETIME-OUTPUT"><div class="titlepage"><div><div><h3 class="title">8.5.2. 日付/時刻の出力</h3></div></div></div><a id="id-1.5.7.13.21.2" class="indexterm"></a><a id="id-1.5.7.13.21.3" class="indexterm"></a><p>日付/時刻型の出力書式は、ISO 8601、<acronym class="acronym">SQL</acronym>（Ingres）、伝統的な<span class="productname">POSTGRES</span>（Unix <span class="application">date</span>書式）またはGermanの４つのいずれかに設定できます。
デフォルトは<acronym class="acronym">ISO</acronym>書式です。
（標準<acronym class="acronym">SQL</acronym>ではISO 8601書式の使用が定められています。
<span class="quote">“<span class="quote">SQL</span>”</span>という出力書式名は歴史的な事故です。）
<a class="xref" href="datatype-datetime.html#DATATYPE-DATETIME-OUTPUT-TABLE" title="Table 8.14. 日付/時刻の出力形式">Table 8.14</a>に各出力書式の例を示します。
<code class="type">date</code>と<code class="type">time</code>の書式は、例にあるとおり、それぞれ日付と時刻の部分です。しかし、<span class="productname">POSTGRES</span>では<acronym class="acronym">ISO</acronym>書式の日付部分のみを出力します。(YMDやMDYの場合12-17-1997を返し、DMYの場合17-12-1997を返します。)
    </p><div class="table" id="DATATYPE-DATETIME-OUTPUT-TABLE"><p class="title"><strong>Table 8.14. 日付/時刻の出力形式</strong></p><div class="table-contents"><table class="table" summary="日付/時刻の出力形式" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>様式指定</th><th>説明</th><th>例</th></tr></thead><tbody><tr><td><code class="literal">ISO</code></td><td>ISO 8601, 標準SQL</td><td><code class="literal">1997-12-17 07:37:16-08</code></td></tr><tr><td><code class="literal">SQL</code></td><td>伝統的な様式</td><td><code class="literal">12/17/1997 07:37:16.00 PST</code></td></tr><tr><td><code class="literal">Postgres</code></td><td>独自の様式</td><td><code class="literal">Wed Dec 17 07:37:16 1997 PST</code></td></tr><tr><td><code class="literal">German</code></td><td>地域限定様式</td><td><code class="literal">17.12.1997 07:37:16.00 PST</code></td></tr></tbody></table></div></div><br class="table-break" /><div class="note"><h3 class="title">Note</h3><p>ISO 8601の仕様では日付と時刻を区切るために大文字の<code class="literal">T</code>を使用します。
<span class="productname">PostgreSQL</span>は入力ではこの書式を受け付けますが、上記のように出力では<code class="literal">T</code>ではなく空白を使用します。
これは読みやすさのため、そしてRFC3339や他のデータベースシステムとの整合性を保つためです。
     </p></div><p><acronym class="acronym">SQL</acronym>とPOSTGRESでは、DMYフィールド順が指定された場合は月の前に日が現れます。
指定がなければ日の前に月が現れます。
（この設定が入力値の解釈にどう影響を与えるのかについては<a class="xref" href="datatype-datetime.html#DATATYPE-DATETIME-INPUT" title="8.5.1. 日付/時刻の入力">Section 8.5.1</a>を参考にしてください）。
<a class="xref" href="datatype-datetime.html#DATATYPE-DATETIME-OUTPUT2-TABLE" title="Table 8.15. 日付の順序の慣習">Table 8.15</a>に例を示します。
    </p><div class="table" id="DATATYPE-DATETIME-OUTPUT2-TABLE"><p class="title"><strong>Table 8.15. 日付の順序の慣習</strong></p><div class="table-contents"><table class="table" summary="日付の順序の慣習" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th><code class="varname">datestyle</code>の設定</th><th>入力の順序</th><th>出力例</th></tr></thead><tbody><tr><td><code class="literal">SQL, DMY</code></td><td><em class="replaceable"><code>day</code></em>（日）/<em class="replaceable"><code>month</code></em>（月）/<em class="replaceable"><code>year</code></em>（年）</td><td><code class="literal">17/12/1997 15:37:16.00 CET</code></td></tr><tr><td><code class="literal">SQL, MDY</code></td><td><em class="replaceable"><code>month</code></em>（月）/<em class="replaceable"><code>day</code></em>（日）/<em class="replaceable"><code>year</code></em>（年）</td><td><code class="literal">12/17/1997 07:37:16.00 PST</code></td></tr><tr><td><code class="literal">Postgres, DMY</code></td><td><em class="replaceable"><code>day</code></em>（日）/<em class="replaceable"><code>month</code></em>（月）/<em class="replaceable"><code>year</code></em>（年）</td><td><code class="literal">Wed 17 Dec 07:37:16 1997 PST</code></td></tr></tbody></table></div></div><br class="table-break" /><p>ユーザは<code class="command">SET DATESTYLE</code>コマンド、<code class="filename">postgresql.conf</code>構成ファイルの<a class="xref" href="runtime-config-client.html#GUC-DATESTYLE">DateStyle</a>パラメータ、そしてサーバかクライアントの<code class="envar">PGDATESTYLE</code>環境変数を使用して、日付/時刻の様式を選択することができます。
    </p><p>日付/時刻出力のより柔軟な書式設定方法として、書式設定関数<code class="function">to_char</code>（<a class="xref" href="functions-formatting.html" title="9.8. データ型書式設定関数">Section 9.8</a>を参照）を使用することもできます。
    </p></div><div class="sect2" id="DATATYPE-TIMEZONES"><div class="titlepage"><div><div><h3 class="title">8.5.3. 時間帯</h3></div></div></div><a id="id-1.5.7.13.22.2" class="indexterm"></a><p>時間帯および時間帯の取り決めは地球の幾何学的要素のみでなく政治的決定に影響されます。
世界にまたがる時間帯は1900年代に標準化されたようですが、特に夏時間規則の点で、勝手に変更する傾向が続いています。
<span class="productname">PostgreSQL</span>は歴史的な時間帯ルールについての情報に、広く使われているIANA時間帯データベースを使用します。
将来の時間は、ある与えられた時間帯に対する最新の既知のルールが、将来長きに渡りそのまま遵守が継続されるということを前提としています。
   </p><p><span class="productname">PostgreSQL</span>は典型的な使用法については標準<acronym class="acronym">SQL</acronym>への互換性に対し最大限の努力をしています。
しかし、標準<acronym class="acronym">SQL</acronym>には、日付と時刻のデータ型と機能に関する混乱が見受けられます。
2つの明らかな問題点を以下に示します。

     </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="type">date</code>型にはそれに関連する時間帯を持てませんが、<code class="type">time</code>型にはあります。
現実の世界において、時間帯のオフセットが夏時間への切り替えにより年間を通じて変化することから、時刻と同様に日付もそれに結び付けられていないと意味がありません。
       </p></li><li class="listitem"><p>デフォルトの時間帯は<acronym class="acronym">UTC</acronym>からの整数定数オフセットとして指定されています。
したがって<acronym class="acronym">DST</acronym>（夏時間）への切り替えをまたいで日付/時刻演算を行う場合、夏時間を適用することは不可能です。
       </p></li></ul></div><p>
    </p><p>このような問題を解決するためには、時間帯を使用する際に日付と時刻の両方を保持できる日付/時刻データ型を使用することを勧めます。
<code class="type">time with time zone</code>型の使用はお勧め<span class="emphasis"><em>しません</em></span>
（もっとも<span class="productname">PostgreSQL</span>では、旧式のアプリケーションや、標準<acronym class="acronym">SQL</acronym>との互換性のために、<code class="type">time with time zone</code>型の使用をサポートしています）。
<span class="productname">PostgreSQL</span>は、日付または時刻のみを保持するデータ型のすべては使用中の時間帯であると前提しています。
    </p><p>すべての時間帯付きの日付と時刻は<acronym class="acronym">UTC</acronym>で内部的に保存されます。
これらはクライアントに表示される前に<a class="xref" href="runtime-config-client.html#GUC-TIMEZONE">TimeZone</a>設定パラメータで指定された時間帯におけるローカル時間に変換されます。
    </p><p><span class="productname">PostgreSQL</span>では、3つの形式で時間帯を指定することができます。
     </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">America/New_York</code>などの完全な時間帯名称。
認識できる時間帯名称は<code class="literal">pg_timezone_names</code>ビューに列挙されています（<a class="xref" href="view-pg-timezone-names.html" title="51.90. pg_timezone_names">Section 51.90</a>を参照してください）。
<span class="productname">PostgreSQL</span>はこの目的のためによく使用されているIANA時間帯データを使用します。
したがって、多くの他のソフトウェアでも同じ名前が認識されます。
       </p></li><li class="listitem"><p><code class="literal">PST</code>などの時間帯省略形。
こうした指定は、単に特定のUTCからのオフセットを定義します。
一方、完全な時間帯名称では夏時間遷移規則群も組み込まれます。
認識可能な省略形は<code class="literal">pg_timezone_abbrevs</code>ビューに列挙されています（<a class="xref" href="view-pg-timezone-abbrevs.html" title="51.89. pg_timezone_abbrevs">Section 51.89</a>を参照してください）。
<a class="xref" href="runtime-config-client.html#GUC-TIMEZONE">TimeZone</a>設定パラメータおよび<a class="xref" href="runtime-config-logging.html#GUC-LOG-TIMEZONE">log_timezone</a>設定パラメータを時間帯省略形に設定することはできませんが、日付時刻型の入力値や<code class="literal">AT TIME ZONE</code>演算子に省略形を使用することができます。
       </p></li><li class="listitem"><p>時間帯名やその省略形に加え、<span class="productname">PostgreSQL</span>は、<em class="replaceable"><code>STD</code></em><em class="replaceable"><code>offset</code></em>や<em class="replaceable"><code>STD</code></em><em class="replaceable"><code>offset</code></em><em class="replaceable"><code>DST</code></em>という形式のPOSIX様式の時間帯指定を受付けます。
ここで、<em class="replaceable"><code>STD</code></em>は時間帯省略形、<em class="replaceable"><code>offset</code></em>はUTCから西に数えた時間単位のオフセットです。
また、オプションで夏時間時間帯の省略形の<em class="replaceable"><code>DST</code></em>を指定すると、指定オフセットから1時間進むものとみなされます。
例えば、<code class="literal">EST5EDT</code>が認識済みの時間帯名でないとしても、受付けられ、合衆国東海岸時間と同じものとして動作します。
この構文では、時間帯の短縮は文字列、あるいは任意の文字列を山括弧(<code class="literal">&lt;&gt;</code>)で括ったもので指定できます。
夏時間帯の省略名があると、IANA時間帯データベースの<code class="filename">posixrules</code>項目で使用される夏時間変換規則と同じ規則に従って使用されるものとみなされます。
標準的な<span class="productname">PostgreSQL</span>インストレーションでは、<code class="filename">posixrules</code>は<code class="literal">US/Eastern</code>と同じです。
このためPOSIX書式の時間帯指定は米国の夏時間規則に従います。
必要に応じて<code class="filename">posixrules</code>ファイルを置き換えることで、この動作を調整することができます。
       </p></li></ul></div><p>

一言で言うと、これは省略形と正式名称との差異です。
省略形はUTCから固定したオフセットを表わすのに対して、多くの正式名称はローカルの夏時間規定を暗示するので、2つのUTCオフセットがあるかもしれません。
例えば<code class="literal">2014-06-04 12:00 America/New_York</code>はニューヨークの正午を示しますが、これはこの日について言えば東部夏時間(UTC-4)です。
つまり<code class="literal">2014-06-04 12:00 EDT</code>はこれと同時刻を示します。
しかし、<code class="literal">2014-06-04 12:00 EST</code>は、その日に夏時間が使用されていたかどうかに関わらず、東部標準時間(UTC-5)での正午を示します。
    </p><p>問題を更に複雑にしているのは、一部の管轄は同じ略号を使って、年によって異なるUTCオフセットを表していることです。
例えばモスクワでは<code class="literal">MSK</code>はある年ではUTC+3を意味しますが、別の年ではUTC+4を意味します。
<span class="application">PostgreSQL</span>ではそのような略号について、指定の日に何を意味していたか（あるいは最も最近にどういう意味だったか）に従って解釈します。
しかし、<code class="literal">EST</code>の例にあるように、必ずしもその日付における地方常用時を示しているとは限りません。
    </p><p>時間帯省略形の正当性を検査しないため、POSIX書式時間帯機能ではおかしな入力を警告なく受け付けてしまう可能性があることに注意すべきです。
例えば、<code class="literal">SET TIMEZONE TO FOOBAR0</code>でも動作します。
このとき、システムは事実上、UTCについての奇妙な省略形を使用する状態になります。
他にも、POSIX時間帯名称では正のオフセットがグリニッジの<span class="emphasis"><em>西</em></span>側で使用されるという問題には注意しなければなりません。
<span class="productname">PostgreSQL</span>は、他ではすべてISO-8601規約にしたがい、正の時間帯オフセットはグリニッジの<span class="emphasis"><em>東</em></span>としています。
    </p><p>すべての場合において、時間帯名や略号は大文字小文字の区別なく認識されます。
（これは<span class="productname">PostgreSQL</span>の8.2より前のバージョンからの変更です。
以前は、文脈によって大文字小文字が区別される場合と、されない場合がありました。）
    </p><p>時間帯名、省略形のどちらもサーバ内に組み込まれるわけではありません。
インストールディレクトリの<code class="filename">.../share/timezone/</code>および<code class="filename">.../share/timezonesets/</code>の下に保存される構成ファイルから取得されます（<a class="xref" href="datetime-config-files.html" title="B.3. 日付/時刻設定ファイル">Section B.3</a>を参照ください）。
    </p><p><a class="xref" href="runtime-config-client.html#GUC-TIMEZONE">TimeZone</a>は<code class="filename">postgresql.conf</code>ファイルや<a class="xref" href="runtime-config.html" title="Chapter 19. サーバの設定">Chapter 19</a>で説明する他の標準的な方法で設定することができます。
以下に、いくつか特別な設定方法を示します。

     </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><acronym class="acronym">SQL</acronym>コマンド<code class="command">SET TIME ZONE</code>はセッションの時間帯を設定します。
これは<code class="command">SET TIMEZONE TO</code>の別名ですが、SQL仕様の構文へのより高い互換性があります。
       </p></li><li class="listitem"><p><code class="envar">PGTZ</code>環境変数は、<span class="application">libpq</span>クライアントが接続時にサーバに<code class="command">SET TIME ZONE</code>コマンドを送信するために用いられます。
       </p></li></ul></div><p>
    </p></div><div class="sect2" id="DATATYPE-INTERVAL-INPUT"><div class="titlepage"><div><div><h3 class="title">8.5.4. 時間間隔の入力</h3></div></div></div><a id="id-1.5.7.13.23.2" class="indexterm"></a><p>     
<code class="type">interval</code>値は以下の冗長な構文を使って記述されます。

</p><pre class="synopsis">[<span class="optional">@</span>] <em class="replaceable"><code>quantity</code></em> <em class="replaceable"><code>unit</code></em> [<span class="optional"><em class="replaceable"><code>quantity</code></em> <em class="replaceable"><code>unit</code></em>...</span>] [<span class="optional"><em class="replaceable"><code>direction</code></em></span>]</pre><p>

ここで、<em class="replaceable"><code>quantity</code></em>は（符号付き）時間量、<em class="replaceable"><code>unit</code></em>（単位）は<code class="literal">microsecond</code>、<code class="literal">millisecond</code>、<code class="literal">second</code>（秒）、<code class="literal">minute</code>（分）、<code class="literal">hour</code>（時）、<code class="literal">day</code>（日）、<code class="literal">week</code>（週）、<code class="literal">month</code>（月）、<code class="literal">year</code>（年）、<code class="literal">decade</code>（10年単位）、<code class="literal">century</code>（100年単位）、<code class="literal">millennium</code>（1000年単位）あるいはこれらの単位の簡略形または複数形です。
<em class="replaceable"><code>direction</code></em>（方向）は<code class="literal">ago</code>もしくは空です。
アットマーク（<code class="literal">@</code>）はオプションで、付けても付けなくても構いません。
異なる単位における時間量は適切に符号を考慮して暗黙的に足されます。
<code class="literal">ago</code>はすべてのフィールドの正負を逆にします。
この構文はまた、<a class="xref" href="runtime-config-client.html#GUC-INTERVALSTYLE">IntervalStyle</a>が<code class="literal">postgres_verbose</code>に設定されている場合に時間間隔の出力でも使用されます。
    </p><p>    
日、時、分、および秒の時間量は明示的に単位を指定しなくても構いません。
例えば、<code class="literal">'1 12:59:10'</code>は<code class="literal">'1 day 12 hours 59 min 10 sec'</code>（1日と12時間59分10秒）と解釈されます。
また年と月の組み合わせはダッシュを使って指定することができます。
例えば、<code class="literal">'200-10'</code>は<code class="literal">'200 years 10 months'</code>（200年と10か月）と解釈されます。
（実際のところ、標準SQLで許されている簡略形はこれらだけです。
そして<code class="varname">IntervalStyle</code>が<code class="literal">sql_standard</code>に設定されている場合には、これらが出力で使用されます。）
    </p><p>    
標準の4.4.3.2節の<span class="quote">“<span class="quote">指定文字付書式</span>”</span>または4.4.3.3節の<span class="quote">“<span class="quote">代替書式</span>”</span>のどちらかを使用して、時間間隔値はISO 8601時間間隔として書くこともできます。
指定文字付の書式は以下のようなものです。
</p><pre class="synopsis">P <em class="replaceable"><code>quantity</code></em> <em class="replaceable"><code>unit</code></em> [<span class="optional"> <em class="replaceable"><code>quantity</code></em> <em class="replaceable"><code>unit</code></em> ...</span>] [<span class="optional"> T [<span class="optional"> <em class="replaceable"><code>quantity</code></em> <em class="replaceable"><code>unit</code></em> ...</span>]</span>]</pre><p>
文字列は<code class="literal">P</code>で始まらなければならず、また、日と時間を区切る<code class="literal">T</code>を含めることができます。
利用可能な単位の省略形を<a class="xref" href="datatype-datetime.html#DATATYPE-INTERVAL-ISO8601-UNITS" title="Table 8.16. ISO 8601における時間間隔単位の省略形">Table 8.16</a>に示します。
単位は省略しても構いませんし、任意の順番で指定できますが、1日より小さな単位は<code class="literal">T</code>の後に書かなければなりません。
特に<code class="literal">M</code>の意味は<code class="literal">T</code>の前にあるか後にあるかに依存します。
     </p><div class="table" id="DATATYPE-INTERVAL-ISO8601-UNITS"><p class="title"><strong>Table 8.16. ISO 8601における時間間隔単位の省略形</strong></p><div class="table-contents"><table class="table" summary="ISO 8601における時間間隔単位の省略形" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>省略形</th><th>意味</th></tr></thead><tbody><tr><td>Y</td><td>年</td></tr><tr><td>M</td><td>月（日付部分における）</td></tr><tr><td>W</td><td>週</td></tr><tr><td>D</td><td>日</td></tr><tr><td>H</td><td>時間</td></tr><tr><td>M</td><td>分（時刻部分における）</td></tr><tr><td>S</td><td>秒</td></tr></tbody></table></div></div><br class="table-break" /><p>     
別の書式を示します。
</p><pre class="synopsis">P [<span class="optional"> <em class="replaceable"><code>years</code></em>-<em class="replaceable"><code>months</code></em>-<em class="replaceable"><code>days</code></em> </span>] [<span class="optional"> T <em class="replaceable"><code>hours</code></em>:<em class="replaceable"><code>minutes</code></em>:<em class="replaceable"><code>seconds</code></em> </span>]</pre><p>
      
上の代替書式では、文字列は<code class="literal">P</code>から始まらなければなりません。
そして、<code class="literal">T</code>は時間間隔の日付部分と時刻部分とを分割します。
値はISO 8601日付と同様の数字で指定されます。
    </p><p>    
<em class="replaceable"><code>fields</code></em>指定を使って時間間隔定数を記述する場合、または、<em class="replaceable"><code>fields</code></em>仕様で定義された時間間隔列に文字列を割り当てる場合、マークされていない時間量の解釈は<em class="replaceable"><code>fields</code></em>に依存します。
例えば<code class="literal">INTERVAL '1' YEAR</code>は1年と解釈され、一方で<code class="literal">INTERVAL '1'</code>は1秒と解釈されます。
同時に、<em class="replaceable"><code>fields</code></em>仕様によって許可される最下位フィールドの<span class="quote">“<span class="quote">右側の</span>”</span>フィールド値は警告なしに破棄されます。
例えば、<code class="literal">INTERVAL '1 day 2:03:04' HOUR TO MINUTE</code>と書くことで、二番目のフィールドは削除されますが、日付フィールドは削除されません。
    </p><p>    
標準<acronym class="acronym">SQL</acronym>に従うと、時間間隔値のフィールドはすべて同じ符号を持たなければなりません。
このため、先頭の負の符号はすべてのフィールドに適用されます。
例えば時間間隔リテラル<code class="literal">'-1 2:03:04'</code>の負の符号は、日付部分にも時、分、秒部分にも適用されます。
<span class="productname">PostgreSQL</span>ではフィールドに異なる符号を持たせることができます。
また伝統的にテキスト形式表現における各フィールドは独立した符号を持つものとして扱われます。
このため、この例では時、分、秒部分は正であるとみなされます。
<code class="varname">IntervalStyle</code>が<code class="literal">sql_standard</code>に設定されている場合、先頭の符号はすべてのフィールドに適用されるものとみなされます（ただし他に符号がない場合のみです）。
さもなくば、伝統的な<span class="productname">PostgreSQL</span>の解釈が使用されます。
あいまいさを防ぐために、負のフィールドがある場合には個別に明示的な符号を付けることを勧めます。
    </p><p>冗長な入力書式、および、より簡略な書式の一部のフィールドでは、フィールド値は小数部分を持つことができます。
例えば<code class="literal">'1.5 week'</code>や<code class="literal">'01:02:03.45'</code>です。
こうした入力は格納の際適切な月数、日数、秒数に変換されます。
これが月または日数が小数になる結果となる場合、小数部分は1月は30日、1日は24時間という変換規則を使用して、より低い順のフィールドに加えられます。
例えば<code class="literal">'1.5 month'</code>は1月と15日となります。
秒だけが出力において小数を示すことになります。
    </p><p>    
<a class="xref" href="datatype-datetime.html#DATATYPE-INTERVAL-INPUT-EXAMPLES" title="Table 8.17. 時間間隔入力">Table 8.17</a>は有効な<code class="type">interval</code>入力のいくつかの例を示しています。
    </p><div class="table" id="DATATYPE-INTERVAL-INPUT-EXAMPLES"><p class="title"><strong>Table 8.17. 時間間隔入力</strong></p><div class="table-contents"><table class="table" summary="時間間隔入力" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>例</th><th>説明</th></tr></thead><tbody><tr><td>1-2</td><td>標準SQL書式。1年2ヶ月</td></tr><tr><td>3 4:05:06</td><td>標準SQL書式。3日4時間5分6秒</td></tr><tr><td>1 year 2 months 3 days 4 hours 5 minutes 6 seconds</td><td>伝統的Postgres書式。1年2月3日4時間5分6秒</td></tr><tr><td>P1Y2M3DT4H5M6S</td><td>ISO 8601 <span class="quote">“<span class="quote">指定文字付き書式</span>”</span>。意味は上と同じ</td></tr><tr><td>P0001-02-03T04:05:06</td><td>ISO 8601 <span class="quote">“<span class="quote">代替書式</span>”</span>。意味は上と同じ</td></tr></tbody></table></div></div><br class="table-break" /><p>     Internally <code class="type">interval</code> values are stored as months, days,
     and seconds. This is done because the number of days in a month
     varies, and a day can have 23 or 25 hours if a daylight savings
     time adjustment is involved.  The months and days fields are integers
     while the seconds field can store fractions.  Because intervals are
     usually created from constant strings or <code class="type">timestamp</code> subtraction,
     this storage method works well in most cases, but can cause unexpected
     results:

</p><pre class="programlisting">SELECT EXTRACT(hours from '80 minutes'::interval);
 date_part
-----------
         1

SELECT EXTRACT(days from '80 hours'::interval);
 date_part
-----------
         0</pre><p>

     Functions <code class="function">justify_days</code> and
     <code class="function">justify_hours</code> are available for adjusting days
     and hours that overflow their normal ranges.
    </p></div><div class="sect2" id="DATATYPE-INTERVAL-OUTPUT"><div class="titlepage"><div><div><h3 class="title">8.5.5. 時間間隔の出力</h3></div></div></div><a id="id-1.5.7.13.24.2" class="indexterm"></a><p>    
時間間隔型の出力書式は、<code class="literal">SET intervalstyle</code>コマンドを使用して、<code class="literal">sql_standard</code>、<code class="literal">postgres</code>、<code class="literal">postgres_verbose</code>または<code class="literal">iso_8601</code>の４つのうちの１つを設定できます。
デフォルトは<code class="literal">postgres</code>書式です。
<a class="xref" href="datatype-datetime.html#INTERVAL-STYLE-OUTPUT-TABLE" title="Table 8.18. 時間間隔出力形式の例">Table 8.18</a>はそれぞれの出力形式を示した例です。
    </p><p>    
<code class="literal">sql_standard</code>形式は、時間間隔値が標準制約（構成要素に正負が混在していない年数と月数のみ、または日数と時間のみ）を満足する場合、時間間隔リテラル文字列に対し標準SQLに準拠する出力を作成します。
それ以外の場合、出力は、標準的な年数-月数のリテラル文字列の後に日数-時間のリテラル文字列が続いたものになり、正負混在した時間間隔のあいまいさを無くすために明示的な符号が付加されます。
    </p><p>    
<code class="literal">postgres</code>書式の出力は、<a class="xref" href="runtime-config-client.html#GUC-DATESTYLE">DateStyle</a>パラメータが<code class="literal">ISO</code>に設定されたとき、8.4より前のリリースと一致します。
    </p><p>    
<code class="literal">postgres_verbose</code>書式の出力は、<a class="xref" href="runtime-config-client.html#GUC-DATESTYLE">DateStyle</a>パラメータが<code class="literal">ISO</code>以外に設定されたとき、8.4より前のリリースと一致します。
    </p><p>    
<code class="literal">iso_8601</code>書式の出力はISO 8601 標準の4.4.3.2節に記述の<span class="quote">“<span class="quote">format with designators（指名付き書式）</span>”</span>に一致します。
    </p><div class="table" id="INTERVAL-STYLE-OUTPUT-TABLE"><p class="title"><strong>Table 8.18. 時間間隔出力形式の例</strong></p><div class="table-contents"><table class="table" summary="時間間隔出力形式の例" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>形式指定</th><th>年-月時間間隔</th><th>日-時刻時間間隔</th><th>混在した時間間隔</th></tr></thead><tbody><tr><td><code class="literal">sql_standard</code></td><td>1-2</td><td>3 4:05:06</td><td>-1-2 +3 -4:05:06</td></tr><tr><td><code class="literal">postgres</code></td><td>1 year 2 mons</td><td>3 days 04:05:06</td><td>-1 year -2 mons +3 days -04:05:06</td></tr><tr><td><code class="literal">postgres_verbose</code></td><td>@ 1 year 2 mons</td><td>@ 3 days 4 hours 5 mins 6 secs</td><td>@ 1 year 2 mons -3 days 4 hours 5 mins 6 secs ago</td></tr><tr><td><code class="literal">iso_8601</code></td><td>P1Y2M</td><td>P3DT4H5M6S</td><td>P-1Y-2M3DT-4H-5M-6S</td></tr></tbody></table></div></div><br class="table-break" /></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="datatype-binary.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="datatype.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="datatype-boolean.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">8.4. バイナリ列データ型 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 8.6. 論理値データ型</td></tr></table></div></body></html>