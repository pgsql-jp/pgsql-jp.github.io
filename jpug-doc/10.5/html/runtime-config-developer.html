<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>19.17. 開発者向けのオプション</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="runtime-config-custom.html" title="19.16. 独自のオプション" /><link rel="next" href="runtime-config-short.html" title="19.18. 短いオプション" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">19.17. 開発者向けのオプション</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="runtime-config-custom.html" title="19.16. 独自のオプション">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="runtime-config.html" title="Chapter 19. サーバの設定">Up</a></td><th width="60%" align="center">Chapter 19. サーバの設定</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="runtime-config-short.html" title="19.18. 短いオプション">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="RUNTIME-CONFIG-DEVELOPER"><div class="titlepage"><div><div><h2 class="title" style="clear: both">19.17. 開発者向けのオプション</h2></div></div></div><p>    
     以下のパラメータは、<span class="productname">PostgreSQL</span>のソースコードに対する作業用のものです。
中には深刻な損傷を負ったデータベースの復旧に役立つものもあります。
実運用のデータベースでこれらを設定する理由はないはずです。
したがって、これらはサンプルの<code class="filename">postgresql.conf</code>からは除外されています。
これらのパラメータの多くは、それを動作させるために特殊なソースコンパイルを必要としていることに注意してください。
    </p><div class="variablelist"><dl class="variablelist"><dt id="GUC-ALLOW-SYSTEM-TABLE-MODS"><span class="term"><code class="varname">allow_system_table_mods</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.20.3.1.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       システムテーブルの構造変更を許可します。
これは<code class="command">initdb</code>で使用されます。
このパラメータはサーバ起動時にのみ設定可能です。
       </p></dd><dt id="GUC-IGNORE-SYSTEM-INDEXES"><span class="term"><code class="varname">ignore_system_indexes</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.20.3.2.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       システムテーブルの読み込み時にシステムインデックスを無視します（しかしテーブルが更新された時はインデックスを更新します）。
障害があるシステムインデックスを復旧する時、これは有用です。
セッションが始まった後に、このパラメータを変更することはできません。
       </p></dd><dt id="GUC-POST-AUTH-DELAY"><span class="term"><code class="varname">post_auth_delay</code> (<code class="type">integer</code>)
      <a id="id-1.6.6.20.3.3.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       非ゼロの場合、サーバプロセスが始まり認証手続きが終わった後に、指定した秒数の遅延が発生します。
これは、デバッガを使用してサーバプロセスに接続する機会を開発者に提供することを目的としています。
セッションが始まった後に、このパラメータを変更することはできません。
       </p></dd><dt id="GUC-PRE-AUTH-DELAY"><span class="term"><code class="varname">pre_auth_delay</code> (<code class="type">integer</code>)
      <a id="id-1.6.6.20.3.4.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       非ゼロの場合、ここで指定した秒数分の遅延が新しくサーバプロセスがforkした後、認証手続きに入る前に発生します。
これは、認証における誤動作を追跡するために、デバッガを使用してサーバプロセスに接続する機会を開発者に提供することを目的としたものです。
このパラメータは<code class="filename">postgresql.conf</code>ファイル内、または、サーバのコマンドラインでのみ設定可能です。
       </p></dd><dt id="GUC-TRACE-NOTIFY"><span class="term"><code class="varname">trace_notify</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.20.3.5.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       <code class="command">LISTEN</code>と<code class="command">NOTIFY</code>コマンドのための大量なデバッグ出力を生成します。
この出力をクライアントもしくはサーバログに送信するためには、それぞれ、<a class="xref" href="runtime-config-logging.html#GUC-CLIENT-MIN-MESSAGES">client_min_messages</a>もしくは<a class="xref" href="runtime-config-logging.html#GUC-LOG-MIN-MESSAGES">log_min_messages</a>は<code class="literal">DEBUG1</code>以下でなければなりません。
       </p></dd><dt id="GUC-TRACE-RECOVERY-MESSAGES"><span class="term"><code class="varname">trace_recovery_messages</code> (<code class="type">enum</code>)
      <a id="id-1.6.6.20.3.6.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       復旧関連のデバッグ出力のログ取得を有効にします。さもないとログは取られません。
       このパラメータはユーザに対し、<a class="xref" href="runtime-config-logging.html#GUC-LOG-MIN-MESSAGES">log_min_messages</a>の通常設定を上書きすることを許可します。
       しかし、特定のメッセージに対してのみです。これはホットスタンバイのデバッグを意図したものです。
       有効な値は、<code class="literal">DEBUG5</code>、<code class="literal">DEBUG4</code>、
        <code class="literal">DEBUG3</code>、<code class="literal">DEBUG2</code>、<code class="literal">DEBUG1</code>、および
        <code class="literal">LOG</code>です。
       デフォルトの<code class="literal">LOG</code>は、ログ取得の決定に全く影響しません。
       その他の値は、あたかも<code class="literal">LOG</code>優先度を所有しているごとく、それ、またはより高い優先度でログ取得される復旧関連デバッグメッセージの要因となります。
       <code class="varname">log_min_messages</code>の通常設定に対し、これは無条件にそれらをサーバログに送り込みます。
       このパラメータは<code class="filename">postgresql.conf</code>ファイル内、または、サーバコマンドラインでのみ設定可能です。
       </p></dd><dt id="GUC-TRACE-SORT"><span class="term"><code class="varname">trace_sort</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.20.3.7.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       もしも有効であれば、並び替え操作の間のリソース使用についての情報を放出します。
このパラメータは <span class="productname">PostgreSQL</span>がコンパイルされた時、<code class="symbol">TRACE_SORT</code>マクロが定義されている場合にのみ有効です。
（とは言っても、現在<code class="symbol">TRACE_SORT</code>はデフォルトで定義されています。）
       </p></dd><dt><span class="term"><code class="varname">trace_locks</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.20.3.8.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       有効な場合、ロックの使用状況に関する情報を出力します。
       出力される情報には、ロック操作の種類、ロックの種類、ロックまたはロック解除されているオブジェクトの一意な識別子が含まれます。
       また、このオブジェクトに既に与えられているロック種類やこのオブジェクトで待機しているロック種類を表すビットマスクも含まれます。
       ロック種類それぞれについて、与えられているロック数、待機中のロック数がその総数と共に出力されます。
       ログファイル出力例を以下に示します。
</p><pre class="screen">LOG:  LockAcquire: new: lock(0xb7acd844) id(24688,24696,0,0,0,1)
      grantMask(0) req(0,0,0,0,0,0,0)=0 grant(0,0,0,0,0,0,0)=0
      wait(0) type(AccessShareLock)
LOG:  GrantLock: lock(0xb7acd844) id(24688,24696,0,0,0,1)
      grantMask(2) req(1,0,0,0,0,0,0)=1 grant(1,0,0,0,0,0,0)=1
      wait(0) type(AccessShareLock)
LOG:  UnGrantLock: updated: lock(0xb7acd844) id(24688,24696,0,0,0,1)
      grantMask(0) req(0,0,0,0,0,0,0)=0 grant(0,0,0,0,0,0,0)=0
      wait(0) type(AccessShareLock)
LOG:  CleanUpLock: deleting: lock(0xb7acd844) id(24688,24696,0,0,0,1)
      grantMask(0) req(0,0,0,0,0,0,0)=0 grant(0,0,0,0,0,0,0)=0
      wait(0) type(INVALID)</pre><p>
       
       ダンプされる構造の詳細は、<code class="filename">src/include/storage/lock.h</code> にあります。
       </p><p>       
       このパラメータは<span class="productname">PostgreSQL</span>がコンパイル時に<code class="symbol">LOCK_DEBUG</code>マクロが定義された場合のみ有効です。
       </p></dd><dt><span class="term"><code class="varname">trace_lwlocks</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.20.3.9.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       有効な場合、軽量ロックの使用状況に関する情報を出力します。
       軽量ロックは主に、共有メモリ上のデータ構造へのアクセスに関する排他制御機能を提供することを意図したものです。
       </p><p>       
       このパラメータは<span class="productname">PostgreSQL</span>がコンパイル時に<code class="symbol">LOCK_DEBUG</code>マクロが定義された場合のみ有効です。
       </p></dd><dt><span class="term"><code class="varname">trace_userlocks</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.20.3.10.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       有効な場合、ユーザロックの使用状況に関する情報を出力します。
       出力は<code class="symbol">trace_locks</code>と同じですが、勧告的ロックに関するもののみを出力します。
       </p><p>       
       このパラメータは<span class="productname">PostgreSQL</span>がコンパイル時に<code class="symbol">LOCK_DEBUG</code>マクロが定義された場合のみ有効です。
       </p></dd><dt><span class="term"><code class="varname">trace_lock_oidmin</code> (<code class="type">integer</code>)
      <a id="id-1.6.6.20.3.11.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       設定すると、このOID未満のテーブルに関するロックの追跡を行いません。
       （システムテーブルに関する出力を抑えるために使用します。）
       </p><p>       
       このパラメータは<span class="productname">PostgreSQL</span>がコンパイル時に<code class="symbol">LOCK_DEBUG</code>マクロが定義された場合のみ有効です。
       </p></dd><dt><span class="term"><code class="varname">trace_lock_table</code> (<code class="type">integer</code>)
      <a id="id-1.6.6.20.3.12.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       このテーブル（OID）に対し無条件でロックを追跡します。
       </p><p>       
       このパラメータは<span class="productname">PostgreSQL</span>がコンパイル時に<code class="symbol">LOCK_DEBUG</code>マクロが定義された場合のみ有効です。
       </p></dd><dt><span class="term"><code class="varname">debug_deadlocks</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.20.3.13.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       設定すると、デッドロックタイムアウトが発生した時全ての進行中のロックについての情報がダンプされます。
       </p><p>       
       このパラメータは<span class="productname">PostgreSQL</span>がコンパイル時に<code class="symbol">LOCK_DEBUG</code>マクロが定義された場合のみ有効です。
       </p></dd><dt><span class="term"><code class="varname">log_btree_build_stats</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.20.3.14.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       設定すると、各種B-tree操作に関するシステムリソース（メモリとCPU）の使用についての統計情報をログに出力します。
       </p><p>       
       このパラメータは<span class="productname">PostgreSQL</span>がコンパイル時に<code class="symbol">BTREE_BUILD_STATS</code>マクロが定義された場合のみ有効です。
       </p></dd><dt id="GUC-WAL-CONSISTENCY-CHECKING"><span class="term"><code class="varname">wal_consistency_checking</code> (<code class="type">string</code>)
      <a id="id-1.6.6.20.3.15.1.3" class="indexterm"></a>
      </span></dt><dd><p>このパラメータは、WALのREDOルーチンのバグをチェックするために使うことを意図しています。
有効にすると、WALレコードと一緒に変更されたバッファのフルページイメージをレコードに追加します。
後でそのレコードがリプレイされるときは、システムはまず各々のレコードを適用し、次にレコードによって変更されたバッファが、格納したイメージと一致するかどうかをテストします。
ある種のケース（たとえばヒントビット）では、些細な変化は許容され、無視されます。
予期しない差異は、致命的エラーを引き起こし、リカバリが中断されます。
       </p><p>デフォルト値は空文字で、この機能を無効にします。
すべてのレコードをチェックするために、<code class="literal">all</code>にすることができます。
カンマ区切りのリストにすると、対応するリソースマネージャに由来するレコードのみをチェックします。
今のところ、サポートされているリソースマネージャは、<code class="literal">heap</code>、<code class="literal">heap2</code>、<code class="literal">btree</code>、<code class="literal">hash</code>、<code class="literal">gin</code>、<code class="literal">gist</code>、<code class="literal">sequence</code>、<code class="literal">spgist</code>、<code class="literal">brin</code>、<code class="literal">generic</code>です。
スーパーユーザだけがこの設定を変更できます。
       </p></dd><dt id="GUC-WAL-DEBUG"><span class="term"><code class="varname">wal_debug</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.20.3.16.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       もしonであれば、WALに関連したデバッグ出力が有効になります。このパラメータは<code class="symbol">WAL_DEBUG</code>マクロが <span class="productname">PostgreSQL</span>のコンパイルの時に定義された場合にのみ有効です。
       </p></dd><dt id="GUC-IGNORE-CHECKSUM-FAILURE"><span class="term"><code class="varname">ignore_checksum_failure</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.20.3.17.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       <a class="xref" href="app-initdb.html#APP-INITDB-DATA-CHECKSUMS">data checksums</a>が有効の時のみ効果があります。
       </p><p>       
       読み込み過程でチェックサム障害が検出されると、通常<span class="productname">PostgreSQL</span>はエラーを報告し、現時点のトランザクションを停止します。
       <code class="varname">ignore_checksum_failure</code>を有効（on）に設定するとシステムはその障害を無視し（しかし警告は報告をします）、処理を継続します。
       この振る舞いはたぶん<span class="emphasis"><em>クラッシュの原因、破損の伝播や隠ぺい、もしくはその他の深刻な問題</em></span>の原因になることがあります。
       とは言っても、エラーを切り抜け、ブロックヘッダが健全に存在するテーブルにある障害を受けていないタプルの回収は行えます。
       もしヘッダーが破損されたら、オプションが有効になっていたとしても報告はなされます。
       デフォルトの設定は<code class="literal">off</code>で、スーパーユーザのみが変更可能です。
       </p></dd><dt id="GUC-ZERO-DAMAGED-PAGES"><span class="term"><code class="varname">zero_damaged_pages</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.20.3.18.1.3" class="indexterm"></a>
      </span></dt><dd><p>       
       ページヘッダの障害がわかると、通常<span class="productname">PostgreSQL</span>はエラーの報告を行い、現在のトランザクションを中断させます。
<code class="varname">zero_damaged_pages</code>をonに設定することにより、システムは代わりに警告を報告し、障害のあるメモリ内のページをゼロで埋め、処理を継続します。
この動作により、障害のあったページ上にある全ての行の<span class="emphasis"><em>データが破壊</em></span>されます。
しかし、これによりエラーを確実に無視し、正常なページに存在するテーブル内の行を取り出すことができます。
        ハードウェアまたはソフトウェアのエラーによって破損が発生した場合のデータの復旧時に有用です。
障害のあるページからのテーブルのデータの復旧をあきらめた場合を除き、通常はこれをonにしてはいけません。
        ゼロで埋められたページはディスクに書き込みを強要されないため、このパラメータを再び無効にする以前にテーブル、またはインデックスを再作成することを勧めます。
        デフォルトは<code class="literal">off</code>であり、スーパーユーザのみ変更可能です。
       </p></dd></dl></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="runtime-config-custom.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="runtime-config.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="runtime-config-short.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">19.16. 独自のオプション </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 19.18. 短いオプション</td></tr></table></div></body></html>