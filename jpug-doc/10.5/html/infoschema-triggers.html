<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>36.55. triggers</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="infoschema-triggered-update-columns.html" title="36.54. triggered_update_columns" /><link rel="next" href="infoschema-udt-privileges.html" title="36.56. udt_privileges" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">36.55. <code xmlns="http://www.w3.org/1999/xhtml" class="literal">triggers</code></th></tr><tr><td width="10%" align="left"><a accesskey="p" href="infoschema-triggered-update-columns.html" title="36.54. triggered_update_columns">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="information-schema.html" title="Chapter 36. 情報スキーマ">Up</a></td><th width="60%" align="center">Chapter 36. 情報スキーマ</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="infoschema-udt-privileges.html" title="36.56. udt_privileges">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="INFOSCHEMA-TRIGGERS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">36.55. <code class="literal">triggers</code></h2></div></div></div><p><code class="literal">triggers</code>ビューには、現在のデータベース内で、現在のユーザが所有するあるいは何らかのSELECT以外の権限を持つテーブルまたはビューに定義された、全てのトリガがあります。
  </p><div class="table" id="id-1.7.6.59.3"><p class="title"><strong>Table 36.53. <code class="literal">triggers</code>の列</strong></p><div class="table-contents"><table class="table" summary="triggersの列" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>名前</th><th>データ型</th><th>説明</th></tr></thead><tbody><tr><td><code class="literal">trigger_catalog</code></td><td><code class="type">sql_identifier</code></td><td>トリガを持つデータベースの名前です（常に現在のデータベースです）。</td></tr><tr><td><code class="literal">trigger_schema</code></td><td><code class="type">sql_identifier</code></td><td>トリガを持つスキーマの名前です。</td></tr><tr><td><code class="literal">trigger_name</code></td><td><code class="type">sql_identifier</code></td><td>トリガの名前です。</td></tr><tr><td><code class="literal">event_manipulation</code></td><td><code class="type">character_data</code></td><td>トリガを発するイベントです
（<code class="literal">INSERT</code>、<code class="literal">UPDATE</code>もしくは<code class="literal">DELETE</code>です）。
      </td></tr><tr><td><code class="literal">event_object_catalog</code></td><td><code class="type">sql_identifier</code></td><td>トリガが定義されたテーブルを持つデータベースの名前です
（常に現在のデータベースです）。
      </td></tr><tr><td><code class="literal">event_object_schema</code></td><td><code class="type">sql_identifier</code></td><td>トリガが定義されたテーブルを持つスキーマの名前です。</td></tr><tr><td><code class="literal">event_object_table</code></td><td><code class="type">sql_identifier</code></td><td>トリガが定義されたテーブルの名前です。</td></tr><tr><td><code class="literal">action_order</code></td><td><code class="type">cardinal_number</code></td><td>未実装です。</td></tr><tr><td><code class="literal">action_condition</code></td><td><code class="type">character_data</code></td><td>トリガの<code class="literal">WHEN</code>条件です。なければNULLです
(現在有効なロールが所有していないテーブルの場合もNULLです)。
      </td></tr><tr><td><code class="literal">action_statement</code></td><td><code class="type">character_data</code></td><td>トリガによって実行される文です
（現在は常に<code class="literal">EXECUTE PROCEDURE <em class="replaceable"><code>function</code></em>(...)</code>です）。
      </td></tr><tr><td><code class="literal">action_orientation</code></td><td><code class="type">character_data</code></td><td>トリガの発行が処理行ごとか文ごとかを識別します
（<code class="literal">ROW</code>もしくは<code class="literal">STATEMENT</code>です）。
      </td></tr><tr><td><code class="literal">action_timing</code></td><td><code class="type">character_data</code></td><td>トリガを発する時期です
（<code class="literal">BEFORE</code>、<code class="literal">AFTER</code>もしくは<code class="literal">INSERT OF</code>です）。
      </td></tr><tr><td><code class="literal">action_reference_old_table</code></td><td><code class="type">sql_identifier</code></td><td><span class="productname">PostgreSQL</span>で利用できない機能に適用されるものです。</td></tr><tr><td><code class="literal">action_reference_new_table</code></td><td><code class="type">sql_identifier</code></td><td><span class="productname">PostgreSQL</span>で利用できない機能に適用されるものです。</td></tr><tr><td><code class="literal">action_reference_old_row</code></td><td><code class="type">sql_identifier</code></td><td><span class="productname">PostgreSQL</span>で利用できない機能に適用されるものです。</td></tr><tr><td><code class="literal">action_reference_new_row</code></td><td><code class="type">sql_identifier</code></td><td><span class="productname">PostgreSQL</span>で利用できない機能に適用されるものです。</td></tr><tr><td><code class="literal">created</code></td><td><code class="type">time_stamp</code></td><td><span class="productname">PostgreSQL</span>で利用できない機能に適用されるものです。</td></tr></tbody></table></div></div><br class="table-break" /><p><span class="productname">PostgreSQL</span>におけるトリガには、標準SQLと比べ、2つの非互換があり、これらは情報スキーマの表現に影響を与えます。
1つ目は、<span class="productname">PostgreSQL</span>ではトリガ名は、独立したスキーマオブジェクトではなく、それぞれのテーブル内で局所的であることです。
そのため、別のテーブルに属している場合、1つのスキーマ内でトリガ名を重複させることができます。
（<code class="literal">trigger_catalog</code>と<code class="literal">trigger_schema</code>は実際、そのトリガが定義されたテーブルに属する値となります。）
2つ目は、<span class="productname">PostgreSQL</span>ではトリガは複数のイベントで発行できる点です（例えば<code class="literal">ON INSERT OR UPDATE</code>です）。
一方、標準SQLでは1つのみしか許されません。
トリガが複数のイベントで発行するように定義された場合、それぞれのイベントで1行という形で、情報スキーマ内では複数の行として表現されます。
これらの2つの問題の結果、<code class="literal">triggers</code>ビューの主キーは実際、標準SQLで定義された<code class="literal">(trigger_catalog, trigger_schema, trigger_name)</code>ではなく、<code class="literal">(trigger_catalog, trigger_schema, event_object_table, trigger_name, event_manipulation)</code>となります。
それでもなお、標準SQLに従う（スキーマ内でトリガ名を一意とし、トリガに対し1種類のイベントしか持たせないという）手法でトリガを定義していれば、これは影響ありません。
  </p><div class="note"><h3 class="title">Note</h3><p><span class="productname">PostgreSQL</span> 9.1 より前は、このビューの列の
<code class="structfield">action_timing</code>、
<code class="structfield">action_reference_old_table</code>、
<code class="structfield">action_reference_new_table</code>、
<code class="structfield">action_reference_old_row</code>、
<code class="structfield">action_reference_new_row</code>
はそれぞれ
<code class="structfield">condition_timing</code>、
<code class="structfield">condition_reference_old_table</code>、
<code class="structfield">condition_reference_new_table</code>、
<code class="structfield">condition_reference_old_row</code>、
<code class="structfield">condition_reference_new_row</code>
という名前でした。これらの命名は SQL: 1999標準におけるものです。新しい名前はSQL:2003以降に準拠しています。
   </p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="infoschema-triggered-update-columns.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="information-schema.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="infoschema-udt-privileges.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">36.54. <code class="literal">triggered_update_columns</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 36.56. <code class="literal">udt_privileges</code></td></tr></table></div></body></html>