<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.115. リリース9.1.12</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-9-1-13.html" title="E.114. リリース9.1.13" /><link rel="next" href="release-9-1-11.html" title="E.116. リリース9.1.11" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.115. リリース9.1.12</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-9-1-13.html" title="E.114. リリース9.1.13">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix E. リリースノート">Up</a></td><th width="60%" align="center">Appendix E. リリースノート</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="release-9-1-11.html" title="E.116. リリース9.1.11">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-9-1-12"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.115. リリース9.1.12</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-9-1-12.html#id-1.11.6.119.4">E.115.1. バージョン9.1.12への移行</a></span></dt><dt><span class="sect2"><a href="release-9-1-12.html#id-1.11.6.119.5">E.115.2. 変更点</a></span></dt></dl></div><p><strong>リリース日: </strong>2014-02-20</p><p>このリリースは9.1.11に対し、各種不具合を修正したものです。
9.1メジャーリリースにおける新機能については、<a class="xref" href="release-9-1.html" title="E.127. リリース9.1">Section E.127</a>を参照してください。
  </p><div class="sect2" id="id-1.11.6.119.4"><div class="titlepage"><div><div><h3 class="title">E.115.1. バージョン9.1.12への移行</h3></div></div></div><p>9.1.Xからの移行ではダンプ/リストアは不要です。
   </p><p>しかしながら、9.1.11以前のリリースからアップグレードする場合は、<a class="xref" href="release-9-1-11.html" title="E.116. リリース9.1.11">Section E.116</a>を参照して下さい。
   </p></div><div class="sect2" id="id-1.11.6.119.5"><div class="titlepage"><div><div><h3 class="title">E.115.2. 変更点</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">GRANT ... WITH ADMIN OPTION</code>制限を強化しました。(Noah Misch)
     </p><p><code class="literal">ADMIN OPTION</code>無しのロール権限では、メンバーの追加や削除が出来ないことになっていますが、
先に<code class="literal">SET ROLE</code>することにより、この制限は簡単にバイパス出来ていました。
セキュリティのインパクトは大体、ロールのメンバーが、権限を譲り受けた他のメンバーの意図に反し、アクセスを取り消すことができることです。
未承認のロールメンバー追加はあまり重要ではありません。
非協力的なロールのメンバーは、いずれにせよ、ビューを作ったり<code class="literal">SECURITY DEFINER</code>機能によって、
他者に多くの権限を提供することができるからです。(CVE-2014-0060)
     </p></li><li class="listitem"><p>PLバリデータ関数を手動呼び出し経由の権限昇格を防止しました。(Andres Freund)
     </p><p>PLバリデータ関数の主な役割は<code class="command">CREATE FUNCTION</code>の中で黙示的に呼び出されますが、
明示的に呼び出すことができる通常のSQL関数でもあります。
実際に幾つか他の言語で書かれた機能で呼び出されているバリデータはチェックされておらず、
プロセスの権限昇格に悪用される可能性がありました。
もし同様の可能性があれば、必須ではない手続き言語でも独自のバリデーション機能にこの変更を加える必要があります。(CVE-2014-0061)
     </p></li><li class="listitem"><p>テーブルとインデックスDDLでの名前の多重検索を防止しました。(Robert Haas、Andres Freund)
     </p><p>が実行中の名前検索で異なる結果が出た場合、DDLのある部分をその他の部分とは違ったテーブルで実施することがありました。
少なくとも<code class="command">CREATE INDEX</code>では、権限チェックがインデックス作成とは異なるテーブルに対して実施されることにより、権限昇格攻撃を許す可能性があります。(CVE-2014-0062)
     </p></li><li class="listitem"><p>長い日付時刻文字列によるバッファオーバーランを防止しました。(Noah Misch)
     </p><p><code class="literal">MAXDATELEN</code>定数は<code class="type">interval</code>型の取りえる最長の値に対して小さ過ぎたため、<code class="function">interval_out()</code>関数内でバッファオーバーランを許していました。
日付時刻の入力関数はバッファオーバーラン防止に対して慎重でしたが、非常に長いタイムゾーン名を含むような、有効な入力値を拒否するほど、制限は短いものでした。
<span class="application">ecpg</span>ライブラリには、これらを含む幾つか固有の脆弱性を含んでいました。
     </p></li><li class="listitem"><p>サイズ算出での整数オーバーフローによるバッファオーバーランを防止しました。(Noah Misch、Heikki Linnakangas)
     </p><p>幾つかの関数、多くはデータ入力関数で、オーバフローをチェックせずにメモリの割り当てサイズを計算していました。
オーバーフローが発生した場合、小さすぎるバッファが割り当てられ、それを越えて書かれていました。(CVE-2014-0064)
     </p></li><li class="listitem"><p>固定サイズのバッファのオーバーランを防止しました。(Peter Eisentraut、Jozef Mlich)
     </p><p>固定サイズのバッファがオーバランしない明確な保証を提供するために、<code class="function">strlcpy()</code>や関連する関数を使いました。
前項とは違い、これらのケースが実際に問題を引き起こすかどうかは不明です。というのは、ほとんどの場合、入力文字列のサイズは事前に制限されている様に思われるからです。
とはいえ、コベリティ(Coverity)のこのタイプの警告はすべて黙らせた方が賢明と思えます。(CVE-2014-0065)
     </p></li><li class="listitem"><p><code class="function">crypt()</code>関数がNULLを返した場合のクラッシュを防止しました。(Honza Horak、Bruce Momjian)
     </p><p><code class="function">crypt()</code>がNULLを返す比較的まれなシナリオがあり、その場合、 <code class="filename">contrib/chkpass</code>はクラッシュしていました。
問題が起こる可能性の中で、一つの実際的なケースは、<span class="application">libc</span>が承認されていないハッシュアルゴリズムの実行を拒否するよう設定されてる（例えば<span class="quote">“<span class="quote">FIPS モード</span>”</span>）場合です。(CVE-2014-0066)
     </p></li><li class="listitem"><p>再帰テスト(regression testing)命令における<code class="literal">make check</code>のリスクを文書化しました。(Noah Misch、Tom Lane)
     </p><p><code class="literal">make check</code>によって起動した一時サーバは<span class="quote">“<span class="quote">trust</span>”</span>認証を使うため、
同一マシン上の他のユーザがデータベースのスーパーユーザとして接続でき、
そして、テストを起動したオペレーティングシステムのユーザ特権を悪用できる可能性があります。
将来のリリースでは、おそらくこのリスクを防ぐためにテスト手順の変更が盛り込む予定ですが、その前に公開議論が必要です。
そこで差し当たりは、同一マシン上に信頼されていないユーザが居る場合、<code class="literal">make check</code>を使っている人に対して、警告を発するに留めています。(CVE-2014-0067)
     </p></li><li class="listitem"><p>リレーションのセグメントが一杯でない時に、WALレコードが誤再生する場合があったのを修復しました。
     </p><p>WAL更新は、本来あるべき場所から多くのページを通り過ぎて、間違ったページに適用されることがありました。
データ破壊とは別に、ファイル終端であるべき場所をずっと越えてアップデートが適用されてしまうため、
このエラーはマスタサーバと比べてスタンバイサーバで著しい<span class="quote">“<span class="quote">肥大化(bloat)</span>”</span>をもたらすことが報告されています。
この故障モードはクラッシュリカバリ中の重大なリスクとは思われません。
更新が頻発するマスタから得たベースバックアップで作られたスタンバイサーバの初期同期の時にのみリスクが発生します。
     </p></li><li class="listitem"><p>リカバリによって整合性がとれたか判定する箇所の不具合を修正しました。
     </p><p>WALのリプレイ開始時にデータベースの整合性が既に取れていると誤った結論を得てしまう場合があり、
そのためにデータベースが実際に整合性が取れる前にホットスタンバイのクエリを許可している可能性がありました。
その他の症状として、<span class="quote">“<span class="quote">PANIC: WAL contains references to invalid pages</span>”</span>が発生する可能性もありました。
     </p></li><li class="listitem"><p>ホットスタンバイモードの<code class="literal">VACUUM</code>操作によるWALリプレイで、Btreeインデックスページの不適切なロック処理を修正しました。 (Andres Freund、Heikki Linnakangas、Tom Lane)
     </p><p>このエラーは<span class="quote">“<span class="quote">PANIC: WAL contains references to invalid pages</span>”</span>障害をもたらす可能性がありました。
     </p></li><li class="listitem"><p>非リーフのGINインデックスページへの挿入によって、ページ全体のWALレコードに適宜書き込むことを保証します。(Heikki Linnakangas)
     </p><p>これまでのコードでは、部分ページ書き込みのイベント中にシステムがクラッシュした場合、インデックスが破損する恐れがありました。
     </p></li><li class="listitem"><p><code class="literal">pause_at_recovery_target</code>と<code class="literal">recovery_target_inclusive</code>が両方セットされた場合、リカバリターゲットのレコードは停止後ではなく停止前に適用される事を保証します。(Heikki Linnakangas)
     </p></li><li class="listitem"><p>サーバプロセス終了中の競合状態を修正しました。(Robert Haas)
     </p><p>シグナルハンドラが、既に無効となったプロセスの<code class="varname">MyProc</code> ポインタを利用しないことを保証します。
     </p></li><li class="listitem"><p>walsenderの終了ロジックとwalreceiverのSIGHUPシグナルハンドラの競合状態を修正しました。(Tom Lane)
     </p></li><li class="listitem"><p>エラー出力ロジックの中で、<code class="varname">errno</code>の安全でない参照方法を修正しました。(Christian Kruse)
     </p><p>これは、主に<code class="literal">HINT</code>フィールドが欠如或いは不適切であるという奇妙な現象を引き起こしていました。
     </p></li><li class="listitem"><p>サーバ起動時に早すぎる<code class="function">ereport()</code>関数使用によって、クラッシュする可能性があったのを修正しました。(Tom Lane)
     </p><p>クラッシュが観察された主なケースは、読み取り権限を持たないディレクトリでサーバが起動された場合です。
     </p></li><li class="listitem"><p>OpenSSLのソケット書き込み関数で、リトライフラグを適切に消去しました。(Alexander Kukushkin)
     </p><p>この消去が省かれると、SSLで暗号化された接続が突然切れた場合、サーバのロックアップを引き起こす可能性がありました。
     </p></li><li class="listitem"><p>エスケープを含むユニコードの識別子(<code class="literal">U&amp;"..."</code>構文)の長さチェックを修正しました。(Tom Lane)
     </p><p>識別子がエスケープされたフォームが長すぎた場合、誤った切り捨て警告が出力されていました。
しかし実際には、エスケープをデコードした後、識別子に切り捨ては不要でした。
     </p></li><li class="listitem"><p>ロールのリストで、型名をキーワードに使うことができるようにしました。(Stephen Frost)
     </p><p>以前のパッチで使えるようになった型名キーワードは、定位置のクオート無しでロール識別子として使うことができるものですが、
<code class="literal">DROP ROLE</code>のように、許されたロール識別子のリストから漏れていたケースがありました。
     </p></li><li class="listitem"><p><code class="literal">EXISTS(SELECT * FROM zero_column_table)</code>でパーサがクラッシュする障害を修正しました。(Tom Lane)
     </p></li><li class="listitem"><p><code class="literal">WHERE (... x IN (SELECT ...) ...) IN (SELECT ...)</code>のような、入れ子になったサブセレクトの誤ったプランによって、クラッシュする可能性があるのを修正しました。(Tom Lane)
     </p></li><li class="listitem"><p>テーブル列の全ての値の分布が<span class="quote">“<span class="quote">広すぎる</span>”</span>場合であっても、<code class="command">ANALYZE</code> コマンドが統計情報を作る事を保証しました。(Tom Lane)
     </p><p><code class="command">ANALYZE</code>コマンドはヒストグラムと算出した中央値より大幅に離れた値は意図的に除外していますが、
全てのサンプリングされたエントリが広すぎる場合、極端な値を排除するのは正常なことです。
     </p></li><li class="listitem"><p><code class="literal">ALTER TABLE ... SET TABLESPACE</code>内で権限チェック無しにデータベースのデフォルトテーブルスペース使用を許可するようにしました。(Stephen Frost)
     </p><p><code class="literal">CREATE TABLE</code>は常に使用を許可していましたが、<code class="literal">ALTER TABLE</code>ではそれをしていませんでした。
     </p></li><li class="listitem"><p><code class="literal">CASE</code>の戻り値が複数行のものと、そうではないものが混ざっている場合に、<span class="quote">“<span class="quote">cannot accept a set</span>”</span>エラーが発生してしたのを修正しました。(Tom Lane)
     </p></li><li class="listitem"><p>pgstat関数の中でクライアントアドレスが全てゼロの場合のチェックを修正しました。(Kevin Grittner)
     </p></li><li class="listitem"><p>テキストサーチのパーサでマルチバイト文字を誤判別する可能性を修正しました。(Tom Lane)
     </p><p>マルチバイトエンコーディングでロケールにCを使用している場合、非ASCII文字は誤判別される可能性がありました。
Cygwinでは非Cロケールでも同様に誤判別する可能性がありました。
     </p></li><li class="listitem"><p><code class="function">plainto_tsquery()</code>関数が誤作動する可能性があったのを修正しました。(Heikki Linnakangas)
     </p><p>メモリ領域が重なっている場合のコピーで<code class="function">memcpy()</code>関数ではなく<code class="function">memmove()</code>関数を使うようにしました。
これによる具体的な障害報告はありませんが、これは確かに危険性がありました。
     </p></li><li class="listitem"><p><code class="function">pg_start_backup()</code>と<code class="function">pg_stop_backup()</code>の権限チェックの配置を修正しました。(Andres Freund、Magnus Hagander)
     </p><p>以前のコーディングではカタログにアクセスにすべきではない時に、アクセスしようとすることがありました。
     </p></li><li class="listitem"><p>ロケールチェック用のエンコーディング名として、<code class="literal">SHIFT_JIS</code>を受け付けるようにしました。(Tatsuo Ishii)
     </p></li><li class="listitem"><p>Windows上の<code class="function">PQhost()</code>関数の誤作動を修正しました。(Fujii Masao)
     </p><p>ホストが定義されていない場合、<code class="literal">localhost</code>を返すべきでした。
     </p></li><li class="listitem"><p><code class="literal">COPY TO STDOUT/FROM STDIN</code>中の障害用に<span class="application">libpq</span>と<span class="application">psql</span>のエラーハンドリングを改善しました。(Tom Lane)
     </p><p>この修正を具体的にいうと、<code class="literal">COPY FROM STDIN</code>中にサーバとの接続が切れた場合、9.2以上のサーバでは無限ループに陥る可能性がありました。
これより古いバージョンのサーバや、他のクライアントアプリケーションでも、これに類する状況が起こるかもしれませんでした。
     </p></li><li class="listitem"><p><span class="application">pg_basebackup</span>の冗長モードで、正しくないファイル名が出力される可能性があるのを修正しました。(Magnus Hagander)
     </p></li><li class="listitem"><p>PGDATA内のテーブル空間をベースバックアップ内に2重に含まないようにしました。(Dimitri Fontaine、Magnus Hagander)
     </p></li><li class="listitem"><p><span class="application">ecpg</span>の記述子の並びが間違っているのを修正しました。(MauMau)
     </p></li><li class="listitem"><p><span class="application">ecpg</span>で、接続パラメータにホスト名が欠如している場合の処理を適切に修正しました。(Michael Meskes)
     </p></li><li class="listitem"><p><code class="filename">contrib/dblink</code>の接続開始時におけるパフォーマンス退行を修正しました。(Joe Conway)
     </p><p>クライアントとサーバのエンコーディングが一致する場合、不必要な二重設定を止めました。
     </p></li><li class="listitem"><p><code class="filename">contrib/isn</code>で、ISMN値のチェックディジットの間違った演算を修正しました。(Fabien Coelho)
     </p></li><li class="listitem"><p>ドキュメント通りの手順でクライアントのみのコードをインストールできることを保証しました。(Peter Eisentraut)
     </p></li><li class="listitem"><p>MingwとCygwin環境でビルドする場合、<span class="application">libpq</span> DLLを<code class="filename">bin</code>ディレクトリにインストールするようにしました。(Andrew Dunstan)
     </p><p>MSVCビルドに於いて、このコピーは長らく行われてきました。
<span class="application">psql</span>のようなプログラムが、DLLを見つける事が出来ずに起動に失敗する問題は修正すべきです。
     </p></li><li class="listitem"><p>Cygwin環境で廃止予定の<code class="literal">dllwrap</code>ツールの使用を止めました。(Marco Atzeri)
     </p></li><li class="listitem"><p>プレインテキストの<code class="filename">HISTORY</code>ファイルと<code class="filename">src/test/regress/README</code>ファイルは今後、生成されません。(Tom Lane)
     </p><p>これらのテキストファイルは、メインHTMLとPDFドキュメントフォーマットで重複していました。
それらの保守に関する問題は、読者が好むプレインテキストフォーマットより大幅に上回ります。
配布用tarボールにはまた、これらの名前でファイルが含まれていますが、メインドキュメントを参照してもらうための指標となるスタブにすぎません。
プレインテキストの<code class="filename">INSTALL</code>ファイルは、そのためのユースケースとして、まだ保守されています。
     </p></li><li class="listitem"><p>タイムゾーンデータファイルを<span class="application">tzdata</span>リリース2013iに更新しました。
ヨルダンでの夏時間の変更およびキューバの歴史的な地域データの修正が含まれます。
     </p><p>それに加え、<code class="literal">Asia/Riyadh87</code>、<code class="literal">Asia/Riyadh88</code>と<code class="literal">Asia/Riyadh89</code>は、
もはやIANAによって保守されず、実際の常用時計として表示されることが無いため、削除されました。
     </p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-9-1-13.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="release-9-1-11.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">E.114. リリース9.1.13 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> E.116. リリース9.1.11</td></tr></table></div></body></html>