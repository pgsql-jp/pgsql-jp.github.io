<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>pg_dump</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="app-pgconfig.html" title="pg_config" /><link rel="next" href="app-pg-dumpall.html" title="pg_dumpall" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">pg_dump</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="app-pgconfig.html" title="pg_config">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="reference-client.html" title="PostgreSQLクライアントアプリケーション">Up</a></td><th width="60%" align="center">PostgreSQLクライアントアプリケーション</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="app-pg-dumpall.html" title="pg_dumpall">Next</a></td></tr></table><hr></hr></div><div class="refentry" id="APP-PGDUMP"><div class="titlepage"></div><a id="id-1.9.4.12.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle">pg_dump</span></h2><p>pg_dump — <span class="productname">PostgreSQL</span>データベースをスクリプトファイルまたは他のアーカイブファイルへ抽出する
  </p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p id="id-1.9.4.12.4.1"><code class="command">pg_dump</code> [<em class="replaceable"><code>connection-option</code></em>...] [<em class="replaceable"><code>option</code></em>...] [<em class="replaceable"><code>dbname</code></em>]</p></div></div><div class="refsect1" id="PG-DUMP-DESCRIPTION"><h2>説明
  </h2><p><span class="application">pg_dump</span>は<span class="productname">PostgreSQL</span>データベースをバックアップするユーティリティです。
データベースを使用中であっても一貫性のあるバックアップを作成することができます。
<span class="application">pg_dump</span>は他のユーザによるデータベースへのアクセス（読み書き）をブロックしません。
  </p><p><span class="application">pg_dump</span>は単一のデータベースしかダンプしません。
ロールやテーブル空間など、クラスタ内の全データベースに共通のグローバルオブジェクトをダンプするには<a class="xref" href="app-pg-dumpall.html" title="pg_dumpall"><span class="refentrytitle"><span class="application">pg_dumpall</span></span></a>を使用してください。
  </p><p>ダンプはスクリプト形式、または、アーカイブファイル形式で出力することができます。
スクリプトダンプは、保存した時点の状態のデータベースを再構成するために必要なSQLコマンドが書き込まれた平文ファイルです。
このスクリプトを使ってリストアを行うには、それを<a class="xref" href="app-psql.html" title="psql"><span class="refentrytitle"><span class="application">psql</span></span></a>に読み込ませます。
スクリプトファイルを使えば、ダンプを行ったのとは別のマシンや別のアーキテクチャ上でも、データベースを再構築することができます。
また、多少編集すれば他のSQLデータベース製品上でもデータベースの再構築が可能です。
  </p><p>もう1つの形式であるアーカイブファイル形式を使ってデータベースを再構築するには、<a class="xref" href="app-pgrestore.html" title="pg_restore"><span class="refentrytitle">pg_restore</span></a>を使用しなければなりません。
このファイルを使用すると、<span class="application">pg_restore</span>がリストア対象を選択したり、リストアするアイテムを並び替えたりできます。
アーカイブファイルもまた、アーキテクチャを越えて移植できるように設計されています。
  </p><p>いずれかのアーカイブファイル形式を<span class="application">pg_restore</span>と組み合わせて使用する場合は、<span class="application">pg_dump</span>の柔軟なアーカイブ/転送機構が利用できます。
具体的には、<span class="application">pg_dump</span>を使用してデータベース全体をバックアップし、<span class="application">pg_restore</span>を使用して、アーカイブの内容を検査したり、データベースの一部を選択してリストアしたりすることができます。
最も柔軟な出力ファイル形式は<span class="quote">“<span class="quote">カスタム</span>”</span>形式（<code class="option">-Fc</code>）と<span class="quote">“<span class="quote">ディレクトリ</span>”</span>形式（<code class="option">-Fd</code>）です。
これらはすべての保存された項目の選択や並び換えを行うことができ、並行リストアをサポートし、デフォルトで圧縮されます。
<span class="quote">“<span class="quote">ディレクトリ</span>”</span>形式は、並行ダンプをサポートする唯一の形式です。
  </p><p><span class="application">pg_dump</span>の実行中は、標準エラーに出力される警告（特に後述の制限に関する警告）が出力されていないか確認してください。
  </p></div><div class="refsect1" id="PG-DUMP-OPTIONS"><h2>オプション</h2><p>以下のコマンドラインオプションは出力内容とその形式を制御します。

    </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="replaceable"><code>dbname</code></em></span></dt><dd><p>ダンプするデータベースの名前を指定します。
指定されていない場合は環境変数<code class="envar">PGDATABASE</code>が使われます。
この変数も設定されていない場合は、接続のために指定されたユーザ名が使用されます。
       </p></dd><dt><span class="term"><code class="option">-a</code><br /></span><span class="term"><code class="option">--data-only</code></span></dt><dd><p>データのみをダンプし、スキーマ（データ定義）はダンプしません。
テーブルデータ、ラージオブジェクト、シーケンス値がダンプされます。
       </p><p>このオプションは<code class="option">--section=data</code>を指定することと似ていますが、歴史的な理由で同一ではありません。
       </p></dd><dt><span class="term"><code class="option">-b</code><br /></span><span class="term"><code class="option">--blobs</code></span></dt><dd><p>ラージオブジェクトをダンプに含めます。
<code class="option">--schema</code>、<code class="option">--table</code>、<code class="option">--schema-only</code>が指定された場合を除き、これがデフォルトの動作です。
したがって、<code class="option">-b</code>オプションは特定のスキーマやテーブルのダンプにラージオブジェクトを追加する場合にのみ有用です。
blobはデータとみなされるため、--data-onlyが使われたときは含まれますが、--schema-onlyが使われたときには含まれないことに注意してください。
       </p></dd><dt><span class="term"><code class="option">-B</code><br /></span><span class="term"><code class="option">--no-blobs</code></span></dt><dd><p>ラージオブジェクトをダンプに含めません。
       </p><p><code class="option">-b</code>と<code class="option">-B</code>の両方が指定された場合は、データのダンプ時にラージオブジェクトを出力します。
<code class="option">-b</code>の説明を参照してください。
       </p></dd><dt><span class="term"><code class="option">-c</code><br /></span><span class="term"><code class="option">--clean</code></span></dt><dd><p>データベースオブジェクトを作成するコマンドの前に、データベースオブジェクトを整理（削除）するコマンドを書き出します。
（<code class="option">--if-exists</code>も指定されなければ、リストア先のデータベースの中に存在しないオブジェクトがある場合に、害がないエラーがいくつか発生するかもしれません。）
       </p><p>このオプションは平文形式の場合にのみ有効です。
アーカイブ形式では、<code class="command">pg_restore</code>を呼び出す時にこのオプションを指定することができます。
       </p></dd><dt><span class="term"><code class="option">-C</code><br /></span><span class="term"><code class="option">--create</code></span></dt><dd><p>初めにデータベース自体を作成するコマンドを出力し、その後、作成したデータベースに接続するコマンドを出力します
（このようなスクリプトを使用すると、スクリプトを実行する前に対象のインストレーションの中のどのデータベースに接続すればよいかという問題を考える必要がなくなります）。
<code class="option">--clean</code>も同時に指定されている場合、このスクリプトは接続する前に対象データベースを削除し再作成します。
       </p><p>このオプションは平文形式の場合にのみ有効です。
アーカイブ形式では、<code class="command">pg_restore</code>を呼び出す時にこのオプションを指定することができます。
       </p></dd><dt><span class="term"><code class="option">-E <em class="replaceable"><code>encoding</code></em></code><br /></span><span class="term"><code class="option">--encoding=<em class="replaceable"><code>encoding</code></em></code></span></dt><dd><p>指定した文字セット符号化方式でダンプを作成します。
デフォルトではダンプはデータベースの符号化方式で作成されます。
（環境変数<code class="envar">PGCLIENTENCODING</code>を好みのダンプ時の符号化方式に設定することで、同じ結果を得ることができます。）
       </p></dd><dt><span class="term"><code class="option">-f <em class="replaceable"><code>file</code></em></code><br /></span><span class="term"><code class="option">--file=<em class="replaceable"><code>file</code></em></code></span></dt><dd><p>出力を指定のファイルに送ります。
ファイルを基にする出力形式ではこのパラメータは省くことができます。
省略時は標準出力が使用されます。
しかしディレクトリ出力形式の場合は、省略することはできず、ファイルではなく対象ディレクトリを指定します。
この場合、ディレクトリは<code class="command">pg_dump</code>が生成しますので、事前に存在してはなりません。
       </p></dd><dt><span class="term"><code class="option">-F <em class="replaceable"><code>format</code></em></code><br /></span><span class="term"><code class="option">--format=<em class="replaceable"><code>format</code></em></code></span></dt><dd><p>出力形式を選択します。
<em class="replaceable"><code>format</code></em>には以下のいずれかを取ることができます。

       </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">p</code><br /></span><span class="term"><code class="literal">plain</code></span></dt><dd><p>平文の<acronym class="acronym">SQL</acronym>スクリプトファイルを出力します（デフォルト）。
          </p></dd><dt><span class="term"><code class="literal">c</code><br /></span><span class="term"><code class="literal">custom</code></span></dt><dd><p><span class="application">pg_restore</span>への入力に適したカスタム形式アーカイブを出力します。
ディレクトリ出力形式と一緒に使用する場合、リストア時に手作業で保管された項目の選択、再順序付けできますので、これはもっとも柔軟な出力形式です。
また、この形式はデフォルトで圧縮されます。
          </p></dd><dt><span class="term"><code class="literal">d</code><br /></span><span class="term"><code class="literal">directory</code></span></dt><dd><p><span class="application">pg_restore</span>への入力に適したディレクトリ形式のアーカイブを出力します。
これは、ダンプされる各テーブルおよびblobごとに1つのファイル、さらに、<span class="application">pg_restore</span>から読み取り可能な、機械的に読み取り易い書式でダンプしたオブジェクトを記述する目次ファイルと呼ばれるファイルを持つディレクトリを作成します。
ディレクトリ形式アーカイブは標準Unixツールで操作することができます。
例えば、未圧縮アーカイブ内のファイルを<span class="application">gzip</span>ツールを使用して圧縮することができます。
この形式はデフォルトで圧縮されます。
また並行ダンプをサポートします。
          </p></dd><dt><span class="term"><code class="literal">t</code><br /></span><span class="term"><code class="literal">tar</code></span></dt><dd><p><span class="application">pg_restore</span>への入力に適した<code class="command">tar</code>形式のアーカイブを出力します。
このtar形式はディレクトリ形式と互換性があります。
tar形式アーカイブを展開すると、有効なディレクトリ形式のアーカイブを生成します。
しかしtar形式は圧縮をサポートしません。
またtar形式を使う場合、リストア時にテーブルデータ項目の相対的な順序を変更することはできません。
          </p></dd></dl></div></dd><dt><span class="term"><code class="option">-j <em class="replaceable"><code>njobs</code></em></code><br /></span><span class="term"><code class="option">--jobs=<em class="replaceable"><code>njobs</code></em></code></span></dt><dd><p><em class="replaceable"><code>njobs</code></em>個のテーブルを同時にダンプすることによって、並行してダンプを実行します。
このオプションはダンプにかかる時間を減らしますが、データベースサーバの負荷を増やします。
このオプションはディレクトリ出力形式でのみ使用することができます。
複数のプロセスが同時にそのデータを書き出すことができるのはディレクトリ形式だけだからです。
       </p><p><span class="application">pg_dump</span>は<em class="replaceable"><code>njobs</code></em>+1個のデータベース接続を開きます。
このため、すべての接続を収容できる程度に<a class="xref" href="runtime-config-connection.html#GUC-MAX-CONNECTIONS">max_connections</a>が高いことを確認してください。
       </p><p>並行ダンプを実行している時にデータベースオブジェクトに対して排他ロックを要求すると、ダンプが失敗する可能性があります。
ダンプ実行中に誰かがダンプ予定のオブジェクトを削除してそれがなくなってしまうことがないように、ワーカプロセスがダンプする予定のオブジェクトに対して<span class="application">pg_dump</span>のマスタプロセスが共有ロックを要求するのがその理由です。
その後他のクライアントがテーブルに対する排他ロックを要求すると、
そのロックは許可されませんが、マスタプロセスが共有ロックを解放することを待機するキューに保管されます。
その結果、テーブルへのその他のアクセスは許可されず、排他ロック要求の後のキューに保管されます。
これには、そのテーブルをダンプしようとする作業用プロセスも含まれます。
何らかの注意をしないと、古典的なデッドロック状態になります。
この競合を検知するために<span class="application">pg_dump</span>の作業用プロセスは<code class="literal">NOWAIT</code>オプションを使用する別の共有ロックを要求します。
作業用プロセスによる共有ロックが許可されない場合、だれかがその時に排他ロックを要求していることになり、ダンプを継続することができません。
<span class="application">pg_dump</span>には、ダンプを中断するしか選択肢がありません。
       </p><p>一貫したバックアップのためには、データベースサーバは、同期ナップショットをサポートする必要があります。
これはプライマリサーバについては<span class="productname">PostgreSQL</span> 9.2で、スタンバイについてはバージョン10で導入された機能です。
この機能を用いれば、データベースクライアントは異なる接続を使用していたとしても、確実に同じデータセットを参照することができます。
<code class="command">pg_dump -j</code>は複数のデータベース接続を使用します。
マスタプロセスで一度、また、作業用ジョブそれぞれでも一度、データベースと接続します。
同期スナップショット機能がないと、異なる作業用ジョブがそれぞれの接続で同じデータを参照していることが保証されず、一貫性がないバックアップになってしまいます。
       </p><p>9.2より前のサーバで並行ダンプを実行させたいのであれば、データベースの内容が、マスタがデータベースに接続してから最後の作業用ジョブがデータベースに接続するまでの間に変更されないことを確実にしなければなりません。
このためのもっとも簡単な方法は、バックアップを始める前にデータを変更するプロセス（DDLおよびDML）がデータベースにアクセスすることを止めさせることです。
また、9.2より前の<span class="productname">PostgreSQL</span>に対して<code class="command">pg_dump -j</code>を実行する場合は<code class="option">--no-synchronized-snapshots</code>パラメータを指定する必要もあります。
       </p></dd><dt><span class="term"><code class="option">-n <em class="replaceable"><code>schema</code></em></code><br /></span><span class="term"><code class="option">--schema=<em class="replaceable"><code>schema</code></em></code></span></dt><dd><p><em class="replaceable"><code>schema</code></em>にマッチするスキーマのみをダンプします。
これはスキーマ自体とそこに含まれるオブジェクトすべてを選択します。
このオプションが指定されなければ、対象データベース内にあるシステム以外のスキーマ全てがダンプされます。
複数の<code class="option">-n</code>オプションを記述することで、複数のスキーマを選択することができます。
また、<em class="replaceable"><code>schema</code></em>パラメータは<span class="application">psql</span>の<code class="literal">\d</code>コマンドと同じ規則に従うパターン（<a class="xref" href="app-psql.html#APP-PSQL-PATTERNS" title="パターン">パターン</a>参照）として解釈されます。
ですので、ワイルドカード文字をパターン内に記述することで、複数のスキーマを選択することもできます。
ワイルドカードを使用する時は、シェルがそのワイルドカードを展開しないように、必要であればパターンを引用符で括ってください。
<a class="xref" href="app-pgdump.html#PG-DUMP-EXAMPLES" title="例">例</a>を参照してください。
       </p><div class="note"><h3 class="title">Note</h3><p><code class="option">-n</code>が指定されると、<span class="application">pg_dump</span>は選択したスキーマ内のオブジェクトが依存する可能性がある、その他のデータベースオブジェクトのダンプを行いません。
したがって、スキーマ指定のダンプ結果を初期状態のデータベースに正常にリストアできるという保証はありません。
        </p></div><div class="note"><h3 class="title">Note</h3><p><code class="option">-n</code>が指定されると、blobなどの非スキーマオブジェクトはダンプされません。
<code class="option">--blobs</code>オプションをつけてダンプを行うことでblobも追加されます。
        </p></div></dd><dt><span class="term"><code class="option">-N <em class="replaceable"><code>schema</code></em></code><br /></span><span class="term"><code class="option">--exclude-schema=<em class="replaceable"><code>schema</code></em></code></span></dt><dd><p><em class="replaceable"><code>schema</code></em>パターンにマッチするスキーマをダンプしません。
このパターンは<code class="option">-n</code>と同様の規則に従って解釈されます。
<code class="option">-N</code>を複数指定して、複数のパターンのいずれかにマッチするスキーマを除外することができます。
       </p><p><code class="option">-n</code>と<code class="option">-N</code>の両方が指定された場合、少なくとも1つの<code class="option">-n</code>にマッチし<code class="option">-N</code>オプションにマッチしないスキーマだけがダンプされます。
<code class="option">-n</code>なしで<code class="option">-N</code>が指定された場合、<code class="option">-N</code>にマッチするスキーマが通常のダンプから除外されます。
       </p></dd><dt><span class="term"><code class="option">-o</code><br /></span><span class="term"><code class="option">--oids</code></span></dt><dd><p>各テーブルのオブジェクト識別子（<acronym class="acronym">OID</acronym>）をデータの一部としてダンプします。
アプリケーションで<acronym class="acronym">OID</acronym>列を（外部キー制約など）何らかの形で使用している場合は、このオプションを使用してください。
その他の場合は、このオプションは使用しないでください。
       </p></dd><dt><span class="term"><code class="option">-O</code><br /></span><span class="term"><code class="option">--no-owner</code></span></dt><dd><p>オブジェクトの所有権を元のデータベースにマッチさせるためのコマンドを出力しません。
デフォルトでは、<span class="application">pg_dump</span>は、<code class="command">ALTER OWNER</code>文または<code class="command">SET SESSION AUTHORIZATION</code>文を発行して、作成したデータベースオブジェクトの所有権を設定します。
スーパーユーザ（もしくは、そのスクリプト内の全てのオブジェクトを所有するユーザ）以外のユーザがスクリプトを実行した場合、これらの文は失敗します。
任意のユーザがリストアできるスクリプトを作成するには、<code class="option">-O</code>を指定してください。
ただし、この場合は、全てのオブジェクトの所有者がリストアしたユーザとなってしまいます。
       </p><p>このオプションは平文形式の場合にのみ有効です。
アーカイブ形式では、<code class="command">pg_restore</code>を呼び出す時にこのオプションを指定することができます。
       </p></dd><dt><span class="term"><code class="option">-R</code><br /></span><span class="term"><code class="option">--no-reconnect</code></span></dt><dd><p>このオプションは廃止されましたが、後方互換性を保持するため受け入れられます。
       </p></dd><dt><span class="term"><code class="option">-s</code><br /></span><span class="term"><code class="option">--schema-only</code></span></dt><dd><p>データ定義（スキーマ）のみをダンプし、データはダンプしません。
       </p><p>このオプションは<code class="option">--data-only</code>の逆です。
これは<code class="option">--section=pre-data --section=post-data</code>を指定することと似ていますが、歴史的な理由のため同一ではありません。
       </p><p>（これと<code class="option">--schema</code>オプションと混乱しないでください。<span class="quote">“<span class="quote">schema</span>”</span>という単語を異なる意味で使用しています。）
       </p><p>データベース内の一部のみのテーブルのテーブルデータを除外するためには<code class="option">--exclude-table-data</code>を参照してください。
       </p></dd><dt><span class="term"><code class="option">-S <em class="replaceable"><code>username</code></em></code><br /></span><span class="term"><code class="option">--superuser=<em class="replaceable"><code>username</code></em></code></span></dt><dd><p>トリガを無効にする場合に使用する、スーパーユーザのユーザ名を指定します。
これは<code class="option">--disable-triggers</code>を使う場合にのみ使用されます。
（通常は このオプションを使うよりも、出力されたスクリプトをスーパーユーザ権限で実行する方が良いでしょう。）
       </p></dd><dt><span class="term"><code class="option">-t <em class="replaceable"><code>table</code></em></code><br /></span><span class="term"><code class="option">--table=<em class="replaceable"><code>table</code></em></code></span></dt><dd><p><em class="replaceable"><code>table</code></em>にマッチする名前のテーブルのみをダンプします。
この目的において、<span class="quote">“<span class="quote">テーブル</span>”</span>にはビュー、マテリアライズドビュー、シーケンス、外部テーブルが含まれます。
複数の<code class="option">-t</code>オプションを記述することで複数のテーブルを選択することができます。
また、<em class="replaceable"><code>table</code></em>パラメータは<span class="application">psql</span>の <code class="literal">\d</code>コマンドで使用される規則(<a class="xref" href="app-psql.html#APP-PSQL-PATTERNS" title="パターン">パターン</a>参照)と同じ規則に従うパターンとして解釈されます。
ですので、ワイルドカード文字をパターン内に記述することで、複数のテーブルを選択することもできます。
ワイルドカードを使用する時は、シェルによりそのワイルドカードを展開させないように、パターンを引用符で括ってください。
<a class="xref" href="app-pgdump.html#PG-DUMP-EXAMPLES" title="例">例</a>を参照してください。
       </p><p><code class="option">-t</code>が使用されると、<code class="option">-n</code>および<code class="option">-N</code>オプションの効果はなくなります。
<code class="option">-t</code>で選択したテーブルが、これらのオプションとは関係なくダンプされ、また、非テーブルオブジェクトはダンプされないためです。
       </p><div class="note"><h3 class="title">Note</h3><p><code class="option">-t</code>が指定されると、<span class="application">pg_dump</span>は選択したテーブル内のオブジェクトが依存する可能性がある他のデータベースオブジェクトのダンプを行いません。
したがって、テーブル指定のダンプ結果を初期化されたデータベースに正常にリストアできるという保証はありません。

        </p></div><div class="note"><h3 class="title">Note</h3><p><code class="option">-t</code>オプションの動作は8.2より前のバージョンの<span class="productname">PostgreSQL</span>と完全な互換性はありません。
以前は、<code class="literal">-t tab</code>と記述することで<code class="literal">tab</code>という名前のテーブルをすべてダンプしていました。
しかし現在は、デフォルトの検索パスで可視のものだけがダンプされます。
過去の動作を行うためには、<code class="literal">-t '*.tab'</code>と記述してください。
また、特定のスキーマ内のテーブルを選択するためには、以前は<code class="literal">-n sch -t tab</code>と記述していましたが、<code class="literal">-t sch.tab</code>などと記述しなければなりません。
        </p></div></dd><dt><span class="term"><code class="option">-T <em class="replaceable"><code>table</code></em></code><br /></span><span class="term"><code class="option">--exclude-table=<em class="replaceable"><code>table</code></em></code></span></dt><dd><p><em class="replaceable"><code>tables</code></em>パターンにマッチするテーブルをダンプしません。
このパターンは<code class="option">-t</code>と同じ規則に従って解釈されます。
<code class="option">-T</code>を複数指定することで、複数のパターンのいずれかにマッチするテーブルをすべて除外させることができます。
       </p><p><code class="option">-t</code>と<code class="option">-T</code>の両方が指定された場合、少なくとも1つの<code class="option">-t</code>オプションにマッチし、<code class="option">-T</code>オプションにマッチしないテーブルのみがダンプされます。
<code class="option">-t</code>なしで<code class="option">-T</code>が指定された場合、通常のダンプから<code class="option">-T</code>にマッチするテーブルが除外されます。
       </p></dd><dt><span class="term"><code class="option">-v</code><br /></span><span class="term"><code class="option">--verbose</code></span></dt><dd><p>冗長モードを指定します。
これを指定すると、<span class="application">pg_dump</span>は、詳細なオブジェクトコメント、開始時刻、終了時刻をダンプファイルに、進行状況メッセージを標準エラーに出力します。
       </p></dd><dt><span class="term"><code class="option">-V</code><br /></span><span class="term"><code class="option">--version</code></span></dt><dd><p><span class="application">pg_dump</span>のバージョンを表示し、終了します。
       </p></dd><dt><span class="term"><code class="option">-x</code><br /></span><span class="term"><code class="option">--no-privileges</code><br /></span><span class="term"><code class="option">--no-acl</code></span></dt><dd><p>アクセス権限（grant/revokeコマンド）のダンプを抑制します。
       </p></dd><dt><span class="term"><code class="option">-Z <em class="replaceable"><code>0..9</code></em></code><br /></span><span class="term"><code class="option">--compress=<em class="replaceable"><code>0..9</code></em></code></span></dt><dd><p>使用する圧縮レベルを指定します。
ゼロは圧縮無しを意味します。
カスタムアーカイブ形式では、これは個々のテーブルデータセグメントの圧縮を指定するもので、デフォルトでは中間レベルで圧縮されます。
平文出力では、非ゼロの圧縮レベルの指定によりあたかも<span class="application">gzip</span>に渡されたかのように出力ファイル全体が圧縮されます。
しかしデフォルトは圧縮無しです。
tarアーカイブ形式では現在圧縮を全くサポートしていません。
       </p></dd><dt><span class="term"><code class="option">--binary-upgrade</code></span></dt><dd><p>このオプションは現位置でのアップグレード用のユーティリティにより使用されるものです。
他の目的での使用は推奨されませんし、サポートもされません。
このオプションの動作は、将来通知することなく変更される可能性があります。
       </p></dd><dt><span class="term"><code class="option">--column-inserts</code><br /></span><span class="term"><code class="option">--attribute-inserts</code></span></dt><dd><p>明示的に列名を付けた<code class="command">INSERT</code>コマンド（<code class="literal">INSERT INTO <em class="replaceable"><code>table</code></em> (<em class="replaceable"><code>column</code></em>, ...)VALUES...</code>）としてデータをダンプします。
これによりリストアは非常に遅くなります。
主に<span class="productname">PostgreSQL</span>以外のデータベースへロード可能なダンプを作成する時に有用です。
しかし、このオプションは各行に対して別々のコマンドを生成しますので、一行を再ロードする時にエラーになったとしても、テーブルの内容まるごと失われることなく、一行のみが失われるだけですみます。
       </p></dd><dt><span class="term"><code class="option">--disable-dollar-quoting</code></span></dt><dd><p>このオプションは、関数本体用のドル引用符の使用を無効にし、強制的に標準SQLの文字列構文を使用した引用符付けを行います。
       </p></dd><dt><span class="term"><code class="option">--disable-triggers</code></span></dt><dd><p>このオプションは、データのみのダンプを作成する場合にしか適用されません。
データの再ロード中に、対象テーブル上のトリガを一時的に無効にするコマンドを出力するよう<span class="application">pg_dump</span>に指示します。
このオプションは、データの再ロード中には呼び出したくない参照整合性検査やその他のトリガがテーブル上にある場合に使用します。
       </p><p>現在のところ、<code class="option">--disable-triggers</code>に対応するコマンドを実行するのは、スーパーユーザでなければなりません。
そのため、<code class="option">-S</code>でスーパーユーザの名前を指定するか、あるいは、可能であれば、スーパーユーザ権限でスクリプトを開始するよう注意する必要があります。
       </p><p>このオプションは平文形式の場合にのみ有効です。
他の形式では、<code class="command">pg_restore</code>を呼び出す時にこのオプションを指定することができます。
       </p></dd><dt><span class="term"><code class="option">--enable-row-security</code></span></dt><dd><p>このオプションは、行セキュリティのあるテーブルの内容をダンプするときにのみ意味を持ちます。
デフォルトでは、<span class="application">pg_dump</span>は<a class="xref" href="runtime-config-client.html#GUC-ROW-SECURITY">row_security</a>をoffに設定し、テーブルからすべてのデータがダンプされるようにします。
ユーザが行セキュリティを無視できるだけの十分な権限を持っていない場合、エラーが発生します。
このパラメータは<span class="application">pg_dump</span>が<a class="xref" href="runtime-config-client.html#GUC-ROW-SECURITY">row_security</a>をonに設定するようにすることで、テーブルの内容のうち、ユーザがアクセスできる部分をダンプすることを可能にします。
       </p><p>リストア時の<code class="command">COPY FROM</code>が行セキュリティをサポートしていないので、今、このオプションを使う場合は、ダンプを<code class="command">INSERT</code>形式にするのがおそらく望ましいでしょう。
       </p></dd><dt><span class="term"><code class="option">--exclude-table-data=<em class="replaceable"><code>table</code></em></code></span></dt><dd><p><em class="replaceable"><code>table</code></em>にマッチするすべてのテーブルのデータをダンプしません。
パターンは<code class="option">-t</code>用の規則と同じ規則にしたがって解釈されます。
複数のパターンのいずれかにマッチするテーブルを除外することができるように、<code class="option">--exclude-table-data</code>を複数回与えることができます。
このオプションは、特定のテーブルに関してデータを格納する必要はないがテーブル定義は必要である場合に有用です。
       </p><p>データベース内のすべてのテーブルに関してデータを除外するためには、<code class="option">--schema-only</code>を参照してください。
       </p></dd><dt><span class="term"><code class="option">--if-exists</code></span></dt><dd><p>データベースオブジェクトを初期化するときに、条件コマンドを使います(つまり、<code class="literal">IF EXISTS</code>句を追加します)。
このオプションは、<code class="option">--clean</code>も指定されているのでなければ、有効にはなりません。
       </p></dd><dt><span class="term"><code class="option">--inserts</code></span></dt><dd><p>データを（<code class="command">COPY</code>ではなく）<code class="command">INSERT</code>コマンドの形式でダンプします。
これを行うとリストアに非常に時間がかかります。
主に<span class="productname">PostgreSQL</span>以外のデータベースへロード可能なダンプを作成する時に有用です。
しかし、このオプションは各行に対して別々のコマンドを生成しますので、一行を再ロードする時にエラーになったとしても、テーブルの内容まるごと失われることなく、一行のみが失われるだけですみます。
列の順序を変更した場合はリストアが失敗する可能性があることに注意してください。
<code class="option">--column-inserts</code>はさらに処理が遅くなりますが、列の順序変更に対して安全です。
       </p></dd><dt><span class="term"><code class="option">--lock-wait-timeout=<em class="replaceable"><code>timeout</code></em></code></span></dt><dd><p>ダンプの開始時に共有テーブルのロックを永遠に待ちません。
代わりに指定した<em class="replaceable"><code>timeout</code></em>内にテーブルロックを獲得できなければ失敗します。
タイムアウトは<code class="command">SET statement_timeout</code>で受け付けられる任意の書式で指定できます。
（使用可能な形式はダンプの元となるサーバのバージョンに依存して異なりますが、すべてのバージョンにおいてミリ秒単位の整数値は受け付けられます。）
       </p></dd><dt><span class="term"><code class="option">--no-publications</code></span></dt><dd><p>パブリケーションをダンプしません。
       </p></dd><dt><span class="term"><code class="option">--no-security-labels</code></span></dt><dd><p>セキュリティラベルをダンプしません。
       </p></dd><dt><span class="term"><code class="option">--no-subscriptions</code></span></dt><dd><p>サブスクリプションをダンプしません。
       </p></dd><dt><span class="term"><code class="option">--no-sync</code></span></dt><dd><p>デフォルトでは、<code class="command">pg_dump</code>はすべてのファイルが確実にディスクに書き出されるまで待機します。
このオプションを使うと<code class="command">pg_dump</code>は待機せずに戻るため、より高速になりますが、これは、その後にオペレーティングシステムがクラッシュすると、ダンプが破損する可能性があることを意味します。
一般的に言って、このオプションはテスト用には有用ですが、実運用の環境からデータをダンプするときには使用しない方が良いでしょう。
       </p></dd><dt><span class="term"><code class="option">--no-synchronized-snapshots</code></span></dt><dd><p>このオプションにより、9.2より前のサーバに対して<code class="command">pg_dump -j</code>を実行することができます。
詳細については<code class="option">-j</code>パラメータの説明を参照してください。
       </p></dd><dt><span class="term"><code class="option">--no-tablespaces</code></span></dt><dd><p>テーブル空間を選択するコマンドを出力しません。
このオプションを使用すると、すべてのオブジェクトはリストア時のデフォルトのテーブル空間の中に作成されます。
       </p><p>このオプションは平文書式でのみ有意です。
アーカイブ書式では、<code class="command">pg_restore</code>を呼び出す時にこのオプションを指定することができます。
       </p></dd><dt><span class="term"><code class="option">--no-unlogged-table-data</code></span></dt><dd><p>ログを取らないテーブルの内容をダンプしません。
このオプションはテーブル定義（スキーマ）をダンプするかどうかには影響しません。
そのテーブルデータのダンプを抑制するだけです。
スタンバイサーバからダンプを行う場合、ログを取らないテーブル内のデータは常に除外されます。
       </p></dd><dt><span class="term"><code class="option">--quote-all-identifiers</code></span></dt><dd><p>強制的にすべての識別子に引用符を付与します。
このオプションは、<span class="application">pg_dump</span>のメジャーバージョンとは異なるメジャーバージョンの<span class="productname">PostgreSQL</span>のサーバーからデータベースをダンプするとき、あるいは出力を異なるメジャーバージョンのサーバにロードする予定であるときに推奨されます。
デフォルトでは、<span class="application">pg_dump</span>は、それ自身のメジャーバージョンにおける予約語である識別子に対してのみ引用符を付与します。
これは、他のバージョンのサーバを処理するときに互換性の問題を引き起こす場合があります。
他のバージョンのサーバでは予約語の集合が多少、異なる場合があるからです。
<code class="option">--quote-all-identifiers</code>を使用することで、ダンプのスクリプトが読みにくくなりますが、このような問題を防ぐことができます。
       </p></dd><dt><span class="term"><code class="option">--section=<em class="replaceable"><code>sectionname</code></em></code></span></dt><dd><p>指定した部分のみをダンプします。
部分名は<code class="option">pre-data</code>、<code class="option">data</code>、<code class="option">post-data</code>のいずれかを取ることができます。
複数の部分を選択するために、このオプションは複数回指定することができます。
デフォルトではすべての部分をダンプします。
         </p><p>data部分には、実際のテーブルデータとラージオブジェクトの中身、シーケンス値が含まれます。
post-data項目は、インデックス定義、トリガ定義、ルール定義、有効化された検査制約以外の制約定義が含まれます。
pre-data項目は、他のすべてのデータ定義項目が含まれます。
         </p></dd><dt><span class="term"><code class="option">--serializable-deferrable</code></span></dt><dd><p>使用されるスナップショットがその後のデータベース状態と一貫性を持つことを保証するために、ダンプ時に<code class="literal">serializable</code>トランザクションを使用します。
ダンプが失敗したり、<code class="literal">serialization_failure</code>により他のトランザクションがロールバックしたりする危険がないように、トランザクションストリーム内で異常が発生することがない時点まで待つことでこれを行います。
トランザクション隔離および同時実行性の制御については<a class="xref" href="mvcc.html" title="Chapter 13. 同時実行制御">Chapter 13</a>を参照してください。
       </p><p>このオプションは障害対策のリカバリのみを目的とするダンプでは利点はありません。
元のデータベースを継続して更新しながら、レポート処理や他の読み取りのみの負荷分散のためにデータベースのコピーをロードするために使用されるダンプとして有用になります。
こうしないと、ダンプには
何らかのトランザクションの直列実行が最終的にコミットされた状態と一貫性がない状態が反映される可能性があります。
例えば、バッチ処理技術が使用される場合、
バッチは、バッチ内で存在するすべての項目を持たないダンプ内でクローズしたものと表示される可能性があります。
       </p><p>pg_dumpを始めた時に読み書きを行う実行中のトランザクションが存在しない場合、このオプションは何の差異ももたらしません。
読み書きを行うトランザクションが実行中の場合、確定できない期間、ダンプの起動が遅延される可能性があります。
動き出してからの性能は、このスイッチがある場合とない場合とで違いはありません。
       </p></dd><dt><span class="term"><code class="option">--snapshot=<em class="replaceable"><code>snapshotname</code></em></code></span></dt><dd><p>データベースのダンプを作成する時に、指定した同期スナップショットを使用します
（詳しくは<a class="xref" href="functions-admin.html#FUNCTIONS-SNAPSHOT-SYNCHRONIZATION-TABLE" title="Table 9.82. スナップショット同期関数">Table 9.82</a>を参照して下さい）。
         </p><p>このオプションは、ダンプを論理レプリケーションスロット（<a class="xref" href="logicaldecoding.html" title="Chapter 48. ロジカルデコーディング">Chapter 48</a>参照）あるいは同時実行セッションと同期させる必要がある時に役に立ちます。
         </p><p>並行ダンプの場合、新しいスナップショットを作る代わりに、このオプションで指定されたスナップショット名が使われます。
         </p></dd><dt><span class="term"><code class="option">--strict-names</code></span></dt><dd><p>各スキーマ指定(<code class="option">-n</code>/<code class="option">--schema</code>)および各テーブル指定(<code class="option">-t</code>/<code class="option">--table</code>)が、ダンプされるデータベース内の少なくとも1つのスキーマおよびテーブルにマッチすることを必要とします。
スキーマおよびテーブル指定のどれもがマッチするものを見つけられなかった場合は、<code class="option">--strict-names</code>がなくても<span class="application">pg_dump</span>はエラーを発生させることに注意して下さい。
       </p><p>このオプションは<code class="option">-N</code>/<code class="option">--exclude-schema</code>、<code class="option">-T</code>/<code class="option">--exclude-table</code>、<code class="option">--exclude-table-data</code>には影響を与えません。
除外のパターンがマッチするオブジェクトを見つけられないことは、エラーとはみなされません。
       </p></dd><dt><span class="term"><code class="option">--use-set-session-authorization</code></span></dt><dd><p>オブジェクトの所有権を決定するために、<code class="command">ALTER OWNER</code>コマンドの代わりに標準SQLの<code class="command">SET SESSION AUTHORIZATION</code>コマンドを出力します。
これにより、ダンプの標準への互換性が高まりますが、ダンプ内のオブジェクトの履歴によっては正しくリストアされない可能性が生じます。
また、<code class="command">SET SESSION AUTHORIZATION</code>を使用したダンプを正しくリストアするためには、確実にスーパーユーザ権限が必要となります。
<code class="command">ALTER OWNER</code>で必要な権限はこれよりも少なくなります。
       </p></dd><dt><span class="term"><code class="option">-?</code><br /></span><span class="term"><code class="option">--help</code></span></dt><dd><p><span class="application">pg_dump</span>のコマンドライン引数の使用方法を表示し、終了します。
       </p></dd></dl></div><p>
   </p><p>以下のコマンドラインオプションは、データベース接続パラメータを制御します。

    </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-d <em class="replaceable"><code>dbname</code></em></code><br /></span><span class="term"><code class="option">--dbname=<em class="replaceable"><code>dbname</code></em></code></span></dt><dd><p>接続するデータベースの名前を指定します。
コマンドラインでオプション以外の最初の引数として<em class="replaceable"><code>dbname</code></em>を指定することと同じです。
      </p><p>このパラメータに<code class="symbol">=</code>記号が含まれる場合や有効な<acronym class="acronym">URI</acronym>接頭辞（<code class="literal">postgresql://</code>または<code class="literal">postgres://</code>）から始まる場合、<em class="parameter"><code>conninfo</code></em>文字列として扱われます。
詳細については<a class="xref" href="libpq-connect.html" title="33.1. データベース接続制御関数">Section 33.1</a>を参照してください。
      </p></dd><dt><span class="term"><code class="option">-h <em class="replaceable"><code>host</code></em></code><br /></span><span class="term"><code class="option">--host=<em class="replaceable"><code>host</code></em></code></span></dt><dd><p>サーバが稼働しているマシンのホスト名を指定します。
この値がスラッシュから始まる場合、Unixドメインソケット用のディレクトリとして使用されます。
デフォルトは、設定されていれば環境変数<code class="envar">PGHOST</code>から取得されます。
設定されていなければ、Unixドメインソケット接続とみなされます。
       </p></dd><dt><span class="term"><code class="option">-p <em class="replaceable"><code>port</code></em></code><br /></span><span class="term"><code class="option">--port=<em class="replaceable"><code>port</code></em></code></span></dt><dd><p>サーバが接続を監視するTCPポートもしくはローカルUnixドメインソケットファイルの拡張子を指定します。
デフォルトは、設定されている場合、環境変数<code class="envar">PGPORT</code>の値となります。設定されていなければ、コンパイル時のデフォルト値となります。
       </p></dd><dt><span class="term"><code class="option">-U <em class="replaceable"><code>username</code></em></code><br /></span><span class="term"><code class="option">--username=<em class="replaceable"><code>username</code></em></code></span></dt><dd><p>接続ユーザ名です。
       </p></dd><dt><span class="term"><code class="option">-w</code><br /></span><span class="term"><code class="option">--no-password</code></span></dt><dd><p>パスワードの入力を促しません。
サーバがパスワード認証を必要とし、かつ、<code class="filename">.pgpass</code>ファイルなどの他の方法が利用できない場合、接続試行は失敗します。
バッチジョブやスクリプトなどパスワードを入力するユーザが存在しない場合にこのオプションは有用かもしれません。
       </p></dd><dt><span class="term"><code class="option">-W</code><br /></span><span class="term"><code class="option">--password</code></span></dt><dd><p>データベースに接続する前に、<span class="application">pg_dump</span>は強制的にパスワード入力を促します。
       </p><p>サーバがパスワード認証を要求する場合<span class="application">pg_dump</span>は自動的にパスワード入力を促しますので、これが重要になることはありません。
しかし、<span class="application">pg_dump</span>は、サーバにパスワードが必要かどうかを判断するための接続試行を無駄に行います。
こうした余計な接続試行を防ぐために<code class="option">-W</code>の入力が有意となる場合もあります。
       </p></dd><dt><span class="term"><code class="option">--role=<em class="replaceable"><code>rolename</code></em></code></span></dt><dd><p>ダンプを作成する際に使用するロール名を指定します。
このオプションにより<span class="application">pg_dump</span>はデータベースに接続した後に<code class="command">SET ROLE</code> <em class="replaceable"><code>rolename</code></em>コマンドを発行するようになります。
認証に使用したユーザ（<code class="option">-U</code>で指定されたユーザ）が<span class="application">pg_dump</span>で必要とされる権限を持たないが、必要な権限を持つロールに切り替えることができる場合に有用です。
一部のインストレーションではスーパーユーザとして直接ログインさせないポリシーを取ることがありますが、このオプションを使用することでポリシーに反することなくダンプを作成することができます。
       </p></dd></dl></div><p>
   </p></div><div class="refsect1" id="id-1.9.4.12.7"><h2>環境</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="envar">PGDATABASE</code><br /></span><span class="term"><code class="envar">PGHOST</code><br /></span><span class="term"><code class="envar">PGOPTIONS</code><br /></span><span class="term"><code class="envar">PGPORT</code><br /></span><span class="term"><code class="envar">PGUSER</code></span></dt><dd><p>      デフォルトの接続パラメータです。
     </p></dd></dl></div><p>また、このユーティリティは、他のほとんどの<span class="productname">PostgreSQL</span>ユーティリティと同様、<span class="application">libpq</span>でサポートされる環境変数を使用します（<a class="xref" href="libpq-envars.html" title="33.14. 環境変数">Section 33.14</a>を参照してください）。
  </p></div><div class="refsect1" id="APP-PGDUMP-DIAGNOSTICS"><h2>診断</h2><p><span class="application">pg_dump</span>は内部で<code class="command">SELECT</code>文を実行します。
<span class="application">pg_dump</span>の実行時に問題が発生する場合は、<a class="xref" href="app-psql.html" title="psql"><span class="refentrytitle"><span class="application">psql</span></span></a>などを使用して、そのデータベースから情報をselectできることを確認してください。
また、<span class="application">libpq</span>フロントエンドライブラリで使用されるデフォルトの接続設定や環境変数も適用されます。
  </p><p>通常<span class="application">pg_dump</span>のデータベースに対する活動は統計情報コレクタにより収集されます。
これを望まない場合、<code class="envar">PGOPTIONS</code>または<code class="literal">ALTER USER</code>コマンドを使用して<code class="varname">track_counts</code>パラメータを偽に設定してください。
  </p></div><div class="refsect1" id="PG-DUMP-NOTES"><h2>注釈</h2><p>データベースクラスタにおいて<code class="literal">template1</code>データベースに対し独自の変更を行っている場合、<span class="application">pg_dump</span>の出力は、確実に空のデータベースにリストアするように注意してください。
そうしないと、おそらく追加されたオブジェクトの重複定義によってエラーが発生します。
独自の追加が反映されていない空のデータベースを作成するには、<code class="literal">template1</code>ではなく<code class="literal">template0</code>をコピーしてください。
以下に例を示します。
</p><pre class="programlisting">CREATE DATABASE foo WITH TEMPLATE template0;</pre><p>
  </p><p>データのみのダンプを選択し、<code class="option">--disable-triggers</code>オプションを使用する場合、<span class="application">pg_dump</span>はデータを挿入する前にユーザテーブルにトリガを無効にするコマンドを発行し、データの挿入が完了した後で、それらを再び有効にする問い合わせを発行します。
リストアが途中で停止した場合、システムカタログが不適切な状態のままになっている可能性があります。
  </p><p><span class="application">pg_dump</span>が生成するダンプファイルには、オプティマイザが問い合わせ計画を決定する際に使用される統計情報が含まれていません。
そのため、最適な性能を発揮するために、ダンプファイルからリストアした後で<code class="command">ANALYZE</code>を実行することをお勧めします。
詳しくは<a class="xref" href="routine-vacuuming.html#VACUUM-FOR-STATISTICS" title="24.1.3. プランナ用の統計情報の更新">Section 24.1.3</a>および<a class="xref" href="routine-vacuuming.html#AUTOVACUUM" title="24.1.6. 自動バキュームデーモン">Section 24.1.6</a>を参照してください。
ダンプファイルはまた<code class="command">ALTER DATABASE ... SET</code>コマンドがまったく含まれません。
これらの設定およびデータベースユーザと他のインストレーション全体の設定は<a class="xref" href="app-pg-dumpall.html" title="pg_dumpall"><span class="refentrytitle"><span class="application">pg_dumpall</span></span></a>によってダンプされます。
  </p><p><span class="application">pg_dump</span>は新しいバージョンの<span class="productname">PostgreSQL</span>へのデータ移行に使用されますので、<span class="application">pg_dump</span>の出力は<span class="application">pg_dump</span>のバージョンより新しいバージョンの<span class="productname">PostgreSQL</span>データベースへロード可能と想定できるようになっています。
また、<span class="application">pg_dump</span>は自身より古いバージョンの<span class="productname">PostgreSQL</span>データベースを読み取ることもできます。
（現在はバージョン8.0までのサーバをサポートします。）
しかし、<span class="application">pg_dump</span>はそれ自身のメジャーバージョンより新しい<span class="productname">PostgreSQL</span>サーバのダンプを取ることはできません。
無効なダンプを作成するリスクは取らず、ダンプしようとさえしません。
また、<span class="application">pg_dump</span>の出力がメジャーバージョンが古いサーバにロードできるとは、たとえ同じバージョンのサーバから取得したダンプであっても、保証されていません。
より古いサーバへのダンプファイルのロードには、古いサーバでは理解できない構文を削除するために、ダンプファイルの手作業による修正が必要になることがあります。
バージョンをまたがる場合は<code class="option">--quote-all-identifiers</code>オプションの使用が推奨されます。
これにより、<span class="productname">PostgreSQL</span>の異なるバージョンで、予約語のリストが変わることによって発生する問題を防ぐことができるからです。
  </p><p>論理レプリケーションのサブスクリプションをダンプするとき、<span class="application">pg_dump</span>は<code class="literal">NOCONNECT</code>オプションを使用する<code class="command">CREATE SUBSCRIPTION</code>生成するため、サブスクリプションのリストア時には、レプリケーションスロットの作成や初回のテーブルコピーのためのリモート接続が行われません。
このため、リモートサーバへのネットワーク接続を必要とせずにダンプをリストアできます。
その後でサブスクリプションを適切な方法で再有効化するのはユーザの責任です。
関連するホストが変更されたときは、接続情報も変更しなければならないかもしれません。
新しく完全なテーブルコピーを開始する前に、コピー先のテーブルを空にするのが適切なこともあります。
  </p></div><div class="refsect1" id="PG-DUMP-EXAMPLES"><h2>例</h2><p><code class="literal">mydb</code>という名前のデータベースをSQLスクリプトファイルにダンプします。
</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>pg_dump mydb &gt; db.sql</code></strong></pre><p>
  </p><p><code class="literal">newdb</code>という名前の（新規に作成した）データベースにスクリプトを再ロードします。

</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>psql -d newdb -f db.sql</code></strong></pre><p>
  </p><p>カスタム形式のアーカイブファイルにデータベースをダンプします。

</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>pg_dump -Fc mydb &gt; db.dump</code></strong></pre><p>
  </p><p>ディレクトリ形式アーカイブにデータベースをダンプします。

</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>pg_dump -Fd mydb -f dumpdir</code></strong></pre><p>
  </p><p>5個の作業用ジョブを使用してデータベースをdirectory形式のアーカイブにダンプします。

</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>pg_dump -Fd mydb -j 5 -f dumpdir</code></strong></pre><p>
  </p><p><code class="literal">newdb</code>という名前の（新規に作成した）データベースにアーカイブファイルを再ロードします。

</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>pg_restore -d newdb db.dump</code></strong></pre><p>
  </p><p><code class="literal">mytab</code>という名前の単一のテーブルをダンプします。

</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>pg_dump -t mytab mydb &gt; db.sql</code></strong></pre><p>
  </p><p><code class="literal">detroit</code>スキーマ内の名前が<code class="literal">emp</code>で始まるすべてのテーブルをダンプします。
ただし、<code class="literal">employee_log</code>という名前のテーブルは除きます。

</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>pg_dump -t 'detroit.emp*' -T detroit.employee_log mydb &gt; db.sql</code></strong></pre><p>
  </p><p><code class="literal">east</code>または<code class="literal">west</code>で始まり<code class="literal">gsm</code>で終わるスキーマをすべてダンプします。
ただし、<code class="literal">test</code>という単語を含む場合は除きます。


</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>pg_dump -n 'east*gsm' -n 'west*gsm' -N '*test*' mydb &gt; db.sql</code></strong></pre><p>
  </p><p>正規表現記法を使用してオプションをまとめた形で同じことを行います。

</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>pg_dump -n '(east|west)*gsm' -N '*test*' mydb &gt; db.sql</code></strong></pre><p>
  </p><p><code class="literal">ts_</code>から始まる名前のテーブルを除き、すべてのデータベースオブジェクトをダンプします。

</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>pg_dump -T 'ts_*' mydb &gt; db.sql</code></strong></pre><p>
  </p><p>大文字または大文字小文字混在の名前を<code class="option">-t</code>などのスイッチに指定するには、名前を二重引用符で括らなければなりません。
さもないと小文字に変換されます。（<a class="xref" href="app-psql.html#APP-PSQL-PATTERNS" title="パターン">パターン</a>を参照してください。）
しかし、二重引用符はシェルでも特別に扱われますので、これも引用符で括らなければなりません。
したがって、大文字小文字混在の名前を持つテーブルを1つダンプするには、以下のようにしなければなりません。

</p><pre class="screen"><code class="prompt">$</code> <strong class="userinput"><code>pg_dump -t "\"MixedCaseName\"" mydb &gt; mytab.sql</code></strong></pre></div><div class="refsect1" id="id-1.9.4.12.11"><h2>関連項目</h2><span class="simplelist"><a class="xref" href="app-pg-dumpall.html" title="pg_dumpall"><span class="refentrytitle"><span class="application">pg_dumpall</span></span></a>, <a class="xref" href="app-pgrestore.html" title="pg_restore"><span class="refentrytitle">pg_restore</span></a>, <a class="xref" href="app-psql.html" title="psql"><span class="refentrytitle"><span class="application">psql</span></span></a></span></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="app-pgconfig.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="reference-client.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="app-pg-dumpall.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">pg_config </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> <span class="application">pg_dumpall</span></td></tr></table></div></body></html>