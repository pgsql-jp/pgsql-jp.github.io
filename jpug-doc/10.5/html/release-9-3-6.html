<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.71. リリース9.3.6</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-9-3-7.html" title="E.70. リリース9.3.7" /><link rel="next" href="release-9-3-5.html" title="E.72. リリース9.3.5" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.71. リリース9.3.6</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-9-3-7.html" title="E.70. リリース9.3.7">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix E. リリースノート">Up</a></td><th width="60%" align="center">Appendix E. リリースノート</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="release-9-3-5.html" title="E.72. リリース9.3.5">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-9-3-6"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.71. リリース9.3.6</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-9-3-6.html#id-1.11.6.75.4">E.71.1. バージョン9.3.6への移行</a></span></dt><dt><span class="sect2"><a href="release-9-3-6.html#id-1.11.6.75.5">E.71.2. 変更点</a></span></dt></dl></div><p><strong>リリース日: </strong>2015-02-05</p><p>このリリースは9.3.5に対し、各種不具合を修正したものです。
9.3メジャーリリースにおける新機能については、<a class="xref" href="release-9-3.html" title="E.77. リリース9.3">Section E.77</a>を参照してください。
  </p><div class="sect2" id="id-1.11.6.75.4"><div class="titlepage"><div><div><h3 class="title">E.71.1. バージョン9.3.6への移行</h3></div></div></div><p>9.3.Xからの移行ではダンプ/リストアは不要です。
   </p><p>しかしながら、あなたがWindowsユーザで<span class="quote">“<span class="quote">Norwegian (Bokmål)</span>”</span>ロケールを使っているのなら、アップグレード後に<span class="productname">PostgreSQL</span>システムカタログ内に格納された全ての<span class="quote">“<span class="quote">Norwegian (Bokmål)_Norway</span>”</span>または<span class="quote">“<span class="quote">norwegian-bokmal</span>”</span>ロケール名をASCIIによる別名<span class="quote">“<span class="quote">Norwegian_Norway</span>”</span>に置き換える手動操作が必要です。
詳細は<a class="ulink" href="http://wiki.postgresql.org/wiki/Changes_To_Norwegian_Locale" target="_top">http://wiki.postgresql.org/wiki/Changes_To_Norwegian_Locale</a>を参照してください。
   </p><p>また、9.3.5よりも前のリリースからアップグレードする場合は、<a class="xref" href="release-9-3-5.html" title="E.72. リリース9.3.5">Section E.72</a>を参照して下さい。
   </p></div><div class="sect2" id="id-1.11.6.75.5"><div class="titlepage"><div><div><h3 class="title">E.71.2. 変更点</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="function">to_char()</code>のバッファオーバーランを修正しました。
(Bruce Momjian)
     </p><p><code class="function">to_char()</code>が大きな桁数をとる数値書式テンプレートを処理するとき、<span class="productname">PostgreSQL</span>がバッファ終端を超えて読み取ることがありえました。
また、巧妙に作りこまれたタイムスタンプ書式テンプレートに対して、<span class="productname">PostgreSQL</span>がバッファ終端を超えて書き込むことがありえました。
どちらの場合もサーバをクラッシュさせることができます。
可能性は低いと見られますが、権限昇格に至る攻撃ができる可能性も排除できません。
(CVE-2015-0241)
     </p></li><li class="listitem"><p><code class="function">*printf()</code>置換関数におけるバッファオーバランを修正しました。
(Tom Lane)
     </p><p><span class="productname">PostgreSQL</span>には<code class="function">printf</code>や関連する関数の置き換え実装が含まれています。
およそ500桁以上の精度で浮動小数点数を（変換指定子<code class="literal">e</code>、<code class="literal">E</code>、<code class="literal">f</code>、<code class="literal">F</code>、<code class="literal">g</code>、<code class="literal">G</code>で）整形するとき、これらのコードでスタックバッファオーバランが起きます。
これはサーバをクラッシュさせ、また、権限昇格に至る攻撃ができる可能性も排除できません。データベース利用者はSQL関数<code class="function">to_char()</code>を通してこのバッファオーバランを起こすことができます。
<span class="productname">PostgreSQL</span>コア機能に影響があるほか、printf族の関数を使用している拡張モジュールにも危険があると考えられます。
     </p><p>この問題は主にWindows上の<span class="productname">PostgreSQL</span>に影響があります。
<span class="productname">PostgreSQL</span>は、その他の現代的なプラットフォーム上では、これら関数のシステム実装を使います。
(CVE-2015-0242)
     </p></li><li class="listitem"><p><code class="filename">contrib/pgcrypto</code>でのバッファオーバランを修正しました。
(Marko Tiikkaja, Noah Misch)
     </p><p><code class="filename">pgcrypto</code>モジュールでのメモリサイズ追跡の誤りにより、
スタックバッファオーバランと未初期化メモリ内容への不適切な依存が起こりえました。
このバッファオーバランはサーバをクラッシュさせ、また、
権限昇格に至る攻撃ができる可能性も排除できません。
(CVE-2015-0243)
     </p></li><li class="listitem"><p>エラー後にフロントエンド/バックエンドプロトコルの同期が失われる可能性があり、
修正しました。
(Heikki Linnakangas)
     </p><p>サーバがクライアントからのメッセージを読んでいる途中に何らかエラーが起きた場合、同期が失われ、メッセージデータの一部分を新たなプロトコルメッセージと解釈しようと誤って試みられる可能性がありました。
攻撃者がコマンドパラメータ中に巧妙に作りこんだバイナリデータを送り出すことで、SQLコマンドを注入することができるかもしれません。
この筋書を引き起こす最もありそうなエラーは、ステートメントタイムアウトと問い合わせキャンセルです。
とりわけ脆弱なのは、タイムアウトを使っていて、任意のユーザ作成データをバイナリの問い合わせパラメータとして送れるアプリケーションです。
ステートメントタイムアウトを無効にすることで、脆弱性を悪用される危険性を無くせはしませんが軽減できます。
本問題を報告してくれた Emil Lenngren 氏に感謝します。(CVE-2015-0244)
     </p></li><li class="listitem"><p>制約違反エラーメッセージを通した情報漏洩を修正しました。
(Stephen Frost)
     </p><p>いくつかのサーバエラーメッセージは一意性制約などの制約に違反した列の値を表示します。ユーザがテーブルの全列に<code class="literal">SELECT</code>権限を持たないとすれば、このことは、見ることができてはいけない値が露出していることになります。
該当コードを修正し、値が表示されるのは SQLコマンドに由来する値であるか、ユーザで<code class="literal">SELECT</code>可能であるときだけにしました。
(CVE-2014-8161)
     </p></li><li class="listitem"><p>Windows上で回帰テストの一時インストールへの接続制限を厳重にしました。
(Noah Misch)
     </p><p>テスト一式を起動したOSユーザからのみ接続を許すようにSSPI認証を使うようにします。
これは、他のユーザがテスト用postmasterに接続できるという、他のプラットフォーム向けで以前封鎖したのと同様の脆弱性を、Windows上でも封鎖するものです。
(CVE-2014-0067)
     </p></li><li class="listitem"><p>Windowsの<span class="quote">“<span class="quote">Norwegian (Bokmål)</span>”</span>ロケールに対応しました。
(Heikki Linnakangas)
     </p><p>非ASCIIのロケール名は、どのエンコーディングで解釈すべきか明らかでないので問題があります。やっかいなロケール名にASCIIの別名<span class="quote">“<span class="quote">Norwegian_Norway</span>”</span>を割り当てました。
     </p></li><li class="listitem"><p><code class="command">ALTER DATABASE SET TABLESPACE</code> を使ってデータベースを新しいテーブルスペースに移動し、直後に元のテーブルスペースに戻した場合にデータ破損する可能性がある問題を修正しました。
     </p></li><li class="listitem"><p>トランザクションの中で実行した<code class="command">ANALYZE</code>をロールバックした際にテーブル破損する問題を修正しました。
(Andres Freund, Tom Lane, Michael Paquier)
     </p><p>以前にテーブルから最新の索引、ルール、トリガーが取り除かれたトランザクションが失敗した時、関連する<code class="structname">pg_class</code>に本来はセットされるべきではない破損状態としてのフラグを伴って表が残されていました。
     </p></li><li class="listitem"><p>ログを取らないテーブルが<code class="command">CREATE DATABASE</code>や<code class="command">ALTER DATABASE SET TABLESPACE</code>中に正しくコピーされることを保証しました。(Pavan Deolasee, Andres Freund)
     </p></li><li class="listitem"><p>誤った<code class="structname">CreateEventTrigStmt</code>.<code class="structfield">eventname</code>の処理を修正しました。
(Petr Jelinek)
     </p><p>プリペアードクエリとして、もしくは拡張問い合わせプロトコルを通して<code class="command">CREATE EVENT TRIGGER</code>が実行された場合に誤った動きをする可能性がありました。
     </p></li><li class="listitem"><p>テーブルを参照する前にそのテーブルを再帰的に参照する場合に<code class="command">DROP</code>の依存関係を正しく検索するよう修正しました。
      (Petr Jelinek, Tom Lane)
     </p><p>拡張がデータ型とそのデータ型を使用するテーブルの両方を作成するときにのみ発生することが知られています。この障害のあるコードは、必要とされるべきではない<code class="literal">CASCADE</code>が指定されていない<code class="command">DROP EXTENSION</code>が拒否される可能性があります。
     </p></li><li class="listitem"><p>EvalPlanQual処理で解放済みメモリを使用してしまう問題を修正しました。
(Tom Lane)
     </p><p><code class="literal">READ COMMITTED</code>モードで最近に更新した行をロックまたは更新すると、
本障害によりクラッシュする可能性がありました。
     </p></li><li class="listitem"><p>EvalPlanQual処理でタプルロック取得を試みる際にデッドロックに陥る可能性を回避しました。
(Álvaro Herrera, Mark Kirkwood)
     </p></li><li class="listitem"><p>複数の他トランザクションが同時に<code class="literal">FOR SHARE</code>タプルロックを保持している中で、トランザクションが<code class="literal">FOR NO KEY EXCLUSIVE</code>タプルロックの取得を試みて待つのに失敗してしまうのを、修正しました。
(Álvaro Herrera)
     </p></li><li class="listitem"><p>子テーブルの部分インデックスを使用した時の<code class="command">SELECT FOR UPDATE</code>のプランを修正しました。(Kyotaro Horiguchi)
     </p><p><code class="literal">READ COMMITTED</code>モードの場合、<code class="command">SELECT FOR UPDATE</code>は部分インデックスの<code class="literal">WHERE</code>条件が最新のupdateされた行が<code class="literal">WHERE</code>条件をまだ満たしているか再度チェックする必要があります。この要件はそのインデックスが継承された小テーブルに付いている場合に失われます。このため、問い合わせ条件を満たしていない行を不正に返す可能性がありました。
     </p></li><li class="listitem"><p>稀に<code class="command">SELECT FOR UPDATE</code>が行を2回返し、他の行を返し損ねる可能性がある問題を修正しました。(Tom Lane)
     </p><p><code class="literal">READ COMMITTED</code>モードでは、継承された木を走査する<code class="command">SELECT FOR UPDATE</code>が後の子テーブルから返すべき行の代わりに前の子テーブルから行を不正に返すことがありました。
     </p></li><li class="listitem"><p>幅の大きいテーブルに対する<code class="command">EXPLAIN</code>の性能を改善しました。
(Tom Lane)
     </p></li><li class="listitem"><p><code class="literal">FOREIGN KEY</code>定義の被参照列リストに重複した列名が登録されることを拒絶します。
(David Rowley)
     </p><p>この制限はSQL標準です。以前はこのようなケースは明確には拒絶していませんでした。しかし、後にこのコードは奇妙なロックのエラーを伴って失敗するでしょう。
     </p></li><li class="listitem"><p><code class="literal">SELECT ... OFFSET -1</code>が再度エラーを返すようにしました。
(Tom Lane)
     </p><p>負のオフセット値は8.4からエラーになっていました。しかし、9.3で追加した最適化がこのケースでエラーを返さないように変えてしまいました。
期待した動作に戻しました。
     </p></li><li class="listitem"><p>JSONへのドメインの変換を以前の動作に戻しました。
      (Tom Lane)
     </p><p>この変更は、数値やブール値に対するドメインをJSONへの変換するときに、それらの基本型と同様に扱うようになります。
これは、9.3.5と9.2.9の前には、そのように動作していましたが、関連する問題を修正する時に意図せず変更されました。
     </p></li><li class="listitem"><p> <code class="function">json_agg()</code> が結果に余計な末尾の右大括弧を返さないようにしました。
     </p></li><li class="listitem"><p><code class="type">NUMERIC</code>型の値を増やしていって冪数が大きくなる時の不具合を修正しました。
(Tom Lane)
     </p><p>以前のコードでは誤った答えを得るか、答えがオーバーフローすることに気づく前に大量の時間とメモリを消費する可能性がありました。
     </p></li><li class="listitem"><p><code class="function">numeric_recv()</code>は<code class="literal">dscale</code>フィールドの値によって隠されたいかなる小数点以を切り捨てます。
(Tom Lane)
     </p><p><code class="type">numeric</code>値の位取り(<code class="literal">dscale</code>)表示は0ではない小数点以下の数値より小さくなってはいけません。
しかし、明らかに、少なくともバイナリの<code class="type">numeric</code>の値がそのように変換している壊れたクライアントアプリケーションが存在しました。
表示されていないにも関わらず、小数点以下の挙動が考慮されていたためにこのような奇妙な挙動が引き起こされていました。
引渡しの際のこの<span class="quote">“<span class="quote">隠された</span>”</span>小数点以下を切り捨てる修正にはリスクがあると思われます。このため、その値を実際に表示するようにしました。
     </p></li><li class="listitem"><p>正規表現の最短マッチの誤りを修正しました。
      (Tom Lane)
     </p><p>繰り返し回数が<code class="literal">?</code>量指定子(quantifier)やバウンド表現により制限されている場合に、しばしばマッチに失敗していました。
     </p></li><li class="listitem"><p>タイムゾーンの仕様範囲外の数値を拒絶します。
     </p><p>単純な数字型のタイムゾーンは+/- 168時間(1週間)を超える指定を許容しますが、特定のオペレーションでヌルポインタを参照することによるクラッシュを引き起こしていました。
そのような大きなUTCオフセットを使用するケースは存在しないため、これを拒絶します。
     </p></li><li class="listitem"><p><code class="type">tsquery</code> <code class="literal">@&gt;</code> <code class="type">tsquery</code>演算子の不具合を修正しました。
(Heikki Linnakangas)
     </p><p>2つの異なる用語が同じCRCを保持している場合、これらは一致すると考慮していました。また、もし2つの2番目の演算項目が最初の演算項目より長い範囲を持つ場合、最初の演算項目は2番目の演算項目に含まれないと想定されていました。これらは重複した用語を含んでいる場合、誤りでした。
     </p></li><li class="listitem"><p>不正なaffixファイルからispell辞書が守られるように改善しました。
(Tom Lane)
     </p></li><li class="listitem"><p>シソーラス辞書に64Kを超える言葉を許容するようにしました。
(David Boutin)
     </p><p>以前のコーディングでは辞書のサイズを超えた場合、クラッシュする可能性がありました。
このため、これは機能追加というより、より前のバージョンにパッチとして適用されたバグフィックスと考えられます。
     </p></li><li class="listitem"><p>     </p><p>これまで、入力<code class="type">xml</code>値で返される指定要素でなく先祖要素に名前空間宣言が付加されているとき、<code class="function">xpath()</code>呼び出しから返される<code class="type">xml</code>値は、名前空間宣言を持ちませんでした。
孤立と見なされるとき結果が正しいなら先祖の宣言を伝搬するようにしました。
     </p></li><li class="listitem"><p>行全体の変数で期待される列名が、複合型引数を取り列名に注意を払う関数に伝わることを、保証するようになりました。
(Tom Lane)
     </p><p>いくつかの状況では、<code class="literal">row_to_json(tab.*)</code>などのデータ構成で、予想される列名にならなかったかもしれません。
これは9.4で適切に修正されていました。
古いブランチでは、今回名前が空にならないことを保証するようになります。
(いくつかの場合では、元となるテーブルの列名ではなく、クエリが割り当てられた別名で表示されます。）
     </p></li><li class="listitem"><p>FDWクエリで、システム列の取り扱い、特に<code class="structfield">tableoid</code>の誤りを修正しました。(Etsuro Fujita)
     </p></li><li class="listitem"><p>範囲演算子の選択率見積についていくつか誤りを修正しました。
(Emre Hasegeli)
     </p><p>このパッチは稀なプランナエラー <span class="quote">“<span class="quote">unexpected operator NNNN</span>”</span>（予想外の演算子NNNN）を修正して、そのほかいくつかの選択率見積を改善します。
     </p></li><li class="listitem"><p>インデックス修飾子として<code class="literal"><em class="replaceable"><code>indexed_column</code></em> = ANY (<em class="replaceable"><code>array</code></em>)</code>が劣った計画につながる場合を回避するようにしました。(Andrew Gierth)
     </p><p>単純なフィルタ条件を使用した方が良いインデックス条件にもかかわらず、<code class="literal">= ANY</code>条件が最初以外のインデックス列に適用される場合がありました。
     </p></li><li class="listitem"><p>インラインに入れることができるSQLファンクションが<code class="literal">LATERAL</code>サブセレクトの中で複合型の引数を使用し、その複合型の引数がLATERAL参照されている場合、プランナが対象の<span class="quote">“<span class="quote">variable not found in subplan target list</span>”</span>(サブプランのリストの中から変数を見つけられない)問題を修正しました。
     </p></li><li class="listitem"><p>継承されたテーブルの中の<code class="literal">UNION ALL</code>サブクエリのような、入れ子追加リレーションのプランナの問題を修正しました。(Tom Lane)
     </p></li><li class="listitem"><p>GiST索引のタプルがページと一致しない場合、無限に再帰に入らず明確にエラーを返します。
(Andrew Gierth)
     </p></li><li class="listitem"><p>自動バキュームのテーブルごとの<code class="varname">cost_limit</code>や/または<code class="varname">cost_delay</code>をグローバルコストのバランスルールから除外します。
(Álvaro Herrera)
     </p><p>以前の挙動では結果として基本的にテーブルごとの設定は意図せず無視されていました。今では、テーブルはこれらの設定に沿って、他の自動バキュームワーカーの実行とは独立して、バキュームされます。この変更により、結果的にトータルI/Oが増えるかもしれませんので、そのような設定がされている場合は健全性のために再試験するべきです。
     </p></li><li class="listitem"><p>自動バキュームが名目上offとされている場合は、大規模な自動バキュームが実行されることを避けます。
     </p><p>自動バキュームが名目上offになっていたとしても、依然として自動バキュームワーカープロセスはXID周回問題の危険に備えバキュームを実行します。
しかしながら、いつもの自動バキュームの閾値に達していたとしても、そのワーカープロセスは対象になるデータベースの全てのテーブルにバキュームを実行していました。
この動作は決して期待された動作ではありません。最悪、周回の脅威への対応が遅れます。このため、autovacuumが切られている場合、ワーカープロセスは周回問題を回避する<span class="emphasis"><em>のみ</em></span>のために動作し、他の動作はしません。
     </p></li><li class="listitem"><p>クラッシュリカバリ中に、ログを取らないリレーションは空に書き換えられ、リカバリが完了したと見なされる前にディスクの同期がとられることを保証しました。
(Abhijit Menon-Sen, Andres Freund)
     </p><p>データベースのクラッシュリカバリ後にログを取らないリレーションに不要なデータが含まれているかもしれないシナリオを防ぎます。
     </p></li><li class="listitem"><p>ホットスタンバイの問い合わせとフルページイメージ再生の競合状態を修正しました。
(Heikki Linnakangas)
     </p><p>この誤りによってホットスタンバイの問い合わせ中に一時的なエラーを返す可能性がありました。
     </p></li><li class="listitem"><p>リカバリロジックが<code class="literal">COMMIT/ABORT PREPARED</code>のWALレコードを不適切に無視するいくつかのケースを修正しました。
(Heikki Linnakangas)
     </p><p>最も注目すべき見過ごしは<code class="varname">recovery_target_xid</code>が２フェーズコミットで停止に使えないことでした。
     </p></li><li class="listitem"><p>クラッシュリカバリの完了時に最新のWALファイルを再度アーカイブするのを防ぎました。
(Fujii Masao)
     </p></li><li class="listitem"><p>タイムラインヒストリーファイルとして<code class="filename">.ready</code>目印ファイルを不必要に作成しないようにしました。
(Fujii Masao)
     </p></li><li class="listitem"><p><code class="varname">log_statement</code>が<code class="literal">mod</code>もしくは<code class="literal">ddl</code>に設定されていて、プリペアードステートメントが使用されている場合、NULLポインタから値を取り出す可能性がある問題を修正しました。
(Fujii Masao)
     </p></li><li class="listitem"><p><span class="quote">“<span class="quote">pgstat wait timeout</span>”</span>というメッセージをWARNINGレベルからLOGレベルに変更して、文言もより分かりやすくしました。
(Tom Lane)
     </p><p>本メッセージは元々は基本的には起こらないケースと考えられていました。
しかし、遅いビルドファームのマシンでたびたび発生して、邪魔になっていました。
LOGレベルに下げ、また、言い回しに幾分の努力を払い、<span class="quote">“<span class="quote">using stale statistics instead of current ones because stats collector is not responding</span>”</span> （統計情報コレクタが応答しないため最新でない鮮度に欠けた統計情報を使います）としました。
     </p></li><li class="listitem"><p>動的バックグラウンドワーカーのpostmasterのリストが壊れる可能性がある問題を修正しました。
(Andres Freund)
     </p></li><li class="listitem"><p>他のSolaris以外のカーネルと同様に、CPUが非TSO統合モードで実行されているか正確さを保証するための実装のためのSPARCのスピンロックを修正しました。
(Andres Freund)
     </p></li><li class="listitem"><p>macOS の<code class="function">setlocale()</code>が不必要な余計なスレッドをpostmasterの中に作成した際に警告するようにしました。
(Noah Misch)
     </p></li><li class="listitem"><p><code class="function">PQconnectdbParams()</code>中で<code class="literal">dbname</code>が繰り返された場合の扱いを修正しました。
(Alex Shulgin)
     </p><p>最初の<code class="literal">dbname</code>文字列の出現箇所に接続文字列や拡張のためのURIが含まれていた場合、予期しない挙動をしました。
     </p></li><li class="listitem"><p>予期しないソケットのEOFが発生した場合に<span class="application">libpq</span>がふさわしいエラーメッセージを報告することを保証します。
(Marko Tiikkaja, Tom Lane)
     </p><p>カーネルの挙動によって、サーバーが予期せずソケットを閉じたとき、<span class="application">libpq</span>は役に立つメッセージではなく、空のエラー文字列を返していました。
     </p></li><li class="listitem"><p><code class="function">PQreset()</code>中の古いエラーメッセージを削除しました。
(Heikki Linnakangas)
     </p><p><code class="function">PQreset()</code>が繰り返し呼び出された場合、接続は再確立できず、<code class="structname">PGconn</code>のエラー文字列中に接続の試行に失敗したメッセージが蓄積されていました。
     </p></li><li class="listitem"><p><span class="application">libpq</span>の接続解析オプション中にメモリ不足状態を適切に取り扱うようにしました。
(Alex Shulgin, Heikki Linnakangas)
     </p></li><li class="listitem"><p><span class="application">ecpg</span>バージョンの<code class="function">ParseDateTime()</code>で配列オーバーランする問題を修正しました。
(Michael Paquier)
     </p></li><li class="listitem"><p><span class="application">initdb</span>でパスワードファイルが指定されたが中身が空であった場合のエラーメッセージをより分かりやすくしました。
(Mats Erik Andersson)
     </p></li><li class="listitem"><p>libedit(Editline library)を使用している<span class="application">psql</span>の<code class="command">\s</code>コマンドがよく動くようになりました。また、ページャに対応しました。
(Stepan Rutz, Tom Lane)
     </p><p>readlineではなくlibeditを使用している場合、<code class="command">\s</code>は全く読めないエンコードのフォーマットでコマンドの履歴を表示していました。
最近のバージョンのlibeditでは完全に失敗していました。ライブラリが履歴を表示せずに、履歴そのものを出力することで修正しました。
喜ばしい副次効果としてページャが割り当てられた時に使用されるようになりました。
     </p><p>このパッチではコマンドの履歴をlibeditで保存した際、新しい行のエンコーディングを一貫性無く適用してしまう不具合も修正しています。
古い<span class="application">psql</span>で書かれた複数行の実行履歴はこのパッチによって明確に読めるようになります。しかし、恐らく逆は成り立たず、
含まれる正確なlibeditのバージョンに依存します。
     </p></li><li class="listitem"><p><span class="application">psql</span>特別変数の解析について一貫性を改善しました。
(Tom Lane)
     </p><p><code class="literal">ECHO_HIDDEN</code>と<code class="literal">ON_ERROR_ROLLBACK</code>に対して<code class="literal">on</code>と<code class="literal">off</code>を異なる書き方（<code class="literal">1</code>/<code class="literal">0</code>など）で書けるようになります。
<code class="literal">COMP_KEYWORD_CASE</code>、<code class="literal">ECHO</code>、<code class="literal">ECHO_HIDDEN</code>、<code class="literal">HISTCONTROL</code>、<code class="literal">ON_ERROR_ROLLBACK</code>、および、<code class="literal">VERBOSITY</code>に対して解釈できない値には警告するようになります。
全ての特別変数の値について大文字小文字の区別なく受け付けるようになります。
これまでは大文字小文字の区別があるものと無いものが混在していました。
     </p></li><li class="listitem"><p>nullを<code class="command">\pset null</code> で指定された文字で表現する<span class="application">psql</span>コマンド<code class="command">\watch</code>を作りました。
(Fujii Masao)
     </p></li><li class="listitem"><p><code class="literal">border</code>を3とし、<code class="literal">linestyle</code> が <code class="literal">ascii</code>もしくは<code class="literal">unicode</code>の場合、 <span class="application">psql</span>の拡張表示が一貫して動作するように修正しました。
(Stephen Frost)
     </p></li><li class="listitem"><p><span class="application">pg_dump</span>をイベントトリガーのコメントを失敗せずに扱うように修正しました。
(Tom Lane)
     </p></li><li class="listitem"><p>並列の<span class="application">pg_dump</span>で<code class="option">--serializable-deferrable</code>を使えるようにしました。
(Kevin Grittner)
     </p></li><li class="listitem"><p>データベースが同じ2つのオブジェクトの間の複数の依存状態パスの多くのインスタンスを含んでいる場合の<span class="application">pg_dump</span>の性能を改善しました。(Tom Lane)
     </p></li><li class="listitem"><p>8.1より前のサーバからのダンプを出来るように<span class="application">pg_dumpall</span>を修正しました。(Gilles Darold)
     </p></li><li class="listitem"><p>スキーマのみが出力されたダンプファイルを並列でリストアする際にデッドロックが発生することがある問題を修正しました。
(Robert Haas, Tom Lane)
     </p></li><li class="listitem"><p>列が無い複合型の<code class="literal">pg_dump --binary-upgrade</code>でコアダンプする問題を修正しました。
(Rushabh Lathia)
     </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>実行中にデフォルトではないテーブルスペースのテーブルへのfsyncに失敗する問題を修正しました。
(Abhijit Menon-Sen, Andres Freund)
     </p><p>オペレーティングシステムがクラッシュしたり不運な場合に、アップグレード中にデータを失う結果になりえました。
     </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>で新しいクラスタを作成した場合に、以前は無かったTOASTテーブルを作成してしまう問題に対処しました。
(Bruce Momjian)
     </p><p>以前はこの挙動のために、OIDのコンフリクトによってpg_upgradeが失敗する可能性がありました。
     </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>中に古いクラスタに対して<code class="literal">autovacuum_multixact_freeze_max_age</code>の設定を試みないようにしました。
(Bruce Momjian)
     </p><p>9.3.Xのバージョンにはこのパラメータが無いため、エラーを返す可能性がありました。
幸い、実際にはこのパラメータをセットする必要は全くありません。
     </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>でトランザクションIDの世代を保存するようにしました。
(Bruce Momjian)
     </p><p>この手落ちを<span class="productname">PostgreSQL</span>は全く気にする必要がありません。
しかし、外部のレプリケーションツールを混乱させることがありました。
     </p></li><li class="listitem"><p><code class="literal">pg_basebackup -x/-X</code>で作られたWALファイルが、スタンバイが昇格したときに再度アーカイブされることを防止しました。
(Andres Freund)
     </p></li><li class="listitem"><p><span class="application">pg_receivexlog</span> のメモリリークを修正しました。
(Fujii Masao)
     </p></li><li class="listitem"><p>意図しない<span class="application">pg_receivexlog</span>のverboseメッセージを抑制する動作を修正しました。
(Fujii Masao)
     </p></li><li class="listitem"><p><code class="command">EXPLAIN ANALYZE</code>を実行する際に<code class="filename">contrib/auto_explain</code>が、ノード毎の時間的調整情報の出力が失敗するのを修正しました。
(Tom Lane)
     </p></li><li class="listitem"><p><code class="filename">contrib/citext</code>のunpackagedからのアップグレードスクリプトを修正しました。(Tom Lane)
     </p></li><li class="listitem"><p><code class="filename">contrib/hstore</code>で使用される<code class="function">hstore_to_json()</code>の
整数オーバーフローとバッファオーバーランを修正しました。
      (Heikki Linnakangas)
     </p></li><li class="listitem"><p><code class="function">hstore_to_json_loose()</code>で数字の認識を修正することで
JSONの数字と文字列が正しく区別されるようになりました。
     </p></li><li class="listitem"><p><code class="filename">contrib/pageinspect</code>の<code class="function">get_raw_page()</code>でのブロック番号確認を修正しました。
(Tom Lane)
     </p><p>      The incorrect checking logic could prevent access to some pages in
      non-main relation forks.
     </p></li><li class="listitem"><p><code class="filename">contrib/pgcrypto</code>の<code class="function">pgp_sym_decrypt()</code>でメッセージ長が2の冪乗から6小さい場合に失敗しないように修正しました。
(Marko Tiikkaja)
     </p></li><li class="listitem"><p><code class="filename">contrib/pg_test_fsync</code>のファイルデスクリプタのリークを修正しました。
      (Jeff Janes)
     </p><p>これはWindows上のテンポラリファイルの削除に失敗する場合がありました。
     </p></li><li class="listitem"><p><code class="filename">contrib/tablefunc</code>の<code class="function">connectby()</code>で、予想外の問い合わせ結果（特にNULL）を安全に扱えるようにしました。
(Michael Paquier)
     </p><p>これまで<code class="function">connectby()</code>はNULLのキー値に遭遇するとクラッシュしていました。現在はその行を出力しますが更なる再帰はしません。
     </p></li><li class="listitem"><p><code class="filename">contrib/xml2</code>の<code class="function">xslt_process()</code>でクラッシュしないようになりました。
(Mark Simonetti)
     </p><p><span class="application">libxslt</span>にはリソース開放に明文化されていない順序の依存関係があるようです。クラッシュを避けるように再規定しました。
     </p></li><li class="listitem"><p>いくつかの<code class="filename">contrib</code>のI/O関数に変動性のプロパティを印付けました。(Tom Lane)
     </p><p>以前の消極的すぎる印付でも通常の使用では影響は軽微でした。しかし、最適化の問題や、有効なインデックス式の定義の拒絶を引き起こす可能性があります。結果は大きく影響しないので、私たちはバージョン番号を変更せずに、拡張モジュールのスクリプトで関数定義を調整しました。
     </p></li><li class="listitem"><p>Coverity静的コード解析からの多数の警告を一掃しました。
(Andres Freund, Tatsuo Ishii, Marko Kreen, Tom Lane, Michael Paquier)
     </p><p>ほとんどは表面的な変更ですが、一部は稀に起こりうるバグの修正で、メモリ不足で失敗した後に適切なエラーを出さずクラッシュする例があります。
セキュリティ問題は無いと考えられます。
     </p></li><li class="listitem"><p>例えばWindowsなどでのEXEC_BACKENDビルド中のバックグラウンドワーカーのセットアップを修正しました。
     </p></li><li class="listitem"><p>ビルド中にOpenLDAPのバージョンの非互換を検出するようになりました。
(Noah Misch)
     </p><p>OpenLDAPのバージョン2.4.24から2.4.31(2.4.31を含む)では、<span class="productname">PostgreSQL</span>のバックエンドは終了時にクラッシュすることがありました。
コンパイル時のOpenLDAPバージョン番号を元に <span class="application">configure</span>で警告を上げ、<code class="filename">contrib/dblink</code>のリグレッションテストでクラッシュシナリオで試験します。
     </p></li><li class="listitem"><p>MSVCが無いWindowsのビルドで<code class="filename">libpq.dll</code>が実行権限有りでインストールされるようになりました。
(Noah Misch)
     </p></li><li class="listitem"><p><span class="application">pg_regress</span>が成功して終了したら、一時インストールで作成したものを全て削除するようにしました。
(Tom Lane)
     </p><p><code class="literal">make check-world</code>では多数の一時インストール作成を必要とするため、これは、<code class="literal">make check-world</code>実行におけるかなりのディスク使用量削減になります。
     </p></li><li class="listitem"><p>UTCオフセットが変化するタイムゾーン略称をサポートしました。
(Tom Lane)
     </p><p>これまで<span class="productname">PostgreSQL</span>では（<code class="literal">EST</code>などの）一つのタイムゾーン略称に関連づけられたUTCオフセットは、いかなるロケールでの使用でも変化しないと仮定していました。
しかしながら、実世界においてこの仮定は失敗しました。そこで、意味するUTCオフセットをときに変更できるタイムゾーン略称を導入しました。
1970年以来の略称のUTCオフセットが変更されたタイムゾーンロケールで本機能を使えるように（IANAタイムゾーンデータベースに基づいて）ゾーン略称定義ファイルを刷新しました。これからは<span class="productname">PostgreSQL</span>は、略称に日付に応じた適切なUTCオフセットを関連づけます。
     </p></li><li class="listitem"><p>タイムゾーンの略称リストを更新しました。
(Tom Lane)
     </p><p>CST(中国標準時)をリストに追加しました。
<span class="quote">“<span class="quote">アラビア夏時間</span>”</span>を意味するADTへの参照を取り除きました。
2007年よりこの略称は使用されていませんでした。そのため、<span class="quote">“<span class="quote">大西洋夏時間</span>”</span>と競合しているという主張は全く有用ではありませんでした。
CKT(クック諸島)、FJTおよびFJST(フィジー)のGMTからの完全に誤ったオフセットを修正しました。
それらは日付変更線すら適切ではありませんでした。
     </p></li><li class="listitem"><p><span class="application">tzdata</span>リリース2015aを更新しました。
     </p><p>IANAタイムゾーンのデータベースは南半球で現在最も多く実用されていると思われるオーストラリアの全てのタイムゾーンで<code class="literal">A<em class="replaceable"><code>x</code></em>ST</code>/<code class="literal">A<em class="replaceable"><code>x</code></em>DT</code>書式の略称に対応しています。
これらの名前は他の略称と競合することはありません。(1994年より使われなくなったアクレ夏時間のACSTを除く)
その結果、これらの名前は<span class="quote">“<span class="quote">Default</span>”</span>のタイムゾーンの略称のセットに採用されました。
<span class="quote">“<span class="quote">Australia</span>”</span> の略称セットは今では最も古くから利用されていると考えられる、CST, EAST,EST, SAST, SAT, そして WSTのみが含まれます。
SASTは<span class="quote">“<span class="quote">Default</span>”</span>の略称セットとして南アフリカ標準時間に変更された点に注意してください。
     </p><p>SRET(アジア/スレドネコリムスク)、XJT(アジア/ウルムチ)、西サモアで使われるWSST/WSDTのタイムゾーンも追加されました。
また、チリ、メキシコ、タークス・カイコス諸島(アメリカ/グランドターク)、フィジーで夏時間の変更がありました。
新しく、パプアニューギニアの太平洋時間/ブーガンビルを加えました。
また、1970年以前の歴史的なタイムゾーンのデータを大量に修正しました。
     </p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-9-3-7.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="release-9-3-5.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">E.70. リリース9.3.7 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> E.72. リリース9.3.5</td></tr></table></div></body></html>