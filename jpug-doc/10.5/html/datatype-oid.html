<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>8.18. オブジェクト識別子データ型</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="rangetypes.html" title="8.17. 範囲型" /><link rel="next" href="datatype-pg-lsn.html" title="8.19. pg_lsn 型" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">8.18. オブジェクト識別子データ型</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="rangetypes.html" title="8.17. 範囲型">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="datatype.html" title="Chapter 8. データ型">Up</a></td><th width="60%" align="center">Chapter 8. データ型</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="datatype-pg-lsn.html" title="8.19. pg_lsn 型">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="DATATYPE-OID"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.18. オブジェクト識別子データ型</h2></div></div></div><a id="id-1.5.7.26.2" class="indexterm"></a><a id="id-1.5.7.26.3" class="indexterm"></a><a id="id-1.5.7.26.4" class="indexterm"></a><a id="id-1.5.7.26.5" class="indexterm"></a><a id="id-1.5.7.26.6" class="indexterm"></a><a id="id-1.5.7.26.7" class="indexterm"></a><a id="id-1.5.7.26.8" class="indexterm"></a><a id="id-1.5.7.26.9" class="indexterm"></a><a id="id-1.5.7.26.10" class="indexterm"></a><a id="id-1.5.7.26.11" class="indexterm"></a><a id="id-1.5.7.26.12" class="indexterm"></a><a id="id-1.5.7.26.13" class="indexterm"></a><a id="id-1.5.7.26.14" class="indexterm"></a><p>オブジェクト識別子（OID）は<span class="productname">PostgreSQL</span>の内部で様々なシステムテーブルの主キーとして使用されます。
また、テーブル作成時に<code class="literal">WITH OIDS</code>が指定されているか、<a class="xref" href="runtime-config-compatible.html#GUC-DEFAULT-WITH-OIDS">default_with_oids</a>設定変数が有効な場合を除き、ユーザ作成のテーブルにはOIDは追加されません。
<code class="type">oid</code>データ型はオブジェクト識別子を表します。
<code class="type">oid</code>には別名型もいくつかあります。
<code class="type">regproc</code>、<code class="type">regprocedure</code>、<code class="type">regoper</code>、<code class="type">regoperator</code>、<code class="type">regclass</code>、<code class="type">regtype</code>、<code class="type">regrole</code>、<code class="type">regnamespace</code>、<code class="type">regconfig</code>および<code class="type">regdictionary</code>です。
<a class="xref" href="datatype-oid.html#DATATYPE-OID-TABLE" title="Table 8.24. オブジェクト識別子データ型">Table 8.24</a>に概要を示します。
   </p><p><code class="type">oid</code>データ型は現在、符号なし4バイト整数として実装されています。
これは、大規模なデータベース全体にわたって一意とするには十分ではありません。
大規模な個別のテーブル内においても十分ではないかもしれません。
そのため、ユーザ作成テーブルのOID列を主キーとして使用するのはお勧めできません。
OIDの使用は、システムテーブルへの参照の場合にのみ推奨されます。
   </p><p><code class="type">oid</code>データ型自体は、比較以外の演算はほとんど行いません。
しかし、整数としてキャストすることもでき、その場合標準の整数演算子を使用して操作することができます。
（これを行うと、符号付きと符号なしの間で混乱が起きかねないことに注意してください。）
   </p><p>OIDの別名データ型は、専用の入出力ルーチン以外には演算を行いません。
これらのルーチンでは、<code class="type">oid</code>型が使用するような未加工の数値ではなく、システムオブジェクト用のシンボル名を受け入れたり表示したりできます。
別名データ型により、オブジェクトのOID値の検索が簡単になります。
例えば、<code class="literal">mytable</code>テーブルに関連した<code class="structname">pg_attribute</code>行を確認するには、以下のように記述することができます。
</p><pre class="programlisting">SELECT * FROM pg_attribute WHERE attrelid = 'mytable'::regclass;</pre><p>
次のように記述する必要はありません。
</p><pre class="programlisting">SELECT * FROM pg_attribute
  WHERE attrelid = (SELECT oid FROM pg_class WHERE relname = 'mytable');</pre><p>
後者もそう悪くないように見えますが、これは過度に単純化されています。
異なるスキーマに<code class="literal">mytable</code>テーブルが複数ある場合には、正しいOIDを選択するために、より複雑な<code class="command">SELECT</code>が必要となります。
<code class="type">regclass</code>入力変換ではスキーマパスの設定に従ってテーブル検索を扱いますので、自動的に<span class="quote">“<span class="quote">正しい検索</span>”</span>を行います。
同様に、テーブルのOIDを<code class="type">regclass</code>にキャストすることは、数値のOIDのシンボル表示に便利です。
   </p><div class="table" id="DATATYPE-OID-TABLE"><p class="title"><strong>Table 8.24. オブジェクト識別子データ型</strong></p><div class="table-contents"><table class="table" summary="オブジェクト識別子データ型" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>型名</th><th>参照</th><th>説明</th><th>値の例</th></tr></thead><tbody><tr><td><code class="type">oid</code></td><td>すべて</td><td>数値オブジェクト識別子</td><td><code class="literal">564182</code></td></tr><tr><td><code class="type">regproc</code></td><td><code class="structname">pg_proc</code></td><td>関数名</td><td><code class="literal">sum</code></td></tr><tr><td><code class="type">regprocedure</code></td><td><code class="structname">pg_proc</code></td><td>引数の型を持つ関数</td><td><code class="literal">sum(int4)</code></td></tr><tr><td><code class="type">regoper</code></td><td><code class="structname">pg_operator</code></td><td>演算子名</td><td><code class="literal">+</code></td></tr><tr><td><code class="type">regoperator</code></td><td><code class="structname">pg_operator</code></td><td>引数の型を持つ演算子</td><td><code class="literal">*(integer,integer)</code> or <code class="literal">-(NONE,integer)</code></td></tr><tr><td><code class="type">regclass</code></td><td><code class="structname">pg_class</code></td><td>リレーション名</td><td><code class="literal">pg_type</code></td></tr><tr><td><code class="type">regtype</code></td><td><code class="structname">pg_type</code></td><td>データ型名</td><td><code class="literal">integer</code></td></tr><tr><td><code class="type">regrole</code></td><td><code class="structname">pg_authid</code></td><td>ロール名</td><td><code class="literal">smithee</code></td></tr><tr><td><code class="type">regnamespace</code></td><td><code class="structname">pg_namespace</code></td><td>名前空間名</td><td><code class="literal">pg_catalog</code></td></tr><tr><td><code class="type">regconfig</code></td><td><code class="structname">pg_ts_config</code></td><td>テキスト検索設定</td><td><code class="literal">english</code></td></tr><tr><td><code class="type">regdictionary</code></td><td><code class="structname">pg_ts_dict</code></td><td>テキスト検索辞書</td><td><code class="literal">simple</code></td></tr></tbody></table></div></div><br class="table-break" /><p>名前空間でグループ化されたオブジェクトのOID別名型はすべてスキーマ修飾名を受け入れ、出力時にスキーマ修飾名を表示します。
ただし、現在の検索パスでオブジェクトが見つけられなければ、修飾せずに出力します。
<code class="type">regproc</code>と<code class="type">regoper</code>別名型は、一意な（オーバーロードしていない）名前のみを入力として受け入れるため、これらの使用には限度があります。
ほとんどの場合、<code class="type">regprocedure</code>または<code class="type">regoperator</code>を使用するのが適切です。
<code class="type">regoperator</code>の場合、単項演算子は未使用のオペランドを<code class="literal">NONE</code>と記述することによって指定されます。
   </p><p>ほとんどのOID別名型のさらなる属性は依存性の作成です。
これらの型の1つの定数が格納された式内に存在する場合（列のデフォルト式やビューなど）、参照されるオブジェクトへの依存性を生成します。
例えば、列が<code class="literal">nextval('my_seq'::regclass)</code>というデフォルト式を持つ場合、<span class="productname">PostgreSQL</span>はデフォルト式が<code class="literal">my_seq</code>シーケンスに依存することを理解します。
システムは先にこのデフォルト式が削除されない限り、このシーケンスを削除させません。
   </p><div class="note"><h3 class="title">Note</h3><p>OID別名型はトランザクション隔離規則に完全には従いません。
プランナも単なる定数として扱いますので、次善の計画になるかもしれません。
   </p></div><p>システムが使用するもう1つの識別子の型は<code class="type">xid</code>、すなわちトランザクション（略して<abbr class="abbrev">xact</abbr>）識別子です。
これは<code class="structfield">xmin</code>システム列および<code class="structfield">xmax</code>システム列のデータ型です。
トランザクション識別子は32ビット長です。
   </p><p>システムが使用する3つ目の識別子は<code class="type">cid</code>、すなわちコマンド識別子です。
これは<code class="structfield">cmin</code>システム列および<code class="structfield">cmax</code>システム列のデータ型です。
コマンド識別子も32ビット長です。
   </p><p>システムが使用する最後の識別子は<code class="type">tid</code>、すなわちタプル識別子（行識別子）です。
これは<code class="structfield">ctid</code>システム列のデータ型です。
タプルIDはテーブル内の行の物理的位置を識別するための組（ブロック番号、ブロック内のタプルインデックス）です。
   </p><p>（システム列の詳細は<a class="xref" href="ddl-system-columns.html" title="5.4. システム列">Section 5.4</a>で説明します。）
   </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="rangetypes.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="datatype.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="datatype-pg-lsn.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">8.17. 範囲型 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 8.19. <acronym class="acronym">pg_lsn 型</acronym></td></tr></table></div></body></html>