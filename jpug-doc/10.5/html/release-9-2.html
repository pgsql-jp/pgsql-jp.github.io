<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>E.102. リリース9.2</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="release-9-2-1.html" title="E.101. リリース9.2.1" /><link rel="next" href="release-9-1-24.html" title="E.103. リリース9.1.24" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">E.102. リリース9.2</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="release-9-2-1.html" title="E.101. リリース9.2.1">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="release.html" title="Appendix E. リリースノート">Up</a></td><th width="60%" align="center">Appendix E. リリースノート</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="release-9-1-24.html" title="E.103. リリース9.1.24">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="RELEASE-9-2"><div class="titlepage"><div><div><h2 class="title" style="clear: both">E.102. リリース9.2</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="release-9-2.html#id-1.11.6.106.3">E.102.1. 概要</a></span></dt><dt><span class="sect2"><a href="release-9-2.html#id-1.11.6.106.4">E.102.2. バージョン9.2への移行</a></span></dt><dt><span class="sect2"><a href="release-9-2.html#id-1.11.6.106.5">E.102.3. 変更点</a></span></dt></dl></div><p><strong>リリース日: </strong>2012-09-10</p><div class="sect2" id="id-1.11.6.106.3"><div class="titlepage"><div><div><h3 class="title">E.102.1. 概要</h3></div></div></div><p>このリリースでは、新しいSQLの機能もありますが、主にパフォーマンスの向上に注力してきました。
レプリケーションのサポートにおいても開発が継続されています。
主な機能強化には以下のものがあります。
   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>問い合わせがヒープにアクセスせず、インデックスのみからデータを検索できるようにしました(<em class="firstterm">インデックスオンリースキャン</em>)。
       </p></li><li class="listitem"><p>プリペアド文が使われる場合であっても、特定のパラメータ値のための特別な計画をプランナが生成できるようにしました。
       </p></li><li class="listitem"><p>ネステッドループで内部インデックススキャンを使えるようプランナを改善しました。
       </p></li><li class="listitem"><p>ストリーミングレプリケーションのスレーブが、他のスレーブにデータを転送できるようにしました(<a class="link" href="warm-standby.html#CASCADING-REPLICATION" title="26.2.7. カスケードレプリケーション"><em class="firstterm">カスケードレプリケーション</em></a>)。
       </p></li><li class="listitem"><p><a class="link" href="app-pgbasebackup.html" title="pg_basebackup"><span class="application">pg_basebackup</span></a>で、スタンバイサーバからバックアップを作れるようにしました。
       </p></li><li class="listitem"><p>WALファイルが書き込まれた時に、その更新をアーカイブするツール<a class="link" href="app-pgreceivewal.html" title="pg_receivewal"><span class="application">pg_receivexlog</span></a>を追加しました。
       </p></li><li class="listitem"><p><a class="link" href="spgist.html" title="Chapter 63. SP-GiSTインデックス">SP-GiST</a> (Space-Partitioned GiST、空間分割されたGiST)というインデックスアクセス方法を追加しました。
       </p></li><li class="listitem"><p><a class="link" href="rangetypes.html" title="8.17. 範囲型">範囲データ型</a>のサポートを追加しました。
       </p></li><li class="listitem"><p><a class="link" href="datatype-json.html" title="8.14. JSONデータ型"><code class="type">JSON</code></a>データ型を追加しました。
       </p></li><li class="listitem"><p>ビューに<a class="link" href="sql-createview.html" title="CREATE VIEW"><code class="literal">security_barrier</code></a>オプションを追加しました。
       </p></li><li class="listitem"><p><span class="application">libpq</span>の接続文字列を、<a class="link" href="libpq-connect.html#LIBPQ-CONNSTRING" title="33.1.1. 接続文字列"><acronym class="acronym">URI</acronym></a>の形式にできるようにしました。
       </p></li><li class="listitem"><p><span class="application">libpq</span>が大きな結果集合をより良く処理できるように、<a class="link" href="libpq-single-row-mode.html" title="33.5. １行１行問い合わせ結果を受け取る">1行処理モード</a>を追加しました。
       </p></li></ul></div><p>上記の項目については、以下でより詳細に説明します。
   </p></div><div class="sect2" id="id-1.11.6.106.4"><div class="titlepage"><div><div><h3 class="title">E.102.2. バージョン9.2への移行</h3></div></div></div><p>以前のリリースからデータを移行したい時は、どのリリースについても、<span class="application">pg_dump</span>を利用したダンプとリストア、あるいは<span class="application">pg_upgrade</span>の利用が必要です。
   </p><p>バージョン9.2には、以前のバージョンとの互換性に影響する多くの変更点が含まれています。
以下の非互換性に注意してください。
   </p><div class="sect3" id="id-1.11.6.106.4.4"><div class="titlepage"><div><div><h4 class="title">E.102.2.1. システムカタログ</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="catalog-pg-tablespace.html" title="51.54. pg_tablespace"><code class="structname">pg_tablespace</code></a>から<code class="structfield">spclocation</code>フィールドを削除しました。(Magnus Hagander)
       </p><p>このフィールドは、テーブル空間の場所を実際に定義するシンボリックリンクと同じでしたので、テーブル空間を移動するときにそれがなくなってしまうエラーを起こす危険性がありました。
この変更により、サーバが停止している間に、シンボリックリンクを手作業で操作することにより、テーブル空間のディレクトリを移動することが可能になります。
このフィールドを置き換え、このシンボリックリンクについて問い合わせができるように、<a class="link" href="functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE" title="Table 9.63. システムカタログ情報関数"><code class="function">pg_tablespace_location()</code></a>を追加しました。
       </p></li><li class="listitem"><p><code class="type">tsvector</code>のmost-common-element(最も共通な要素)統計を<a class="link" href="view-pg-stats.html" title="51.87. pg_stats"><code class="structname">pg_stats</code></a>の新しい列に移動しました。(Alexander Korotkov)
       </p><p>以前、<code class="type">tsvector</code>の列について<code class="structfield">most_common_vals</code>および<code class="structfield">most_common_freqs</code>で利用可能だったデータについては、<code class="structfield">most_common_elems</code>および<code class="structfield">most_common_elem_freqs</code>を参照してください。
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.106.4.5"><div class="titlepage"><div><div><h4 class="title">E.102.2.2. Functions</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="hstore.html" title="F.17. hstore">hstore</a>の<code class="literal">=&gt;</code>演算子を削除しました。(Robert Haas)
       </p><p>代わりに<code class="function">hstore(text, text)</code>を使ってください。
<code class="literal">=&gt;</code>は標準<acronym class="acronym">SQL</acronym>で他の目的のために予約しているので、<span class="productname">PostgreSQL</span> 9.0からは<code class="literal">=&gt;</code>という名前の演算子が作られると警告メッセージを出力していました。
       </p></li><li class="listitem"><p><a class="link" href="functions-xml.html#FUNCTIONS-XML-PROCESSING" title="9.14.3. XMLの処理"><code class="function">xpath()</code></a>が文字列中の特殊文字を確実にエスケープするようにしました。(Florian Pflug)
       </p><p>これがないと、結果が正当な<acronym class="acronym">XML</acronym>にならない場合がありました。
       </p></li><li class="listitem"><p>オブジェクトが存在しないとき、<a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-DBOBJECT" title="9.26.7. データベースオブジェクト管理関数"><code class="function">pg_relation_size()</code></a>およびその同類の関数がNULLを返すようにしました。(Phil Sorber)
       </p><p>これにより、同時に<code class="command">DROP</code>をした直後にこれらの関数を呼び出してもエラーを返さなくなります。
       </p></li><li class="listitem"><p><a class="link" href="functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT" title="9.9.1. EXTRACT, date_part"><code class="function">EXTRACT(EPOCH FROM <em class="replaceable"><code>timestamp without time zone</code></em>)</code></a>が<acronym class="acronym">UTC</acronym>の0時ではなく、現地時間の0時からの時間を返すようにしました。(Tom Lane)
       </p><p>この変更は、リリース7.3でなされた、誤った考えによる変更を元に戻すものです。
<acronym class="acronym">UTC</acronym>の0時から時間を計るのは一貫性がありませんでした。
その結果が<a class="link" href="runtime-config-client.html#GUC-TIMEZONE"><code class="varname">timezone</code></a>の設定に依存することになりますが、<code class="type">timestamp without time zone</code>の計算はそのようになるべきではないからです。
入力値を<code class="type">timestamp with time zone</code>にキャストすれば、以前と同じ動作が得られます。
       </p></li><li class="listitem"><p>時間文字列の終わりに<code class="literal">yesterday</code>、<code class="literal">today</code>あるいは<code class="literal">tomorrow</code>が付いている場合について、適切に処理するようにしました。(Dean Rasheed)
       </p><p>以前は、<code class="literal">SELECT '04:00:00 yesterday'::timestamp</code>を0時に実行すると、前日の日付を返していました。
       </p></li><li class="listitem"><p><a class="link" href="functions-formatting.html" title="9.8. データ型書式設定関数"><code class="function">to_date()</code></a>および<code class="function">to_timestamp()</code>に不完全な日付を渡したとき、2020年に向けて丸めるように修正しました。(Bruce Momjian)
       </p><p>以前は、3桁以下の年、および年のマスクを渡したときの丸め方が一貫していませんでした。
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.106.4.6"><div class="titlepage"><div><div><h4 class="title">E.102.2.3. オブジェクトの操作</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="sql-alterdomain.html" title="ALTER DOMAIN"><code class="command">ALTER DOMAIN</code></a>がドメインでない型に対して動作しないようにしました。(Peter Eisentraut)
       </p><p>以前は、ドメインでない型に対して所有者とスキーマを変更することができました。
       </p></li><li class="listitem"><p><a class="link" href="sql-createfunction.html" title="CREATE FUNCTION"><code class="command">CREATE FUNCTION</code></a>で、手続き言語の名前を強制的に小文字に変換しないようにしました。(Robert Haas)
       </p><p>引用符のついていない言語識別子は引き続き小文字変換されますが、文字列および引用符付きの識別子に対して強制的な小文字変換をしないようにしました。
従って、例えば、<code class="literal">CREATE FUNCTION ... LANGUAGE 'C'</code> は、動作しなくなります。
これは<code class="literal">'c'</code>とする必要がありますが、引用符を付けないのがもっと良いでしょう。
       </p></li><li class="listitem"><p>外部キーの強制トリガーについてシステムが生成する名前を変更しました。(Tom Lane)
       </p><p>この変更により、自己参照型の外部キー制約のあるいくつかの境界条件においても、トリガーが正しい順番で実行されることが確実になります。
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.106.4.7"><div class="titlepage"><div><div><h4 class="title">E.102.2.4. コマンドラインツール</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="app-psql.html" title="psql"><span class="application">psql</span></a>のメタコマンドの引数における、逆引用符、変数展開、引用符付きの部分文字列の処理を一貫したものにしました。(Tom Lane)
       </p><p>以前は、そのような参照が隣接する文字列と空白で分けられていなかった場合、奇妙な取り扱いをされていました。
例えば、<code class="literal">'FOO'BAR</code>は<code class="literal">FOO BAR</code>と出力されていました(想定されない空白を挿入していた)。
また、<code class="literal">FOO'BAR'BAZ</code>は変更なしにそのまま出力されていました(大勢の期待と異なり、引用符を削除しなかった)。
       </p></li><li class="listitem"><p><a class="link" href="app-clusterdb.html" title="clusterdb"><span class="application">clusterdb</span></a>のテーブル名を二重引用符付きとして処理しないようにしました。
また、<a class="link" href="app-reindexdb.html" title="reindexdb"><span class="application">reindexdb</span></a>のテーブル名およびインデックス名を二重引用符付きとして処理しないようにしました。(Bruce Momjian)
       </p><p>引用符が必要な時は、コマンドの引数に二重引用符を含める必要があります。
       </p></li><li class="listitem"><p><a class="link" href="app-createuser.html" title="createuser"><span class="application">createuser</span></a>は、デフォルトではオプション設定のためのプロンプトを表示しないようになりました。(Peter Eisentraut)
       </p><p>以前と同じ動作をさせるには<code class="option">--interactive</code>を使ってください。
       </p></li><li class="listitem"><p><code class="option">--interactive</code>が指定されていなければ、<a class="link" href="app-dropuser.html" title="dropuser"><span class="application">dropuser</span></a>はユーザ名のプロンプトを表示しないようにしました。(Peter Eisentraut)
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.106.4.8"><div class="titlepage"><div><div><h4 class="title">E.102.2.5. サーバの設定</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="runtime-config-connection.html#GUC-SSL-CA-FILE">サーバ側の<acronym class="acronym">SSL</acronym>ファイルの場所</a>を指定するためのサーバパラメータを追加しました。(Peter Eisentraut)
       </p><p>これにより、以前はデータディレクトリ内の<code class="filename">server.crt</code>、<code class="filename">server.key</code>、<code class="filename">root.crt</code>、<code class="filename">root.crl</code>としてハードコードされていたファイルの名前と場所を変更することができます。
<span class="emphasis"><em>サーバは<code class="filename">root.crt</code>や<code class="filename">root.crl</code>をデフォルトでは検査しないようになりました。</em></span>
これらのファイルをロードするには、関連するパラメータをデフォルトでない値に設定する必要があります。
       </p></li><li class="listitem"><p><code class="varname">silent_mode</code>パラメータを削除しました。(Heikki Linnakangas)
       </p><p>同様の動作は、<code class="command">pg_ctl start -l postmaster.log</code>とすることで実現できます。
       </p></li><li class="listitem"><p><code class="varname">wal_sender_delay</code>パラメータは、必要とされていないので削除しました。(Tom Lane)
       </p></li><li class="listitem"><p><code class="varname">custom_variable_classes</code>パラメータを削除しました。(Tom Lane)
       </p><p>この設定によって提供される検査は信頼できないものでした。
これからは、任意の設定の前に任意のクラス名を置くことができます。
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.106.4.9"><div class="titlepage"><div><div><h4 class="title">E.102.2.6. 監視</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="monitoring-stats.html#MONITORING-STATS-VIEWS-TABLE" title="Table 28.2. 収集済み統計情報ビュー"><code class="structname">pg_stat_activity</code></a><code class="structfield">.procpid</code>の名前を<code class="structfield">pid</code>に変更し、他のシステムテーブルと同じようにしました。(Magnus Hagander)
       </p></li><li class="listitem"><p><code class="structfield">pg_stat_activity</code>にプロセスの状態を表示する新しい列を作りました。(Scott Mead、Magnus Hagander)
       </p><p>アイドル状態のセッションについては、直前の<code class="structfield">query</code>と<code class="structfield">query_start</code>の値が利用可能となるので、高度な分析が可能になります。
       </p></li><li class="listitem"><p><code class="structname">pg_stat_activity</code>.<code class="structfield">current_query</code>は問い合わせが完了しても値がクリアされないので、名前を<code class="structfield">query</code>に変更しました。(Magnus Hagander)
       </p></li><li class="listitem"><p><acronym class="acronym">SQL</acronym>レベルの時間に関する統計の全ての値を、ミリ秒で測定される<code class="type">float8</code>の列に変更しました。(Tom Lane)
       </p><p>この変更により、値がミリ秒まで正確だがそれ以上にはできないという設計上の前提が取り除かれました(<code class="type">float8</code>は小数にできるからです)。
これにより影響を受ける列は、<code class="structname">pg_stat_user_functions</code>.<code class="structfield">total_time</code>、<code class="structname">pg_stat_user_functions</code>.<code class="structfield">self_time</code>、<code class="structname">pg_stat_xact_user_functions</code>.<code class="structfield">total_time</code>、<code class="structname">pg_stat_xact_user_functions</code>.<code class="structfield">self_time</code>です。
これらの列の基となっている統計関数も、<code class="type">bigint</code>のミリ秒ではなく、<code class="type">float8</code>のミリ秒を返すようになります。
<code class="filename">contrib/pg_stat_statements</code>の<code class="structfield">total_time</code>列も、ミリ秒で測定されるようになります。
       </p></li></ul></div></div></div><div class="sect2" id="id-1.11.6.106.5"><div class="titlepage"><div><div><h3 class="title">E.102.3. 変更点</h3></div></div></div><p>以下に、<span class="productname">PostgreSQL</span> 9.2とそれ以前のメジャーリリースとの違いに関する詳細な説明をします。
   </p><div class="sect3" id="id-1.11.6.106.5.3"><div class="titlepage"><div><div><h4 class="title">E.102.3.1. サーバ</h4></div></div></div><div class="sect4" id="id-1.11.6.106.5.3.2"><div class="titlepage"><div><div><h5 class="title">E.102.3.1.1. パフォーマンス</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>問い合わせがインデックスのみからデータを検索し、ヒープにアクセスしなくてもすむことを可能にしました。(Robert Haas、Ibrar Ahmed、Heikki Linnakangas、Tom Lane)
       </p><p>この機能はよく<em class="firstterm">インデックスオンリースキャン(index-only scan)</em>と呼ばれます。
可視性マップの報告により、すべてのセッションに対して可視であるタプルだけが含まれるヒープページについては、ヒープのアクセスをスキップできます。
従って、この利益は主に、専ら静的であるデータに当てはまります。
この機能を実装するのに必要な部分の一つとして、可視性マップはクラッシュに対して安全にされました。
       </p></li><li class="listitem"><p><a class="link" href="spgist.html" title="Chapter 63. SP-GiSTインデックス">SP-GiST</a>(Space-Partitioned GiST、空間分割したGiST)インデックスアクセス方式を追加しました。(Teodor Sigaev、Oleg Bartunov、Tom Lane)
       </p><p>SP-GiSTは、柔軟性の点でGiSTに匹敵するものですが、均衡なツリーではなく不均衡に分割された検索構造をサポートします。
これが適合する問題では、インデックスの作成時間、検索時間のいずれにおいても、SP-GiSTはGiSTよりも速く動作します。
       </p></li><li class="listitem"><p>高負荷の状況においてグループコミットが効率的に動作するようにしました。(Peter Geoghegan、imon Riggs、Heikki Linnakangas)
       </p><p>以前は、内部ロックの競合により書込負荷のある状況でコミットをまとめて実行するのは非効率的でした。
       </p></li><li class="listitem"><p>新しいファストパス(fast-path)ロック機構を使うことで、競合しないロックが管理できるようにしました。(Robert Haas)
       </p></li><li class="listitem"><p>仮想的なトランザクションIDロックを作成することのオーバーヘッドを削減しました。(Robert Haas)
       </p></li><li class="listitem"><p>シリアライザブル隔離レベルのロックのオーバーヘッドを削減しました。(Dan Ports)
       </p></li><li class="listitem"><p>PowerPCとItaniumでのスピンロックのパフォーマンスを向上しました。(Manabu Ori、Robert Haas、Tom Lane)
       </p></li><li class="listitem"><p>共有無効キャッシュのメッセージのオーバーヘッドを削減しました。(Robert Haas)
       </p></li><li class="listitem"><p><code class="structname">PGPROC</code>共有メモリ配列のよくアクセスされるメンバを別の配列に移動しました。(Pavan Deolasee、Heikki Linnakangas、Robert Haas)
       </p></li><li class="listitem"><p>ヒープにタプルをバッチで追加することにより、<code class="command">COPY</code>の性能を向上しました。(Heikki Linnakangas)
       </p></li><li class="listitem"><p>より良いツリーをより少ないメモリ割り当てのオーバーヘッドで生成することにより、幾何データ型についてのGiSTインデックスのパフォーマンスを向上しました。(Alexander Korotkov)
       </p></li><li class="listitem"><p>GiSTインデックスの構築時間を向上しました。(Alexander Korotkov、Heikki Linnakangas)
       </p></li><li class="listitem"><p>一時テーブルおよびログを取らないテーブルについて、ヒントビットをより早くセットできるようにしました。(Robert Haas)
       </p></li><li class="listitem"><p>インラインの、<acronym class="acronym">SQL</acronym>から呼び出し可能でない比較関数によってソートを実行できるようにしました。(Peter Geoghegan、Robert Haas、Tom Lane)
       </p></li><li class="listitem"><p>CLOGバッファの数が<a class="link" href="runtime-config-resource.html#GUC-SHARED-BUFFERS"><code class="varname">shared_buffers</code></a>に基づいて変わるようにしました。(Robert Haas、Simon Riggs、Tom Lane)
       </p></li><li class="listitem"><p>テーブルまたはデータベースの削除で発生するバッファプールスキャンの性能を向上しました。(Jeff Janes、Simon Riggs)
       </p></li><li class="listitem"><p>多くのテーブルが削除される、あるいは空にされるときの、チェックポイントによるfsync要求のキューの性能を向上しました。(Tom Lane)
       </p></li><li class="listitem"><p>Windowsの子プロセスに、安全な個数のファイルディスクリプタを渡すようにしました。(Heikki Linnakangas)
       </p><p>これによりWindowsのセッションが以前より多くのオープン状態のファイルディスクリプタを使うことができます。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.106.5.3.3"><div class="titlepage"><div><div><h5 class="title">E.102.3.1.2. プロセス管理</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>チェックポイントを実行する専用のバックグラウンドプロセスを作りました。(Simon Riggs)
       </p><p>以前は、バックグラウンドライタがダーティページの書き込みとチェックポイントの両方を行なっていました。
これを2つのプロセスに分けることにより、それぞれがより予測可能な状態で目的を達することができます。
       </p></li><li class="listitem"><p>walwriterプロセスをより早く再開することで、非同期コミットの動作を改善しました。(Simon Riggs)
       </p><p>以前は、<a class="link" href="runtime-config-wal.html#GUC-WAL-WRITER-DELAY"><code class="varname">wal_writer_delay</code></a>が、 <acronym class="acronym">WAL</acronym>をディスクにフラッシュする唯一のトリガーでした。
<acronym class="acronym">WAL</acronym>バッファが一杯になったときも、<acronym class="acronym">WAL</acronym>書き込みが起こります。
       </p></li><li class="listitem"><p>処理が何も行われていない間、bgwriter、walwriter、checkpointer、statistics collector、log collector、archiverのバックグラウンドプロセスが、より効率的に休止できるようにしました。(Peter Geoghegan、Tom Lane)
       </p><p>この一連の変更により、何もすることがないときのプロセスの再開の頻度が減り、アイドル状態のサーバの電力消費が大幅に削減されます。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.106.5.3.4"><div class="titlepage"><div><div><h5 class="title">E.102.3.1.3. オプティマイザ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>プリペアド文が使われる場合であっても、特定のパラメータ値のための特別な計画をプランナが生成できるようにしました。(Tom Lane)
       </p><p>以前は、プリペアド文は必ず1つだけの<span class="quote">“<span class="quote">一般的な</span>”</span>計画があり、それがすべてのパラメータ値に対して使われていました。
これは、明示的な定数値を持つプリペアドでない文で使われる計画に比べ、大幅に劣ることが時々ありました。
これからは、プランナは、特定のパラメータ値に対して特別な計画を生成しようとします。
特別な計画による利点がないことが繰り返し証明された後になって初めて、一般的な計画が使われます。
この変更により、以前からあった、(PL/pgSQLの動的でない文を含め)プリペアド文を使うことによるパフォーマンスの不利を排除できます。
       </p></li><li class="listitem"><p>ネステッドループで内部インデックススキャンを使えるようプランナを改善しました。(Tom Lane)
       </p><p>新しい<span class="quote">“<span class="quote">パラメータ化されたパス</span>”</span>の機構により、内部インデックススキャンが、そのスキャンより2つ以上結合レベルが上のリレーションの値を使うことができるようになります。
これにより、(外部結合などの)意味的な制約により、可能な結合順序が制限される場合にパフォーマンスが大きく向上します。
       </p></li><li class="listitem"><p>外部データラッパの計画の<acronym class="acronym">API</acronym>を改善しました。(Etsuro Fujita、Shigeru Hanada、Tom Lane)
       </p><p>ラッパがそのテーブルに対して複数のアクセス<span class="quote">“<span class="quote">パス</span>”</span>を提供できるようになったので、結合の計画がより柔軟になります。
       </p></li><li class="listitem"><p>テーブルでないリレーションについて、自己矛盾する制約句を認知します。(Tom Lane)
       </p><p>この検査は<a class="link" href="runtime-config-query.html#GUC-CONSTRAINT-EXCLUSION"><code class="varname">constraint_exclusion</code></a>が<code class="literal">on</code>に設定されている場合にのみ実行されます。
       </p></li><li class="listitem"><p>単純なインデックススキャン、およびインデックスオンリースキャンで<code class="literal">indexed_col op ANY(ARRAY[...])</code>の条件が使われるようにしました。(Tom Lane)
       </p><p>以前は、このような条件は、ビットマップインデックススキャンでのみ使うことができました。
       </p></li><li class="listitem"><p><code class="type">boolean</code>型の列で<code class="function">MIN</code>/<code class="function">MAX</code>の索引の最適化をサポートしました。(Marti Raudsepp)
       </p></li><li class="listitem"><p>行数の推定を設定するとき、<code class="command">SELECT</code>のターゲットリスト内の集合を返す関数について説明するようにしました。(Tom Lane)
       </p></li><li class="listitem"><p>複製された列を持つインデックスをより信頼できる方法で処理するようプランナを修正しました。(Tom Lane)
       </p></li><li class="listitem"><p>配列について、要素頻度の統計情報を収集し、利用するようにしました。(Alexander Korotkov、Tom Lane)
       </p><p>この変更により、配列についての<code class="literal">&lt;@</code>、<code class="literal">&amp;&amp;</code>、<code class="literal">@&gt;</code>演算子(配列の含有および重なり)の選択性評価が改善されます。
       </p></li><li class="listitem"><p>外部テーブルの統計情報を収集できるようにしました。(Etsuro Fujita)
       </p></li><li class="listitem"><p>部分インデックスの利用について、コスト推定を改善しました。(Tom Lane)
       </p></li><li class="listitem"><p>副問い合わせで参照される列の統計情報を利用できるようプランナの機能を改善しました。(Tom Lane)
       </p></li><li class="listitem"><p><code class="literal">DISTINCT</code>を使う副問い合わせについて、統計の推定を改善しました。(Tom Lane)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.106.5.3.5"><div class="titlepage"><div><div><h5 class="title">E.102.3.1.4. 認証</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="auth-pg-hba-conf.html" title="20.1. pg_hba.confファイル"><code class="filename">pg_hba.conf</code></a>で指定されるロール名と<code class="literal">samerole</code>が自動的にスーパーユーザを含むとは扱わないようにしました。(Andrew Dunstan)
       </p><p>これにより、グループロールによる<code class="literal">reject</code>の行を使うのが簡単になります。
       </p></li><li class="listitem"><p><code class="filename">pg_hba.conf</code>によるトークン解析の処理がより一貫したものになるよう調整しました。(Brendan Jurd、Álvaro Herrera)
       </p></li><li class="listitem"><p>空の<code class="filename">pg_hba.conf</code>ファイルを禁止しました。(Tom Lane)
       </p><p>これは、間違った構成についてより早く検知するためです。
       </p></li><li class="listitem"><p>スーパーユーザ権限はreplication権限を暗示するものとしました。(Noah Misch)
       </p><p>これにより、そのような権限を明示的に割り当てる必要がなくなります。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.106.5.3.6"><div class="titlepage"><div><div><h5 class="title">E.102.3.1.5. 監視</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>バックエンドがクラッシュする間に、現在の問い合わせの文字列のログ出力を試みるようにしました。(Marti Raudsepp)
       </p></li><li class="listitem"><p>自動バキュームのI/O処理のログ出力を、より冗長にしました。(Greg Smith、Noah Misch)
       </p><p>このログ出力は<a class="link" href="runtime-config-autovacuum.html#GUC-LOG-AUTOVACUUM-MIN-DURATION"><code class="varname">log_autovacuum_min_duration</code></a>をトリガとして実行されます。
       </p></li><li class="listitem"><p><acronym class="acronym">WAL</acronym>再生の失敗をより早く報告するようにしました。(Fujii Masao)
       </p><p>サーバーがマスターモードになるまで失敗が報告されない場合がありました。
       </p></li><li class="listitem"><p>WALの場所の比較を単純にするため、<a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-BACKUP" title="9.26.3. バックアップ制御関数"><code class="function">pg_xlog_location_diff()</code></a>を追加しました。(Euler Taveira de Oliveira)
       </p><p>これはレプリケーションの遅延を計算するのに便利です。
       </p></li><li class="listitem"><p>Windowsでイベントログのアプリケーション名を設定可能にしました。(MauMau、Magnus Hagander)
       </p><p><a class="link" href="runtime-config-logging.html#GUC-EVENT-SOURCE"><code class="varname">event_source</code></a>サーバパラメータを設定することで、異なるインスタンスが異なる識別子を持つイベントログを使うことができるようになります。
これは、<a class="link" href="runtime-config-logging.html#GUC-SYSLOG-IDENT"><code class="varname">syslog_ident</code></a>の動作と似ています。
       </p></li><li class="listitem"><p>実行中のトランザクションがある場合を除き、<span class="quote">“<span class="quote">unexpected EOF</span>”</span>のメッセージを<code class="literal">DEBUG1</code>レベルに変更しました。(Magnus Hagander)
       </p></li><li class="listitem"><p>この変更により、データベース接続を正しく閉じないアプリケーションによって起こされるログファイルへの雑多な書き込みが減少します。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.106.5.3.7"><div class="titlepage"><div><div><h5 class="title">E.102.3.1.6. 統計情報ビュー</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>一時ファイルのサイズとファイル数を<a class="link" href="monitoring-stats.html#PG-STAT-DATABASE-VIEW" title="Table 28.11. pg_stat_databaseビュー"><code class="structname">pg_stat_database</code></a>システムビューで追跡するようにしました。(Tomas Vondra)
       </p></li><li class="listitem"><p>デッドロックのカウンタを<code class="structname">pg_stat_database</code>システムビューに追加しました。(Magnus Hagander)
       </p></li><li class="listitem"><p>サーバパラメータ<a class="link" href="runtime-config-statistics.html#GUC-TRACK-IO-TIMING"><code class="varname">track_io_timing</code></a>を追加し、I/Oの時間を追跡できるようにしました。(Ants Aasma、Robert Haas)
       </p></li><li class="listitem"><p>チェックポイントの時間の情報を<a class="link" href="monitoring-stats.html#PG-STAT-BGWRITER-VIEW" title="Table 28.10. pg_stat_bgwriterビュー"><code class="structname">pg_stat_bgwriter</code></a>で報告するようにしました。(Greg Smith、Peter Geoghegan)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.106.5.3.8"><div class="titlepage"><div><div><h5 class="title">E.102.3.1.7. サーバの設定</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="runtime-config-client.html#GUC-SEARCH-PATH"><code class="varname">search_path</code></a>で指定したスキーマが存在しないとき、黙って無視するようにしました。(Tom Lane)
       </p><p>これにより、すべてのデータベースには存在しないスキーマ名を含むような一般的なパス設定の利用が、より便利になります。
       </p></li><li class="listitem"><p>スーパーユーザが、<a class="link" href="runtime-config-locks.html#GUC-DEADLOCK-TIMEOUT"><code class="varname">deadlock_timeout</code></a>について、クラスタ単位だけでなく、セッション単位でも設定できるようにしました。(Noah Misch)
       </p><p>これにより、デッドロックに関連しそうなトランザクションについて<code class="varname">deadlock_timeout</code>を小さくできるので、より速く検出できるようになります。
また、この値を大きくすることで、デッドロックにより、あるセッションが取消対象として選択される可能性を小さくするために使うこともできます。
       </p></li><li class="listitem"><p>セッションあたりの一時ファイルの容量を制限するため、サーバパラメータ<a class="link" href="runtime-config-resource.html#GUC-TEMP-FILE-LIMIT"><code class="varname">temp_file_limit</code></a>を追加しました。(Mark Kirkwood)
       </p></li><li class="listitem"><p>スーパーユーザだけが設定できる拡張の独自変数について、関連する拡張をロードする前にスーパーユーザーが<code class="command">SET</code>できるようにしました。(Tom Lane)
       </p><p><code class="command">SET</code>がスーパーユーザによって実行されたかどうか、システムは記憶するようになります。
これにより、拡張をロードするときに、適切な権限の検査が可能になります。
       </p></li><li class="listitem"><p>設定パラメータについて問い合わせをする<a class="link" href="app-postmaster.html" title="postmaster">postmaster</a>の<code class="option">-C</code>オプションを追加しました。(Bruce Momjian)
       </p><p>これにより、<code class="envar">PGDATA</code>あるいは<code class="option">-D</code>が、設定ファイルだけがインストールされたディレクトリを指している場合について、<span class="application">pg_ctl</span>がより良い処理をできるようになります。
       </p></li><li class="listitem"><p><code class="command">CREATE DATABASE</code>で、空のロケール名を暗示された値で置換するようにしました。(Tom Lane)
       </p><p>これにより、サーバの再起動後に、<code class="structname">pg_database</code>.<code class="structfield">datcollate</code>あるいは<code class="structfield">datctype</code>が異なる解釈をされることを防ぎます。
       </p></li></ul></div><div class="sect5" id="id-1.11.6.106.5.3.8.3"><div class="titlepage"><div><div><h6 class="title">E.102.3.1.7.1. <code class="filename">postgresql.conf</code></h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">postgresql.conf</code>で、最初のエラーだけでなく、複数のエラーが報告されるようにしました。(Alexey Klyukin、Tom Lane)
       </p></li><li class="listitem"><p><code class="filename">postgresql.conf</code>の再読み込みで、特定のセッションにとって不正な設定が含まれる場合でも、すべてのセッションによって処理されるようにしました。(Alexey Klyukin)
       </p><p>以前は、そのようなセッション内で有効でない値があると、そのセッションは全ての設定変更を無視していました。
       </p></li><li class="listitem"><p>設定ファイルに<code class="literal">include_if_exists</code>の機能を追加しました。(Greg Smith)
       </p><p>これは、ファイルが見つからなくてもエラーを発生させない、という点を除き、<code class="literal">include</code>と同じ動作をします。
       </p></li><li class="listitem"><p><span class="application">initdb</span>の実行中にサーバの時間帯を調べ、<code class="filename">postgresql.conf</code>の<a class="link" href="runtime-config-client.html#GUC-TIMEZONE"><code class="varname">timezone</code></a>および<a class="link" href="runtime-config-logging.html#GUC-LOG-TIMEZONE"><code class="varname">log_timezone</code></a>エントリを適切に設定するようにしました。(Tom Lane)
       </p><p>これにより、時間のかかる時間帯の調査をサーバの起動時に実施しないですみます。
       </p></li><li class="listitem"><p>Windowsで<code class="filename">postgresql.conf</code>の行番号が報告されるように、<a class="link" href="view-pg-settings.html" title="51.85. pg_settings"><code class="structname">pg_settings</code></a>を修正しました。(Tom Lane)
       </p></li></ul></div></div></div></div><div class="sect3" id="id-1.11.6.106.5.4"><div class="titlepage"><div><div><h4 class="title">E.102.3.2. レプリケーションとリカバリ</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ストリーミングレプリケーションのスレーブが、他のスレーブにデータを転送できるようにしました(<a class="link" href="warm-standby.html#CASCADING-REPLICATION" title="26.2.7. カスケードレプリケーション"><em class="firstterm">カスケードレプリケーション</em></a>)。(Fujii Masao)
       </p><p>以前は、スタンバイサーバにストリーミングレプリケーションのログファイルを提供できるのはマスターサーバだけでした。
       </p></li><li class="listitem"><p><a class="link" href="runtime-config-wal.html#GUC-SYNCHRONOUS-COMMIT"><code class="varname">synchronous_commit</code></a>のモードに新しく<code class="literal">remote_write</code>を追加しました。 (Fujii Masao、Simon Riggs)
       </p><p>このモードでは、スタンバイサーバがトランザクションデータをスタンバイのオペレーティングシステム上で書き込むのを待ちますが、スタンバイのディスクにデータがフラッシュされるのは待ちません。
       </p></li><li class="listitem"><p><a class="link" href="app-pgreceivewal.html" title="pg_receivewal"><span class="application">pg_receivexlog</span></a>ツールを追加しました。
これは、完全なWALファイルを待つ代わりに、WALファイルの変更を、書き込まれたときにアーカイブします。(Magnus Hagander)
       </p></li><li class="listitem"><p><a class="link" href="app-pgbasebackup.html" title="pg_basebackup"><span class="application">pg_basebackup</span></a>でスタンバイサーバからバックアップを作れるようにしました。(Jun Ishizuka、Fujii Masao)
       </p><p>この機能により、新しいベースバックアップを作る作業について、プライマリサーバの負荷を減らすことができます。
       </p></li><li class="listitem"><p><span class="application">pg_basebackup</span>がバックアップを実行している間も、WALファイルをストリーム転送できるようにしました。(Magnus Hagander)
       </p><p>これにより、WALファイルがプライマリ上で捨てられる前に、スタンバイに転送することができます。
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.106.5.5"><div class="titlepage"><div><div><h4 class="title">E.102.3.3. 問い合わせ</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>クライアントが切断されたら、実行中の問い合わせを取り消すようにしました。(Florian Pflug)
       </p><p>問い合わせの実行中にクライアントの接続が失われたことをバックエンドが検知したら、問い合わせを完了しようとせずにキャンセルします。
       </p></li><li class="listitem"><p>行式において実行時に列名を保持するようにしました。(Andrew Dunstan、Tom Lane)
       </p><p>この変更により、行の値が<code class="type">hstore</code>あるいは<code class="type">json</code>型に変換される場合により良い結果が得られます。
つまり、返される値のフィールドには期待される名前がつけられます。
       </p></li><li class="listitem"><p>副<code class="command">SELECT</code>の結果に使われる列のラベルを改善しました。(Marti Raudsepp)
       </p><p>以前は、<code class="literal">?column?</code>という一般的なラベルが使われていました。
       </p></li><li class="listitem"><p>不明の値の型を決定する経験則を改善しました。(Tom Lane)
       </p><p>不明の定数は、それを使う演算子のもう一方の側の値と同じ型を持つかもしれないという長年使われていた規則を、単純な演算子の場合だけでなく、多様演算子を考慮する場合も適用するようにしました。
       </p></li><li class="listitem"><p>ドメイン型へのキャスト、およびドメイン型からのキャストの作成について警告を出すようにしました。(Robert Haas)
       </p><p>そのようなキャストには何の効果もありません。
       </p></li><li class="listitem"><p>行が<code class="literal">CHECK</code>制約、あるいは<code class="literal">NOT NULL</code>制約に違反したとき、行の内容をエラー詳細として表示するようにしました。(Jan Kundrát)
       </p><p>これにより、insertやupdateが多数の行を処理しているときに、どの行に問題があるか特定するのが容易になるはずです。
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.106.5.6"><div class="titlepage"><div><div><h4 class="title">E.102.3.4. オブジェクトの操作</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><acronym class="acronym">DDL</acronym>の同時実行中に、より信頼できる操作を提供しました。(Robert Haas、Noah Misch)
       </p><p>この変更ではロックを追加し、それにより、多くの状況で<span class="quote">“<span class="quote">cache lookup failed</span>”</span>(キャッシュの検索に失敗)のエラーを起こさなくなります。
また、同時削除中のスキーマにリレーションを追加することはできなくなりました。
以前はこれによりシステムカタログの内容が不整合を起こすことがありました。
       </p></li><li class="listitem"><p><a class="link" href="sql-dropindex.html" title="DROP INDEX"><code class="command">DROP INDEX</code></a>に<code class="literal">CONCURRENTLY</code>オプションを追加しました。(Simon Riggs)
       </p><p>これにより、他のセッションを妨害することなくインデックスを削除できます。
       </p></li><li class="listitem"><p>外部データラッパに列ごとのオプションが付けられるようにしました。(Shigeru Hanada)
       </p></li><li class="listitem"><p>ビューの定義の見やすい表示(pretty-print)を改善しました。(Andrew Dunstan)
       </p></li></ul></div><div class="sect4" id="id-1.11.6.106.5.6.3"><div class="titlepage"><div><div><h5 class="title">E.102.3.4.1. 制約</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ddl-constraints.html" title="5.3. 制約"><code class="literal">CHECK</code></a>制約を<code class="literal">NOT VALID</code>として宣言できるようにしました。(Álvaro Herrera)
       </p><p><code class="literal">NOT VALID</code>の制約を追加しても、既存の行が制約を満たすかどうかを検査するテーブルスキャンは実行されません。
その後に、新規に追加あるいは更新する行は検査されます。
すべての行が制約を満たすかどうか確かではありませんから、プランナが<code class="varname">constraint_exclusion</code>を考慮する際、そのような制約は無視されます。
       </p><p>新しい<code class="command">ALTER TABLE VALIDATE</code>コマンドは<code class="literal">NOT VALID</code>の制約を既存の行について検査することができ、その後で通常の制約に変換します。
       </p></li><li class="listitem"><p><code class="literal">CHECK</code>制約を<code class="literal">NO INHERIT</code>として宣言できるようにしました。(Nikhil Sontakke、Alex Hunsaker、Álvaro Herrera)
       </p><p>こうすると、制約は親テーブルでのみ有効で、子テーブルでは無効になります。
       </p></li><li class="listitem"><p>制約の<a class="link" href="sql-altertable.html" title="ALTER TABLE">名前を変更</a>できる機能を追加しました。(Peter Eisentraut)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.106.5.6.4"><div class="titlepage"><div><div><h5 class="title">E.102.3.4.2. <code class="command">ALTER</code></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>いくつかの<a class="link" href="sql-altertable.html" title="ALTER TABLE"><code class="command">ALTER TABLE</code></a> ... <code class="literal">ALTER COLUMN TYPE</code>の操作において、テーブルとインデックスの再作成の必要性を削減しました。(Noah Misch)
       </p><p><code class="type">varchar</code>あるいは<code class="type">varbit</code>の列の長さの制限を大きくする、あるいは制限をなくしてしまう場合には、テーブルの再書き込みは必要なくなりました。
<code class="type">numeric</code>列の精度を大きくする場合、あるいは列を制限のある<code class="type">numeric</code>から制限のないnumericに変更する場合は、テーブルの再書き込みは必要なくなりました。
<code class="type">interval</code>型、<code class="type">timestamp</code>型、<code class="type">timestamptz</code>型についての同様なケースでもテーブルの再書き込みは行われません。
       </p></li><li class="listitem"><p><a class="link" href="sql-altertable.html" title="ALTER TABLE"><code class="command">ALTER TABLE</code></a>の外部キーの再検証について、不要な場合には実行しないようにしました。(Noah Misch)
       </p></li><li class="listitem"><p>いくつかの<code class="command">ALTER</code>コマンドに<code class="literal">IF EXISTS</code>オプションを追加しました。(Pavel Stehule)
       </p><p>例えば、<code class="command">ALTER FOREIGN TABLE IF EXISTS foo RENAME TO bar</code>のように使います。
       </p></li><li class="listitem"><p><a class="link" href="sql-alterforeigndatawrapper.html" title="ALTER FOREIGN DATA WRAPPER"><code class="command">ALTER FOREIGN DATA WRAPPER</code></a>および<a class="link" href="sql-alterserver.html" title="ALTER SERVER"><code class="command">ALTER SERVER</code></a>に<code class="literal">RENAME</code>を追加しました。(Peter Eisentraut)
       </p></li><li class="listitem"><p><a class="link" href="sql-alterdomain.html" title="ALTER DOMAIN"><code class="command">ALTER DOMAIN</code></a>に<code class="literal">RENAME</code>を追加しました。(Peter Eisentraut)
       </p><p>以前も<code class="command">ALTER TYPE</code>を使えばドメインの名前の変更は可能でした。
       </p></li><li class="listitem"><p><code class="command">ALTER DOMAIN</code>の<code class="literal">DROP CONSTRAINT</code>で、存在しない制約を指定したらエラーを発生させるようにしました。(Peter Eisentraut)
       </p><p><code class="literal">IF EXISTS</code>オプションが追加されたので、以前と同じ動作をさせることは可能です。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.106.5.6.5"><div class="titlepage"><div><div><h5 class="title">E.102.3.4.3. <a class="link" href="sql-createtable.html" title="CREATE TABLE"><code class="command">CREATE TABLE</code></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>外部テーブル、ビューおよび複合型からの<code class="command">CREATE TABLE (LIKE ...)</code>を可能にしました。(Peter Eisentraut)
       </p><p>例えば、テーブルのスキーマがビューにマッチするようなテーブルを作成することも可能になります。
       </p></li><li class="listitem"><p><code class="command">CREATE TABLE (LIKE ...)</code>でインデックスのコメントをコピーするときに、インデックス名の衝突が起きないように修正しました。(Tom Lane)
       </p></li><li class="listitem"><p><code class="command">CREATE TABLE</code> ... <code class="literal">AS EXECUTE</code>で、<code class="literal">WITH NO DATA</code>と列名の指定を処理できるように修正しました。(Tom Lane)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.106.5.6.6"><div class="titlepage"><div><div><h5 class="title">E.102.3.4.4. オブジェクトの権限</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ビューに<a class="link" href="sql-createview.html" title="CREATE VIEW"><code class="literal">security_barrier</code></a>オプションを追加しました。(KaiGai Kohei、Robert Haas)
       </p><p>このオプションは、ビューが保護するデータがユーザに開示されるような最適化を防ぎます。
例えば、安全でない関数を含む句をビューの<code class="literal">WHERE</code>句に入れるようなことです。
このようなビューは、通常のビューに比べパフォーマンスが悪くなることが予想されます。
       </p></li><li class="listitem"><p>新しい関数の属性<a class="link" href="sql-createfunction.html" title="CREATE FUNCTION"><code class="literal">LEAKPROOF</code></a>を追加しました。
これは、<code class="literal">security_barrier</code>のビューで安全に利用できる関数に印を付けるものです。(KaiGai Kohei)
       </p></li><li class="listitem"><p>データ型についての権限の機能を追加しました。(Peter Eisentraut)
       </p><p>これにより、型とドメインについて、<acronym class="acronym">SQL</acronym>準拠の<code class="literal">USAGE</code>権限がサポートされます。
その目的は、どのユーザが型の依存性を作成できるか制限することです。
というのは、そのような依存性は型の所有者による型定義の変更の能力を制限することになるからです。
       </p></li><li class="listitem"><p><code class="command">SELECT INTO</code>および<code class="command">CREATE TABLE AS</code>で、<code class="command">INSERT</code>権限について確認するようにしました。(KaiGai Kohei)
       </p><p><code class="command">SELECT INTO</code>や<code class="command">CREATE TABLE AS</code>ではオブジェクトが作られるので、作成者は通常はinsert権限を持っています。
しかし、<code class="literal">ALTER DEFAULT PRIVILEGES</code>によりそのような権限を取り消した場合など、そうならない例外的な場合もあります。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.106.5.7"><div class="titlepage"><div><div><h4 class="title">E.102.3.5. ユーティリティ操作</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="sql-vacuum.html" title="VACUUM"><code class="command">VACUUM</code></a>でページをロックできない時は、そのページをより安易にスキップするようにしました。(Simon Riggs、Robert Haas)
       </p><p>この変更により、<code class="command">VACUUM</code>が<span class="quote">“<span class="quote">詰まって</span>”</span>しまう事故が大幅に減るでしょう。
       </p></li><li class="listitem"><p><a class="link" href="sql-explain.html" title="EXPLAIN"><code class="command">EXPLAIN</code></a> <code class="literal">(BUFFERS)</code>がダーティーにされたブロック数、書き込まれたブロックを数えるようにしました。(Robert Haas)
       </p></li><li class="listitem"><p><code class="command">EXPLAIN ANALYZE</code>がフィルタの段階で除外した行の数を報告するようにしました。(Marko Tiikkaja)
       </p></li><li class="listitem"><p><code class="command">EXPLAIN ANALYZE</code>で時間の値が必要とされていないとき、時間測定のオーバーヘッドがなくなるようにしました。(Tomas Vondra)
       </p><p>これは新しい<code class="literal">TIMING</code>オプションを<code class="literal">FALSE</code>に設定することで実現できます。
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.106.5.8"><div class="titlepage"><div><div><h4 class="title">E.102.3.6. データ型</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="rangetypes.html" title="8.17. 範囲型">範囲データ型</a>の機能を追加しました。(Jeff Davis、Tom Lane、Alexander Korotkov)
       </p><p>範囲データ型は、その基本のデータ型に属する下限値と上限値を記録します。
含有、重なり、共通部分などの演算をサポートします。
       </p></li><li class="listitem"><p><a class="link" href="datatype-json.html" title="8.14. JSONデータ型"><code class="type">JSON</code></a>データ型を追加しました。(Robert Haas)
       </p><p>この型は<acronym class="acronym">JSON</acronym>(JavaScript Object Notation)データを適切に検証して保存します。
       </p></li><li class="listitem"><p><a class="link" href="functions-json.html" title="9.15. JSON関数と演算子"><code class="function">array_to_json()</code></a>および<code class="function">row_to_json()</code>を追加しました。(Andrew Dunstan)
       </p></li><li class="listitem"><p><a class="link" href="datatype-numeric.html#DATATYPE-SERIAL" title="8.1.4. 連番型"><code class="type">SMALLSERIAL</code></a>データ型を追加しました。(Mike Pultz)
       </p><p>これは<code class="type">SERIAL</code>と似ていますが、シーケンスを2バイトの整数の列(<code class="type">int2</code>)に格納します。
       </p></li><li class="listitem"><p><a class="link" href="sql-createdomain.html" title="CREATE DOMAIN">ドメイン</a>を<code class="literal">NOT VALID</code>として宣言できるようにしました。(Álvaro Herrera)
       </p><p>このオプションはドメインの作成時にも指定できますし、また<code class="command">ALTER DOMAIN</code>&gt; ... <code class="literal">ADD CONSTRAINT</code> ... <code class="literal">NOT VALID</code>としても設定できます。
<code class="command">ALTER DOMAIN</code> ... <code class="literal">VALIDATE CONSTRAINT</code>とすると、制約を完全に検証します。
       </p></li><li class="listitem"><p><a class="link" href="datatype-money.html" title="8.2. 通貨型">money</a>データ型で、サポートするロケール独自の書式オプションの数を増やしました。(Tom Lane)
       </p><p>具体的には、金額の出力における値の順序、符号、通貨記号についてすべてのPOSIXのオプションを尊重するようにしました。
また、3桁毎の区切り文字も、POSIXの要請に従い、小数点の左側にだけ挿入されることを確実にしました。
       </p></li><li class="listitem"><p><code class="type">macaddr</code>データ型について、ビット演算の<span class="quote">“<span class="quote">and</span>”</span>、<span class="quote">“<span class="quote">or</span>”</span>、<span class="quote">“<span class="quote">not</span>”</span>演算子をサポートしました。(Brendan Jurd)
       </p></li><li class="listitem"><p><a class="link" href="functions-xml.html#FUNCTIONS-XML-PROCESSING" title="9.14.3. XMLの処理"><code class="function">xpath()</code></a>にスカラー値が渡されたとき、1つだけの要素を持つ<acronym class="acronym">XML</acronym>配列を返すようにしました。(Florian Pflug)
       </p><p>以前は空の配列を返していました。
この変更に伴い、そのような式について、<code class="function">xpath_exists()</code>は偽ではなく真を返すようになります。
       </p></li><li class="listitem"><p><acronym class="acronym">XML</acronym>のエラー処理がより堅牢になるよう改善しました。(Florian Pflug)
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.106.5.9"><div class="titlepage"><div><div><h4 class="title">E.102.3.7. 関数</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>スーパーユーザでないユーザが、同じユーザの他のセッションに対して<a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-SIGNAL" title="9.26.2. サーバシグナル送信関数"><code class="function">pg_cancel_backend()</code></a>および<a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-SIGNAL" title="9.26.2. サーバシグナル送信関数"><code class="function">pg_terminate_backend()</code></a>を使うことができるようにしました。(Magnus Hagander、Josh Kupershmidt、Dan Farina)
       </p><p>以前は、スーパーユーザだけがこれらの関数を使うことができました。
       </p></li><li class="listitem"><p>トランザクションスナップショットのインポートとエクスポートができるようにしました。(Joachim Wieland、Tom Lane)
       </p><p>これにより、複数のトランザクションがデータベースの状態に関する同一のビューを共有することができるようになります。
スナップショットのエクスポートは<a class="link" href="functions-admin.html#FUNCTIONS-SNAPSHOT-SYNCHRONIZATION" title="9.26.5. スナップショット同期関数"><code class="function">pg_export_snapshot()</code></a>によって、インポートは<a class="link" href="sql-set-transaction.html" title="SET TRANSACTION"><code class="command">SET TRANSACTION SNAPSHOT</code></a>によって行います。
現在実行中のトランザクションのスナップショットだけがインポート可能です。
       </p></li><li class="listitem"><p>式で<a class="link" href="functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE" title="Table 9.63. システムカタログ情報関数"><code class="literal">COLLATION FOR</code></a>をサポートしました。(Peter Eisentraut)
       </p><p>これは、式の照合順序を表す文字列を返します。
       </p></li><li class="listitem"><p><a class="link" href="functions-info.html#FUNCTIONS-INFO-SCHEMA-TABLE" title="Table 9.62. スキーマ可視性照会関数"><code class="function">pg_opfamily_is_visible()</code></a>を追加しました。(Josh Kupershmidt)
       </p></li><li class="listitem"><p><a class="link" href="functions-admin.html#FUNCTIONS-ADMIN-DBSIZE" title="Table 9.84. データベースオブジェクト容量関数"><code class="function">pg_size_pretty()</code></a>を<code class="function">pg_xlog_location_diff()</code>で使えるように、<code class="type">numeric</code>型の亜種を追加しました。(Fujii Masao)
       </p></li><li class="listitem"><p><a class="link" href="functions-info.html#FUNCTIONS-INFO-SESSION-TABLE" title="Table 9.60. セッション情報関数"><code class="function">pg_trigger_depth()</code></a>関数を追加しました。(Kevin Grittner)
       </p><p>この関数は、現在のトリガの呼び出し階層数を返します。
       </p></li><li class="listitem"><p><a class="link" href="functions-aggregate.html#FUNCTIONS-AGGREGATE-TABLE" title="Table 9.52. 汎用集約関数"><code class="function">string_agg()</code></a>で<code class="type">bytea</code>型の値を処理できるようにしました。(Pavel Stehule)
       </p></li><li class="listitem"><p>正規表現で、より大きな量指定された部分表現の中で後方参照が使われる場合について修正しました。(Tom Lane)
       </p><p>例えば、<code class="literal">^(\w+)( \1)+$</code>です。
以前のリリースでは、後方参照が実際に最初の出現とマッチしていることを検査していませんでした。
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.106.5.10"><div class="titlepage"><div><div><h4 class="title">E.102.3.8. <a class="link" href="information-schema.html" title="Chapter 36. 情報スキーマ">情報スキーマ</a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>情報スキーマにビュー<code class="structname">role_udt_grants</code>、<code class="structname">udt_privileges</code>、<code class="structname">user_defined_types</code>を追加しました。(Peter Eisentraut)
       </p></li><li class="listitem"><p>情報スキーマのビュー<code class="structname">element_types</code>に、複合型の属性を追加しました。(Peter Eisentraut)
       </p></li><li class="listitem"><p>情報スキーマに<code class="structfield">interval_type</code>列を実装しました。(Peter Eisentraut)
       </p><p>以前はこの列はNULLとして読み出されていました。
       </p></li><li class="listitem"><p>情報スキーマのビュー<code class="structname">attributes</code>、<code class="structname">columns</code>、<code class="structname">domains</code>、<code class="structname">element_types</code>で、照合順序に関連した列を実装しました。(Peter Eisentraut)
       </p></li><li class="listitem"><p>情報スキーマのビュー<code class="structname">table_privileges</code>で<code class="structfield">with_hierarchy</code>列を実装しました。(Peter Eisentraut)
       </p></li><li class="listitem"><p>情報スキーマでシーケンスの<code class="literal">USAGE</code>権限の表示を追加しました。(Peter Eisentraut)
       </p></li><li class="listitem"><p>情報スキーマがデフォルト権限を表示するようにしました。(Peter Eisentraut)
       </p><p>以前は空でないデフォルト権限はビューに表示されませんでした。
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.106.5.11"><div class="titlepage"><div><div><h4 class="title">E.102.3.9. サーバサイド言語</h4></div></div></div><div class="sect4" id="id-1.11.6.106.5.11.2"><div class="titlepage"><div><div><h5 class="title">E.102.3.9.1. <a class="link" href="plpgsql.html" title="Chapter 42. PL/pgSQL - SQL手続き言語">PL/pgSQL</a>サーバサイド言語</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>PL/pgSQLのカーソルの<code class="command">OPEN</code>コマンドで、パラメータを名前で指定できるようにしました。(Yeb Havinga)
       </p></li><li class="listitem"><p>PL/pgSQLで例外情報を取得する<code class="command">GET STACKED DIAGNOSTICS</code>コマンドを追加しました。(Pavel Stehule)
       </p></li><li class="listitem"><p>型情報をキャッシュすることにより、PL/pgSQLでの配列の代入を高速化しました。(Pavel Stehule)
       </p></li><li class="listitem"><p>PL/pgSQLで<code class="literal">ELSIF</code>句が長く続いているときのパフォーマンスとメモリ消費を改善しました。(Tom Lane)
       </p></li><li class="listitem"><p>PL/pgSQLのエラーメッセージで、関数の名前だけでなくシグネチャも出力するようにしました。(Pavel Stehule)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.106.5.11.3"><div class="titlepage"><div><div><h5 class="title">E.102.3.9.2. <a class="link" href="plpython.html" title="Chapter 45. PL/Python - Python手続き言語">PL/Python</a>サーバサイド言語</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>PL/Pythonに<acronym class="acronym">SPI</acronym>カーソルのサポートを追加しました。(Jan Urbanski)
       </p><p>これにより、PL/Pythonが結果集合の一部だけを読むことができるようになります。
       </p></li><li class="listitem"><p>PL/Pythonに結果メタデータ関数を追加しました。(Peter Eisentraut)
       </p><p>具体的には、結果オブジェクト関数<code class="literal">.colnames</code>、<code class="literal">.coltypes</code>、<code class="literal">.coltypmods</code>が追加されました。
       </p></li><li class="listitem"><p>Python 2.2をサポートから外しました。(Peter Eisentraut)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.106.5.11.4"><div class="titlepage"><div><div><h5 class="title">E.102.3.9.3. <a class="link" href="xfunc-sql.html" title="37.4. 問い合わせ言語（SQL）関数">SQL</a>サーバサイド言語</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><acronym class="acronym">SQL</acronym>言語による関数で、パラメータを名前で参照できるようにしました。(Matthew Draper)
       </p><p>これを使うには、関数の引数を名前にして、その引数名を<acronym class="acronym">SQL</acronym>関数の本体から参照するだけで良いです。
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.106.5.12"><div class="titlepage"><div><div><h4 class="title">E.102.3.10. クライアントアプリケーション</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="app-initdb.html" title="initdb"><span class="application">initdb</span></a>のオプションに、<code class="option">--auth-local</code>と<code class="option">--auth-host</code>を追加しました。(Peter Eisentraut)
       </p><p>これにより、<code class="filename">pg_hba.conf</code>の認証設定で、<code class="literal">local</code>と<code class="literal">host</code>を別々に設定することができます。
<code class="option">--auth</code>は引き続き、両方の設定を行います。
       </p></li><li class="listitem"><p><a class="link" href="app-createuser.html" title="createuser"><span class="application">createuser</span></a>で、レプリケーションの権限を設定するために、<code class="option">--replication</code>/<code class="option">--no-replication</code>のフラグを追加しました。(Fujii Masao)
       </p></li><li class="listitem"><p><a class="link" href="app-dropdb.html" title="dropdb"><span class="application">dropdb</span></a>と<a class="link" href="app-dropuser.html" title="dropuser"><span class="application">dropuser</span></a>に<code class="option">--if-exists</code>オプションを追加しました。(Josh Kupershmidt)
       </p></li><li class="listitem"><p>コマンドラインツールが接続先のデータベースを指定でき、また<code class="literal">postgres</code>データベースへの接続に失敗した時は、<code class="literal">template1</code>に接続するようにしました。(Robert Haas)
       </p></li></ul></div><div class="sect4" id="id-1.11.6.106.5.12.3"><div class="titlepage"><div><div><h5 class="title">E.102.3.10.1. <a class="link" href="app-psql.html" title="psql"><span class="application">psql</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>端末の幅に合わせて、出力を自動的に拡張する表示モードを追加しました。(Peter Eisentraut)
       </p><p><code class="command">\x</code>コマンドに<code class="literal">auto</code>オプションを追加しました。
通常の出力が画面の幅より広いとき、拡張モードに切り替えます。
       </p></li><li class="listitem"><p>起動に使われたファイルのディレクトリからの相対パス名でスクリプトファイルを指定できるようにしました。(Gurjeet Singh)
       </p><p>これは新しいコマンド<code class="command">\ir</code>で実行できます。
       </p></li><li class="listitem"><p><span class="application">psql</span>の変数名で、非<acronym class="acronym">ASCII</acronym>文字の使用をサポートしました。(Tom Lane)
       </p></li><li class="listitem"><p>特定メジャーバージョン用の<code class="filename">.psqlrc</code>ファイルをサポートしました。(Bruce Momjian)
       </p><p><span class="application">psql</span>は以前から、特定マイナーバージョン用の<code class="filename">.psqlrc</code>ファイルはサポートしていました。
       </p></li><li class="listitem"><p><span class="application">psql</span>の履歴ファイル、起動ファイルの位置について、環境変数で優先指定できるようにしました。(Andrew Dunstan)
       </p><p><code class="envar">PSQL_HISTORY</code>と<code class="envar">PSQLRC</code>が設定されていれば、そこで指定されたファイル名が使われます。
       </p></li><li class="listitem"><p>子プロセスに渡される環境変数を変更できる<code class="command">\setenv</code>コマンドを追加しました。(Andrew Dunstan)
       </p></li><li class="listitem"><p><span class="application">psql</span>のエディタの一時ファイルで<code class="filename">.sql</code>を拡張子に使うようにしました。(Peter Eisentraut)
       </p><p>拡張子によって動作が変わるエディタは、これにより正しいモードを選択できるようになります。
       </p></li><li class="listitem"><p><span class="application">psql</span>で、0バイトのフィールド区切り文字およびレコード区切り文字を使えるようにしました。(Peter Eisentraut)
       </p><p>様々なシェルツール(例：<span class="application">find</span>)で、0バイトの区切り文字(NUL)を使うことができます。
       </p></li><li class="listitem"><p><code class="command">\timing</code>オプションで、失敗した問い合わせについても時間を表示するようにしました。(Magnus Hagander)
       </p><p>以前は、成功した問い合わせについてのみ時間が表示されていました。
       </p></li><li class="listitem"><p><span class="application">psql</span>による<code class="command">\copy</code>とSQLの<code class="command">COPY</code>の処理を統一し、また厳格にしました。(Noah Misch)
       </p><p>この修正により、失敗した時の動作が、より予期できるものになり、また、<code class="command">\set ON_ERROR_ROLLBACK</code>を尊重したものになります。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.106.5.12.4"><div class="titlepage"><div><div><h5 class="title">E.102.3.10.2. 情報表示コマンド</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>シーケンスについての<code class="command">\d</code>で、シーケンスを所有するテーブルと列の名前を表示するようにしました。(Magnus Hagander)
       </p></li><li class="listitem"><p><code class="command">\d+</code>で列の統計対象を表示するようにしました。(Magnus Hagander)
       </p></li><li class="listitem"><p><code class="command">\du</code>でロールのパスワードの有効期限日を表示するようにしました。(Fabrízio de Royes Mello)
       </p></li><li class="listitem"><p>キャスト、変換、ドメイン、言語についてコメントを表示するようにしました。(Josh Kupershmidt)
       </p><p>これは、それぞれ<code class="command">\dC+</code>、<code class="command">\dc+</code>、<code class="command">\dD+</code>、<code class="command">\dL</code>の出力に含まれます。
       </p></li><li class="listitem"><p><acronym class="acronym">SQL</acronym>/<acronym class="acronym">MED</acronym>オブジェクトのコメントを表示するようにしました。(Josh Kupershmidt)
       </p><p>これは、外部サーバ、外部テーブル、外部データラッパのそれぞれについて、<code class="command">\des+</code>、<code class="command">\det+</code>、<code class="command">\dew+</code>の出力に含まれます。
       </p></li><li class="listitem"><p><code class="command">\dd</code>を変更し、その種のオブジェクト型専用のバックスラッシュコマンドを持たないものについてのみコメントを表示するようにしました。(Josh Kupershmidt)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.106.5.12.5"><div class="titlepage"><div><div><h5 class="title">E.102.3.10.3. タブ補完</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">psql</span>のタブ補完で、<acronym class="acronym">SQL</acronym>のキーワードについては、新しい<a class="link" href="app-psql.html#APP-PSQL-VARIABLES" title="変数"><code class="literal">COMP_KEYWORD_CASE</code></a>の設定に基づいて、大文字あるいは小文字で補完するようにしました。(Peter Eisentraut)
       </p></li><li class="listitem"><p><code class="command">EXECUTE</code>についてタブ補完ができるようにしました。(Andreas Karlsson)
       </p></li><li class="listitem"><p><code class="command">GRANT</code>/<code class="command">REVOKE</code>でのロールの参照についてタブ補完ができるようにしました。(Peter Eisentraut)
       </p></li><li class="listitem"><p>ファイル名のタブ補完で、必要なら引用符を補完できるようにしました。(Noah Misch)
       </p></li><li class="listitem"><p><code class="command">TABLE</code>についてのタブ補完で、ビューも含むように変更しました。(Magnus Hagander)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.106.5.12.6"><div class="titlepage"><div><div><h5 class="title">E.102.3.10.4. <a class="link" href="app-pgdump.html" title="pg_dump"><span class="application">pg_dump</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">pg_dump</span>に<code class="option">--exclude-table-data</code>オプションを追加しました。(Andrew Dunstan)
       </p><p>これにより、テーブルの定義はダンプするがそのデータは出力しない、ということをテーブル毎に指定できます。
       </p></li><li class="listitem"><p><span class="application">pg_dump</span>と<span class="application">pg_restore</span>に<code class="option">--section</code>オプションを追加しました。(Andrew Dunstan)
       </p><p>有効な値は<code class="literal">pre-data</code>、<code class="literal">data</code>、<code class="literal">post-data</code>です。
このオプションは複数回指定することで、2つ以上のセクションを選択することができます。
       </p></li><li class="listitem"><p><a class="link" href="app-pg-dumpall.html" title="pg_dumpall"><span class="application">pg_dumpall</span></a>で、まずすべてのロールについてダンプし、それからロールのすべての構成設定についてダンプするようにしました。(Phil Sorber)
       </p><p>これにより、ロールの構成設定が他のロールを参照する場合でもエラーを発生しなくなります。
       </p></li><li class="listitem"><p>新しいクラスタに<code class="literal">postgres</code>データベースが存在しない場合でも、<span class="application">pg_dumpall</span>がエラーを起こさないようにしました。(Robert Haas)
       </p></li><li class="listitem"><p>外部サーバのユーザマッピングをユーザ名の順にダンプするようにしました。(Peter Eisentraut)
       </p><p>これにより、予測可能なダンプファイルが生成されます。
       </p></li><li class="listitem"><p>演算子を予測可能な順序でダンプするようにしました。(Peter Eisentraut)
       </p></li><li class="listitem"><p>拡張設定テーブルが<span class="application">pg_dump</span>でダンプされる時の規則を厳格にしました。 (Tom Lane)
       </p></li><li class="listitem"><p><span class="application">pg_dump</span>が、より役に立つ依存性の情報を吐き出すようにしました。(Tom Lane)
       </p><p>アーカイブ形式のダンプに含まれる依存性のリンクは、ダンプ内のどこにも現れないオブジェクトを参照することが多く、以前は非常に限られた使い方しかできませんでした。
これからはダンプされるオブジェクトの間の実際の依存性(間接的なこともある)を出力します。
       </p></li><li class="listitem"><p><span class="application">pg_dump</span>が多くのデータベースオブジェクトをダンプするときの性能を向上しました。(Tom Lane)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.106.5.13"><div class="titlepage"><div><div><h4 class="title">E.102.3.11. <a class="link" href="libpq.html" title="Chapter 33. libpq - C ライブラリ"><span class="application">libpq</span></a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">libpq</span>の接続文字列について<a class="link" href="libpq-connect.html#LIBPQ-CONNSTRING" title="33.1.1. 接続文字列"><acronym class="acronym">URI</acronym></a>の形式にすることを可能にしました。(Alexander Shulgin)
       </p><p>その構文は<code class="literal">postgres://</code>で始まります。
これにより、データベース接続を表現するURIについて、アプリケーションが独自のパーサを実装しなくても済むようになります。
       </p></li><li class="listitem"><p><acronym class="acronym">SSL</acronym>圧縮を使用不可にする<a class="link" href="libpq-connect.html#LIBPQ-CONNECT-SSLCOMPRESSION">接続オプション</a>を追加しました。(Laurenz Albe)
       </p><p>高速なネットワークで<acronym class="acronym">SSL</acronym>圧縮によるオーバーヘッドをなくすために使うことができます。
       </p></li><li class="listitem"><p>大きな結果集合をより良く処理できるように、<a class="link" href="libpq-single-row-mode.html" title="33.5. １行１行問い合わせ結果を受け取る">1行処理モード</a>を追加しました。(Kyotaro Horiguchi、Marko Kreen)
       </p><p>以前は、<span class="application">libpq</span>は必ず問い合わせ結果の全体をメモリに取り込んでから、アプリケーションに返していました。
       </p></li><li class="listitem"><p>関数<code class="function">PQconnectdbParams</code>、<code class="function">PQconnectStartParams</code>、<code class="function">PQpingParams</code>の宣言に<code class="literal">const</code>修飾子を追加しました。(Lionel Elie Mamane)
       </p></li><li class="listitem"><p><code class="filename">.pgpass</code>ファイルで、パスワードフィールドにエスケープ文字を含められるようにしました。(Robert Haas)
       </p></li><li class="listitem"><p>プロセスを終了させる必要があるとき、ライブラリ関数が<code class="function">exit()</code>ではなく、<code class="function">abort()</code>を使うようにしました。(Peter Eisentraut)
       </p><p>この選択は、プログラムが使う通常の終了コードと競合せず、また呼び出し側が捕捉できるシグナルを生成します。
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.106.5.14"><div class="titlepage"><div><div><h4 class="title">E.102.3.12. ソースコード</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>使われていないポートを削除しました。(Peter Eisentraut)
       </p><p>以下のプラットフォームはサポートされなくなりました。
dgux、nextstep、sunos4、svr4、ultrix4、univel、bsdi。
       </p></li><li class="listitem"><p><a class="link" href="install-windows.html" title="Chapter 17. Windowsにおけるソースコードからのインストール">MS Visual Studio 2010</a>でのビルドをサポートしました。(Brar Piening)
       </p></li><li class="listitem"><p>MinGW-w64の32ビットコンパイラでのコンパイルを可能にしました。(Lars Kanis)
       </p></li><li class="listitem"><p>インストール時に<code class="filename">plpgsql.h</code>を<code class="filename">include/server</code>にインストールするようにしました。(Heikki Linnakangas)
       </p></li><li class="listitem"><p>ラッチ機構にpostmasterの終了の検知を含めるよう改善しました。(Peter Geoghegan、Heikki Linnakangas、Tom Lane)
       </p><p>これにより、バックグラウンドプロセスが以前はイベントのポーリングのために再開しなければならなかった主要な理由の1つが取り除かれます。
       </p></li><li class="listitem"><p>Cの柔軟な配列のメンバーを(サポートされていれば)使うようにしました。(Peter Eisentraut)
       </p></li><li class="listitem"><p>同時トランザクションのリグレッションテスト(<span class="application">isolationtester</span>)を改善しました。(Noah Misch)
       </p></li><li class="listitem"><p><span class="application">thread_test</span>を修正し、テストファイルを<code class="filename">/tmp</code>でなく、カレントディレクトリに作成するようにしました。(Bruce Momjian)
       </p></li><li class="listitem"><p>flexとbisonの警告およびエラー報告を改善しました。(Tom Lane)
       </p></li><li class="listitem"><p>メモリバリアのサポートを追加しました。(Robert Haas)
       </p><p>これは、現在は使用されていません。
       </p></li><li class="listitem"><p>pgindentを修正し、typedefファイルを使うようにしました。(Bruce Momjian)
       </p></li><li class="listitem"><p>サーバのログに送信されることになっているメッセージを処理するフックを追加しました。(Martin Pihlak)
       </p></li><li class="listitem"><p><code class="command">DROP</code>コマンドに、オブジェクトアクセスのフックを追加しました。(KaiGai Kohei)
       </p></li><li class="listitem"><p>いくつかのオブジェクト型について<code class="command">DROP</code>の処理を一つにまとめました。(KaiGai Kohei)
       </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>テストスイートを追加しました。(Peter Eisentraut)
       </p></li><li class="listitem"><p>正規表現のコードを<acronym class="acronym">TCL</acronym> 8.5.11と同期し、内部処理を改善しました。(Tom Lane)
       </p></li><li class="listitem"><p><acronym class="acronym">CRC</acronym>テーブルをlibpgportに移し、それを別のインクルードファイルで提供するようにしました。(Daniel Farina)
       </p></li><li class="listitem"><p>メジャーバージョンのリリースノートの作成で使えるように、<span class="application">git_changelog</span>のオプションを追加しました。(Bruce Momjian)
       </p></li><li class="listitem"><p>Linuxの<code class="filename">/proc/self/oom_score_adj</code> APIをサポートしました。(Tom Lane)
       </p></li></ul></div></div><div class="sect3" id="id-1.11.6.106.5.15"><div class="titlepage"><div><div><h4 class="title">E.102.3.13. 追加モジュール</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>libpqの新しい1行処理モードを使うことで、<a class="link" href="dblink.html" title="F.11. dblink">dblink</a>の性能を向上しました。(Kyotaro Horiguchi、Marko Kreen)
       </p><p>この改善は、<code class="function">dblink_send_query()</code>/<code class="function">dblink_get_result()</code>には適用されません。
       </p></li><li class="listitem"><p><a class="link" href="file-fdw.html" title="F.15. file_fdw">file_fdw</a>で<code class="literal">force_not_null</code>オプションをサポートしました。(Shigeru Hanada)
       </p></li><li class="listitem"><p><a class="link" href="pgarchivecleanup.html" title="pg_archivecleanup"><span class="application">pg_archivecleanup</span></a>の試運転モードを実装しました。(Gabriele Bartolini)
       </p><p>これは、削除されることになるファイルの名前を出力するだけです。
       </p></li><li class="listitem"><p><a class="link" href="pgbench.html" title="pgbench">pgbench</a>に新しいスイッチ<code class="option">--unlogged-tables</code>、<code class="option">--tablespace</code>、<code class="option">--index-tablespace</code>を追加しました。(Robert Haas)
       </p></li><li class="listitem"><p><a class="link" href="pgtestfsync.html" title="pg_test_fsync"><span class="application">pg_test_fsync</span></a>が、一定回数のサイクル内ではなく、一定の時間内についてテストするように変更しました。(Bruce Momjian)
       </p><p><code class="option">-o</code>/サイクル数、のオプションを削除し、<code class="option">-s</code>/秒数、のオプションを追加しました。
       </p></li><li class="listitem"><p>時計の単調性と時間測定のオーバーヘッドを測定するユーティリティ、<a class="link" href="pgtesttiming.html" title="pg_test_timing"><span class="application">pg_test_timing</span></a>を追加しました。(Ants Aasma、Greg Smith)
       </p></li><li class="listitem"><p><a class="link" href="tcn.html" title="F.40. tcn">tcn</a>(Triggered Change Notification、トリガによる変更の通知)モジュールを追加しました。
これはテーブルの変更について、<code class="command">NOTIFY</code>イベントを生成します。(Kevin Grittner)
       </p></li></ul></div><div class="sect4" id="id-1.11.6.106.5.15.3"><div class="titlepage"><div><div><h5 class="title">E.102.3.13.1. <a class="link" href="pgupgrade.html" title="pg_upgrade"><span class="application">pg_upgrade</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">pg_upgrade</span>の環境変数を変更しました。(Bruce Momjian)
       </p><p>data、bin、portの環境変数名を<code class="literal">PG</code>で始まるものに変更しました。
<code class="envar">PGPORT</code>の代わりに<code class="envar">PGPORTOLD</code>/<code class="envar">PGPORTNEW</code>を使うようにしました。
       </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>のログ出力とエラー報告について大幅に見直しました。(Bruce Momjian)
       </p><p>追記書き込みのみのファイルを4つ作り、成功したときはそれらを削除するようにしました。
これらのファイルを無条件に残す、<code class="option">-r</code>/<code class="option">--retain</code>オプションを追加しました。
<span class="application">pg_upgrade</span>の<code class="option">-g</code>/<code class="option">-G</code>/<code class="option">-l</code>オプションは不要なので削除しました。
また、ログファイルのパーミッションを厳しくしました。
       </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>で、より正確なオプティマイザ用統計情報を少しずつ生成するスクリプトを作成するようにしました。(Bruce Momjian)
       </p><p>これにより、アップグレード後に最小限のクラスタの統計情報を生成するのに要する時間を削減できます。
       </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>で、<code class="literal">postgres</code>データベースのない古いクラスタをアップグレードできるようにしました。(Bruce Momjian)
       </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>で、一部の古い、あるいは新しいデータベースが見つからなくても、それらが空であれば処理できるようにしました。(Bruce Momjian)
       </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>で、設定ファイルだけがディレクトリにインストールされている場合を処理できるようにしました。(Bruce Momjian)
       </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>でサーバーにパラメータを渡す<code class="option">-o</code>/<code class="option">-O</code>オプションを追加しました。(Bruce Momjian)
       </p><p>これは、設定ファイルだけがディレクトリにインストールされている場合に便利です。
       </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>がデフォルトでポート50432を使うように変更しました。(Bruce Momjian)
       </p><p>これにより、アップグレード中にクライアントが意図せず接続してしまうのを防ぐことができます。
       </p></li><li class="listitem"><p><span class="application">pg_upgrade</span>におけるクラスタのロックを削減しました。(Bruce Momjian)
       </p><p>具体的には、リンクモードが利用されている場合に古いクラスタをロックするだけで、それをスキーマがリストアされた直後に実行します。
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.106.5.15.4"><div class="titlepage"><div><div><h5 class="title">E.102.3.13.2. <a class="link" href="pgstatstatements.html" title="F.30. pg_stat_statements"><span class="application">pg_stat_statements</span></a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">pg_stat_statements</span>で、SQLテキストの正規化により、類似した問い合わせを1つにまとめられるようにしました。(Peter Geoghegan、Tom Lane)
       </p><p>パラメータ化されていないSQLを使うアプリケーションのユーザは、ログファイルの詳細な分析をしなくても、問い合わせのパフォーマンスを監視できるようになります。
       </p></li><li class="listitem"><p>ダーティーにされたブロック数、書き込まれたブロック数、読み書きの回数を<span class="application">pg_stat_statements</span>に追加しました。(Robert Haas、Ants Aasma)
       </p></li><li class="listitem"><p><span class="application">pg_stat_statements</span>が<code class="command">PREPARE</code>および<code class="command">EXECUTE</code>コマンドを二重に数えないようにしました。(Tom Lane)
       </p></li></ul></div></div><div class="sect4" id="id-1.11.6.106.5.15.5"><div class="titlepage"><div><div><h5 class="title">E.102.3.13.3. <a class="link" href="sepgsql.html" title="F.36. sepgsql">sepgsql</a></h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>グローバルオブジェクトについて<code class="literal">SECURITY LABEL</code>をサポートしました。(KaiGai Kohei、Robert Haas)
       </p><p>具体的には、データベース、テーブル空間、ロールについてセキュリティラベルを追加しました。
       </p></li><li class="listitem"><p>sepgsqlがデータベースのラベルを尊重するようにしました。(KaiGai Kohei)
       </p></li><li class="listitem"><p>様々なオブジェクトの作成にあたり、sepgsqlのパーミッションの検査を行うようにしました。(KaiGai Kohei)
       </p></li><li class="listitem"><p><code class="function">sepgsql_setcon()</code>およびそれに関連した関数を追加しました。
これらはsepgsqlのセキュリティドメインを制御します。(KaiGai Kohei)
       </p></li><li class="listitem"><p>パフォーマンスを向上するため、sepgsqlにユーザ空間のアクセスのキャッシュを追加しました。(KaiGai Kohei)
       </p></li></ul></div></div></div><div class="sect3" id="id-1.11.6.106.5.16"><div class="titlepage"><div><div><h4 class="title">E.102.3.14. 文書</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>オプションで、Webサイトのスタイルシートを使ってHTML文書をビルドするルールを追加しました。(Magnus Hagander)
       </p><p><code class="command">gmake STYLE=website draft</code>を使ってください。
       </p></li><li class="listitem"><p><code class="command">EXPLAIN</code>の文書を改善しました。(Tom Lane)
       </p></li><li class="listitem"><p><span class="application">vacuumdb</span>のようなコマンドラインツールを使うときに、ユーザ名やデータベース名が二重引用符付きとして維持されることを文書に記述しました。(Bruce Momjian)
       </p></li><li class="listitem"><p>MD5認証でクライアントによって返される実際の文字列について文書に記述しました。(Cyan Ogilvie)
       </p></li><li class="listitem"><p><code class="command">CREATE TEMP TABLE</code>で<code class="literal">GLOBAL</code>と<code class="literal">LOCAL</code>の利用を勧められないものとしました。(Noah Misch)
       </p><p><span class="productname">PostgreSQL</span>では長い間、これらのキーワードを意味のないものとして扱って来ましたし、今後もそのようにし続けます。
しかし将来、それらは標準SQLが意図しているものになるかも知れませんので、アプリケーションはそれらを使わないようにすべきです。
       </p></li></ul></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="release-9-2-1.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="release.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="release-9-1-24.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">E.101. リリース9.2.1 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> E.103. リリース9.1.24</td></tr></table></div></body></html>