<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>56.1. 外部データラッパ関数</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="fdwhandler.html" title="Chapter 56. 外部データラッパの作成" /><link rel="next" href="fdw-callbacks.html" title="56.2. 外部データラッパのコールバックルーチン" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">56.1. 外部データラッパ関数</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="fdwhandler.html" title="Chapter 56. 外部データラッパの作成">Prev</a> </td><td width="10%" align="left"><a accesskey="u" href="fdwhandler.html" title="Chapter 56. 外部データラッパの作成">Up</a></td><th width="60%" align="center">Chapter 56. 外部データラッパの作成</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 10.5文書">Home</a></td><td width="10%" align="right"> <a accesskey="n" href="fdw-callbacks.html" title="56.2. 外部データラッパのコールバックルーチン">Next</a></td></tr></table><hr></hr></div><div class="sect1" id="FDW-FUNCTIONS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">56.1. 外部データラッパ関数</h2></div></div></div><p>FDWの作者は、ハンドラ関数と、オプションで検証関数を実装する必要があります。
両関数とも、version-1インタフェースを使用して、Cなどのコンパイル言語で作成しなければなりません。
C言語の呼び出し規約と動的ロードについては<a class="xref" href="xfunc-c.html" title="37.9. C言語関数">Section 37.9</a>を参照してください。
    </p><p>ハンドラ関数は単に、プランナやエグゼキュータ、様々なメンテナンスコマンドから呼び出されるコールバックの関数ポインタを含む構造体を返します。
FDWを作成するための労力のほとんどは、これらのコールバック関数を実装することに費やされます。
ハンドラ関数は、引数を取らず特殊な仮想型である<code class="type">fdw_handler</code>を返す関数として<span class="productname">PostgreSQL</span>に登録しなければなりません。
コールバック関数は通常のC言語関数で、SQLレベルでは参照も呼び出しもできません。コールバック関数の説明は<a class="xref" href="fdw-callbacks.html" title="56.2. 外部データラッパのコールバックルーチン">Section 56.2</a>にあります。
    </p><p>検証関数は、そのラッパを使用する外部サーバ、ユーザマッピング、外部テーブルだけでなく、外部データラッパ自身の<code class="command">CREATE</code>や<code class="command">ALTER</code>といったコマンドで指定されたオプションの妥当性の検証を担当します。
検証関数は、検証するオプションを含むtext配列と、オプションを関連付けるオブジェクトの種類を表すOID（そのオブジェクトが格納されるシステムカタログのOIDで次のいずれか、<code class="literal">ForeignDataWrapperRelationId</code>、<code class="literal">ForeignServerRelationId</code>、<code class="literal">UserMappingRelationId</code>、<code class="literal">ForeignTableRelationId</code>）という二つの引数を取るものとして登録しなければなりません。
検証関数が指定されなかった場合、オブジェクト作成時やオブジェクト変更時にオプションはチェックされません。
    </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="fdwhandler.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="fdwhandler.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="fdw-callbacks.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 56. 外部データラッパの作成 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 56.2. 外部データラッパのコールバックルーチン</td></tr></table></div></body></html>