<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>29.1. パブリケーション</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="logical-replication.html" title="第29章 論理レプリケーション" /><link rel="next" href="logical-replication-subscription.html" title="29.2. サブスクリプション" /><meta name="viewport" content="width=device-width,initial-scale=1.0" /></head><body id="docContent" class="container-fluid col-10"><div class="other_version"><a href="https://www.postgresql.jp/document/">バージョンごとのドキュメント一覧</a></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="4" align="center"><a accesskey="h" href="index.html">PostgreSQL 18.0文書</a></th></tr><tr><td width="10%" align="left"></td><td width="10%" align="left"></td><td width="60%" align="center"><a href="logical-replication.html" title="第29章 論理レプリケーション">第29章 論理レプリケーション</a></td><td width="20%" align="right"><div class="actions"><a class="issue" title="github" href="https://github.com/pgsql-jp/jpug-doc/issues/new?template=bug_report.yml&amp;what-happened=version 18.0 : logical-replication-publication.html">誤訳等の報告
                    </a></div></td></tr><tr><td width="10%" align="left"><a accesskey="p" href="logical-replication.html" title="第29章 論理レプリケーション">前へ</a> </td><td width="10%" align="left"><a accesskey="u" href="logical-replication.html" title="第29章 論理レプリケーション">上へ</a></td><td width="60%" align="center">29.1. パブリケーション</td><td width="20%" align="right"> <a accesskey="n" href="logical-replication-subscription.html" title="29.2. サブスクリプション">次へ</a></td></tr></table><hr /></div><div class="sect1" id="LOGICAL-REPLICATION-PUBLICATION"><div class="titlepage"><div><div><h2 class="title" style="clear: both">29.1. パブリケーション <a href="#LOGICAL-REPLICATION-PUBLICATION" class="id_link">#</a></h2></div></div></div><span class="original">
  &lt;title&gt;Publication&lt;/title&gt;
</span><p>
<span class="original">
   A &lt;firstterm&gt;publication&lt;/firstterm&gt; can be defined on any physical
   replication primary.  The node where a publication is defined is referred to
   as &lt;firstterm&gt;publisher&lt;/firstterm&gt;.  A publication is a set of changes
   generated from a table or a group of tables, and might also be described as
   a change set or replication set.  Each publication exists in only one database.
</span>
<em class="firstterm">パブリケーション</em>は、どのような物理レプリケーションのプライマリにも定義できます。
パブリケーションが定義されたノードは、<em class="firstterm">パブリッシャー</em>と呼ばれます。
パブリケーションは、テーブルか、テーブルのグループから生成された更新の集合であると同時に、更新セットあるいはレプリケーションセットであるとも言えます。
一つのパブリケーションは一つのデータベースにのみ存在します。
  </p><p>
<span class="original">
   Publications are different from schemas and do not affect how the table is
   accessed.  Each table can be added to multiple publications if needed.
   Publications may currently only contain tables and all tables in schema.
   Objects must be added explicitly, except when a publication is created for
   &lt;literal&gt;ALL TABLES&lt;/literal&gt;.
</span>
パブリケーションはスキーマとは異なり、テーブルがどのようにアクセスされるかには影響しません。
必要ならば、テーブルを複数のパブリケーションに追加できます。
今のところパブリケーションはテーブルとスキーマのすべてのテーブルのみを含むことができます。
パブリケーションが<code class="literal">ALL TABLES</code>で作られた場合を除き、オブジェクトは明示的に追加されなければなりません。
  </p><p>
<span class="original">
   Publications can choose to limit the changes they produce to
   any combination of &lt;command&gt;INSERT&lt;/command&gt;, &lt;command&gt;UPDATE&lt;/command&gt;,
   &lt;command&gt;DELETE&lt;/command&gt;, and &lt;command&gt;TRUNCATE&lt;/command&gt;, similar to how triggers are fired by
   particular event types. By default, all operation types are replicated.
   These publication specifications apply only for DML operations; they do not affect the initial
   data synchronization copy. (Row filters have no effect for
   &lt;command&gt;TRUNCATE&lt;/command&gt;. See &lt;xref linkend="logical-replication-row-filter"/&gt;).
</span>
パブリケーションは、生成される更新を、<code class="command">INSERT</code>、<code class="command">UPDATE</code>、<code class="command">DELETE</code>、<code class="command">TRUNCATE</code>のうちのどのような組み合わせにも制限することができます。
これはトリガが特定のイベント型によって起動されることに似ています。
デフォルトでは、すべての操作タイプがレプリケーションされます。
これらのパブリケーション指定はDML操作にのみ適用され、初期データ同期コピーには影響しません（行フィルタは<code class="command">TRUNCATE</code>には影響しません。<a class="xref" href="logical-replication-row-filter.html" title="29.4. 行フィルタ">29.4</a>を参照してください）
  </p><p>
<span class="original">
   Every publication can have multiple subscribers.
</span>
すべてのパブリケーションは、複数のサブスクライバーを持つことができます。
  </p><p>
<span class="original">
   A publication is created using the &lt;link linkend="sql-createpublication"&gt;&lt;command&gt;CREATE PUBLICATION&lt;/command&gt;&lt;/link&gt;
   command and may later be altered or dropped using corresponding commands.
</span>
パブリケーションは、<a class="link" href="sql-createpublication.html" title="CREATE PUBLICATION"><code class="command">CREATE PUBLICATION</code></a>コマンドで作成し、対応するコマンドで変更や削除ができます。
  </p><p>
<span class="original">
   The individual tables can be added and removed dynamically using
   &lt;link linkend="sql-alterpublication"&gt;&lt;command&gt;ALTER PUBLICATION&lt;/command&gt;&lt;/link&gt;.  Both the &lt;literal&gt;ADD
   TABLE&lt;/literal&gt; and &lt;literal&gt;DROP TABLE&lt;/literal&gt; operations are
   transactional, so the table will start or stop replicating at the correct
   snapshot once the transaction has committed.
</span>
《マッチ度[95.170455]》個々のテーブルは<a class="link" href="sql-alterpublication.html" title="ALTER PUBLICATION"><code class="command">ALTER PUBLICATION</code></a>で動的に追加削除できます。
<code class="literal">ADD TABLE</code>および<code class="literal">DROP TABLE</code>操作はトランザクションの対象です。
ひとたびトランザクションがコミットされれば、正しいスナップショットでテーブルのレプリケーションが開始あるいは終了されます。
  </p><div class="sect2" id="LOGICAL-REPLICATION-PUBLICATION-REPLICA-IDENTITY"><div class="titlepage"><div><div><h3 class="title">29.1.1. レプリカアイデンティティ <a href="#LOGICAL-REPLICATION-PUBLICATION-REPLICA-IDENTITY" class="id_link">#</a></h3></div></div></div><span class="original">
   &lt;title&gt;Replica Identity&lt;/title&gt;
</span><p>
<span class="original">
    A published table must have a &lt;firstterm&gt;replica identity&lt;/firstterm&gt;
    configured in order to be able to replicate &lt;command&gt;UPDATE&lt;/command&gt;
    and &lt;command&gt;DELETE&lt;/command&gt; operations, so that appropriate rows to
    update or delete can be identified on the subscriber side.
</span>
《機械翻訳》公開されたテーブルは、<code class="command">UPDATE</code>および<code class="command">DELETE</code>操作をレプリケートできるようにするために、<em class="firstterm">レプリカアイデンティティ</em>が設定されていなければなりません。
これにより、サブスクライバー側で更新または削除する適切な行を特定できます。
   </p><p>
<span class="original">
    By default, this is the primary key, if there is one. Another unique index
    (with certain additional requirements) can also be set to be the replica
    identity.  If the table does not have any suitable key, then it can be set
    to replica identity &lt;literal&gt;FULL&lt;/literal&gt;, which means the entire row
    becomes the key.  When replica identity &lt;literal&gt;FULL&lt;/literal&gt; is
    specified, indexes can be used on the subscriber side for searching the
    rows.  Candidate indexes must be btree or hash, non-partial, and the
    leftmost index field must be a column (not an expression) that references
    the published table column.  These restrictions on the non-unique index
    properties adhere to some of the restrictions that are enforced for
    primary keys.  If there are no such suitable indexes, the search on the
    subscriber side can be very inefficient, therefore replica identity
    &lt;literal&gt;FULL&lt;/literal&gt; should only be used as a fallback if no other
    solution is possible.
</span>
《機械翻訳》デフォルトでは、これは主キーがあればそれです。
別の一意インデックス（特定の追加要件があります）をレプリカアイデンティティに設定することもできます。
テーブルに適切なキーがない場合は、レプリカアイデンティティに設定できます<code class="literal">FULL</code>行全体がキーになることを意味します。
レプリカアイデンティティ<code class="literal">FULL</code>が指定されている場合、検索行のサブスクライバー側で索引を使用できます。
候補索引は、非部分のbtreeまたはハッシュである必要があり、左端のインデックスフィールドは、公開されたテーブル列を参照するカラム（式ではない）である必要があります。
一意インデックス以外のプロパティに対するこれらの制限は、プライマリキーに適用されるいくつかの制限に準拠しています。
このような適切な索引がない場合、サブスクライバー側の検索は非常に非効率的になる可能性があるため、レプリカアイデンティティ<code class="literal">FULL</code>他の解決策が不可能な場合にのみフォールバックとして使用する必要があります。
   </p><p>
<span class="original">
    If a replica identity other than &lt;literal&gt;FULL&lt;/literal&gt; is set on the
    publisher side, a replica identity comprising the same or fewer columns
    must also be set on the subscriber side.
</span>
《機械翻訳》パブリッシャー側に<code class="literal">FULL</code>以外のレプリカアイデンティティが設定されている場合は、サブスクライバー側にも同数以下の柱で構成されるレプリカアイデンティティを設定する必要があります。
   </p><p>
<span class="original">
    Tables with a replica identity defined as &lt;literal&gt;NOTHING&lt;/literal&gt;,
    &lt;literal&gt;DEFAULT&lt;/literal&gt; without a primary key, or &lt;literal&gt;USING
    INDEX&lt;/literal&gt; with a dropped index, cannot support
    &lt;command&gt;UPDATE&lt;/command&gt; or &lt;command&gt;DELETE&lt;/command&gt; operations when
    included in a publication replicating these actions. Attempting such
    operations will result in an error on the publisher.
</span>
《機械翻訳》レプリカアイデンティティが<code class="literal">NOTHING</code>、<code class="literal">DEFAULT</code>主キーなし、または<code class="literal">USING INDEX</code>インデックス削除として定義された表では、これらのサポートをレプリケートするパブリケーションに含まれている場合、アクション<code class="command">UPDATE</code>または<code class="command">DELETE</code>操作はできません。
このような操作を試行すると、パブリッシャーにエラーが作成されます。
   </p><p>
<span class="original">
    &lt;command&gt;INSERT&lt;/command&gt; operations can proceed regardless of any replica identity.
</span>
《機械翻訳》<code class="command">INSERT</code>レプリカアイデンティティに関係なく操作できます。
   </p><p>
<span class="original">
    See &lt;link linkend="sql-altertable-replica-identity"&gt;&lt;literal&gt;ALTER TABLE...REPLICA IDENTITY&lt;/literal&gt;&lt;/link&gt;
    for details on how to set the replica identity.
</span>
《機械翻訳》レプリカアイデンティティの設定方法については、<a class="link" href="sql-altertable.html#SQL-ALTERTABLE-REPLICA-IDENTITY"><code class="literal">ALTER TABLE...REPLICA IDENTITY</code></a>を参照してください。
   </p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="logical-replication.html" title="第29章 論理レプリケーション">前へ</a> </td><td width="20%" align="center"><a accesskey="u" href="logical-replication.html" title="第29章 論理レプリケーション">上へ</a></td><td width="40%" align="right"> <a accesskey="n" href="logical-replication-subscription.html" title="29.2. サブスクリプション">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">第29章 論理レプリケーション </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 18.0文書">ホーム</a></td><td width="40%" align="right" valign="top"> 29.2. サブスクリプション</td></tr></table></div></body></html>